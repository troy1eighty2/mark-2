var SIH;(()=>{"use strict";var r={6794:(r,e,t)=>{t.d(e,{chromeStorage:()=>m});var n,o;t(3080);function a(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,a,i,s=[],l=!0,c=!1;try{if(a=(t=t.call(r)).next,0===e){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=a.call(t)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(r){c=!0,o=r}finally{try{if(!l&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw o}}return s}}(r,e)||function(r,e){if(r){if("string"==typeof r)return i(r,e);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(r,e):void 0}}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function s(r){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},s(r)}function l(r,e,t){return(e=y(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function c(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function u(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,y(n.key),n)}}function d(r,e,t){return e&&u(r.prototype,e),t&&u(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function y(r){var e=function(r,e){if("object"!=s(r)||!r)return r;var t=r[Symbol.toPrimitive];if(void 0!==t){var n=t.call(r,e||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}(r,"string");return"symbol"==s(e)?e:e+""}new Map([["fn","Factory New"],["mw","Minimal Wear"],["ft","Field-Tested"],["ww","Well-Worn"],["bs","Battle-Scarred"]]);var m={getSync:function(r){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SYNC_STORAGE",data:{key:r}},(function(t){var n=t[r]||{};e(n)}))}))},setSync:function(r,e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_SYNC_STORAGE",data:{key:r,value:e}},(function(r){t(r)}))}))},getLocal:function(r){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_LOCAL_STORAGE",data:{key:r}},(function(t){var n=t[r]||{};e(n)}))}))},setLocal:function(r,e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_LOCAL_STORAGE",data:{key:r,value:e}},(function(r){t(r)}))}))}};var b=d((function r(){c(this,r)}));n=b,l(b,"SELL_LISTING",{}),l(b,"setItem",(function(r){if(r){var e={sessionid:g_sessionID,steamid:g_steamID},t="".concat(r.appid,"/").concat(r.contextid),o="".concat(r.market_hash_name,"/").concat(r.price);if(Object.keys(n.SELL_LISTING).length){var a=n.SELL_LISTING.data.findIndex((function(r){return Object.keys(r)[0]===t}));if(a>=0)if(n.SELL_LISTING.data[a][t].length){var i=n.SELL_LISTING.data[a][t].findIndex((function(r){return Object.keys(r)[0]===o}));if(i<0)n.SELL_LISTING.data[a][t].push(l({},o,[r]));else n.SELL_LISTING.data[a][t][i][o].findIndex((function(e){return e.assetid===r.assetid}))<0&&n.SELL_LISTING.data[a][t][i][o].push(r)}else n.SELL_LISTING.data[a][t].push(l({},o,[r]));else n.SELL_LISTING.data.push(l({},t,[l({},o,[r])]))}else n.SELL_LISTING={data:[l({},t,[l({},o,[r])])],userInfo:e}}})),l(b,"removeItem",(function(r){r&&n.SELL_LISTING&&n.SELL_LISTING.data&&n.SELL_LISTING.data.length&&n.SELL_LISTING.data.forEach((function(e,t){for(var o=function(){var e=a(s[i],2),o=e[0];e[1].forEach((function(e,i){for(var s=0,l=Object.entries(e);s<l.length;s++){var c=a(l[s],2),u=c[0],d=c[1].findIndex((function(e){return e.assetid===r}));d>=0&&(n.SELL_LISTING.data[t][o][i][u].splice(d,1),n.SELL_LISTING.data[t][o][i][u].length||(n.SELL_LISTING.data[t][o].splice(i,1),n.SELL_LISTING.data[t][o].length||n.SELL_LISTING.data.splice(t,1)))}}))},i=0,s=Object.entries(e);i<s.length;i++)o()}))})),l(b,"resellItems",(function(){return new Promise((function(r){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_RESELL_ITEMS",data:n.SELL_LISTING},(function(e){r()}))}))}));var f=d((function r(){c(this,r)}));o=f,l(f,"BUY_ORDERS",[]),l(f,"setItem",(function(r){r&&(o.BUY_ORDERS.length?-1===o.BUY_ORDERS.findIndex((function(e){return e.payload.buy_orderid===r.payload.buy_orderid}))&&o.BUY_ORDERS.push(r):o.BUY_ORDERS.push(r))})),l(f,"removeItem",(function(r){if(r&&o.BUY_ORDERS.length){var e=o.BUY_ORDERS.findIndex((function(e){return e.payload.buy_orderid===r}));-1!==e&&o.BUY_ORDERS.splice(e,1)}})),l(f,"createBuyOrders",(function(){return new Promise((function(r){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_RESUBMIT_BUY_ORDER",data:o.BUY_ORDERS},(function(e){r()}))}))}))},3080:()=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},r(e)}function e(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,n(o.key),o)}}function t(r,e,t){return(e=n(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function n(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}new(function(){return r=function r(){var e=this;!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),t(this,"getPriceFromCurrency",(function(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,i=e.getCurrency(+t),s=e.getCurrency(+n),l=o?ExchangeSteamRates[i.strCode]:ExchangeRates._rates[i.strCode],c=o?ExchangeSteamRates[s.strCode]:ExchangeRates._rates[s.strCode];return"USD"===s.strCode&&r?"USD"!=i.strCode&&(r*=l)<.03&&2===a&&(r=.03):s.strCode!=i.strCode&&r&&(r=r/c*l)<.03&&2===a&&(r=.03),2!==a&&r>.03&&(a=2),{price:r||0,code:i.strCode,symbol:i.strSymbol,text:"".concat(i.bSymbolIsPrefix?"".concat(i.strSymbol).concat(i.strSymbolAndNumberSeparator):"").concat(r?r.toFixed(a):0).concat(i.bSymbolIsPrefix?"":"".concat(i.strSymbolAndNumberSeparator).concat(i.strSymbol)),template:"".concat(i.bSymbolIsPrefix?"".concat(i.strSymbol).concat(i.strSymbolAndNumberSeparator):"","$price").concat(i.bSymbolIsPrefix?"":"".concat(i.strSymbolAndNumberSeparator).concat(i.strSymbol)),symbolPosition:i.bSymbolIsPrefix?"before":"after"}})),t(this,"getCurrency",(function(r){var t=null;for(var n in r=r||"undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_currency||1,e.g_rgCurrencyData)if(e.g_rgCurrencyData[n].eCurrencyCode===+r){t=e.g_rgCurrencyData[n];break}return t})),t(this,"getCurrencyCodeSteam",(function(){return"undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_currency||1})),t(this,"g_rgCurrencyData",{USD:{strCode:"USD",eCurrencyCode:1,strSymbol:"$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},GBP:{strCode:"GBP",eCurrencyCode:2,strSymbol:"£",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},EUR:{strCode:"EUR",eCurrencyCode:3,strSymbol:"€",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},CHF:{strCode:"CHF",eCurrencyCode:4,strSymbol:"CHF",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},RUB:{strCode:"RUB",eCurrencyCode:5,strSymbol:"₽",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:"",strSymbolAndNumberSeparator:" "},BRL:{strCode:"BRL",eCurrencyCode:7,strSymbol:"R$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},JPY:{strCode:"JPY",eCurrencyCode:8,strSymbol:"¥",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},NOK:{strCode:"NOK",eCurrencyCode:9,strSymbol:"kr",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},IDR:{strCode:"IDR",eCurrencyCode:10,strSymbol:"Rp",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},MYR:{strCode:"MYR",eCurrencyCode:11,strSymbol:"RM",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},PHP:{strCode:"PHP",eCurrencyCode:12,strSymbol:"P",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},SGD:{strCode:"SGD",eCurrencyCode:13,strSymbol:"S$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},THB:{strCode:"THB",eCurrencyCode:14,strSymbol:"฿",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},VND:{strCode:"VND",eCurrencyCode:15,strSymbol:"₫",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""},KRW:{strCode:"KRW",eCurrencyCode:16,strSymbol:"₩",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},TRY:{strCode:"TRY",eCurrencyCode:17,strSymbol:"TL",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},UAH:{strCode:"UAH",eCurrencyCode:18,strSymbol:"₴",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},MXN:{strCode:"MXN",eCurrencyCode:19,strSymbol:"Mex$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CAD:{strCode:"CAD",eCurrencyCode:20,strSymbol:"CDN$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},AUD:{strCode:"AUD",eCurrencyCode:21,strSymbol:"A$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},NZD:{strCode:"NZD",eCurrencyCode:22,strSymbol:"NZ$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},PLN:{strCode:"PLN",eCurrencyCode:6,strSymbol:"zł",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},CNY:{strCode:"CNY",eCurrencyCode:23,strSymbol:"¥",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},INR:{strCode:"INR",eCurrencyCode:24,strSymbol:"₹",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CLP:{strCode:"CLP",eCurrencyCode:25,strSymbol:"CLP$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},PEN:{strCode:"PEN",eCurrencyCode:26,strSymbol:"S/.",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},COP:{strCode:"COP",eCurrencyCode:27,strSymbol:"COL$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},ZAR:{strCode:"ZAR",eCurrencyCode:28,strSymbol:"R",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},HKD:{strCode:"HKD",eCurrencyCode:29,strSymbol:"HK$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},TWD:{strCode:"TWD",eCurrencyCode:30,strSymbol:"NT$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},SAR:{strCode:"SAR",eCurrencyCode:31,strSymbol:"SR",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},AED:{strCode:"AED",eCurrencyCode:32,strSymbol:"AED",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},ARS:{strCode:"ARS",eCurrencyCode:34,strSymbol:"ARS$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},ILS:{strCode:"ILS",eCurrencyCode:35,strSymbol:"₪",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},BYN:{strCode:"BYN",eCurrencyCode:36,strSymbol:"Br",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},KZT:{strCode:"KZT",eCurrencyCode:37,strSymbol:"₸",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},KWD:{strCode:"KWD",eCurrencyCode:38,strSymbol:"KD",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},QAR:{strCode:"QAR",eCurrencyCode:39,strSymbol:"QR",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CRC:{strCode:"CRC",eCurrencyCode:40,strSymbol:"₡",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""},UYU:{strCode:"UYU",eCurrencyCode:41,strSymbol:"$U",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""}})},(n=[{key:"getCurrencyIdByCode",value:function(r){var e;return(null===(e=g_rgCurrencyData[r])||void 0===e?void 0:e.eCurrencyCode)||null}}])&&e(r.prototype,n),o&&e(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}())}},e={};function t(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return r[n](a,a.exports,t),a.exports}t.d=(r,e)=>{for(var n in e)t.o(e,n)&&!t.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:e[n]})},t.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),t.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var n={};t.r(n);var o=t(6794);function a(r){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},a(r)}function i(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=c(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var n=0,o=function(){};return{s:o,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(r){throw r},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var r=t.next();return i=r.done,r},e:function(r){s=!0,a=r},f:function(){try{i||null==t.return||t.return()}finally{if(s)throw a}}}}function s(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */s=function(){return e};var r,e={},t=Object.prototype,n=t.hasOwnProperty,o=Object.defineProperty||function(r,e,t){r[e]=t.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(r,e,t){return Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),r[e]}try{d({},"")}catch(r){d=function(r,e,t){return r[e]=t}}function y(r,e,t,n){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),s=new A(n||[]);return o(i,"_invoke",{value:O(r,t,s)}),i}function m(r,e,t){try{return{type:"normal",arg:r.call(e,t)}}catch(r){return{type:"throw",arg:r}}}e.wrap=y;var b="suspendedStart",f="suspendedYield",S="executing",h="completed",p={};function v(){}function C(){}function g(){}var _={};d(_,l,(function(){return this}));var I=Object.getPrototypeOf,w=I&&I(I(E([])));w&&w!==t&&n.call(w,l)&&(_=w);var x=g.prototype=v.prototype=Object.create(_);function L(r){["next","throw","return"].forEach((function(e){d(r,e,(function(r){return this._invoke(e,r)}))}))}function N(r,e){function t(o,i,s,l){var c=m(r[o],r,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==a(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(r){t("next",r,s,l)}),(function(r){t("throw",r,s,l)})):e.resolve(d).then((function(r){u.value=r,s(u)}),(function(r){return t("throw",r,s,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(r,n){function o(){return new e((function(e,o){t(r,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,t,n){var o=b;return function(a,i){if(o===S)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:r,done:!0}}for(n.method=a,n.arg=i;;){var s=n.delegate;if(s){var l=D(s,n);if(l){if(l===p)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===b)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=S;var c=m(e,t,n);if("normal"===c.type){if(o=n.done?h:f,c.arg===p)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=h,n.method="throw",n.arg=c.arg)}}}function D(e,t){var n=t.method,o=e.iterator[n];if(o===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=r,D(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var a=m(o,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,p;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function T(r){var e={tryLoc:r[0]};1 in r&&(e.catchLoc=r[1]),2 in r&&(e.finallyLoc=r[2],e.afterLoc=r[3]),this.tryEntries.push(e)}function P(r){var e=r.completion||{};e.type="normal",delete e.arg,r.completion=e}function A(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(T,this),this.reset(!0)}function E(e){if(e||""===e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(n.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=r,t.done=!0,t};return i.next=i}}throw new TypeError(a(e)+" is not iterable")}return C.prototype=g,o(x,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:C,configurable:!0}),C.displayName=d(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(r){var e="function"==typeof r&&r.constructor;return!!e&&(e===C||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,g):(r.__proto__=g,d(r,u,"GeneratorFunction")),r.prototype=Object.create(x),r},e.awrap=function(r){return{__await:r}},L(N.prototype),d(N.prototype,c,(function(){return this})),e.AsyncIterator=N,e.async=function(r,t,n,o,a){void 0===a&&(a=Promise);var i=new N(y(r,t,n,o),a);return e.isGeneratorFunction(t)?i:i.next().then((function(r){return r.done?r.value:i.next()}))},L(x),d(x,u,"Generator"),d(x,l,(function(){return this})),d(x,"toString",(function(){return"[object Generator]"})),e.keys=function(r){var e=Object(r),t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=E,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var r=this.tryEntries[0].completion;if("throw"===r.type)throw r.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(n,o){return s.type="throw",s.arg=e,t.next=n,o&&(t.method="next",t.arg=r),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(r,e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===r||"continue"===r)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=r,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(r,e){if("throw"===r.type)throw r.arg;return"break"===r.type||"continue"===r.type?this.next=r.arg:"return"===r.type?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):"normal"===r.type&&e&&(this.next=e),p},finish:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===r)return this.complete(t.completion,t.afterLoc),P(t),p}},catch:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===r){var n=t.completion;if("throw"===n.type){var o=n.arg;P(t)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),p}},e}function l(r){return function(r){if(Array.isArray(r))return u(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||c(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(r,e){if(r){if("string"==typeof r)return u(r,e);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(r,e):void 0}}function u(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function d(r,e,t,n,o,a,i){try{var s=r[a](i),l=s.value}catch(r){return void t(r)}s.done?e(l):Promise.resolve(l).then(n,o)}function y(r){return function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(r){d(a,n,o,i,s,"next",r)}function s(r){d(a,n,o,i,s,"throw",r)}i(void 0)}))}}var m=function(){var r=y(s().mark((function r(e){var t,n,a,i,c,u,d,y,m;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=[],n=3e5,r.next=4,o.chromeStorage.getLocal("cachedFreeSteamRewardItems");case 4:if(r.t0=r.sent,r.t0){r.next=7;break}r.t0={};case 7:if(!((a=r.t0)[e]&&a[e].time-Date.now()<=n)){r.next=12;break}t=a[e].freeRewards,r.next=37;break;case 12:i=[],c=null,u=0;case 15:return r.prev=15,r.next=18,b(e,c);case 18:if(y=r.sent,(m=y.response).definitions){r.next=22;break}return r.abrupt("break",33);case 22:i.push.apply(i,l(m.definitions)),u+=m.count,c=m.next_cursor,d=m.total_count,$J("#sih_reward_button .sih-reward__text").text("".concat(SIHLang.rewards.scanning," ").concat(Math.round(100*u/d),"%")),r.next=32;break;case 29:r.prev=29,r.t1=r.catch(15),console.error("Error fetching rewards:",r.t1);case 32:if(u<d&&c){r.next=15;break}case 33:return t=i.filter((function(r){return"0"===r.point_cost&&6!==r.type})),a[e]={freeRewards:t,time:Date.now()},r.next=37,o.chromeStorage.setLocal("cachedFreeSteamRewardItems",a);case 37:return r.abrupt("return",t);case 38:case"end":return r.stop()}}),r,null,[[15,29]])})));return function(e){return r.apply(this,arguments)}}(),b=function(r,e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_REWARD_ITEMS",data:{access_token:r,cursor:e}},(function(r){t(r)}))}))},f=function(){var r=y(s().mark((function r(e,t){var n,o,a,l,c,u,d;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=0,o=0,a=i(t),r.prev=3,a.s();case 5:if((l=a.n()).done){r.next=22;break}return c=l.value,r.prev=7,r.next=10,S(e,c.defid);case 10:u=r.sent,(d=u.response)&&d.communityitemid&&o++,n++,$J("#sih_reward_button .sih-reward__text").text("".concat(SIHLang.rewards.processing," ").concat(Math.round(100*n/t.length),"%")),r.next=20;break;case 17:r.prev=17,r.t0=r.catch(7),console.error("Failed to redeem reward with defid ".concat(c.defid,":"),r.t0);case 20:r.next=5;break;case 22:r.next=27;break;case 24:r.prev=24,r.t1=r.catch(3),a.e(r.t1);case 27:return r.prev=27,a.f(),r.finish(27);case 30:$J("#sih_reward_button .sih-reward__text").text(o?"".concat(SIHLang.rewards.received,": ").concat(o):"".concat(SIHLang.rewards.non_available)),$J(".sih-reward__case").removeClass("sih-reward__case_loading");case 32:case"end":return r.stop()}}),r,null,[[3,24,27,30],[7,17]])})));return function(e,t){return r.apply(this,arguments)}}(),S=function(r,e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_REDEEM_POINTS",data:{access_token:r,defid:e}},(function(r){t(r)}))}))},h=function(){var r=y(s().mark((function r(){var e,t,n;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=JSON.parse($J("#application_config").attr("data-loyaltystore")),t=e.webapi_token,r.next=3,m(t);case 3:return n=r.sent,r.next=6,f(t,n);case 6:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),p=function(){var r=$J(".padding-left-medium.padding-top-small.padding-right-medium.padding-bottom-small").children(".Panel.Focusable"),e=$J(".padding-left-medium.padding-top-small.padding-right-medium.padding-bottom-small").find(".sih-reward");if(r.length&&"undefined"!=typeof SIHLang&&!e.length){var t=$J('<div class="sih-reward">\n        <div class="sih-reward__case"></div>\n        <button id="sih_reward_button" class="sih-reward__get-button" title="">\n          <span class="sih-reward__text">'.concat(SIHLang.rewards.get_all_free,'</span>\n          <span class="sih-reward__powered">POWERED BY SIH</span>\n        </button>\n      </div>'));r.eq(0).before(t).addClass("sih__point-balance"),v(r.eq(0)),setTimeout((function(){$J(".sih-reward").addClass("sih-reward__opened")}),1e3),$J("#sih_reward_button").click((function(){$J(".sih-reward__case").addClass("sih-reward__case_loading"),$J("#sih_reward_button").addClass("sih-reward__get-button_disabled"),$J("#sih_reward_button .sih-reward__text").text(SIHLang.rewards.loading),h()}))}else setTimeout(p,1e3)},v=function(r){var e=$J('<div id="reward-notification"></div>');r.before(e),e.click(C)},C=function(){var r=y(s().mark((function r(){var e;return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:$J("#rewardNotificationModal").length?$J("#rewardNotificationModal").show():(e="free_reward_items_notification",chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SYNC_STORAGE",data:{key:e}},(function(r){var t=r[e];$J("body").append('<div id="rewardNotificationModal" class="reward-notification-modal">\n          <div class="reward-notification-modal__fade"></div>\n          <div class="reward-notification-modal__inner">\n            <div class="reward-notification-modal__close"></div>\n            <div class="reward-notification-modal__title">'.concat(SIHLang.rewards.modal_title,'</div>\n            <div class="reward-notification-modal__content">\n              <div>').concat(SIHLang.rewards.modal_checkbox_text,'</div>\n              <input type="checkbox" ').concat(t?"checked":"",' class="reward-notification-modal__checkbox" />\n            </div>\n          </div>\n        </div>')),$J.switcher(".reward-notification-modal__checkbox"),g()})));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),g=function(){$J(document).on("click",".reward-notification-modal__close, .reward-notification-modal__fade",(function(){$J("#rewardNotificationModal").hide()})),$J(document).on("change",".reward-notification-modal__checkbox",(function(r){o.chromeStorage.setSync("free_reward_items_notification",$J(r.target).is(":checked"))}))};p(),SIH=n})();