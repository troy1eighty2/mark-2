var SIH;(()=>{"use strict";var e={6794:(e,t,n)=>{n.r(t),n.d(t,{App:()=>y,BuyOrders:()=>P,FormatNumberWithSuffix:()=>$,ModifyHoverItemName:()=>C,SKIN_WEAR_MAP:()=>p,SellListing:()=>w,SihUserPrices:()=>J,chromeStorage:()=>b,formatNumber:()=>S,formatNumberToLocalRu:()=>I,getLocation:()=>_,getPageParams:()=>v,getPercentNumberDifference:()=>k,getPriceFromSteam:()=>h,parseNumber:()=>g});var r,a,i=n(3080);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function u(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var p=new Map([["fn","Factory New"],["mw","Minimal Wear"],["ft","Field-Tested"],["ww","Well-Worn"],["bs","Battle-Scarred"]]);function _(e){var t=(e=decodeURIComponent(e)).match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&{href:e,protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]}}function h(e){return new Promise((function(t){Object.keys(e).length>0?chrome.runtime.sendMessage(SIHID,{type:"GET_PRICE_FROM_STEAM",data:e},t):t()}))}function v(e){var t=_(e=e||window.location.href);if(t.pathname.indexOf("market/listings/")>-1){var n=t.pathname.split("/");return{appId:n[3],marketHashName:n[4]+t.hash,location:t}}return{}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=".";return(e=e.replace(/[^0-9.,]/g,"")).indexOf(",")>e.indexOf(".")&&(t=","),(e.match(new RegExp("\\"+t,"g"))||[]).length>1&&(t=""),""!==t&&e.length-e.indexOf(t)-1==3&&0!==e.indexOf("0"+t)&&(t=""),e=(e=e.replace(new RegExp("[^0-9"+t+"]","g"),"")).replace(",","."),parseFloat(e)}var b={getSync:function(e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SYNC_STORAGE",data:{key:e}},(function(n){var r=n[e]||{};t(r)}))}))},setSync:function(e,t){return new Promise((function(n){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_SYNC_STORAGE",data:{key:e,value:t}},(function(e){n(e)}))}))},getLocal:function(e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_LOCAL_STORAGE",data:{key:e}},(function(n){var r=n[e]||{};t(r)}))}))},setLocal:function(e,t){return new Promise((function(n){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_LOCAL_STORAGE",data:{key:e,value:t}},(function(e){n(e)}))}))}},y={getManifest:function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"GET_MANIFEST_APP",data:{}},e)})).then((function(e){return e.data}))}};function S(e){return(+e.toFixed(2)).toLocaleString("ru").replace(",",".")}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=i.A.getPriceFromCurrency(e,t,n,r,a),s=o.price,c=o.symbolPosition,l=o.symbol;return s>1e5&&(s=Math.ceil(s)),2!==a&&s>.03&&(a=2),"".concat("before"===c?l:""," ").concat((+s.toFixed(a)).toLocaleString("ru").replace(",",".")," ").concat("after"===c?l:"")}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return Math.round(100*(1-e/t)*100)/100*n}var C=function(e){var t=e.item;$J(".item-hover-name-tooltip").remove(),t.prop("title",SIHLang.market.blockBestOfferOfMarketplaceCopyItemName),t.css({display:"inline-block",cursor:"pointer"}),t.tooltip({position:{my:"center bottom",at:"center top"},tooltipClass:"name-tooltip item-hover-name-tooltip"}),t.off("click").click((function(){var t=$J(this);$J(".name-tooltip").css("opacity",".3").animate({opacity:"1"},"fast"),navigator.clipboard.writeText(e.marketHashName).then((function(){t.tooltip({content:SIHLang.market.blockBestOfferOfMarketplaceCopiedItemName})})).catch((function(e){console.error("Error in copying text: ",e)}))})),t.mouseout((function(){t.tooltip("close"),t.tooltip({content:SIHLang.market.blockBestOfferOfMarketplaceCopyItemName})}))},$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=i.A.getPriceFromCurrency(e,t,n,a),s=o.price,c=o.symbol,l=o.symbolPosition,d=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].findLast((function(e){return s>=e.value})),f=d?(s/d.value).toFixed(r).replace(/\.0+$|(?<=\.[0-9]*[1-9])0+$/,"").concat(d.symbol):Math.ceil(100*s)/100;return{price:f,text:"before"===l?"".concat(c," ").concat(f):"".concat(f," ").concat(c),symbol:c,symbolPosition:l}},J=function(){return u((function e(){d(this,e)}),null,[{key:"sendItemData",value:function(e,t,n,r,a,i){try{var o,s,c=JSON.parse(JSON.stringify(e)),l=JSON.parse(JSON.stringify(c.buy_order_graph)),d=JSON.parse(JSON.stringify(c.sell_order_graph));if(!t||5!==r)return!1;if(!g_steamID)return!1;if(0===d.length)return;d.length>5?d.length=5:d.length,l.length>1?l.length=1:l.length;for(var f=[],u=d.length-1;u>=0;u--){var m=d[u][0],p=0!==u?d[u][1]-d[u-1][1]:d[u][1];f.unshift({price:m,count:p})}var _=null==l||null===(o=l[0])||void 0===o?void 0:o[0],h=null==l||null===(s=l[0])||void 0===s?void 0:s[1],v={app_id:t,hash_name:n,prices:f,steamid:g_steamID};if(l.length){var g={price:_,count:h};Object.assign(v,{buy_price:g})}if(a&&Object.keys(a).length&&Object.assign(v,{steamSoldData:a}),i){var b,y;"russian"===i?(b=Number($J.parseHTML(c.buy_order_summary)[1].innerHTML),y=Number($J.parseHTML(c.sell_order_summary)[1].innerHTML)):["koreana","japanese","turkish"].includes(i)?(b=Number($J(c.buy_order_summary)[2].innerHTML),y=Number($J(c.sell_order_summary)[2].innerHTML)):(b=Number($J(c.buy_order_summary)[0].innerHTML),y=Number($J(c.sell_order_summary)[0].innerHTML)),v.orders={buy:b,sell:y}}chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_USER_STEAM_PRICE",data:v})}catch(e){}}}])}(),w=u((function e(){d(this,e)}));r=w,l(w,"SELL_LISTING",{}),l(w,"setItem",(function(e){if(e){var t={sessionid:g_sessionID,steamid:g_steamID},n="".concat(e.appid,"/").concat(e.contextid),a="".concat(e.market_hash_name,"/").concat(e.price);if(Object.keys(r.SELL_LISTING).length){var i=r.SELL_LISTING.data.findIndex((function(e){return Object.keys(e)[0]===n}));if(i>=0)if(r.SELL_LISTING.data[i][n].length){var o=r.SELL_LISTING.data[i][n].findIndex((function(e){return Object.keys(e)[0]===a}));if(o<0)r.SELL_LISTING.data[i][n].push(l({},a,[e]));else r.SELL_LISTING.data[i][n][o][a].findIndex((function(t){return t.assetid===e.assetid}))<0&&r.SELL_LISTING.data[i][n][o][a].push(e)}else r.SELL_LISTING.data[i][n].push(l({},a,[e]));else r.SELL_LISTING.data.push(l({},n,[l({},a,[e])]))}else r.SELL_LISTING={data:[l({},n,[l({},a,[e])])],userInfo:t}}})),l(w,"removeItem",(function(e){e&&r.SELL_LISTING&&r.SELL_LISTING.data&&r.SELL_LISTING.data.length&&r.SELL_LISTING.data.forEach((function(t,n){for(var a=function(){var t=o(s[i],2),a=t[0];t[1].forEach((function(t,i){for(var s=0,c=Object.entries(t);s<c.length;s++){var l=o(c[s],2),d=l[0],f=l[1].findIndex((function(t){return t.assetid===e}));f>=0&&(r.SELL_LISTING.data[n][a][i][d].splice(f,1),r.SELL_LISTING.data[n][a][i][d].length||(r.SELL_LISTING.data[n][a].splice(i,1),r.SELL_LISTING.data[n][a].length||r.SELL_LISTING.data.splice(n,1)))}}))},i=0,s=Object.entries(t);i<s.length;i++)a()}))})),l(w,"resellItems",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_RESELL_ITEMS",data:r.SELL_LISTING},(function(t){e()}))}))}));var P=u((function e(){d(this,e)}));a=P,l(P,"BUY_ORDERS",[]),l(P,"setItem",(function(e){e&&(a.BUY_ORDERS.length?-1===a.BUY_ORDERS.findIndex((function(t){return t.payload.buy_orderid===e.payload.buy_orderid}))&&a.BUY_ORDERS.push(e):a.BUY_ORDERS.push(e))})),l(P,"removeItem",(function(e){if(e&&a.BUY_ORDERS.length){var t=a.BUY_ORDERS.findIndex((function(t){return t.payload.buy_orderid===e}));-1!==t&&a.BUY_ORDERS.splice(t,1)}})),l(P,"createBuyOrders",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_RESUBMIT_BUY_ORDER",data:a.BUY_ORDERS},(function(t){e()}))}))}))},3080:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.d(t,{A:()=>s});const s=new(function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"getPriceFromCurrency",(function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=t.getCurrency(+n),s=t.getCurrency(+r),c=a?ExchangeSteamRates[o.strCode]:ExchangeRates._rates[o.strCode],l=a?ExchangeSteamRates[s.strCode]:ExchangeRates._rates[s.strCode];return"USD"===s.strCode&&e?"USD"!=o.strCode&&(e*=c)<.03&&2===i&&(e=.03):s.strCode!=o.strCode&&e&&(e=e/l*c)<.03&&2===i&&(e=.03),2!==i&&e>.03&&(i=2),{price:e||0,code:o.strCode,symbol:o.strSymbol,text:"".concat(o.bSymbolIsPrefix?"".concat(o.strSymbol).concat(o.strSymbolAndNumberSeparator):"").concat(e?e.toFixed(i):0).concat(o.bSymbolIsPrefix?"":"".concat(o.strSymbolAndNumberSeparator).concat(o.strSymbol)),template:"".concat(o.bSymbolIsPrefix?"".concat(o.strSymbol).concat(o.strSymbolAndNumberSeparator):"","$price").concat(o.bSymbolIsPrefix?"":"".concat(o.strSymbolAndNumberSeparator).concat(o.strSymbol)),symbolPosition:o.bSymbolIsPrefix?"before":"after"}})),i(this,"getCurrency",(function(e){var n=null;for(var r in e=e||"undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_currency||1,t.g_rgCurrencyData)if(t.g_rgCurrencyData[r].eCurrencyCode===+e){n=t.g_rgCurrencyData[r];break}return n})),i(this,"getCurrencyCodeSteam",(function(){return"undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_currency||1})),i(this,"g_rgCurrencyData",{USD:{strCode:"USD",eCurrencyCode:1,strSymbol:"$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},GBP:{strCode:"GBP",eCurrencyCode:2,strSymbol:"£",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},EUR:{strCode:"EUR",eCurrencyCode:3,strSymbol:"€",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},CHF:{strCode:"CHF",eCurrencyCode:4,strSymbol:"CHF",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},RUB:{strCode:"RUB",eCurrencyCode:5,strSymbol:"₽",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:"",strSymbolAndNumberSeparator:" "},BRL:{strCode:"BRL",eCurrencyCode:7,strSymbol:"R$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},JPY:{strCode:"JPY",eCurrencyCode:8,strSymbol:"¥",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},NOK:{strCode:"NOK",eCurrencyCode:9,strSymbol:"kr",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},IDR:{strCode:"IDR",eCurrencyCode:10,strSymbol:"Rp",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},MYR:{strCode:"MYR",eCurrencyCode:11,strSymbol:"RM",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},PHP:{strCode:"PHP",eCurrencyCode:12,strSymbol:"P",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},SGD:{strCode:"SGD",eCurrencyCode:13,strSymbol:"S$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},THB:{strCode:"THB",eCurrencyCode:14,strSymbol:"฿",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},VND:{strCode:"VND",eCurrencyCode:15,strSymbol:"₫",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""},KRW:{strCode:"KRW",eCurrencyCode:16,strSymbol:"₩",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},TRY:{strCode:"TRY",eCurrencyCode:17,strSymbol:"TL",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},UAH:{strCode:"UAH",eCurrencyCode:18,strSymbol:"₴",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},MXN:{strCode:"MXN",eCurrencyCode:19,strSymbol:"Mex$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CAD:{strCode:"CAD",eCurrencyCode:20,strSymbol:"CDN$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},AUD:{strCode:"AUD",eCurrencyCode:21,strSymbol:"A$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},NZD:{strCode:"NZD",eCurrencyCode:22,strSymbol:"NZ$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},PLN:{strCode:"PLN",eCurrencyCode:6,strSymbol:"zł",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},CNY:{strCode:"CNY",eCurrencyCode:23,strSymbol:"¥",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},INR:{strCode:"INR",eCurrencyCode:24,strSymbol:"₹",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CLP:{strCode:"CLP",eCurrencyCode:25,strSymbol:"CLP$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},PEN:{strCode:"PEN",eCurrencyCode:26,strSymbol:"S/.",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},COP:{strCode:"COP",eCurrencyCode:27,strSymbol:"COL$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},ZAR:{strCode:"ZAR",eCurrencyCode:28,strSymbol:"R",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},HKD:{strCode:"HKD",eCurrencyCode:29,strSymbol:"HK$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},TWD:{strCode:"TWD",eCurrencyCode:30,strSymbol:"NT$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},SAR:{strCode:"SAR",eCurrencyCode:31,strSymbol:"SR",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},AED:{strCode:"AED",eCurrencyCode:32,strSymbol:"AED",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},ARS:{strCode:"ARS",eCurrencyCode:34,strSymbol:"ARS$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},ILS:{strCode:"ILS",eCurrencyCode:35,strSymbol:"₪",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},BYN:{strCode:"BYN",eCurrencyCode:36,strSymbol:"Br",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},KZT:{strCode:"KZT",eCurrencyCode:37,strSymbol:"₸",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},KWD:{strCode:"KWD",eCurrencyCode:38,strSymbol:"KD",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},QAR:{strCode:"QAR",eCurrencyCode:39,strSymbol:"QR",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CRC:{strCode:"CRC",eCurrencyCode:40,strSymbol:"₡",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""},UYU:{strCode:"UYU",eCurrencyCode:41,strSymbol:"$U",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""}})},(t=[{key:"getCurrencyIdByCode",value:function(e){var t;return(null===(t=g_rgCurrencyData[e])||void 0===t?void 0:t.eCurrencyCode)||null}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}())}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{CurrencyService:()=>v.A,common:()=>l,filter:()=>c,footer:()=>a,global:()=>h,items:()=>i,itemsRule:()=>o,latestFriends:()=>d,lots:()=>f,panelMode:()=>u,profileHeader:()=>m,tradeoffer:()=>s,tradeofferLite:()=>p});var a={};n.r(a),n.d(a,{RenderLoadMarketPriceManualSingle:()=>Q,load:()=>Z});var i={};n.r(i),n.d(i,{ModifyItemList:()=>ee,load:()=>X});var o={};n.r(o),n.d(o,{RelocateRuleBlock:()=>ne,load:()=>te});var s={};n.r(s),n.d(s,{GetTotalPriceForActiveMarket:()=>ve,SetFlagForLoadedMarket:()=>de,SetFlagForLoadedSIHMarket:()=>fe,load:()=>ae});var c={};n.r(c),n.d(c,{AfterResponse:()=>Ee,SetPriceForItemsActiveMarket:()=>De,SetStateAutoLoadMarketPriceToLocalStorage:()=>Ne,load:()=>Oe});var l={};n.r(l),n.d(l,{AddPreloadersAndHideBlocks:()=>nt,GetAllPrice:()=>dt,GetDataFromLocalStorage:()=>Xe,GetHeightFirstRightControlsContent:()=>at,GetLimitedTradeofferList:()=>Ze,GetMarkets:()=>qe,InitializationFastAcceptTrade:()=>ut,SetDataToLocalStorage:()=>et,getHexFromUnicode:()=>st,removeDeclinedOfferFromSihWindow:()=>ot,sendTradeLinkToBackground:()=>ct,sendTradeofferTxtToBackground:()=>it});var d={};n.r(d),n.d(d,{LocalStorageLatestFriends:()=>vt,RenderLatestSelectedFriends:()=>pt,SaveLatestFriend:()=>_t});var f={};n.r(f),n.d(f,{load:()=>gt});var u={};n.r(u),n.d(u,{loadHtml:()=>bt});var m={};n.r(m),n.d(m,{load:()=>yt});var p={};n.r(p),n.d(p,{load:()=>St});var _,h=n(6794),v=n(3080),g=function(e,t){try{t=t||"",localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e)}},b=function(e){try{var t=localStorage.getItem(e)||null;return JSON.parse(t)}catch(e){return console.error(e),null}},y={_name:"SIH_MARKETPLACE_BANNERS",get:function(){return b(this._name)||{}},set:function(e){g(this._name,e)}},S={_name:"SIH_MARKETPLACES_CACHE",get:function(){return b(this._name)||{}},set:function(e){g(this._name,e)}};function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function k(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function w(e,t,n){return(t=P(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:t+""}var A=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,"getLink",(function(t,n,r,a,i){return e._getLink(t,n,r,a,i)})),w(this,"getPriceMarket",(function(e){var t=y.get(),n=!1,r=0,a=0,i=0,o=0,s=0,c=0;return e.data&&(i=e.data.price||0,o=e.data.count||0,e.data.locked&&(s=e.data.locked.price||0,c=e.data.locked.count||e.data.locked.locked||0)),t.isPriceLotsTradeLock?("A"===e.group&&(r=i,a=o),"B"===e.group&&(i?i>s&&s?(r=s,n=!0,a=c):(r=i,a=o):(r=s,a=c,n=!0)),"C"===e.group&&(r=s,a=c,n=!0)):"A"!==e.group&&"B"!==e.group||(r=i,a=o),{price:r,isLock:n,count:a}})),w(this,"makeNewData",(function(){e._statusLoadMarkers=e._statusLoadMarkersEnum.NO_LOADING})),w(this,"loadMarkets",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(e._statusLoadMarkers=e._statusLoadMarkersEnum.NO_LOADING),e._statusLoadMarkers===e._statusLoadMarkersEnum.NO_LOADING){e._statusLoadMarkers=e._statusLoadMarkersEnum.LOADING;var r=null===t&&null===n?(0,h.getPageParams)():{appId:t,marketHashName:n};if(r.marketHashName=decodeURIComponent(r.marketHashName),r){var a=S.get(),i="".concat(r.appId,"_").concat(r.marketHashName);if(sih_app_account&&(window.marketCacheTime=3e4),a[i]&&Date.now()-a[i].time<window.marketCacheTime)return e._statusLoadMarkers=e._statusLoadMarkersEnum.SUCCESS,e._marketplace||(e._marketplace={}),void(e._marketplace.markets=a[i].data);var o=t&&n,s=e._getMarkets(r.appId,r.marketHashName,o),c={appId:r.appId,markets:s.map((function(e){return e.name})),items:[r.marketHashName]};chrome.runtime.sendMessage(SIHID,{type:"GET_PRICES_BY_MARKETPLACES",data:c},(function(t){t&&t.success&&t.items?(e._statusLoadMarkers=e._statusLoadMarkersEnum.SUCCESS,t.items&&t.items[r.marketHashName]&&t.items[r.marketHashName].csmoney&&(t.items[r.marketHashName].csmoney.csmoneyStore&&(t.items[r.marketHashName].csmoneyStore=t.items[r.marketHashName].csmoney.csmoneyStore),t.items[r.marketHashName].csmoney.csmoneyTrade&&(t.items[r.marketHashName].csmoneyTrade=t.items[r.marketHashName].csmoney.csmoneyTrade)),e._marketplace={},e._marketplace.markets=s.map((function(e){return e.data=t.items[r.marketHashName]&&t.items[r.marketHashName][e.name],e})).filter((function(e){return!(!e.data||!(e.data.price||e.data.locked&&e.data.locked.price))})),a[i]={},a[i].data=e._marketplace.markets,a[i].time=Date.now(),S.set(a)):e._statusLoadMarkers=e._statusLoadMarkersEnum.ERROR}))}}})),w(this,"checkLoadMarkets",(function(){var n=[e._statusLoadMarkersEnum.SUCCESS,e._statusLoadMarkersEnum.ERROR].includes(e._statusLoadMarkers);if(n){var r=y.get();r.market&&t.getMarkets().filter((function(e){return e.isView})).forEach((function(e){var t=r.market[e.name];t&&(e.depositPercentage=t.depositPercentage||0,e.fixedDepositPercentage=t.fixedDepositPercentage||0)}))}return n})),w(this,"getMarkets",(function(){return e._marketplace?y.get().isPriceLotsTradeLock?e._marketplace.markets:e._marketplace.markets.filter((function(e){return"A"===e.group||"B"===e.group&&(e.data||{}).price})):[]})),w(this,"getMarketLowerPrice",(function(){var n=null;if(t.checkLoadMarkets()&&e._marketplace&&Array.isArray(e._marketplace.markets)&&e._marketplace.markets.length>0){var r=y.get(),a=function(e,t){return t.isServiceCommission?1+(e||0)/100:1},i=function(e,t){return t.isServiceCommission&&e||0},o=e.excludeBuyMarkets(t.getMarkets()).filter((function(e){return e.isView}));o.length>1?n=o.reduce((function(e,n){var o=t.getPriceMarket(e),s=t.getPriceMarket(n);return o.price*a(e.depositPercentage,r)+i(e.fixedDepositPercentage,r)<s.price*a(n.depositPercentage,r)+i(n.fixedDepositPercentage,r)?e:n})):1===o.length&&(n=o[0])}return n})),w(this,"getOffersCount",(function(n){return e.excludeBuyMarkets(n).reduce((function(e,n){return e+t.getPriceMarket(n).count}),0)})),w(this,"getMarketsForExternal",(function(){return e._markets.filter((function(e){return e.forExternalInjection}))})),w(this,"getAllMarkets",(function(t){return t?e._markets.filter((function(e){return e.appIds.includes(t)})):e._markets}))}return t=e,r=[{key:"_markets",get:function(){return[{name:"waxpeer",title:"Waxpeer",isView:!0,appIds:["730","252490","440"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"dmarket",title:"DMarket",isView:!0,appIds:["570","730","252490","440"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"csgocom",title:"Csgocom",isView:!0,appIds:["730","570","440","252490"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0,priorityPosition:2},{name:"csgocomBuy",title:"Csgocom buy",isView:!0,appIds:["730","570","440","252490"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!1,priorityPosition:2},{name:"csmoney",title:"CS.money",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!1},{name:"csmoneyStore",title:"CS.money Store",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0,priorityPosition:3},{name:"csmoneyTrade",title:"CS.money Trade",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0,priorityPosition:3},{name:"skinport",title:"Skinport",isView:!0,appIds:["730","570","440","252490"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"bitskins",title:"BitSkins",isView:!0,appIds:["730","570","440"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"skinbaron",title:"Skinbaron",isView:!0,appIds:["730","440"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"shadowpay",title:"ShadowPay",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"mannco",title:"Mann.Co",isView:!0,appIds:["440","730","570","252490"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"tradeit",title:"Tradeit",isView:!0,appIds:["730","440","570","252490"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0,priorityPosition:1},{name:"tradeitDeposit",title:"Tradeit Deposit",isView:!0,appIds:["730","440","570","252490"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!1,priorityPosition:1},{name:"cstrade",title:"CS.Trade",isView:!0,appIds:["440","570","730","252490"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"lootfarm",title:"LOOTfarm",isView:!0,appIds:["440","570","730","252490"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"swapgg",title:"Swapgg",isView:!0,appIds:["440","570","730","252490"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"lisskins",title:"Lisskins",isView:!0,appIds:["730","570","252490"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"buff163",title:"Buff163",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"cs2go",title:"CS2GO",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"haloskins",title:"HaloSkins",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"igxe",title:"Igxe",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"gamerpay",title:"GamerPay",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"skinsmonkey",title:"Skinsmonkey",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"skinsmonkeycash",title:"Skinsmonkey cash",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"skinout",title:"SkinOut",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"bitskinsp2p",title:"Bitskins P2P",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"whitemarket",title:"White.market",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"steamprices",title:"Steamprices",isView:!1,appIds:["730","570","440","252490"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!1},{name:"sihmarket",title:"SIH.Market",isView:!0,appIds:["730","252490","440"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"rustskins",title:"Rustskins",isView:!0,appIds:["252490"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"steamLiveSell",title:"Steam",isView:!1,appIds:["730"],link:null,data:null,group:"B",forExternalInjection:!0}]}},{key:"_getMarkets",value:function(t,n,r){var a,i=e._markets.filter((function(e){return e.isView&&e.appIds.includes(t)}));if(!window.sih_subscribe_ads){var o="undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_country?g_rgWalletInfo.wallet_country:"US";i=["RU","BY"].includes(o)?"zh-TW"!==g_strCountryCode&&"zh-CN"!==g_strCountryCode?i.filter((function(e){if("dmarket"!==e.name&&"igxe"!==e.name)return e.name})):i.filter((function(e){return e.name})):["ZH","CN"].includes(o)?i.filter((function(e){return e.name})):"zh-TW"!==g_strCountryCode&&"zh-CN"!==g_strCountryCode?i.filter((function(e){return"igxe"!==e.name})):i.filter((function(e){return e.name}))}i.forEach((function(a){a.link=e._getLink(a.name,t,n,r)}));var s=e._markets.filter((function(e){return!e.isView}));return(a=i).push.apply(a,k(s)),i}},{key:"_getRandomInt",value:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}},{key:"excludeBuyMarkets",value:function(e){var t=["csgocomBuy"];return e.filter((function(e){return!t.includes(e.name)}))}}],(n=null)&&J(t.prototype,n),r&&J(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();_=A,w(A,"_statusLoadMarkersEnum",{NO_LOADING:"no_loading",LOADING:"loading",ERROR:"error",SUCCESS:"success"}),w(A,"_statusLoadMarkers",_._statusLoadMarkersEnum.NO_LOADING),w(A,"_marketplace",null),w(A,"_getLink",(function(e,t,n,r,a){var i="https://t.sih-db.com/".concat(a?"external-panel":"15GzoA"),o="",s="";if("csgocom"===e||"csgocomBuy"===e){switch(t){case"730":s="csgo.com";break;case"570":s="market.dota2.net";break;case"440":s="tf2.tm";break;case"252490":s="rust.tm";break;default:return}o="".concat(i,"?subid1=").concat(encodeURIComponent("?s=price&t=all&search=".concat(n,"&sd=asc")),"&subid2=").concat(s).concat(r?"-side-menu":"")}if("csmoneyStore"===e&&(o="".concat(i,"?subid1=").concat(encodeURIComponent("".concat(n)),"&subid2=cs.moneyStore").concat(r?"-side-menu":"")),"csmoneyTrade"===e&&(o="".concat(i,"?subid1=").concat(encodeURIComponent("".concat(n)),"&subid2=cs.moneyTrade").concat(r?"-side-menu":"")),"skinport"===e){var c=n.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"-").replace(/^-+|-+$/g,""),l="";"570"===t?l="/dota2":"440"===t?l="/tf2":"252490"===t&&(l="/rust"),o="".concat(i,"?subid1=").concat(encodeURIComponent("".concat(l,"/market?search=").concat(c,"&sort=price&order=asc")),"&subid2=skinport").concat(r?"-side-menu":"")}if("bitskins"===e){var d="";switch(t){case"730":d="csgo";break;case"570":d="dota2";break;case"440":d="tf2"}o="".concat(i,"?subid1=").concat(encodeURIComponent("".concat(d,'?ref_alias=sihfree&search={"order":[{"field":"price","order":"ASC"}],"where":{"skin_name":"').concat(n,'"}}')),"&subid2=newBitskins").concat(r?"-side-menu":"")}if("bitskinsp2p"===e){var f=n.replace(/ /g,"+");o="".concat(i,"?subid1=").concat(encodeURIComponent('?search={"where":{"name":"'.concat(f,'"}}')),"&subid2=p2p-bitskins").concat(r?"-side-menu":"")}if("skinbaron"===e){n=n.replace("Souvenir Package","");var u="";"730"===t?u="/csgo":"440"===t&&(u="/tf2");var m=encodeURIComponent("".concat(u,"?str=").concat(n,"&sort=CF"));o="".concat(i,"?subid1=").concat(m,"&subid2=skinbaron").concat(r?"-side-menu":"")}if("shadowpay"===e){var p=encodeURIComponent("?search=".concat(n));o="".concat(i,"?subid1=").concat(p,"&subid2=shadowpay").concat(r?"-side-menu":"")}if("waxpeer"===e){var _=n.toLocaleLowerCase().replace(/[|()™★]/g,"").replace(/\s{2,}/g," ").trim().replace(/ /g,"-").replace(/&/g,"%26").replace(/cs:/g,"cs-"),h="";["252490"].includes(t)&&(h="rust/"),["440"].includes(t)&&(h="tf2/"),o="".concat(i,"?subid1=").concat(h).concat(_,"/item/&subid2=waxpeer").concat(r?"-side-menu":"")}if("dmarket"===e&&["570","730","252490","440"].includes(t)){var v=n.replace(/[™★]/g,""),g="";"730"===t&&(g="csgo-skins"),"570"===t&&(g="dota2-skins"),"252490"===t&&(g="rust-skins"),"440"===t&&(g="tf2-skins");var b=encodeURIComponent("/ingame-items/item-list/".concat(g,"?title=").concat(v));o="".concat(i,"?subid1=").concat(b,"&subid2=dmarket").concat(r?"-side-menu":"")}if("mannco"===e&&["440","730","570","252490"].includes(t)){var y="";if(n.indexOf("Unusual")>-1)y=encodeURIComponent("/market?e=".concat(n,"&f=ASC&appid=").concat(t));else{var S=n.replace(/[^a-zA-Z0-9 -]/gi,"").replace(/\s{2,}/g," ").trim().replace(/ /gi,"-").toLowerCase();y="/item/".concat(t,"-").concat(S)}o="".concat(i,"?subid1=").concat(y,"&subid2=manncostore").concat(r?"-side-menu":"")}if("tradeit"===e&&["730","440","570","252490"].includes(t)){var I="";"730"===t&&(I="csgo"),"440"===t&&(I="tf2"),"570"===t&&(I="dota2"),"252490"===t&&(I="rust");var k=encodeURIComponent("/".concat(I,"/store?search=").concat(n));o="".concat(i,"?subid1=").concat(k,"&subid2=tradeit").concat(r?"-side-menu":"")}if("tradeitDeposit"===e&&["730","440","570","252490"].includes(t)){var C="";"730"===t&&(C="csgo"),"440"===t&&(C="tf2"),"570"===t&&(C="dota2"),"252490"===t&&(C="rust");var $=encodeURIComponent("/".concat(C,"/trade?search=").concat(n));o="".concat(i,"?subid1=").concat($,"&subid2=tradeit").concat(r?"-side-menu":"")}if("cstrade"===e&&["440","570","730","252490"].includes(t)&&(o="".concat(i,"?subid1=").concat(n,"&subid2=cstrade").concat(r?"-side-menu":"")),"lootfarm"===e&&["440","570","730","252490"].includes(t)){var J=encodeURIComponent("#skin=".concat(t,"_").concat(n));o="".concat(i,"?subid1=").concat(J,"&subid2=lootfarm").concat(r?"-side-menu":"")}if("swapgg"===e&&["440","570","730","252490"].includes(t)){var w=encodeURIComponent("/browse/".concat(t,"?search=").concat(n.replace("|"," ")));o="".concat(i,"?subid1=").concat(w,"&subid2=swapgg").concat(r?"-side-menu":"")}if("lisskins"===e&&["730","570","252490"].includes(t)){var P="";"730"===t&&(P="csgo"),"570"===t&&(P="dota2"),"252490"===t&&(P="rust");var A=encodeURIComponent("/".concat(P,"/?query=").concat(n));o="".concat(i,"?subid1=").concat(A,"&subid2=lisskins").concat(r?"-side-menu":"")}if("buff163"===e&&["730"].includes(t)){var x="";"730"===t&&(x="csgo");var L=encodeURIComponent("/market/".concat(x,"#tab=selling&page_num=1&search=").concat(n));o="".concat(i,"?subid1=").concat(L,"&subid2=buff163").concat(r?"-side-menu":"")}if("igxe"===e&&["730"].includes(t)){var T=n,E="";"730"===t&&(E="csgo");var O=encodeURIComponent("/market/".concat(E,"?keyword=").concat(T));o="".concat(i,"?subid1=").concat(O,"&subid2=igxe").concat(r?"-side-menu":"")}if("gamerpay"===e&&["730"].includes(t)){var N=encodeURIComponent("/buy?query=".concat(n));o="".concat(i,"?subid1=").concat(N,"&subid2=gamerpay").concat(r?"-side-menu":"")}if("skinsmonkey"===e&&["730"].includes(t)){var D=n,H=encodeURIComponent("appId=".concat(t,"&q=").concat(D));o="".concat(i,"?subid1=").concat(H,"&subid2=skinmonkey").concat(r?"-side-menu":"")}if("skinsmonkeycash"===e&&["730"].includes(t)){var M=n,R=encodeURIComponent("appId=".concat(t,"&q=").concat(M));o="".concat(i,"?subid1=").concat(R,"&subid2=skinmonkey").concat(r?"-side-menu":"")}if("skinout"===e&&["730"].includes(t)){var U=n.replace(/[^a-zA-Z0-9★ -]/gi,"").replace(/\s{2,}/g," ").trim().replace(/ /gi,"-").toLowerCase();o="".concat(i,"?subid1=").concat(U,"&subid2=skinout").concat(r?"-side-menu":"")}if("whitemarket"===e&&["730"].includes(t)){var B=n;o="".concat(i,"?subid1=").concat(B,"&subid2=whitemarket").concat(r?"-side-menu":"")}if("haloskins"===e&&["730"].includes(t)){var j=encodeURIComponent(n.replace(/&/,""));o="".concat(i,"?subid1=").concat(j,"&subid2=haloskins").concat(r?"-side-menu":"")}if("cs2go"===e&&["730"].includes(t)){var G=n.replace(/[^a-zA-Z0-9★ -]/gi,"").replace(/\s{2,}/g," ").trim().replace(/ /gi,"-").toLowerCase(),F="".concat(t,"/").concat(G);o="".concat(i,"?subid1=").concat(F,"&subid2=cs2go").concat(r?"-side-menu":"")}if("rustskins"===e&&["252490"].includes(t)){var W="".concat(n);o="".concat(i,"?subid1=").concat(W,"&subid2=rustskins").concat(r?"-side-menu":"")}if("csdeal"===e&&["730","570","440","252490"].includes(t)){var K="";"730"===t&&(K="csgo"),"440"===t&&(K="tf2"),"570"===t&&(K="dota2"),"252490"===t&&(K="rust");var V=encodeURIComponent(n.replace(/&/,"")),z="".concat(V,"&game=").concat(K);o="".concat(i,"?subid1=").concat(z,"&subid2=cs.deals").concat(r?"-side-menu":"")}if("sihmarket"===e&&["730"].includes(t)){var Y=encodeURIComponent(n);o="".concat(i,"?subid1=").concat(Y,"&subid2=sih.app").concat(r?"-side-menu":"")}if("csmarket"===e&&["730"].includes(t)){var q=encodeURIComponent("".concat(n,"&sortBy=price&utm_source=sih&utm_medium=cpm&utm_campaign=first"));o="".concat(i,"?subid1=").concat(q,"&subid2=csmarket").concat(r?"-side-menu":"")}if("steamLiveSell"===e&&["730"].includes(t)){var Z=encodeURIComponent("".concat(n));o="".concat(i,"?subid1=").concat(Z,"&subid2=steam").concat(r?"-side-menu":"")}return a&&(o="".concat(o,"&subid3=").concat(a)),o}));const x=new A;function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function T(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D(r.key),r)}}function N(e,t,n){return(t=D(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L(t)?t:t+""}var H=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),N(this,"getOrderStatusText",(function(t){return e._buyOrderStatusEnum[t]})),N(this,"getLoginSihAppUser",(function(){return new Promise((function(e,t){sih_app_account?chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SIH_APP_USER_INFO"},(function(t){t.success&&Object.keys(t).length||chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_LOGIN_SIH_APP"},(function(t){e(t)})),t.success&&Object.keys(t).length?e(t):e({success:!1})})):e({success:!1,auth:!1})}))})),N(this,"getUserSihApp",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_USER_AUTH_SIH_APP"},(function(t){e(t)}))}))})),N(this,"getSubscribeAds",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_CHECK_SUBSCRIBE_ADS"},(function(t){e(t)}))}))})),N(this,"getSubscribeAdsPlans",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SUBSCRIBE_ADS_PLANS_SIH_APP"},(function(t){e(t)}))}))})),N(this,"getDaysNumber",(function(e){var t=(new Date).toUTCString(),n=new Date("".concat(t)).getTime(),r=new Date("".concat(e)).getTime()-n,a=Math.round(r/36e5);return a>24?{days:Math.ceil((a-24)/24)}:{hours:a}})),N(this,"setItemToBuyStack",(function(n){var r=n.hashName,a=void 0===r?null:r,i=n.countAdd,o=void 0===i?1:i,s=n.statusCode,c=void 0===s?null:s,l=n.steamId,d=void 0===l?null:l,f=n.appId,u=void 0===f?"730":f,m=n.price,p=void 0===m?null:m,_=n.image,v=n.url,g=n.gameName,b=void 0===g?null:g,y=n.color,S=void 0===y?"rgb(210, 210, 210)":y,I=n.rarityColor,k=void 0===I?"default":I,C=n.itemId,$=void 0===C?null:C;return new Promise((function(n,r){var i=x.getMarkets().find((function(e){return"sihmarket"===e.name}));if(b||(b=e._gameNames[u]),i||p){var s=p||x.getPriceMarket(i);if(s&&(s.price||p)){var l=(0,h.getPageParams)(),f=a||encodeURIComponent(l.marketHashName);t.getAllItemsBuyStackByName(f).then((function(i){for(var m=t.getFilterItemsByStatus(i,c),h=[],g=o>1?o-m.length:o,y=_||$J(".market_listing_largeimage").find("img").attr("src"),I=b||$J(".market_listing_nav > a:nth(0)").text(),C=S||$J("#largeiteminfo_item_name").css("color"),J=u&&a?"".concat(u,"/").concat(a):"".concat(l.appId,"/").concat(encodeURIComponent(l.marketHashName)),w=0;w<g;w++){var P,A={appid:u||l.appId,market_hash_name:a?decodeURIComponent(a):l.marketHashName,price:p||s.price,providerName:"sih",steam_id:d||(null!==(P=window)&&void 0!==P&&P.g_steamID?window.g_steamID:sih_steamID),custom_trade_link:null,createdAt:Date.now()+w+1,image:y,url:v||window.location.href,gameName:I,hashMarket:J,color:C,isChecked:!0,rarityColor:k||"default",itemId:$||null};null!==c&&(A.status=c),h.push(A)}if(l&&encodeURIComponent(l.marketHashName)===f&&730==+Object.keys(g_rgAssets)[0]){var x=+Object.keys(g_rgAssets[730]||{})[0],L=Object.values(g_rgAssets[730][x])[0];e.getRarityColor(730,L.classid,L.instanceid).then((function(t){h.forEach((function(e){e.rarityColor=t})),e.setPreparedDataToBuyStack(f,h).then((function(e){n(e)})).catch((function(e){r(e)}))}))}else e.setPreparedDataToBuyStack(f,h).then((function(e){n(e)})).catch((function(e){r(e)}))}))}}else a&&t.getAllItemsBuyStackByName(a).then((function(e){var i=t.getFilterItemsByStatus(e,c);if(i.length){for(var s=i.map((function(e){return e.createdAt})),l=i.find((function(e){return e.createdAt===Math.max.apply(Math,T(s))})),d=o>1?o-i.length:o,f=[],u=0;u<d;u++){var m=Object.assign({},l);m.createdAt=Date.now()+u+1,f.push(m)}var p=N({},a,[].concat(T(e),f));chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_BUY_STACK_SIH_APP",data:p},(function(e){e.success?n(p[a]):r(e)}))}}))}))})),N(this,"deleteItemFromBuyStack",(function(e){var n=e.hashName,r=e.argCountDelete,a=void 0===r?null:r,i=e.statusCode,o=void 0===i?null:i,s=e.itemId,c=void 0===s?null:s;return new Promise((function(e,r){t.getAllItemsBuyStackByName(n).then((function(i){var s=t.getFilterItemsByStatus(i,o),l=s.length-(null!==a?a:s.length-1);chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_DELETE_LAST_BUY_STACK_SIH_APP",data:{hashName:n,statusCode:o,countDelete:l,itemId:c}},(function(a){t.getAllItemsBuyStackByName(n).then((function(t){a.success?e(t):r(a)}))}))}))}))})),N(this,"getAllBuyStack",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_ALL_BUY_STACK_SIH_APP"},(function(t){e(t)}))}))})),N(this,"getFilterItemsByStatus",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.filter((function(e){return Array.isArray(t)?t.length?t.includes(e.status):!e.status:t?e.status===t:!e.status}))||[]})),N(this,"updateSIHMarketPrice",(function(){return new Promise((function(e,n){t.getAllBuyStack().then((function(t){if(t.length>0){var n=[],r=[],a=[];t.forEach((function(e){e.itemId?n.push(e.itemId.toString()):r.push(e.market_hash_name)})),n.length&&a.push(new Promise((function(e,t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SIH_MARKET_ACTUAL_PRICES",data:{itemIds:n}},(function(n){n.success?e(n.data):t()}))}))),r.length&&a.push(new Promise((function(e,t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SIH_MARKET_ACTUAL_PRICES",data:{items:r}},(function(n){n.success?e(n.data):t()}))}))),Promise.all(a).then((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_UPDATE_PRICE_ITEMS_BUY_STACK_SIH_APP",data:{items:t.flat()}},(function(t){e(t)}))})).catch((function(){e()}))}else e()}))}))})),N(this,"changeItemsStatus",(function(e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_CHANGE_STATUS_ITEM_BUY_STACK_SIH_APP",data:e},(function(){t()}))}))})),N(this,"cancelSihAppOrder",(function(e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_CANCEL_ORDER_SIH_APP",data:{orderId:e}},(function(e){t(e)}))}))})),N(this,"updateItemLocalHistoryOrders",(function(e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_UPDATE_LOCAL_ITEM_ORDER_SIH_APP",data:{orderId:e}},(function(e){t(e)}))}))})),N(this,"getUserOrdersHistory",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return new Promise((function(r){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_ORDERS_HISTORY_SIH_APP",data:{isLocal:e,page:t,number:n}},(function(e){r(e)}))}))})),N(this,"createBuyOrder",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_CREATE_BUY_ORDER_SIH_APP"},(function(t){e(t)}))}))})),N(this,"getTopSales",(function(e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_TOP_SALES",data:e},(function(e){t(e)}))}))})),N(this,"getLogs",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SIH_APP_LOG"},(function(t){e(t)}))}))})),N(this,"readAllNotification",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_READ_SIH_APP_LOG"},(function(t){e(t)}))}))})),N(this,"renderTextLog",(function(t){return"".concat(e._buyOrderErrorsEnum[t.error]?"".concat(e._buyOrderErrorsEnum[t.error]," <br>"):t.error||t.message||"".concat(SIHLang.sihAppMarket.orders.order," № ").concat(t.orderId," ").concat(SIHLang.sihAppMarket.orders.successful_operation," <br>")," ").concat(t.itemData?"".concat(t.itemData.market_hash_name," <br>"):""," ").concat(t.itemData?"".concat(SIHLang.sihAppMarket.orders.price,": ").concat(t.itemData.price," <br>"):"")})),N(this,"getLogTemplateByGroup",(function(e){var n;if("bookmarks"===e.groupType){var r=x.getLink(e.itemData.marketName||"buff163",e.itemData.appId||"730",e.itemData.market_hash_name,e.itemData.market_hash_name),a=v.A.getPriceFromCurrency(e.itemData.price,e.itemData.currencyId||1).text;n='\n          <div class="column gap-5 items-start pl-50">\n            <span class="text">'.concat(e.title,'</span>\n            <a href="').concat(r,'" target="_blank" class="text text_blue hover-opacity-8"\n              >').concat(e.itemData.market_hash_name,'</a\n            >\n          </div>\n          <div class="row gap-5 items-end pb-2">\n            \x3c!--                    TODO: Добавить проверку на data.itemData.marketName, если его нету, то иконку не рендерить (текущая иконка для теста)--\x3e\n            <img\n              class="notification-panel__icon"\n              src="chrome-extension://').concat(SIHID,"/assets/marketplace/mini-icons/").concat(e.itemData.marketName||"buff163",'.svg"\n              alt="').concat(e.itemData.marketName||"buff163",'"\n            />\n            <span class="text text_green whitespace-nowrap">').concat(a,"</span>\n          </div>\n        ")}else n='\n          <div class="column gap-5 items-start pl-50">\n            <span class="text">'.concat(SIHLang.notifications[e.title],'</span>\n            <span class="text ').concat(e.success?"text_green":"text_red",'">').concat(t.renderTextLog(e),"</span>\n          </div>\n        ");return n})),N(this,"validateInput",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return isNaN(e)||e<=n?n:e>=t?Math.ceil(t):r?Math.floor(1e3*e)/1e3:Math.ceil(e)})),N(this,"getSubscribeAdsMethods",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SUBSCRIBE_ADS_METHODS_SIH_APP"},(function(t){e(t)}))}))})),N(this,"getLinkForInvoice",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new Promise((function(n){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_CREATE_INVOICE",data:{amount:e,method:t}},(function(e){n(e)}))}))})),N(this,"updateTradeLink",(function(e){chrome.runtime.sendMessage(window.SIHID,{type:"BACKGROUND_UPDATE_TRADELINK_SIH_APP",data:{link:e}})})),N(this,"getSihAppToken",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SIH_APP_TOKEN"},(function(t){e(t)}))}))})),N(this,"getAutoLoadFloats",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_AUTO_LOAD_FLOATS"},(function(t){e(t)}))}))})),N(this,"errorHandler",(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Please, try again";r.toLowerCase().includes("invalid token or session is over")&&(e.text(SIHLang.subscribeAds.modal.reload_page),e.off("click").click((function(){window.location.reload()}))),0===n.length?t.append('<span class="sih-modal__text sih-modal__error_message">'.concat("Error! "+r,"</span>")):(n.text("".concat("Error! "+r)),n.hasClass("blink")?(n.removeClass("blink"),setTimeout((function(){n.addClass("blink")}),100)):n.addClass("blink")),e.removeClass("animated-background animated-background-btn"),t.show()})),this.getAllItemsBuyStackByName=e.getAllItemsBuyStackByName}return t=e,r=[{key:"setPreparedDataToBuyStack",value:function(t,n){var r=this;return new Promise((function(a,i){e.getAllItemsBuyStackByName(t).then((function(e){var o=N({},t,[].concat(T(e),T(n)));chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_BUY_STACK_SIH_APP",data:o},(function(e){e.success?r.getAllItemsBuyStackByName(t).then((function(e){a(e)})):i(e)}))}))}))}},{key:"getRarityColor",value:function(e,t,n){return new Promise((function(r,a){$J.ajax({url:"https://steamcommunity.com/economy/itemclasshover/".concat(e,"/").concat(t,"/").concat(n,"?content_only=1&l=english"),cache:!0}).done((function(e){var t=/BuildHover\( '(.*)', (.*)\);/i.exec(e);switch(JSON.parse(t[2]).tags.find((function(e){return"Rarity"===e.category})).name.toLowerCase()){case"consumer grade":case"base grade":r("b0c3d9");break;case"mil-spec grade":case"distinguished":case"high grade":r("4b69ff");break;case"industrial grade":r("5e98d9");break;case"restricted":case"exceptional":case"remarkable":r("8847ff");break;case"classified":case"superior":case"exotic":r("d32ce6");break;case"covert":case"extraordinary":case"master":r("eb4b4b");break;case"contraband":r("e4ae39")}})).fail((function(e){a(e)}))}))}},{key:"getAllItemsBuyStackByName",value:function(e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_BUY_STACK_BY_NAME_SIH_APP",data:{hashName:e}},(function(e){t(e)}))}))}}],(n=null)&&O(t.prototype,n),r&&O(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();N(H,"_buyOrderStatusEnum",{ordering:SIHLang.sihAppMarket.orders.statuses.ordering,pending:SIHLang.sihAppMarket.orders.statuses.pending,new:SIHLang.sihAppMarket.orders.statuses.new,created:SIHLang.sihAppMarket.orders.statuses.created,processing:SIHLang.sihAppMarket.orders.statuses.processing,sent:SIHLang.sihAppMarket.orders.statuses.sent,finished:SIHLang.sihAppMarket.orders.statuses.finished,failed:SIHLang.sihAppMarket.orders.statuses.failed,penalized:SIHLang.sihAppMarket.orders.statuses.penalized}),N(H,"_buyOrderErrorsEnum",{"Not enough balance":SIHLang.sihAppMarket.orders.errors.not_enough_balance,"Time for refills is up":SIHLang.sihAppMarket.orders.errors.time_refills_up,"receiver failed":SIHLang.sihAppMarket.orders.errors.receiver_failed,"max retries reached":SIHLang.sihAppMarket.orders.errors.max_retries_reached}),N(H,"_gameNames",{730:"Counter-Strike 2",252490:"Rust",440:"TF2"});const M=new H;var R,U=[];var B,j,G=function(){U.length||chrome.runtime.sendMessage(SIHID,{type:"GetLastTrades",data:{active_only:1,get_received_offers:1,get_sent_offers:1,get_descriptions:1}},(function(e){if(e.success){var t=F(e,location.href.includes("sent")?["trade_offers_sent"]:["trade_offers_received"]);W(e,t),V()}else $J(".filter_load-float--buttons").addClass("disabled"),$J(".float-info").removeClass("hidden"),$J(".float-info__text").text(""),$J(".setting-url").text(SIHLang.tradeoffers.filter.update_float_text_1)})),R&&R.length&&K(R)},F=function(e){var t=[];return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(n){e.response[n]&&e.response[n].forEach((function(e){if(e.items_to_give&&e.items_to_give.forEach((function(n){t.push({tradeofferid:e.tradeofferid,steamid:g_steamID,assetid:n.assetid,classid:n.classid})})),e.items_to_receive){var n=(r=e.accountid_other,"7656".concat(Number(r)+Number(1197960265728)));e.items_to_receive.map((function(r){t.push({tradeofferid:e.tradeofferid,steamid:n,assetid:r.assetid,classid:r.classid})}))}var r}))})),t},W=function(e,t){e.response.descriptions.forEach((function(e){var n=e.tags.find((function(e){return"WEAPON"===e.category.toUpperCase()||"TYPE_HANDS"===e.internal_name.toUpperCase()}));e.actions&&n&&t.forEach((function(t){e.classid===t.classid&&(e.actions[0].link=e.actions[0].link.replace("%assetid%",t.assetid).replace("%owner_steamid%",t.steamid),-1===U.findIndex((function(t){return t&&t.actions[0].link===e.actions[0].link}))&&U.push(e))}))}))},K=function(e){$J(".tradeoffer").each((function(t,n){var r=$J(n);r.find(".tradeoffer_items").each((function(t,n){var a=$J(n);a.find(".trade_item").each((function(t,n){var i,o=$J(n),s=o.attr("data-economy-item").split("/");if(5===s.length&&s.pop(),3===s.length||4===s.length){var c=s[2],l=s[3],d=e.find((function(e){return e.classid===c&&e.instanceid===l}));d&&!o.find(".float-value").length&&(o.find(".float-data").append('\n              <div class="float-item__row float-item__row transparent">\n                <span class="rating-pos">'.concat((i=d.iteminfo,i.globalRatingPos||i.localRatingPos?"#".concat(Math.abs(i.globalRatingPos?i.globalRatingPos:i.localRatingPos)):""),'</span>\n                <span class="paintseed">').concat(d.iteminfo.paintseed,'</span>\n              </div>\n              <div class="float-item__row">\n                <span class="float-value"\n                  >').concat(r.hasClass("minimized")?d.iteminfo.floatvalue.toFixed(4):r.hasClass("lite")&&a.hasClass("secondary")?d.iteminfo.floatvalue.toFixed(10):d.iteminfo.floatvalue.toFixed(13),"</span\n                >\n              </div>\n            ")),function(e,t){var n=window.location.pathname.match(/tradeoffer\/new/),r=e.description?e.description:e,a=r.market_hash_name,i=r.icon_url,o=window.KnifePhaseDetector.detect(a,i);if(o){var s,c="";a.includes("Gamma Doppler")?c+="gd-"+o.code:a.includes("Doppler")&&(c+="d-"+o.code),s=o.code.includes("phase")?"P"+o.code.slice(-1):o.name;var l=null,d=0;l=setInterval((function(){d++,(1===t.find(".item-info").length&&1===t.children(".item-info").length||n&&d>=10)&&(clearInterval(l),t.find(".phase-background").length||t.find("img").before('<div class="phase-background '.concat(c,'"></div>')),t.find(".phase-label").length||(n?t.find(".tradeoffer.float-data").length?t.find(".tradeoffer.float-data").prepend('<span class="trade phase-label">'.concat(s,"</span>")):t.find(".p-price").before('<span class="trade phase-label">'.concat(s,"</span>")):t.find(".item-info").prepend('<span class="phase-label">'.concat(s,"</span>"))))}),100)}}(d,o))}}))}))}))},V=function(){Promise.all(U.map((function(e,t){return new Promise((function(n,r){setTimeout((function(){e.actions[0].link&&z(e.actions[0].link).then((function(t){t?(e.iteminfo=t.iteminfo,n(e)):r()})).catch((function(){r()}))}),Math.floor(25*Math.random()+10)*(t+1))}))}))).then((function(e){e&&e.length&&(K(e),R=e)}))},z=function(e){return new Promise((function(t,n){chrome.runtime.sendMessage(SIHID,{type:"floatvalue",data:{link:e}},(function(e){e&&e.success?t(e):n(e)}))}))};function Y(){var e,t,n;e=$J(".sih_filter"),t=Xe(),n='\n    <div class="filter_load-price">\n      <a href="javascript:void(0)" class="filter_switcher-load-price '.concat(t.autoLoadMarketPrice?"on":"",'"></a>\n      <a href="javascript:void(0)" class="filter_load-price-market">\n        <span class="text text_tiny filter_load-price-market--text">').concat(SIHLang.market.requestPrice,'</span>\n        <span class="text text_tiny--fs7 filter_auto-load-price ').concat(t.autoLoadMarketPrice?"text_green":"",'"\n          >').concat(t.autoLoadMarketPrice?"".concat(SIHLang.market.auto):"".concat(SIHLang.market.manual),"</span\n        >\n      </a>\n    </div>\n  "),e.find(".filter_price").before(n),function(){var e=$J(".filter");e.find(".filter_switcher-load-price").off("click").click((function(){var e=$J(".filter_load-price-market"),t=$J(this);t.toggleClass("on"),e.children(".filter_auto-load-price").toggleClass("text_green"),t.hasClass("on")?e.children(".filter_auto-load-price").text("".concat(SIHLang.market.auto)):e.children(".filter_auto-load-price").text("".concat(SIHLang.market.manual)),Ne(!Xe().autoLoadMarketPrice)}))}(),function(){var e=$J(".filter");e.find(".filter_load-price-market").off("click").click($J.debounce(250,(function(){$J(this).hasClass("reload")?(SteamBySihSource._cache={},MarketplaceSource._cache={},$J(".sih_tradeoffer.single_price_loaded").each((function(e,t){!$J(t).hasClass("active_single_trade")&&$J(t).addClass("active_single_trade")}))):q("reload",!0),Xe().autoLoadMarketPrice||$J(".tradeoffer").removeClass("active_single_trade single_price_loaded"),fe(),de(),nt(),dt()})))}()}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"request",t=arguments.length>1?arguments[1]:void 0,n=$J(".tradeoffer.single_price_loaded"),r=$J(".filter_load-price-market");if(0!==n.length||window.location.href.includes("history")){n.find(".sih_tradeoffer_footer").find(".sih_load_price_single").each((function(t,n){var r=$J(n);r.hasClass("reload")||"reload"!==e||(r.addClass("reload"),r.text(SIHLang.tradeoffers.filter.reload)),"request"===e&&(r.removeClass("reload"),r.text(SIHLang.market.requestPrice))}))}else{var a=$J(".sih_tradeoffer_footer").find(".sih_load_price_single");r.hasClass("reload")||"reload"!==e||(r.addClass("reload"),r.find(".filter_load-price-market--text").text(SIHLang.tradeoffers.filter.reload),a.addClass("reload"),a.text(SIHLang.tradeoffers.filter.reload)),"request"===e&&(r.removeClass("reload"),r.find(".filter_load-price-market--text").text(SIHLang.market.requestPrice),a.removeClass("reload"),a.text(SIHLang.market.requestPrice))}t&&("reload"===e?(r.addClass("reload"),r.find(".filter_load-price-market--text").text(SIHLang.tradeoffers.filter.reload)):(r.removeClass("reload"),r.find(".filter_load-price-market--text").text(SIHLang.market.requestPrice)))}function Z(){!function(){$J(".tradeoffer_footer").each((function(){var e=$J(this).html().replace(/\|/," ");$J(this).html(e)})),$J(".tradeoffer_footer").contents().filter((function(){return 3===this.nodeType})).remove(),$J(".tradeoffer_footer").addClass("sih sih_tradeoffer_footer minimized"),$J(location).attr("pathname").includes("sent")||$J(".tradeoffer_footer_actions").append('<a class="accept_trade whiteLink" href="javascript:void(0);"><span>'.concat(SIHLang.tradeoffers.fast_accept,"</span></a>"));0===$J(".tradeoffer_footer").find(".tradeoffer_footer_actions").length&&$J(".tradeoffer_footer").prepend('<div class="tradeoffer_footer_actions"></div>')}(),setTimeout((function(){Q(),function(){var e=Xe();if(e&&e.mode&&"lite"===e.mode){$J(".profile_leftcol").find(".tradeoffer_footer").each((function(e,t){var n=$J(t),r=n.parent().find(".tradeoffer_items_ctn").css("background");n.find(".tradeoffer_footer_actions").find("a").css("background",r)}))}}(),$J(".profile_leftcol").find(".tradeoffer.lite.history").each((function(e,t){var n=$J(t),r=n.find(".tradeoffer_items_banner");n.find(".tradeoffer_footer").appendTo(r)}))}),100)}function Q(){var e=$J(".tradeoffer");0===e.find(".sih_load_price_single").length&&e.find(".tradeoffer_footer_actions").prepend('<a href="javascript:void(0)" class="whiteLink tradeoffer_footer_actions sih_load_price_single"\n        >'.concat(SIHLang.market.requestPrice,"</a\n      >")),e.find(".sih_load_price_single").click($J.debounce(250,(function(){var t,n=$J(this);n.hasClass("reload")?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e.find(".trade_item").each((function(e,t){if(t.rgItem){var n=t.rgItem.market_hash_name;Object.values(MarketplaceSource._cache).forEach((function(e){Object.values(e).forEach((function(e){e[n]&&delete e[n]}))})),Object.values(SteamBySihSource._cache.steam).forEach((function(e){e[n]&&delete e[n]}))}}))}(e.hasClass("lite history")?n.parent().parent().parent().parent():n.parent().parent().parent()):(n.addClass("reload"),n.text(SIHLang.tradeoffers.filter.reload));$J(".tradeoffer").removeClass("active_single_trade"),(t=e.hasClass("lite history")?n.parent().parent().parent().parent().parent():n.parent().parent().parent()).addClass("single_price_loaded active_single_trade"),fe(),de(),nt(t),dt(null,!1,!0,{name:"Steam",sort:13},t)})))}function X(){!function(){$J(".tradeoffer_items_ctn").addClass("sih_tradeoffer_items_ctn"),$J(".tradeoffer_items").addClass("sih_tradeoffer_items"),$J(".trade_item").addClass("sih_trade_item item");var e='\n    <div class="item-info">\n      <div class="float-data"></div>\n      <div class="p-price"></div>\n      <span class="animated-background small fake-price"></span>\n    </div>\n  ';$J(".trade_item").append(e)}(),$J(".sih_tradeoffer").find(".tradeoffer_item_list div").each((function(e,t){var n=$J(t);[n.attr("style")].includes("clear: left;")&&n.remove()}))}function ee(){setTimeout((function(){$J(".sih_tradeoffer.minimized").find(".tradeoffer_item_list").each((function(e,t){$J(t).find(".trade_item").each((function(e,t){e>=3&&$J(t).addClass("hidden"),3===e&&$J(t).after('\n          <div class="sih_trade_item show-items">\n            <div class="item_row">\n              <span class="text text_grey count-items"></span>\n            </div>\n            <div class="item_row">\n              <span class="item_dot"></span>\n              <span class="item_dot"></span>\n              <span class="item_dot"></span>\n            </div>\n          </div>\n        ')}))})),$J(".sih_tradeoffer.minimized").find(".tradeoffer_item_list").each((function(e,t){var n=$J(t).find(".trade_item.hidden");$J(t).find(".count-items").text("+".concat(n.length))})),$J(".sih_tradeoffer.minimized").find(".tradeoffer_item_list").each((function(e,t){$J(t).find(".show-items").click((function(){var e=this,t=$J(this).parent().parent().parent().find(".trade_item.hidden");$J(this).parent().parent().parent().find(".show-items").remove(),t.each((function(t,n){$J(n).hasClass("hidden")&&($J(n).removeClass("hidden"),$J(e).remove())}))}))}))}),100)}function te(){var e,t;!function(){var e=Ze();e.each((function(e,t){var n=$J(t).find(".tradeoffer_items_rule");0!==n.length||$J(t).hasClass("lite")?n.addClass("sih_tradeoffer_items_rule"):0!==$J(t).find(".tradeoffer_items_banner").length&&$J(t).append('<div class="tradeoffer_items_rule sih_tradeoffer_items_rule"></div>')}));var t='\n    <div class="sih_tradeoffer_items_rule_price">\n      <div class="row">\n        <div class="icons"></div>\n      </div>\n    </div>\n    <div class="sih_tradeoffer_items_rule_percent"></div>\n    <div class="sih_tradeoffer_items_rule_price">\n      <div class="row">\n        <div class="icons"></div>\n      </div>\n    </div>\n  ';$J(".sih_tradeoffer_items_rule").append(t),e.find(".sih_tradeoffer_items_rule_price").append('<span class="animated-background"></span>'),e.find(".sih_tradeoffer_items_rule_percent").append('<div class="animated-background-profit"></div>')}(),e=$J(".profile_leftcol"),t=window.location.href,e.find(".tradeoffer.lite").find(".sih_tradeoffer_items_rule").each((function(e,n){$J(n).find(".sih_tradeoffer_items_rule_price").each((function(e,n){var r=$J(n);if(t.includes("sent"))if(0===e){var a=r.parent().parent().find(".tradeoffer_items.primary").find(".trade_item").length;r.append('<span class="text text_small text_silver rule_lots"\n              >'.concat(SIHLang.tradeoffers.your_lots," (").concat(a," ").concat(SIHLang.tradeoffers.units,")</span\n            >"))}else{var i=r.parent().parent().find(".tradeoffer_items.secondary").find(".trade_item").length;r.append('<span class="text text_small text_silver rule_lots"\n              >'.concat(SIHLang.tradeoffers.lots," (").concat(i," ").concat(SIHLang.tradeoffers.units,")</span\n            >"))}else if(0===e){var o=r.parent().parent().find(".tradeoffer_items.primary").find(".trade_item").length;r.append('<span class="text text_small text_silver rule_lots"\n              >'.concat(SIHLang.tradeoffers.lots," (").concat(o," ").concat(SIHLang.tradeoffers.units,")</span\n            >"))}else{var s=r.parent().parent().find(".tradeoffer_items.secondary").find(".trade_item").length;r.append('<span class="text text_small text_silver rule_lots"\n              >'.concat(SIHLang.tradeoffers.your_lots," (").concat(s," ").concat(SIHLang.tradeoffers.units,")</span\n            >"))}}))}))}function ne(){$J(".sih_tradeoffer_header").append('<div class="column"></div>'),$J(".tradeoffer").each((function(e,t){var n=$J(t).find(".sih_tradeoffer_header").children(".column"),r=$J(t).find(".tradeoffer_items_rule");if($J(r).hasClass("tradeoffer_items_rule"))$J(r).appendTo(n);else{$J(t).find(".tradeoffer_items.primary").after('<div class="tradeoffer_items_rule"></div>');var a=$J(t).find(".tradeoffer_items_rule");$J(a).appendTo(n)}})),setTimeout((function(){var e=0;$J(".tradeoffer_item_list").each((function(t,n){var r;e=$J(n).find(".trade_item").length,$J(location).attr("pathname").includes("sent")?t%2==0?(r=$J(n).parent().parent().parent().children().children(".column").children().children(".sih_tradeoffer_items_rule_price")[0],$J(r).append('<span class="text text_small text_silver rule_lots"\n              >'.concat(SIHLang.tradeoffers.your_lots," (").concat(e," ").concat(SIHLang.tradeoffers.units,")</span\n            >"))):(r=$J(n).parent().parent().parent().children().children(".column").children().children(".sih_tradeoffer_items_rule_price")[1],$J(r).append('<span class="text text_small text_silver rule_lots"\n              >'.concat(SIHLang.tradeoffers.lots," (").concat(e," ").concat(SIHLang.tradeoffers.units,")</span\n            >"))):t%2==0?(r=$J(n).parent().parent().parent().children().children(".column").children().children(".sih_tradeoffer_items_rule_price")[0],$J(r).append('<span class="text text_small text_silver rule_lots"\n              >'.concat(SIHLang.tradeoffers.lots," (").concat(e," ").concat(SIHLang.tradeoffers.units,")</span\n            >"))):(r=$J(n).parent().parent().parent().children().children(".column").children().children(".sih_tradeoffer_items_rule_price")[1],$J(r).append('<span class="text text_small text_silver rule_lots"\n              >'.concat(SIHLang.tradeoffers.your_lots," (").concat(e," ").concat(SIHLang.tradeoffers.units,")</span\n            >")))}))}),1)}function re(){$J(".tradeoffer_items.primary").after('\n    <div class="sih_spliter">\n      <div class="horizontal_line"></div>\n      <div class="arrows"></div>\n      <div class="horizontal_line"></div>\n    </div>\n  ')}function ae(){!function(){var e,t=window.location.pathname,n=ue();e=n.size&&"minimized"!==n.size?'\n    <div class="fake-tradeoffer fake-tradeoffer-full">\n      <div class="header">\n        <div class="user">\n          <div class="row">\n            <div class="avatar"></div>\n            <div class="column">\n              <span class="text"></span>\n            </div>\n          </div>\n          <span class="text"></span>\n        </div>\n        <div class="rule">\n          <div class="column">\n            <div class="fake-lots"></div>\n            <div class="price"></div>\n          </div>\n          <div class="profit"></div>\n          <div class="column">\n            <div class="fake-lots"></div>\n            <div class="price"></div>\n          </div>\n        </div>\n        <div class="report"></div>\n      </div>\n      <div class="fake-lots">\n        <span class="text"></span>\n        <div class="row">\n          <span class="text"></span>\n          <span class="text"></span>\n          <span class="text"></span>\n        </div>\n      </div>\n      <div class="items">\n        <div class="item"></div>\n        <div class="item"></div>\n        <div class="item"></div>\n        <div class="item"></div>\n        <div class="item"></div>\n      </div>\n      <div class="spliter">\n        <div class="line"></div>\n        <div class="circle"></div>\n        <div class="line"></div>\n      </div>\n      <div class="fake-lots">\n        <span class="text"></span>\n        <div class="row">\n          <span class="text"></span>\n          <span class="text"></span>\n          <span class="text"></span>\n        </div>\n      </div>\n      <div class="items">\n        <div class="item"></div>\n        <div class="item"></div>\n        <div class="item"></div>\n        <div class="item"></div>\n        <div class="item"></div>\n      </div>\n      <div class="footer">\n        <div class="button"></div>\n        <div class="button"></div>\n        <div class="button"></div>\n      </div>\n    </div>\n  ':'\n    <div class="fake-tradeoffer fake-tradeoffer-minimized">\n      <div class="header">\n        <div class="user">\n          <div class="row">\n            <div class="avatar"></div>\n            <div class="column">\n              <span class="text"></span>\n              <span class="text"></span>\n              <span class="text"></span>\n            </div>\n          </div>\n        </div>\n        <div class="rule">\n          <div class="column">\n            <div class="fake-lots"></div>\n            <div class="price"></div>\n          </div>\n          <div class="column">\n            <div class="fake-lots"></div>\n            <div class="price"></div>\n          </div>\n        </div>\n      </div>\n      <div class="items">\n        <div class="column">\n          <div class="row">\n            <div class="item"></div>\n            <div class="item"></div>\n            <div class="item"></div>\n            <div class="item"></div>\n          </div>\n        </div>\n        <div class="column">\n          <div class="row">\n            <div class="item"></div>\n            <div class="item"></div>\n            <div class="item"></div>\n            <div class="item"></div>\n          </div>\n        </div>\n      </div>\n      <div class="footer">\n        <div class="button"></div>\n        <div class="button"></div>\n        <div class="button"></div>\n      </div>\n    </div>\n  ';$J(".filter").after(e),r=at(),$J(".fake-tradeoffer").css("top",r+22),t.includes("tradetopics")||t.includes("privacy")||$J(".fake-tradeoffer").show();var r}();var e=ue();$J(".tradeoffer").addClass("sih_tradeoffer minimized"),fe(),de(),$J(".tradeoffer").prepend('<div class="sih_tradeoffer_header"></div>'),$J(".sih_tradeoffer_header").append('<div class="sih_user"></div>'),$J(".tradeoffer").each((function(e,t){var n=$J(t).find(".btn_report"),r=$J(t).find(".sih_tradeoffer_header");setTimeout((function(){$J(n).appendTo(r)}),1)})),$J(".tradeoffer").each((function(e,t){var n=$J(t).find(".tradeoffer_footer");$J(n).each((function(e,n){var r=$J(n).contents().filter((function(){return 3===this.nodeType}))[1].nodeValue;$J(t).find(".sih_user").append('<span class="tradeoffer_expiries text text_tiny">'.concat(r,"</span>"))}))})),setTimeout((function(){B=$J(".tradeoffer").clone(!0,!0),$J(".profile_leftcol").append('<div class="tradeoffer_list"></div>'),$J(".tradeoffer_list").append(B),$J(".profile_leftcol > .tradeoffer").remove(),$J(".profile_leftcol > .tradeoffer_rule").remove(),j=$J(".tradeoffer_list").html(),me()}),1),setTimeout((function(){!function(e){"full"===e&&($J(".filter_page").each((function(e,t){$J(t).hasClass("full")&&$J(t).addClass("active").siblings().removeClass("active")})),ie(),oe(),ce(),_e(),pe(),re(),setTimeout((function(){ne()}),50));he(),setTimeout((function(){$J(".fake-tradeoffer").fadeOut("slow"),$J(".tradeoffer").fadeIn("slow"),$J(".sih_tradeoffer_footer").fadeIn("slow")}),300)}(e.size),be(),se(),e.autoLoadMarketPrice&&(nt(),dt())}),100),$J(".filter_page").each((function(e,t){var n=$J(t);n.on("click",(function(){var e,t;e=$J('.sorting_tradeoffers_select option[value="new"]'),t=e.text(),e.prop("selected",!0),$J("#ui-id-2-button").find(".ui-selectmenu-text").text(t),setTimeout((function(){$J(".tradeoffer").fadeIn("slow"),$J(".sih_tradeoffer_footer").fadeIn("slow"),be()}),100);var r=ue();$J(this).addClass("active").siblings().removeClass("active"),n.hasClass("full")?$J(".tradeoffer").hasClass("full")||(window.location.href.includes("history")?q("request",!0):q(),ge(),le(),ie(),oe(),ce(),_e(),ne(),pe(),re(),se(),fe(),de(),r.autoLoadMarketPrice&&(nt(),dt()),r.autoLoadFloat&&G(),Q(),ut(),he()):n.hasClass("minimized")&&($J(".tradeoffer").hasClass("minimized")||(window.location.href.includes("history")?q("request",!0):q(),ge(),le(),ie(),oe(),$J(".tradeoffer").removeClass("full"),$J(".tradeoffer").addClass("minimized"),$J(".tradeoffer_footer").addClass("minimized"),me(),fe(),de(),r.autoLoadMarketPrice&&(nt(),dt()),r.autoLoadFloat&&G(),Q(),ut(),he()))}))})),ge(),ut()}function ie(){$J(".tradeoffer_list").remove()}function oe(){$J(".profile_leftcol").append('<div class="tradeoffer_list"></div>'),$J(".tradeoffer_list").append(j)}function se(){$J(".offer_price").each((function(e,t){$J(t).click((function(){dt($J(this).parent().parent().parent().parent().children(".tradeoffer_item_list")),$J(this).parent().find(".icon").hasClass("reload")||$J(this).after('<a href="javascript:void(0);" class="icon reload reload-steam-price"></a>'),$J(".reload-steam-price").each((function(e,t){$J(t).click((function(e){if(!e.isDefaultPrevented()){e.preventDefault(),PriceQueue.StopQueue();var t=$J(this).parent().parent().parent().parent().children(".tradeoffer_item_list"),n=$J(this).parent().find(".steam-total-price");1===n.length&&$J(n).text(0),$J(t).find(".trade_item").each((function(e,t){$J(t).find(".p-price").children(".price_flag.original").attr("data-price","").find(".animated-background.silver").fadeIn("slow")})),dt(t,!0)}}))}))}))}))}function ce(){$J(".tradeoffer").addClass("full"),$J(".tradeoffer").removeClass("minimized"),$J(".tradeoffer_footer").removeClass("minimized")}function le(){var e=ue();$J(".filter_page").each((function(t,n){if($J(n).hasClass("active")&&(!e||!e.size||e.size)){var r=$J(n).attr("class").replace(/filter_page/g,"").replace(/active/g,"").trim();e.size=r;var a=JSON.stringify(e);localStorage.setItem("SIH_TRADEOFFER_ACTIVE_MODE",a)}}))}function de(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=ue();if(!t||!t.isMarketLoaded||t.isMarketLoaded){t.isMarketLoaded=e;var n=JSON.stringify(t);localStorage.setItem("SIH_TRADEOFFER_ACTIVE_MODE",n)}}function fe(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=ue();if(!t||!t.isMarketLoaded||t.isMarketLoaded){t.isSteamBySIHLoaded=e;var n=JSON.stringify(t);localStorage.setItem("SIH_TRADEOFFER_ACTIVE_MODE",n)}}function ue(){var e=localStorage.getItem("SIH_TRADEOFFER_ACTIVE_MODE")||"{}";return JSON.parse(e)}function me(){$J(".tradeoffer").each((function(e,t){$J(t).find(".sih_user").append('<div class="sih_user_row"></div>');var n=$J(t).find(".sih_user_row"),r=$J(t).find(".tradeoffer_partner"),a=$J(t).find(".tradeoffer_header");r.appendTo(n),a.appendTo(n);var i=$J(t).find(".tradeoffer_expiries");$J(i).appendTo(a)})),ne(),$J(".sih_tradeoffer_header").each((function(e,t){var n=$J(t).find(".btn_report");if(1===n.length){var r=n.attr("onclick").match(/'(\d*)',\s"(.+)"/)[2],a=r.match(/\\u[\w\d]{4}/g);$J(t).find(".tradeoffer_header").prepend('<span class="text">'.concat(a?st(r,a):r,"</span>"))}})),$J(location).attr("href").includes("sent")||$J(".tradeoffer_header").each((function(e,t){$J(t).contents().filter((function(){return 3===this.nodeType})).remove()})),$J(".sih_tradeoffer.minimized").find(".tradeoffer_header").each((function(e,t){var n=$J(t).parent().parent().parent().parent().find(".tradeoffer_message");1===n.length&&$J(t).prepend('<div class="text text_tiny text_italic text_blue message-controller">'.concat(SIHLang.tradeoffers.show_message,"</div>")),$J(t).find(".message-controller").click((function(){var e=$J(this);n.toggleClass("show"),n.hasClass("show")?e.text("".concat(SIHLang.tradeoffers.hide_message)):e.text("".concat(SIHLang.tradeoffers.show_message))}))})),ee(),$J(".tradeoffer.minimized").each((function(e,t){var n=$J(t).find(".tradeoffer_items_banner");1===n.length&&($J(t).find(".tradeoffer_items_banner").remove(),$J(t).addClass("history"),$J(t).find(".sih_tradeoffer_footer").addClass("history"),$J(t).find(".sih_tradeoffer_footer").append(n))}))}function pe(){$J(".tradeoffer_item_list").each((function(e,t){$J(t).find(".trade_item").hasClass("trade_item")||$J(t).parent().find(".tradeoffer_items_header").find(".row").remove()}))}function _e(){$J(".tradeoffer").each((function(e,t){var n=$J(t).find(".sih_user");$J(n).append('<div class="sih_user_row"></div>');var r=$J(t).find(".sih_user_row"),a=$J(t).find(".tradeoffer_partner"),i=$J(t).find(".tradeoffer_header");$J(a).appendTo(r),$J(i).appendTo(r)}))}function he(){var e=$J(location).attr("pathname");$J(".tradeoffer").each((function(t,n){var r=$J(n).find(".sih_user_row");if(e.includes("sent")){var a=$J(n).find(".tradeoffer_avatar");$J(a[1]).hasClass("tiny")&&$J(a[1]).removeClass("tiny"),$J(a[1]).prependTo(r)}}))}function ve(){var e=0,t=[];return($J(".tradeoffer.active_single_trade").length>0?$J(".tradeoffer.active_single_trade"):$J(".tradeoffer")).find(".tradeoffer_item_list").each((function(n,r){if(0===$J(r).find(".trade_item").length)e=0,t.push(e);else{e=0;var a=new RegExp("[0-9]*[.,]?[0-9]+");$J(r).children(".trade_item").find(".price_flag").each((function(t,n){if($J(n).hasClass("steam")||$J(n).hasClass("dmarket")||$J(n).hasClass("buff163")||$J(n).hasClass("bitskins")||$J(n).hasClass("skinport")||$J(n).hasClass("mannco")){var r=$J(n).data("price");r=r.match(a),e+=Number(r)}})),t.push(e.toFixed(2))}})),t}function ge(){setTimeout((function(){$J(".tradeoffer").each((function(e,t){1===$J(t).find(".tradeoffer_items_banner").length&&$J(t).append('<div class="sih_inactive"></div>')})),$J(".tradeoffer").mouseenter((function(){$J(this).find(".sih_inactive").css("opacity",0),$J(this).find(".tradeoffer_items_ctn").removeClass("inactive"),$J(this).find(".sih_tradeoffer_items_ctn").css("z-index",6),$J(this).find(".sih_user").css("z-index",6),$J(this).find(".sih_tradeoffer_items_rule").css("z-index",7)})),$J(".tradeoffer").mouseleave((function(){$J(this).find(".sih_inactive").css("opacity",.5),$J(this).find(".sih_tradeoffer_items_ctn").css("z-index",0),$J(this).find(".sih_user").css("z-index",0),$J(this).find(".sih_tradeoffer_items_rule").css("z-index",0)}))}),100)}function be(){var e=$J(".profile_leftcol"),t=e.find(".tradeoffers_view_more");e.find(".tradeoffer_list").after(t)}function ye(){var e,t,n=Xe();e=$J(".sih_filter"),t='\n    <div class="filter_price">\n      <select id="filter_price_select" class="filter_price_select"></select>\n    </div>\n  ',e.find(".filter--left-side").append(t),["steam","buff163","dmarket","bitskins","skinport","mannco"].forEach((function(e){$J(".filter_price_select").append('<option class="filter_price_option '.concat(e,'"><span>').concat("steam"===e?"Steam (bySIH)":e,"</span></option>"))})),$J.widget("custom.selectMenuWithIcons",$J.ui.selectmenu,{_renderItem:function(e,t){var n=$J("<li>",{class:t.element.attr("class"),value:t.element.attr("value")}),r=$J("<div>",{text:t.label});return t.disabled&&n.addClass("ui-state-disabled"),n.append(r).appendTo(e)}}),$J(".filter_price_select").selectMenuWithIcons({position:{my:"left top",at:"left bottom+10",using:function(e,t){$J(this).css(e),$J(this).addClass("filter_price_widget_content")}}}),Ie(n.market),Se(n.market),$J("#filter_price_select-button").click((function(){var e=Xe();$J(".filter_price_widget_content").find(".filter_price_option").each((function(t,n){$J(n).off("click").click((function(){var t=$J(this).attr("class").replace(/ui-menu-item|filter_price_option/g,"").trim();Ie(t),Se(t),"steam"===t&&fe(),e.autoLoadMarketPrice&&(de(),nt(),setTimeout((function(){De(t)}),100))}))}))}))}function Se(e){setTimeout((function(){$J("#filter_price_select-button").find(".ui-selectmenu-text").addClass(e)}),1)}function Ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"steam",t=Xe();if(!t||!t.market||t.market){t.market=e;var n=JSON.stringify(t);localStorage.setItem("SIH_TRADEOFFER_ACTIVE_MODE",n)}}function ke(){var e,t;e=$J(".sih_filter"),t='\n    <div class="sorting_tradeoffers">\n      <select id="sorting_tradeoffers_select" class="sorting_tradeoffers_select">\n        <option class="sorting_tradeoffers_option" value="new"><span>'.concat(SIHLang.tradeoffers.filter.sort.time_new,'</span></option>\n        <option class="sorting_tradeoffers_option" value="old"><span>').concat(SIHLang.tradeoffers.filter.sort.time_old,'</span></option>\n        <option class="sorting_tradeoffers_option" value="profit_desc"><span>').concat(SIHLang.tradeoffers.filter.sort.profit_desc,'</span></option>\n        <option class="sorting_tradeoffers_option" value="profit_asc"><span>').concat(SIHLang.tradeoffers.filter.sort.profit_asc,'</span></option>\n        <option class="sorting_tradeoffers_option" value="name_asc"><span>').concat(SIHLang.tradeoffers.filter.sort.name_asc,'</span></option>\n        <option class="sorting_tradeoffers_option" value="name_desc"><span>').concat(SIHLang.tradeoffers.filter.sort.name_desc,"</span></option>\n      </select>\n    </div>\n  "),e.find(".filter_load-price").before(t),$J.widget("custom.selectMenuWithIcons",$J.ui.selectmenu,{_renderItem:function(e,t){var n=$J("<li>",{class:t.element.attr("class"),value:t.element.attr("value")}),r=$J("<div>",{text:t.label});return t.disabled&&n.addClass("ui-state-disabled"),xe()||"profit_desc"!==t.value&&"profit_asc"!==t.value||r.append('<span class="sih_need-load-price">'.concat(SIHLang.tradeoffers.filter.sort.price_request,"</span>")),n.append(r).appendTo(e)}}),$J(".sorting_tradeoffers_select").selectMenuWithIcons({position:{my:"left top",at:"left bottom+10",using:function(e,t){$J(this).css(e),$J(this).addClass("sorting_tradeoffers_widget_content")}}}),function(){var e=$J(".sih_filter"),t=e.find("#sorting_tradeoffers_select-button");t.click((function(){$J(".sorting_tradeoffers_widget_content").find(".sorting_tradeoffers_option").each((function(e,t){var n=$J(t),r=xe();"profit_desc"!==n.attr("value")&&"profit_asc"!==n.attr("value")||(r?n.find(".sih_need-load-price").remove():0===n.find(".sih_need-load-price").length&&n.find(".ui-menu-item-wrapper").append('<span class="sih_need-load-price">'.concat(SIHLang.tradeoffers.filter.sort.price_request,"</span>"))),n.off("click").click((function(){switch($J(this).attr("value")){case"new":Ce(-1);break;case"old":Ce(1);break;case"profit_desc":$e(-1);break;case"profit_asc":$e(1);break;case"name_asc":window.location.href.includes("sent")?we(1):Je(1);break;case"name_desc":window.location.href.includes("sent")?we(-1):Je(-1)}}))}))}))}()}function Ce(e){var t="lite"!==Xe().mode?$J(".tradeoffer_list"):$J(".profile_leftcol"),n=t.find(".tradeoffer");n.sort((function(t,n){var r=$J(t).attr("id").substring(13)||0,a=$J(n).attr("id").substring(13)||0;return Number(r)>Number(a)?1*e:Number(r)<Number(a)?-1*e:0})),n.detach().appendTo(t)}function $e(e){var t=Xe(),n="lite"!==t.mode?$J(".tradeoffer_list"):$J(".profile_leftcol"),r=n.find(".tradeoffer");if(xe()||t.isMarketLoaded||t.isSteamBySIHLoaded)r.sort((function(t,n){var r=$J(t).find(".sih_tradeoffer_items_rule_percent"),a=$J(n).find(".sih_tradeoffer_items_rule_percent"),i=(r.hasClass("lose")?-r.attr("data-profit-percent"):+r.attr("data-profit-percent"))||0,o=(a.hasClass("lose")?-a.attr("data-profit-percent"):+a.attr("data-profit-percent"))||0;return i>o?1*e:i<o?-1*e:0})),r.detach().appendTo(n);else{!t.autoLoadMarketPrice&&window.location.href.includes("history")&&(r.length>10&&(r.length=10),r.each((function(e,t){$J(t).addClass("active_single_trade single_price_loaded")}))),t.autoLoadMarketPrice||$J(".tradeoffer").removeClass("active_single_trade single_price_loaded"),fe(),de(),nt(),dt();var a=setInterval((function(){var t=Xe();t.isMarketLoaded&&t.isSteamBySIHLoaded&&"steam"!==t.market&&(clearInterval(a),setTimeout((function(){return $e(e)}),300)),t.isSteamBySIHLoaded&&"steam"===t.market&&(clearInterval(a),setTimeout((function(){return $e(e)}),300))}),100)}}function Je(e){var t="lite"!==Xe().mode?$J(".tradeoffer_list"):$J(".profile_leftcol"),n=t.find(".tradeoffer");n.sort((function(t,n){var r=$J(t).find(".btn_report"),a=$J(n).find(".btn_report"),i=Pe(r),o=Pe(a);return 1===e?i.toUpperCase().localeCompare(o.toUpperCase()):o.toUpperCase().localeCompare(i.toUpperCase())})),n.detach().appendTo(t)}function we(e){var t=Xe().mode,n="lite"!==t?$J(".tradeoffer_list"):$J(".profile_leftcol"),r=n.find(".tradeoffer");r.sort((function(n,r){var a="lite"!==t?$J(n).find(".tradeoffer_items.secondary .sih_lot"):$J(n).find(".tradeoffer_items.secondary .tradeoffer_items_header"),i="lite"!==t?$J(r).find(".tradeoffer_items.secondary .sih_lot"):$J(r).find(".tradeoffer_items.secondary .tradeoffer_items_header"),o=Ae(a),s=Ae(i);return 1===e?o.toUpperCase().localeCompare(s.toUpperCase()):s.toUpperCase().localeCompare(o.toUpperCase())})),r.detach().appendTo(n)}function Pe(e){if(1===e.length){var t=e.attr("onclick").match(/'(\d*)',\s"(.+)"/)[2],n=t.match(/\\u[\w\d]{4}/g);return n?st(t,n):t}}function Ae(e){if(1===e.length)return e.contents()[0].data}function xe(){var e=$J(".sih_tradeoffer"),t=!1;return e.find(".sih_tradeoffer_items_rule_percent").each((function(e,n){$J(n).attr("data-profit-percent")&&(t=!0)})),t}function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Te(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Le(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e){var t,n;t=e,($J(".sih_tradeoffer.active_single_trade").length>0?$J(".sih_tradeoffer.active_single_trade"):$J(".sih_tradeoffer")).each((function(e,n){$J(n).children(".tradeoffer_items_ctn").children(".tradeoffer_items").each((function(e,n){if(0!==$J(n).children(".tradeoffer_item_list").find(".trade_item").length){var r=[],a=$J(n).find(".price_flag");$J(a).each((function(e,t){if(!$J(t).hasClass("original")){var n=$J(t).attr("class").replace(/price_flag /g,"").replace(/default/g,"");0!==r.length&&r.includes(n)||r.push(n)}}));var i=$J(n).find(".sih_lot_item");$J(i).each((function(e,n){1===e&&($J(n).find(".icon").remove(),$J(r).each((function(e,r){t.toLowerCase()===r?$J(n).append('<span class="icon '.concat(r,'"></span>')):$J(n).prepend('<span class="icon '.concat(r,'"></span>'))})))}))}}))})),function(e){($J(".sih_tradeoffer.active_single_trade").length>0?$J(".sih_tradeoffer.active_single_trade"):$J(".sih_tradeoffer")).each((function(t,n){var r=[];$J(n).children(".tradeoffer_items_ctn").children(".tradeoffer_items").each((function(t,a){if(0!==$J(a).children(".tradeoffer_item_list").find(".trade_item").length){var i=$J(a).find(".price_flag");$J(i).each((function(e,t){if(!$J(t).hasClass("original")){var n=$J(t).attr("class").replace(/price_flag /g,"").replace(/default/g,"");0!==r.length&&r.includes(n)||r.push(n)}}));var o=$J(n).find(".sih_tradeoffer_items_rule_price");$J(o).each((function(n,a){t===n&&($J(a).find(".icon").remove(),$J(r).each((function(t,n){e.toLowerCase()===n?$J(a).children(".row").children(".icons").append('<span class="icon '.concat(r[t],'"></span>')):$J(a).children(".row").children(".icons").prepend('<span class="icon '.concat(r[t],'"></span>'))})))}))}}))}))}(e),n=ve(),($J(".tradeoffer.active_single_trade").length>0?$J(".tradeoffer.active_single_trade"):$J(".tradeoffer")).find(".sih_tradeoffer_items_rule_price").each((function(e,t){$J(t).find(".rule_total_price").remove();var r=v.A.getCurrency(currencyId),a=Number(n[e]).toLocaleString("ru-RU").replace(/,/,".").trim().split(".");$J(t).children(".row").append('<div class="rule_total_price" data-total-price="'.concat(n[e],'">\n          <span class="text">').concat(a[0],"</span>\n        </div>")),a.length>1&&$J(t).children(".row").find(".rule_total_price").append('<span class="text text_light">.'.concat(a[1],"</span>")),r.bSymbolIsPrefix?$J(t).children(".row").find(".rule_total_price").prepend('<span class="text">'.concat(r.strSymbol," </span>")):$J(t).children(".row").find(".rule_total_price").append('<span class="text"> '.concat(r.strSymbol,"</span>"))})),function(){var e=ve();($J(".sih_tradeoffer.active_single_trade").length>0?$J(".sih_tradeoffer.active_single_trade"):$J(".sih_tradeoffer")).find(".sih_lot").each((function(t,n){0!==$J(n).parent().find(".trade_item").length&&$J(n).find(".sih_lot_item").each((function(n,r){if(1===n){$J(r).find(".text").remove();var a=v.A.getPriceFromCurrency(Number(e[t]),currencyId,currencyId).text;$J(r).append('<span class="text">'.concat(a,"</span>"))}}))}))}(),($J(".sih_tradeoffer.active_single_trade").length>0?$J(".tradeoffer.active_single_trade"):$J(".tradeoffer")).each((function(e,t){var n,r=[];$J(t).find(".rule_total_price").each((function(e,t){var n=$J(t).data().totalPrice;r.push(Number(n))}));var a=$J(t).find(".sih_tradeoffer_items_rule_percent");if($J(a).find(".text").remove(),$J(a).hasClass("normal")?$J(a).removeClass("normal"):$J(a).hasClass("profit")?$J(a).removeClass("profit"):$J(a).hasClass("lose")&&$J(a).removeClass("lose"),$J(location).attr("href").includes("sent"))if(0===r[0]&&0===r[1])$J(a).prepend('<span class="text rule-percent">0</span>'),$J(a).attr("data-profit-price","0"),$J(a).attr("data-profit-percent","0");else if(0===r[0]){n=100,a.addClass("profit"),$J(a).prepend('<span class="text rule-percent">'.concat(Math.abs(n),"%</span>"));var i=v.A.getPriceFromCurrency(Number(r[1]),currencyId,currencyId).text;$J(a).attr("data-profit-price","".concat(i)),$J(a).attr("data-profit-percent","".concat(Math.abs(n)))}else if(0===r[1]){n=-100,a.addClass("lose"),$J(a).prepend('<span class="text rule-percent">'.concat(Math.abs(n),"%</span>"));var o=v.A.getPriceFromCurrency(Number(r[0]),currencyId,currencyId).text;$J(a).attr("data-profit-price","-".concat(o)),$J(a).attr("data-profit-percent","".concat(Math.abs(n)))}else{n=100*r[1]/r[0]-100,$J(a).prepend('<span class="text rule-percent">'.concat(Math.abs(n.toFixed(2)),"%</span>"));var s=v.A.getPriceFromCurrency(Number((r[1]-r[0]).toFixed(2)),currencyId,currencyId).text;$J(a).attr("data-profit-price","".concat(s)),$J(a).attr("data-profit-percent","".concat(Math.abs(n))),n>3?($J(a).find(".text").text("".concat(Math.abs(n.toFixed(2)),"%")),$J(a).attr("data-profit-percent","".concat(Math.abs(n))),$J(a).addClass("profit")):n<-3?$J(a).addClass("lose"):n>-3&&n<3&&$J(a).addClass("normal")}else if(0===r[0]&&0===r[1])$J(a).prepend('<span class="text rule-percent">0</span>'),$J(a).attr("data-profit-price","0"),$J(a).attr("data-profit-percent","0");else if(0===r[1]){n=100,a.addClass("profit"),$J(a).prepend('<span class="text rule-percent">'.concat(Math.abs(n),"%</span>"));var c=v.A.getPriceFromCurrency(Number(r[0]),currencyId,currencyId).text;$J(a).attr("data-profit-price","".concat(c)),$J(a).attr("data-profit-percent","".concat(Math.abs(n)))}else if(0===r[0]){n=-100,a.addClass("lose"),$J(a).prepend('<span class="text rule-percent">'.concat(Math.abs(n),"%</span>"));var l=v.A.getPriceFromCurrency(Number(r[1]),currencyId,currencyId).text;$J(a).attr("data-profit-price","-".concat(l)),$J(a).attr("data-profit-percent","".concat(Math.abs(n)))}else{n=100*r[0]/r[1]-100,$J(a).prepend('<span class="text rule-percent">'.concat(Math.abs(n.toFixed(2)),"%</span>"));var d=v.A.getPriceFromCurrency(Number((r[0]-r[1]).toFixed(2)),currencyId,currencyId).text;$J(a).attr("data-profit-price","".concat(d)),$J(a).attr("data-profit-percent","".concat(Math.abs(n))),n>3?($J(a).find(".text").text("".concat(Math.abs(n.toFixed(2)),"%")),$J(a).addClass("profit")):n<-3?$J(a).addClass("lose"):n>-3&&n<3&&$J(a).addClass("normal")}})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"steam",t=$J(".sih_tradeoffer.active_single_trade").length>0?$J(".sih_tradeoffer.active_single_trade"):$J(".sih_tradeoffer"),n=new RegExp("[0-9]*[.,]?[0-9]+");t.each((function(t,r){$J(r).children(".tradeoffer_items_ctn").children(".tradeoffer_items").each((function(t,a){var i={};if(0!==$J(a).children(".tradeoffer_item_list").find(".trade_item").length){var o=$J(a).find(".price_flag");$J(o).each((function(e,t){if($J(t).hasClass("steam")||$J(t).hasClass("dmarket")||$J(t).hasClass("buff163")||$J(t).hasClass("bitskins")||$J(t).hasClass("skinport")||$J(t).hasClass("mannco")){var r=$J(t).attr("class").replace(/price_flag /g,"").replace(/default/g,"").trim(),a=t.dataset.price.match(n);i[r]||Object.keys(i)==r?(i[r].price+=Number(a),i[r].count++):i=Object.assign(i,Te({},r,{price:Number(a),count:1}))}}));var s=$J(r).find(".sih_tradeoffer_items_rule_price");$J(s).each((function(n,r){if(t===n){$J(r).find(".tooltip").remove(),$J(r).append('\n                <div class="tooltip">\n                  <div class="tooltip-title">'.concat(SIHLang.tradeoffers.cost,'</div>\n                  <div class="tooltip-column"></div>\n                </div>\n              '));var a=$J(r).find(".tooltip .tooltip-column");for(var o in i){var s=v.A.getPriceFromCurrency(Number(i[o].price.toFixed(2)),currencyId,currencyId).text;o===e?a.prepend('<div class="tooltip-row">\n                      <span>'.concat(SIHLang.tradeoffers.items," ").concat(i[o].count,'</span> <span class="icon ').concat(o,'"></span\n                      ><span>').concat(s,"</span>\n                    </div>")):a.append('<div class="tooltip-row">\n                      <span>'.concat(SIHLang.tradeoffers.items," ").concat(i[o].count,'</span> <span class="icon ').concat(o,'"></span\n                      ><span>').concat(s,"</span>\n                    </div>"))}}}))}}))}))}(e),($J(".sih_tradeoffer.active_single_trade").length>0?$J(".tradeoffer.active_single_trade"):$J(".tradeoffer")).each((function(e,t){var n,r=$J(t).find(".sih_tradeoffer_items_rule_percent");r.find(".profit_info").remove(),n=$J(r[0]).data()?r[0].dataset.profitPrice:0,r.hasClass("profit")?r.append('<span class="profit_info">+'.concat(n,"</span>")):r.append('<span class="profit_info">'.concat(n,"</span>"))})),($J(".tradeoffer.active_single_trade").length>0?$J(".tradeoffer.active_single_trade"):$J(".tradeoffer")).each((function(e,t){var n,r=$J(t).find(".sih_tradeoffer_items_rule_percent"),a=$J(t).find(".accept_trade");a.find(".profit-price").remove(),n=$J(r[0]).data()?r[0].dataset.profitPrice:0,r.hasClass("profit")?a.append('<span class="profit-price profit">+'.concat(n,"</span>")):a.append('<span class="profit-price lose">'.concat(n,"</span>"))})),q("reload")}function Oe(){var e,t=Xe();!function(){var e=$J(location).attr("href"),t=Xe(),n='\n    <div class="sih_filter filter  '.concat("lite"===t.mode?"absolute":"",'">\n      <div class="filter_column">\n        ').concat("lite"!==t.mode?'\n           <div class="filter_row">\n                <span class="text text_bold"> '.concat(e.includes("sent")?SIHLang.tradeoffers.filter.title_sent:SIHLang.tradeoffers.filter.title_incoming,"</span>\n           </div>\n        "):"",'\n\n        <div class="filter_row filter_row--between">\n          <div class="filter_row filter--left-side"></div>\n\n          ').concat("lite"!==t.mode?'<div class="filter_row">\n             <button class="filter_page minimized active">\n              <svg width="17" height="14" viewBox="0 0 17 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path d="M0 0V2H17V0H0ZM0 6H17V4H0V6ZM0 14H17V12H0V14ZM0 10H17V8H0V10Z" fill="white"/>\n              </svg>\n            </button>\n            <button class="filter_page full">\n              <svg width="18" height="14" viewBox="0 0 18 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path d="M0 0H18V6H0V0ZM0 8H18V14H0V8Z" fill="white"/>\n              </svg>\n            </button>\n          </div>':"","\n        </div>\n      </div>\n    </div>\n  ");e.match("privacy")||e.includes("tradetopics")||("lite"!==t.mode?$J(".profile_leftcol").prepend(n):$J(".profile_small_header_texture").append(n))}(),ye(),Y(),ke(),e=at(),$J(".filter").height(e+10),function(){var e=Xe();if(!e.markets||e.markets){var t=["steam","buff163","dmarket","bitskins","skinport","mannco"];e.markets=t||[];var n=JSON.stringify(e);localStorage.setItem("SIH_TRADEOFFER_ACTIVE_MODE",n)}}(),Ne(t.autoLoadMarketPrice)}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Xe();if(!t||!t.autoLoadMarketPrice||t.autoLoadMarketPrice){t.autoLoadMarketPrice=e;var n=JSON.stringify(t);localStorage.setItem("SIH_TRADEOFFER_ACTIVE_MODE",n)}}function De(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={};Ze().find(".trade_item").each((function(t,r){r.rgItem&&ExternalPrices[r.rgItem.appid]&&(n=Object.assign(n,ExternalPrices[r.rgItem.appid].apis.find((function(t){return t.name.toLowerCase()===e}))),0===Object.keys(n).length&&(n=Object.assign(n,ExternalPrices[730].apis.find((function(t){return t.name.toLowerCase()===e})))))})),dt(null,!1,!0,n,t)}function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function Me(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Re(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=He(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=He(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==He(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ge,Fe={},We=10,Ke=0,Ve=[];function ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Ze();e?(t.length=e,t.addClass("single_price_loaded active_single_trade"),Ge=t.find(".trade_item").length):Ge=t.find(".trade_item").length}function Ye(e,t,n,r){Ke++;var a=0,i=1;if(t){if(e.rgItem=Be(Be({},t),{},{prefix:n}),$J(e).addClass("app".concat(e.rgItem.appid)),"730"===e.rgItem.appid){var o,s=Me(e.rgItem.descriptions);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(c.value.includes("sticker_info")){var l=c.value,d=$J.parseHTML(l);a=$J(d[1]).find("img").length;var f='<div class="sih_trade_item_sticker">\n                            <span>'.concat(a,"</span>\n                         </div>");$J(e).append(f)}}}catch(e){s.e(e)}finally{s.f()}}var u=e.rgItem.appid;0!==Ve.length&&Ve.includes(u)||Ve.push(u);var m=$J(".tradeoffer.active_single_trade");if(m.length>=1){var p=[];m.each((function(e,t){var n=$J(t);Ve.forEach((function(e){0!==n.find("div.item.app".concat(e)).length&&(p.includes(e)||p.push(e))}))})),Ve=p}Ke===Ge&&(r.name&&"steam"===r.name.toLowerCase()?$J(Ve).each((function(e,t){r.nameForApi="steamLiveSell",MarketplaceSource.GetPrices(t,{market:r.name,currencies:[],nameMarkerForApi:r.nameForApi,marketSort:r.sort},!1,(function(){if(i!==Ve.length)i++;else{var e=Xe();e.isSteamBySIHLoaded=!0,et(e)}}),!0)})):$J(Ve).each((function(e,t){MarketplaceSource.GetPrices(t,{market:r.name,currencies:[],nameMarkerForApi:r.nameForApi,marketSort:r.sort},!1,(function(){if(i!==Ve.length)i++;else{var e=Xe();e.isMarketLoaded=!0,et(e)}}),!0)})))}}function qe(){return["steam","buff163","dmarket","bitskins","skinport","mannco"]}function Ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)return Ge=e.find(".trade_item").length,e;var t=$J(".tradeoffer.single_price_loaded");if(0===t.length){var n=$J(".tradeoffer");return Ge=n.find(".trade_item").length,n}return Ge=t.find(".trade_item").length,t}function Qe(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;if(e.rgItem)n?Ye(e,e.rgItem,e.rgItem.prefix,r):(e.inited=!0,lt(e.rgItem.prefix,e.rgItem,e));else{var a=t.split("/");if(5===a.length&&a.pop(),3==a.length||4==a.length){n||(e.inited=!0);var i=null,o=a[0];if("classinfo"==o){i="economy/itemclasshover/"+(o=a[1])+"/"+a[2]+"/"+(a.length>3?a[3]:0),i+="?content_only=1&l=english"}else{var s=a[1],c=a[2];if(null!=Fe[o+"/"+s+"/"+c])return;i="economy/itemhover/"+o+"/"+s+"/"+c;if(i+="?content_only=1&omit_owner=1&l=english",4==a.length&&a[3]){var l=a[3];0==l.indexOf("id:")?i+="&o_url="+l.substr(3):i+="&o="+l}}$J.ajax({url:window.location.protocol+"//steamcommunity.com/"+i,cache:!0,data:{l:"english"}}).done((function(t){var a=/BuildHover\( '(.*)', (.*)\);/i.exec(t);if(null!==a){var i=a[1],o=JSON.parse(a[2]);n?Ye(e,o,i,r):lt(i,o,e)}})).error((function(t){Ye(e,null,null,r)}))}}}function Xe(){var e=localStorage.getItem("SIH_TRADEOFFER_ACTIVE_MODE")||"{}";return JSON.parse(e)}function et(e){var t=JSON.stringify(e);localStorage.setItem("SIH_TRADEOFFER_ACTIVE_MODE",t)}function tt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?Ze(e):Ze();setTimeout((function(){t.find(".animated-background").fadeOut(),t.find(".animated-background-profit").fadeOut(),t.find(".p-price").show(),t.find(".rule_total_price").css("opacity",1),t.find(".icons").css("opacity",1),t.find(".sih_tradeoffer_items_rule_percent span").css("opacity",1),t.find(".sih_lot_item").each((function(e,t){$J(t).children(".icon").css("opacity",1),$J(t).children(".text").css("opacity",1)}))}),500)}function nt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e?Ze(e):Ze();window.location.href.includes("history")&&t.length>We&&(t.length=We),t.hasClass("lite")||(t.find(".animated-background").fadeIn(),t.find(".animated-background-profit").fadeIn()),t.find(".p-price").hide(),t.find(".sih_tradeoffer_items_rule_percent span").height(50),t.find(".sih_tradeoffer_items_rule_percent span").css("opacity",0),t.find(".rule_total_price").css("opacity",0),t.find(".icons").css("opacity",0),t.find(".sih_lot_item").each((function(e,t){$J(t).children(".icon").css("opacity",0),$J(t).children(".text").css("opacity",0)}))}function rt(){Ze().each((function(e,t){var n=$J(t).find(".sih_tradeoffer_items_rule_percent");n[0]&&"100"===n[0].dataset.profitPercent&&n.hasClass("profit")?$J(t).addClass("profit"):$J(t).removeClass("profit")}))}function at(){var e;return $J(".rightcol_controls_content").each((function(t,n){0===t&&(e=$J(n).outerHeight())})),e}function it(){var e=window.location.href,t=$J("body").prop("outerHTML"),n=["sent/?history=1","privacy","tradetopics"].find((function(t){return e.includes(t)}));n||(e.includes("tradeoffers/?history=1")?chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_TRADEOFFER_THROUGH_PARSING",data:{endPoint:"tradeoffers/?history=1",txtResponse:t}}):e.includes("tradeoffers/sent")?chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_TRADEOFFER_THROUGH_PARSING",data:{endPoint:"tradeoffers/sent",txtResponse:t}}):chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_TRADEOFFER_THROUGH_PARSING",data:{endPoint:"tradeoffers",txtResponse:t}}))}function ot(){$J(".tradeoffer_footer").find("a").click((function(){var e=$J(this).attr("href");if(e.match(/DeclineTradeOffer/g)){var t=e.match(/\d+/g)[0];setTimeout((function(){$J(".newmodal_content").find(".btn_green_steamui.btn_medium").click((function(){chrome.runtime.sendMessage(window.SIHID,{type:"BACKGROUND_TRADE_DECLINE",data:{tradeOfferId:t}})}))}),100)}}))}function st(e,t){for(var n=0;n<t.length;n++)if(e.includes(t[n])){var r=t[n].replace(/\\u/,"").trim(),a=String.fromCharCode(parseInt(r,16));e=e.replace(t[n],a)}return e}function ct(){var e=null;$J("#create_new_url_btn").click((function(){setTimeout((function(){var t=$J("#trade_offer_access_url").val();$J(".newmodal_content").find(".btn_green_steamui.btn_medium").click((function(){e=setInterval((function(){var n=$J("#trade_offer_access_url").val();t!==n&&(clearInterval(e),M.updateTradeLink(n))}),100)}))}),100)}))}function lt(e,t,n){var r=$J(n).children(".p-price"),a=$J(r).find(".price_flag.original");if(!t.marketable){$J(a).fadeOut("slow");var i=$J('<div class="price_flag"><span>&nbsp No price</span></div>');return i.addClass("no-price"),void $J(n).children(".p-price").prepend(i)}getLowestPriceHandler(t,e,(function(e){var t=$J(n).find(".p-price");t.css("display","flex").show();var r,a,i=t.find(".price_flag.original");0==t.find(".price-flag").length&&(setTimeout((function(){i.attr("data-price","".concat(e.lowestPrice)),i.find(".animated-background.silver").fadeOut("slow")}),500),r=e,(null!=(a=t)?a:$J('div[data-economy-item*="'.concat(r.appid,"/").concat(r.classid).concat(r.instanceid?"/"+r.instanceid:"",'"]'))).parent(".tradeoffer_item_list").each((function(e,t){var n=$J(this),r=n.find(".total_price"),a=0,i=0,o=0,s=0;n.find(".trade_item").each((function(e){s++;var t=this.rgItem;if(t){if(t.lowestPrice){var n=parseInt(100*parseFloat(getPriceAsInt(t.lowestPrice))),r=window.PriceUtils.publisherFee(t,g_rgWalletInfo,.1),c=CalculateFeeAmount(n,r);i+=(n-c.fees)/100,a+=parseFloat(getPriceAsInt(t.lowestPrice))}"undefined"!=t.gemPrices&&null!=t.gemPrices&&$J.each(t.gemPrices,(function(e,t){o+=parseFloat(getPriceAsInt(t.lowestPrice))}))}null==this.inited&&Qe(this,$J(this).attr("data-economy-item"))}));var c=formatNumberV2(a)+" ("+formatNumberV2(i)+")";o>0&&(c+=" - Gems total price: "+formatNumberV2(o)),c+=' <span style="float: right; padding-right: 15px">'+s+" item(s)</span>",n.find(".price-flag.no-price").length>0&&r.addClass("warning"),r.html(c)})),function(e,t){var n,r=$J(e).parent().parent().find(".offer_price"),a=$J(e).parent().parent().find(".steam-total-price"),i=new RegExp("[0-9]*[.,]?[0-9]+"),o=t.lowestPrice.match(i);o=o?o[0].replace(/,/g,"."):0,1===r.length?(n=0,n+=Number(o),$J(r).replaceWith('<span class="text steam-total-price">'.concat(n.toFixed(2),"</span>"))):(n=Number($J(a).text()),n+=Number(o),$J(a).text(n.toFixed(2)))}(n,e))})),Fe["".concat(t.appid,"/").concat(t.classid).concat(t.instanceid?"/"+t.instanceid:"")]=t,$J('div[data-economy-item*="'.concat(t.appid,"/").concat(t.classid).concat(t.instanceid?"/"+t.instanceid:"",'"]')).each((function(e,n){this.rgItem=t}))}function dt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{name:"Steam",sort:13},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Ke=0;var a=Xe();if(e)e.find(".trade_item").each((function(){var e=this;if(null==e.inited){Qe(e,$J(e).attr("data-economy-item"));var n=$J(e).find(".p-price");$J(n).prepend('<div class="price_flag original">\n            <span class="animated-background silver small fake-price"></span>\n          </div>')}else t&&(e.inited=null,Qe(e,$J(e).attr("data-economy-item")))}));else{if(r){var i=Ze(r);i.find(".trade_item").each((function(e,t){Qe(t,$J(t).attr("data-economy-item"),!0,n,i)}))}else{var o=Ze();window.location.href.includes("history")&&(o.length>We&&(o.length=We),ze(o.length)),o.find(".trade_item").each((function(e,t){Qe(t,$J(t).attr("data-economy-item"),!0,n)}))}if(!a.isMarketLoaded&&n.name&&"steam"===n.name.toLowerCase())var s=setInterval((function(){var e=Xe();e.isSteamBySIHLoaded&&(clearInterval(s),"steam"!==e.market&&De(e.market,r),ft(r))}),100);else ft(r)}}function ft(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=setInterval((function(){var n=Xe();(n.isMarketLoaded&&"steam"!==n.market&&ExchangeRates._rates||n.isSteamBySIHLoaded&&"steam"===n.market&&ExchangeRates._rates)&&(clearInterval(t),Ee(n.market),tt(e),rt())}),100)}function ut(){setTimeout((function(){$J(".accept_trade").click((function(){if($J(this).prop("disabled"))return!1;var e=$J(this).parent().parent().parent(),t=$J(e).find(".sih_tradeoffer_footer"),n="",r="",a=$J(e).prop("id").substring(13),i=$(e).find(".btn_report").attr("onclick").match(/'(\d*)',\s"(.+)"/)[1];if(_tradesTimers[a])return window.clearInterval(_tradesTimers[a].timer),_tradesTimers[a]=null,$J(this).html(SIHLang.tradeoffers.fast_accept),!1;var o=$J(this);return o.html(SIHLang.tradeoffers.accepting),o.prop("disabled",!0),mt(a,i).then((function(e){e.needs_mobile_confirmation||e.needs_email_confirmation?n=SIHLang.tradeoffers.mobile_confirmation:(r="accepted",n=SIHLang.tradeoffers.trade_accepted,chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_UPDATE_TRADE_STATUS",data:{tradeOfferId:a,tradeState:"accepted"}},(function(e){}))),t.find(".tradeoffer_footer_actions").hide()})).catch((function(e){n=SIHLang.tradeoffers.not_accept})).finally((function(){o.remove(),t.append('<div class="tradeoffer_items_banner '.concat(r,'" style="margin: 0; position: relative; width: 100%">\n              ').concat(n,"\n            </div>"))})),!1}))}),200)}ze();var mt=function(e,t){return new Promise((function(n,r){var a=new Headers;a.append("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");var i=new Request("https://steamcommunity.com/tradeoffer/".concat(e,"/accept"),{method:"POST",headers:a,referrer:"https://steamcommunity.com/tradeoffer/".concat(e,"/"),body:"sessionid=".concat(g_sessionID,"&serverid=1&tradeofferid=").concat(e,"&partner=").concat(t,"&captcha=")});fetch(i).then((function(e){if(e.ok)return e.json();"Error code: ".concat(e.status," Status: ").concat(e.statusText),r({status:e.status,statusText:e.statusText})})).then((function(e){n(e)})).catch((function(e){r(e)}))}))},pt=function(){ht()},_t=function(e){var t=vt.get(),n=e.data("miniprofile");if(t.length){var r=t.findIndex((function(e){return e.miniProfile===n}));-1===r?(t.push({miniProfile:n,ts:Date.now()}),t.length>10&&t.sort((function(e,t){return t.ts-e.ts})).splice(t.length-1,1)):t[r].ts=Date.now()}else t.push({miniProfile:n,ts:Date.now()});vt.set(t)},ht=function(){$J(".newmodal:visible").addClass("sih-friends");var e=$J(".newmodal_content").addClass("sih_newmodal_content").find(".player_list_ctn"),t=$J(".newmodal_header:visible"),n=$J('\n    <div class="sih-friends__header sih-global">\n      <div class="sih-friends__powered"></div>\n    </div>\n  ');t.find(".sih-friends__header").length||(t.append(n),t.find(".title_text").appendTo(".sih-friends__header"));var r=$J('\n    <div class="sih-latest-friends sih-global">\n      <div class="row justify-between">\n        <span class="text text_light-grey">'.concat(SIHLang.tradeoffers.latest_friends.title,'</span>\n      </div>\n\n      <div class="sih-latest-friends__content"></div>\n    </div>\n  ')),a=vt.get();if(a.length)a.sort((function(e,t){return t.ts-e.ts})).forEach((function(t){var n=e.find(".friendBlock[data-miniprofile=".concat(t.miniProfile,"]"));if(n.length){var a=$J(n[0].outerHTML);a.off("click").click((function(){n.trigger("click")})),r.find(".sih-latest-friends__content").append(a)}}));else{var i=$J('<span class="text text_white">'.concat(SIHLang.tradeoffers.latest_friends.empty_list,"</span>"));r.find(".sih-latest-friends__content").append(i)}e.before(r)},vt={_name:"SIH_LATEST_FRIENDS",get:function(){return b(this._name)||[]},set:function(e){g(this._name,e)}};function gt(){var e,t;e=Ze(),t='<div class="row">\n      <div class="sih_lot_item">\n        <span class="icon default"></span>\n        <a href="javascript:void(0);" class="offer_price text text_blue">'.concat(SIHLang.tradeoffers.load_prices,'</a>\n      </div>\n      <div class="sih_lot_item">\n        <span class="icon"></span>\n        <span class="text"></span>\n      </div>\n    </div>'),$J(".tradeoffer_items_header").addClass("sih sih_lot"),$J(".sih_lot").append(t),e.find(".sih_lot_item .icon").after('<span class="animated-background small"></span>'),$J(".tradeoffer_item_list").each((function(e,t){var n=0;n=$J(t).find(".trade_item").length,$J(t).parent().children(".sih_lot").children(".row").each((function(e,t){$J(t).prepend('<span class="text">'.concat(SIHLang.tradeoffers.lots," - ").concat(n," |</span>"))}))}))}function bt(){var e,t=' <div class="sih_panel_mode row">\n    <div class="sih_bg"></div>\n    <div class="sig_status_container">\n      <a\n        href="javascript:void(0)"\n        class="sih_status_button '.concat(IS_ENABLED_SIH?"on":"off",'"\n        data-enabled="').concat(IS_ENABLED_SIH,'"\n      >\n        <div class="sih_status_icon"></div>\n        <div class="sih_status_text">SIH ').concat(IS_ENABLED_SIH?"ON":"OFF",'</div>\n      </a>\n\n      <a href="#" class="sih_help_button hidden">\n        <span class="sih_help_icon"></span>\n      </a>\n    </div>\n    <div class="sih_tradeoffer_mode">\n      <a href="javascript:void(0)" class="sih_tradeoffer_mode_button lite">Lite</a>\n      <a href="javascript:void(0)" class="sih_tradeoffer_mode_button full">Full</a>\n    </div>\n  </div>');$J(".profile_small_header_texture").append(t),$J(".sih_panel_mode").fadeIn("slow"),$J(".sih_panel_mode").css("display","flex"),$J(".sih_status_button").click((function(){var e=$J(this).data("enabled");h.chromeStorage.setSync("enabledSih_tradeofferrevPage",!e).then((function(){window.location.reload()}))})),e=$J(".sih_tradeoffer_mode"),function(){var e=$J(".sih_tradeoffer_mode"),t=Xe();!t||t&&!t.mode?(e.find(".sih_tradeoffer_mode_button.lite").addClass("active"),t.mode="lite",et(t)):e.find(".sih_tradeoffer_mode_button.".concat(t.mode)).addClass("active")}(),e.find(".sih_tradeoffer_mode_button").each((function(e,t){$J(t).off("click").click((function(){var e=Xe(),t=$J(this);t.hasClass("lite")&&!t.hasClass("active")?(t.addClass("active").siblings().removeClass("active"),e.mode="lite",et(e),window.location.reload()):t.hasClass("full")&&!t.hasClass("active")&&(t.addClass("active").siblings().removeClass("active"),e.mode="full",et(e),window.location.reload())}))}))}function yt(){}function St(){var e,t,n=Xe();e=$J(".profile_leftcol"),t=window.location.href,e.find(".tradeoffer").addClass("lite"),t.includes("history")&&e.find(".tradeoffer").addClass("history"),fe(),de(),n.autoLoadMarketPrice&&dt(),ut()}SIH=r})();