var SIH;(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{gamePage:()=>r});var r={};function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function i(t,e,r){return(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}t.r(r),t.d(r,{load:()=>nt});const s=new(function(){return t=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"getPriceFromCurrency",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,a=e.getCurrency(+r),s=e.getCurrency(+n),l=o?ExchangeSteamRates[a.strCode]:ExchangeRates._rates[a.strCode],c=o?ExchangeSteamRates[s.strCode]:ExchangeRates._rates[s.strCode];return"USD"===s.strCode&&t?"USD"!=a.strCode&&(t*=l)<.03&&2===i&&(t=.03):s.strCode!=a.strCode&&t&&(t=t/c*l)<.03&&2===i&&(t=.03),2!==i&&t>.03&&(i=2),{price:t||0,code:a.strCode,symbol:a.strSymbol,text:"".concat(a.bSymbolIsPrefix?"".concat(a.strSymbol).concat(a.strSymbolAndNumberSeparator):"").concat(t?t.toFixed(i):0).concat(a.bSymbolIsPrefix?"":"".concat(a.strSymbolAndNumberSeparator).concat(a.strSymbol)),template:"".concat(a.bSymbolIsPrefix?"".concat(a.strSymbol).concat(a.strSymbolAndNumberSeparator):"","$price").concat(a.bSymbolIsPrefix?"":"".concat(a.strSymbolAndNumberSeparator).concat(a.strSymbol)),symbolPosition:a.bSymbolIsPrefix?"before":"after"}})),i(this,"getCurrency",(function(t){var r=null;for(var n in t=t||"undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_currency||1,e.g_rgCurrencyData)if(e.g_rgCurrencyData[n].eCurrencyCode===+t){r=e.g_rgCurrencyData[n];break}return r})),i(this,"getCurrencyCodeSteam",(function(){return"undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_currency||1})),i(this,"g_rgCurrencyData",{USD:{strCode:"USD",eCurrencyCode:1,strSymbol:"$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},GBP:{strCode:"GBP",eCurrencyCode:2,strSymbol:"£",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},EUR:{strCode:"EUR",eCurrencyCode:3,strSymbol:"€",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},CHF:{strCode:"CHF",eCurrencyCode:4,strSymbol:"CHF",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},RUB:{strCode:"RUB",eCurrencyCode:5,strSymbol:"₽",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:"",strSymbolAndNumberSeparator:" "},BRL:{strCode:"BRL",eCurrencyCode:7,strSymbol:"R$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},JPY:{strCode:"JPY",eCurrencyCode:8,strSymbol:"¥",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},NOK:{strCode:"NOK",eCurrencyCode:9,strSymbol:"kr",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},IDR:{strCode:"IDR",eCurrencyCode:10,strSymbol:"Rp",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},MYR:{strCode:"MYR",eCurrencyCode:11,strSymbol:"RM",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},PHP:{strCode:"PHP",eCurrencyCode:12,strSymbol:"P",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},SGD:{strCode:"SGD",eCurrencyCode:13,strSymbol:"S$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},THB:{strCode:"THB",eCurrencyCode:14,strSymbol:"฿",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},VND:{strCode:"VND",eCurrencyCode:15,strSymbol:"₫",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""},KRW:{strCode:"KRW",eCurrencyCode:16,strSymbol:"₩",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},TRY:{strCode:"TRY",eCurrencyCode:17,strSymbol:"TL",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},UAH:{strCode:"UAH",eCurrencyCode:18,strSymbol:"₴",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},MXN:{strCode:"MXN",eCurrencyCode:19,strSymbol:"Mex$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CAD:{strCode:"CAD",eCurrencyCode:20,strSymbol:"CDN$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},AUD:{strCode:"AUD",eCurrencyCode:21,strSymbol:"A$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},NZD:{strCode:"NZD",eCurrencyCode:22,strSymbol:"NZ$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},PLN:{strCode:"PLN",eCurrencyCode:6,strSymbol:"zł",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},CNY:{strCode:"CNY",eCurrencyCode:23,strSymbol:"¥",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},INR:{strCode:"INR",eCurrencyCode:24,strSymbol:"₹",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CLP:{strCode:"CLP",eCurrencyCode:25,strSymbol:"CLP$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},PEN:{strCode:"PEN",eCurrencyCode:26,strSymbol:"S/.",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},COP:{strCode:"COP",eCurrencyCode:27,strSymbol:"COL$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},ZAR:{strCode:"ZAR",eCurrencyCode:28,strSymbol:"R",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},HKD:{strCode:"HKD",eCurrencyCode:29,strSymbol:"HK$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},TWD:{strCode:"TWD",eCurrencyCode:30,strSymbol:"NT$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},SAR:{strCode:"SAR",eCurrencyCode:31,strSymbol:"SR",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},AED:{strCode:"AED",eCurrencyCode:32,strSymbol:"AED",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},ARS:{strCode:"ARS",eCurrencyCode:34,strSymbol:"ARS$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},ILS:{strCode:"ILS",eCurrencyCode:35,strSymbol:"₪",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},BYN:{strCode:"BYN",eCurrencyCode:36,strSymbol:"Br",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},KZT:{strCode:"KZT",eCurrencyCode:37,strSymbol:"₸",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},KWD:{strCode:"KWD",eCurrencyCode:38,strSymbol:"KD",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},QAR:{strCode:"QAR",eCurrencyCode:39,strSymbol:"QR",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CRC:{strCode:"CRC",eCurrencyCode:40,strSymbol:"₡",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""},UYU:{strCode:"UYU",eCurrencyCode:41,strSymbol:"$U",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""}})},(e=[{key:"getCurrencyIdByCode",value:function(t){var e;return(null===(e=g_rgCurrencyData[t])||void 0===e?void 0:e.eCurrencyCode)||null}}])&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}());var l=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(t.status&&t.text){var n=$J("body"),o=$J('\n    <div id="sih-notification-popup" class="sih-global sih-notification-popup '.concat(t.status,'"></div>\n  ')),i=n.find("#sih-notification-popup"),a=i.find(".sih-notification-popup__content").length+1;if("error"===t.status){var s=$J('\n        <div class="sih-notification-popup__content" data-id="'.concat(a,'">\n          <span class="text">').concat(SIHLang.notification_popup.error,": ").concat(c(t.text),"</span>\n        </div>\n      "));i.length?i.append(s):o.append(s),setTimeout((function(){s.fadeOut(300,(function(){s.remove(),r()}))}),e*a)}if(i.length)i.fadeIn(300,(function(){}));else n.append(o),n.find("#sih-notification-popup").fadeIn(300,(function(){}))}},c=function(t){return"rate limit exceeded"===t.toLowerCase()?SIHLang.notification_popup.errors.rate_limit_exceeded:t};function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function p(t,e,r){return e&&f(t.prototype,e),r&&f(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t,e,r){return(e=h(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=function(t,e){if("object"!=u(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==u(e)?e:e+""}const m=new(p((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"checkSteamLogin",(function(t){return new Promise((function(e,r){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_STEAM_REFILL_CHECK",data:{steamUsername:t}},(function(t){var n;if(t.success&&"success"===(null==t||null===(n=t.response)||void 0===n?void 0:n.status))e(t);else{var o,i={status:"error",text:(null==t||null===(o=t.response)||void 0===o?void 0:o.message)||t.error};l(i,5e3,(function(){})),r(t)}}))}))})),d(this,"initSteamRefill",(function(t){var e=t.steamUsername,r=t.amount,n=t.netAmount,o=t.currency,i=void 0===o?"RUB":o,a=t.transactionId;return new Promise((function(t,o){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_STEAM_REFILL_PAY",data:{steamUsername:e,amount:r,netAmount:n,currency:i,transactionId:a}},(function(e){if(e.success)t(e);else{var r={status:"error",text:e.error};l(r,5e3,(function(){})),o(e)}}))}))}))})));function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function v(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */v=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new D(n||[]);return o(a,"_invoke",{value:P(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",b={};function g(){}function S(){}function _(){}var w={};c(w,a,(function(){return this}));var C=Object.getPrototypeOf,x=C&&C(C(N([])));x&&x!==r&&n.call(x,a)&&(w=x);var L=_.prototype=g.prototype=Object.create(w);function I(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function r(o,i,a,s){var l=f(t[o],t,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==y(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function P(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=A(s,n);if(l){if(l===b)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?m:d,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(y(e)+" is not iterable")}return S.prototype=_,o(L,"constructor",{value:_,configurable:!0}),o(_,"constructor",{value:S,configurable:!0}),S.displayName=c(_,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===S||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,c(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},I(E.prototype),c(E.prototype,s,(function(){return this})),e.AsyncIterator=E,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new E(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},I(L),c(L,l,"Generator"),c(L,a,(function(){return this})),c(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=N,D.prototype={constructor:D,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function b(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function g(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){b(i,n,o,a,s,"next",t)}function s(t){b(i,n,o,a,s,"throw",t)}a(void 0)}))}}var S=null,_=4e4,w=function(){var t,e=$J("body"),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global";return $J('\n    <label class="sih-global sih-tos" for="sih-tos-'.concat(t,'">\n      <input type="checkbox" name="sih-tos" id="sih-tos-').concat(t,'" class="sih-modal__input hidden" />\n      <label class="fake-checkbox sih-tos__input" for="sih-tos-').concat(t,'"></label>\n      <div class="row items-center flex-wrap gap-5 sih-modal__text sih-modal__text_md ticker-wrapper">\n        <span class="ticker">\n          <span>').concat(SIHLang.TOS.tos_1,'</span>\n          <a\n            href="https://sih.app/terms-of-service"\n            target="_blank"\n            class="sih-modal__text_blue text-decoration-underline hover-opacity-8"\n            >').concat(SIHLang.TOS.tos_2,'.</a\n          >\n          <span class="sih-tos__info">').concat(SIHLang.TOS.tos_tooltip,"</span>\n        </span>\n      </div>\n    </label>\n  "))}("steam-refill"),n=$J("#application_config").attr("data-userinfo"),o=n?null===(t=JSON.parse(n))||void 0===t?void 0:t.account_name:null,i=$J('\n    <div id="sih-steam-refill" class="sih-steam-refill">\n      <div class="sih-steam-refill__fade"></div>\n      <div class="sih-modal sih-global sih-steam-refill-modal">\n        <div class="sih-modal__close"></div>\n        <div class="sih-modal__inner sih-modal__column">\n          <div class="sih-steam-refill__header">\n            <div class="column gap-8">\n              <span class="text fs-20">Steam</span>\n              <div class="row gap-7 items-center">\n                <span class="text text_light-grey fs-14">Пополнение баланса аккаунта для РФ и Стран СНГ</span>\n\n                <div\n                  class="sih-steam-refill__tooltip-icon row items-center"\n                  title="Азербайджан, Армения, Беларусь, Казахстан, Киргизия, Молдова, Таджикистан, Узбекистан, Туркменистан"\n                >\n                  <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path\n                      d="M6.3 4.9H7.7V3.5H6.3V4.9ZM7 12.6C3.913 12.6 1.4 10.087 1.4 7C1.4 3.913 3.913 1.4 7 1.4C10.087 1.4 12.6 3.913 12.6 7C12.6 10.087 10.087 12.6 7 12.6ZM7 0C6.08075 0 5.17049 0.18106 4.32122 0.532843C3.47194 0.884626 2.70026 1.40024 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C2.70026 12.5998 3.47194 13.1154 4.32122 13.4672C5.17049 13.8189 6.08075 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 6.08075 13.8189 5.17049 13.4672 4.32122C13.1154 3.47194 12.5998 2.70026 11.9497 2.05025C11.2997 1.40024 10.5281 0.884626 9.67878 0.532843C8.82951 0.18106 7.91925 0 7 0V0ZM6.3 10.5H7.7V6.3H6.3V10.5Z"\n                      fill="currentColor"\n                    />\n                  </svg>\n                </div>\n              </div>\n            </div>\n            <div class="sih-steam-refill__powered"></div>\n          </div>\n          <div class="sih-steam-refill__main">\n            <div class="sih-steam-refill__left-side sih-steam-refill-form">\n              <div class="row gap-20">\n                <div class="sih-steam-refill-form__item-block column gap-8" data-name="refill">\n                  <span class="text fs-14">Сумма пополнения</span>\n                  <div class="sih-steam-refill-form__input_outer br2-grey rounded-8 bg-black-100 py-8 px-12 box-border">\n                    <input\n                      type="text"\n                      id="sih-steam-refill-input"\n                      class="sih-steam-refill-form__input text text_white-100 fs-16 lh-21"\n                      placeholder="300"\n                      pattern="/d*"\n                      maxlength="7"\n                      autocomplete="off"\n                    />\n                    <div class="row gap-7 items-center">\n                      <label for="sih-steam-refill-input" class="text text_grey fs-14 lh-19">₽</label>\n\n                      <div class="sih-steam-refill-form__clear">\n                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                          <path\n                            d="M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z"\n                            fill="currentColor"\n                          />\n                        </svg>\n                      </div>\n                    </div>\n                  </div>\n                  <div class="sih-steam-refill-form__refill-alert-block sih-alert-block">\n                    <span class="sih-alert-block__message"></span>\n                  </div>\n\n                  <div class="sih-steam-refill-form__presets sih-refill-presets">\n                    <div class="sih-refill-presets__item" data-value="500">500 ₽</div>\n                    <div class="sih-refill-presets__item" data-value="1000">1000 ₽</div>\n                    <div class="sih-refill-presets__item" data-value="1500">1500 ₽</div>\n                    <div class="sih-refill-presets__item" data-value="2000">2000 ₽</div>\n                    <div class="sih-refill-presets__item" data-value="5000">5000 ₽</div>\n                  </div>\n                </div>\n                <div class="sih-steam-refill-form__item-block column gap-8" data-name="login">\n                  <div class="row gap-7 items-center">\n                    <span class="text fs-14">Логин Steam</span>\n                    <div\n                      class="sih-steam-refill__tooltip-icon row items-center"\n                      title=\'Логин можно найти в разделе "Об аккаунте" нажав на выпадающее меню рядом с Вашим никнеймов в правом верхнем углу экрана на странице Steam\'\n                    >\n                      <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path\n                          d="M6.3 4.9H7.7V3.5H6.3V4.9ZM7 12.6C3.913 12.6 1.4 10.087 1.4 7C1.4 3.913 3.913 1.4 7 1.4C10.087 1.4 12.6 3.913 12.6 7C12.6 10.087 10.087 12.6 7 12.6ZM7 0C6.08075 0 5.17049 0.18106 4.32122 0.532843C3.47194 0.884626 2.70026 1.40024 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C2.70026 12.5998 3.47194 13.1154 4.32122 13.4672C5.17049 13.8189 6.08075 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 6.08075 13.8189 5.17049 13.4672 4.32122C13.1154 3.47194 12.5998 2.70026 11.9497 2.05025C11.2997 1.40024 10.5281 0.884626 9.67878 0.532843C8.82951 0.18106 7.91925 0 7 0V0ZM6.3 10.5H7.7V6.3H6.3V10.5Z"\n                          fill="currentColor"\n                        />\n                      </svg>\n                    </div>\n                  </div>\n\n                  <div class="sih-steam-refill-form__input_outer br2-grey rounded-8 bg-black-100 py-8 px-12 box-border">\n                    <input\n                      type="text"\n                      id="sih-steam-refill-login"\n                      class="sih-steam-refill-form__input text text_white-100 fs-16 lh-21"\n                      placeholder="Логин"\n                      autocomplete="off"\n                    />\n                    <div class="sih-steam-refill-form__clear">\n                      <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path\n                          d="M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z"\n                          fill="currentColor"\n                        />\n                      </svg>\n                    </div>\n                  </div>\n                  <div class="sih-steam-refill-form__refill-alert-block sih-alert-block">\n                    <span class="sih-alert-block__message"></span>\n                  </div>\n                  '.concat(o?'<div class="sih-steam-refill-form__presets sih-refill-presets">\n                    <div class="sih-refill-presets__item" data-value="'.concat(o,'">Мой логин</div>\n                  </div>'):"",'\n                </div>\n              </div>\n            </div>\n\n            <div class="sih-steam-refill__right-side sih-steam-refill-payment">\n              <span class="text fs-24 lh-33 bold">К оплате</span>\n              <div class="column gap-7">\n                <div class="row justify-between">\n                  <span class="text fs-16 lh-22">Сумма зачисления</span>\n                  <span id="sih-steam-refill-amount" class="text fs-16 lh-22" data-value="0">0 ₽</span>\n                </div>\n                <div class="row justify-between">\n                  <span class="text fs-16 lh-22">Комиссия</span>\n                  <span id="sih-steam-refill-commission" class="text fs-16 lh-22" data-value="0">0 ₽</span>\n                </div>\n                <div class="row justify-between">\n                  <span class="text fs-16 lh-22">Итого</span>\n                  <span id="sih-steam-refill-total" class="text fs-16 lh-22" data-value="0">0 ₽</span>\n                </div>\n                <div class="row justify-between">\n                  <div class="row items-center gap-7">\n                    <span class="text fs-16 lh-22">Кешбэк на SIH баланс</span>\n                    <div\n                      class="sih-steam-refill__tooltip-icon"\n                      title="После каждого успешного пополнения, Вам будет начислен бонус реальными средствами на баланс SIH, который Вы сможете использовать для покупки предметов на SIH.Market или оплаты подписки SIH.Black."\n                    >\n                      <div class="row items-center">\n                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                          <path\n                            d="M6.3 4.9H7.7V3.5H6.3V4.9ZM7 12.6C3.913 12.6 1.4 10.087 1.4 7C1.4 3.913 3.913 1.4 7 1.4C10.087 1.4 12.6 3.913 12.6 7C12.6 10.087 10.087 12.6 7 12.6ZM7 0C6.08075 0 5.17049 0.18106 4.32122 0.532843C3.47194 0.884626 2.70026 1.40024 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C2.70026 12.5998 3.47194 13.1154 4.32122 13.4672C5.17049 13.8189 6.08075 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 6.08075 13.8189 5.17049 13.4672 4.32122C13.1154 3.47194 12.5998 2.70026 11.9497 2.05025C11.2997 1.40024 10.5281 0.884626 9.67878 0.532843C8.82951 0.18106 7.91925 0 7 0V0ZM6.3 10.5H7.7V6.3H6.3V10.5Z"\n                            fill="currentColor"\n                          />\n                        </svg>\n                      </div>\n                    </div>\n                  </div>\n\n                  <span id="sih-steam-refill-cashback" class="text text_green fs-16 lh-22" data-value="0">0 ₽</span>\n                </div>\n\n                <div class="row items-center gap-7 mt-10">\n                  <span class="text fs-16 lh-22">F.A.Q</span>\n                  <div class="sih-steam-refill-payment__important" title="">\n                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                      <path d="M12 2L1 21H23M12 6L19.53 19H4.47M11 10V14H13V10M11 16V18H13V16" fill="#FFFF00" />\n                    </svg>\n                  </div>\n                </div>\n              </div>\n\n              <div id="sih-steam-refill-pay" class="sih-steam-refill-pay inactive">Оплатить</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  '));i.find(".sih-steam-refill__tooltip-icon").tooltip({position:{my:"left top",at:"left+10 bottom"},classes:{"ui-tooltip":"sih-steam-refill__tooltip"}}),i.find(".sih-steam-refill-payment__important").tooltip({content:$J('\n      <div class="column">\n        <ul>\n          <li>\n            Как правило, пополнение происходит мгновенно или в течение нескольких минут, однако в редких случаях процесс\n            пополнения может затянуться на час.\n          </li>\n          <li>\n            Если Вы НИКОГДА ранее не пополняли баланс аккаунта любыми способами, то в некоторых случаях это может\n            привести к смене региона на KZ\n          </li>\n        </ul>\n      </div>\n    '),position:{my:"left top",at:"left+10 bottom"},classes:{"ui-tooltip":"sih-global sih-steam-refill__tooltip"}}),i.find("#sih-steam-refill-pay").before(r),e.find(".sih-steam-refill").length||e.append(i)},C=function(){x(),L(),I(),E(),P(),A(),O()},x=function(){var t=$J("#sih-steam-refill");t.on("click",".sih-steam-refill__fade, .sih-modal__close",(function(){t.hide().remove()}))},L=function(){var t=$J("#sih-steam-refill").find("#sih-steam-refill-input");t.on("keypress",(function(t){var e=t.which||t.keyCode;(e<48||e>57)&&t.preventDefault()})),t.on("paste",(function(e){var r=(e.originalEvent||e).clipboardData.getData("text/plain");r=r.replace(/[^0-9]/g,""),t.val(_>=r?r:_),e.preventDefault()})),t.on("focusout",(function(e){var r=e.target,n=$J(r).val();n=n.replace(/[^0-9]/g,""),D(t,n),t.val(_>=n?n:_),k()}))},I=function(){var t=$J("#sih-steam-refill").find("#sih-steam-refill-login");t.on("paste",(function(e){var r=(e.originalEvent||e).clipboardData.getData("text/plain");r=r.replace(/[^a-zA-Z0-9._\- ]/g,""),t.val(r),e.preventDefault()})),t.on("focusout",(function(e){var r=e.target,n=$J(r).val();N(t,n)}))},E=function(){$J("#sih-steam-refill").find(".sih-steam-refill-form__clear").each((function(t,e){var r=$J(e);r.off("click").click((function(){r.closest(".sih-steam-refill-form__input_outer").find(".sih-steam-refill-form__input").val(""),k()}))}))},P=function(){$J("#sih-steam-refill").find(".sih-refill-presets__item").each((function(t,e){var r=$J(e);r.off("click").click((function(t){var e=r.attr("data-value"),n=r.closest(".sih-steam-refill-form__item-block"),o=n.find(".sih-steam-refill-form__input");o.val(e),"refill"===n.attr("data-name")?(D(o,e),k()):N(o,e)}))}))},A=function(){var t=$J("#sih-steam-refill"),e=t.find("#sih-tos-steam-refill"),r=t.find("#sih-steam-refill-pay");e.off("change").change((function(t){var n=e.is(":checked");r.toggleClass("inactive",!n)}))},O=function(){var t=$J("#sih-steam-refill"),e=t.find("#sih-steam-refill-pay");e.off("click").click((function(r){clearTimeout(S),S=setTimeout(g(v().mark((function r(){var n,o,i,a,s,l,c,u,f,p,d,h;return v().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,n=t.find("#sih-steam-refill-input"),o=t.find("#sih-steam-refill-login"),i=t.find("#sih-steam-refill-total"),a=+n.val(),s=o.val(),l=+i.attr("data-value"),c=D(n,a),u=N(o,s),!c&&!u){r.next=11;break}return r.abrupt("return");case 11:return e.addClass("animated"),r.next=14,m.checkSteamLogin(s);case 14:return f=r.sent,p=f.response.transactionId,r.next=18,m.initSteamRefill({steamUsername:s,amount:l,netAmount:a,transactionId:p});case 18:d=r.sent,h=d.response.payUrl,T()?alert("Всплывающие окна в вашем браузере - заблокированы. Пожалуйста , включите их, чтобы продолжить."):window.open(h,"_blank"),e.removeClass("animated"),r.next=28;break;case 24:r.prev=24,r.t0=r.catch(0),r.t0,e.removeClass("animated");case 28:case"end":return r.stop()}}),r,null,[[0,24]])}))),300)}))};function T(){var t=window.open("","_blank");return!(t&&!t.closed&&void 0!==t.closed)||(t.close(),!1)}var D=function(t,e){var r,n=t.closest(".sih-steam-refill-form__item-block").find(".sih-alert-block"),o=n.find(".sih-alert-block__message");if(e<50){var i=s.getPriceFromCurrency(50,5,5).text;r="Минимальная сумма пополнения ".concat(i),n.addClass("active"),o.text(r)}else if(e>50&&e>_){var a=s.getPriceFromCurrency(_,5,5).text;r="Максимальная сумма пополнения ".concat(a),n.addClass("active"),o.text(r)}else n.removeClass("active"),o.text("");return r},N=function(t,e){var r,n=t.closest(".sih-steam-refill-form__item-block").find(".sih-alert-block"),o=n.find(".sih-alert-block__message");e||(r="Некорректный логин Steam"),(e.length<3||e.length>32)&&(r="Некорректный логин Steam");return/^[a-zA-Z0-9._\- ]+$/.test(e)||(r="Некорректный логин Steam"),r?(n.addClass("active"),o.text(r)):(n.removeClass("active"),o.text("")),r},k=function(){var t=$J("#sih-steam-refill"),e=t.find("#sih-steam-refill-input"),r=t.find("#sih-steam-refill-amount"),n=t.find("#sih-steam-refill-commission"),o=t.find("#sih-steam-refill-total"),i=t.find("#sih-steam-refill-cashback"),a=+e.val(),l=.06*a,c=a+l,u=.01*a,f=s.getPriceFromCurrency(a,5,5).text,p=s.getPriceFromCurrency(l,5,5).text,d=s.getPriceFromCurrency(c,5,5).text,h=s.getPriceFromCurrency(u,5,5).text;r.attr("data-value",a).text(f),n.attr("data-value",l).text(p),o.attr("data-value",c).text(d),i.attr("data-value",u).text(h)};function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||H(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){if(t){if("string"==typeof t)return j(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(t,e):void 0}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function M(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */M=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new O(n||[]);return o(a,"_invoke",{value:I(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var S={};c(S,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(T([])));w&&w!==r&&n.call(w,a)&&(S=w);var C=g.prototype=v.prototype=Object.create(S);function x(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,s){var l=f(t[o],t,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==U(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function I(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=E(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?m:d,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(U(e)+" is not iterable")}return b.prototype=g,o(C,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,l,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},x(L.prototype),c(L.prototype,s,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function $(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,J(n.key),n)}}function B(t,e,r){return(e=J(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function J(t){var e=function(t,e){if("object"!=U(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==U(e)?e:e+""}var W=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),B(this,"getProducts",(function(t){return new Promise((function(e,r){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_KINGUIN_PRODUCTS",data:{appId:t}},function(){var t,n=(t=M().mark((function t(n){return M().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.success?e(n.data):r();case 1:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){$(i,n,o,a,s,"next",t)}function s(t){$(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}())}))})),B(this,"prepareArray",(function(e,r){var n=steamCurrency?steamCurrency.eCurrencyCode:1;return e.sort((function(t,e){return t.price-e.price})).map((function(e){var o={},i=new RegExp("".concat(r,"\\s*:?\\s*(\\S+.*?)\\s+Steam CD Key"),"i"),a=e.name.match(i);a&&a[1]&&"Steam"!==a[1]&&(o.region=a[1].trim());var l=s.getPriceFromCurrency(e.price,n,3);return o.priceText=l.text,o.price=l.price,o.link="https://www.kinguin.net/category/".concat(e.kinguinId,"/?r=").concat(t.referalCode),o.regionId=e.regionId,o}))})),B(this,"findItemByRegion",(function(e,r){var n=e.filter((function(e){if(3===e.regionId||10===e.regionId)return!0;if(e.region){if(e.region.includes(r))return!0;var n,o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=H(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(t.REGIONS_MAP);try{for(o.s();!(n=o.n()).done;){var i=R(n.value,2),a=i[0],s=i[1];if(e.region.includes(a)&&s.includes(r))return!0}}catch(t){o.e(t)}finally{o.f()}}}));return t.findLowestPriceItem(n.length?n:e)})),B(this,"filterBySteamPrice",(function(e){var r=t.getSteamPrice();return r?e.filter((function(t){return t.price<=r})):e}))},r=[{key:"getSteamPrice",value:function(){var t=$J("[data-price-final]").first();return t?t.data("price-final")/100:null}}],(e=null)&&G(t.prototype,e),r&&G(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();B(W,"referalCode","6645e9bcdc205"),B(W,"REGIONS_MAP",new Map([["LATAM",["BR","BZ","SV","GT","HN","NI","PA","AR","BO","EC","GY","PY","SR","VE"]],["MENA",["BH","EG","IQ","JO","LB","OM","PS","TR","YE","DZ","LY","MA","TN","SD"]],["EU",["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","LV","LT","EE"]],["CIS",["RU","AM","AZ","BY","GE","KG","MD","TJ","TM","UZ","UA","KZ"]],["RU VPN",["RU","AM","AZ","BY","GE","KG","MD","TJ","TM","UZ","UA","KZ"]],["NA",["CA","US"]],["EMEA",["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","LV","LT","EE","BH","EG","IQ","JO","LB","OM","PS","TR","YE","DZ","LY","MA","TN","SD"]]])),B(W,"findLowestPriceItem",(function(t){return t.reduce((function(t,e){return e.price<t.price?e:t}),t[0])}));const F=new W;var Z=function(){return window.location.href.match(/\/app\/(\d+)\//)[1]},K=function(t,e){return new Promise((function(r,n){var o=t.find((function(t){return t.originalName}));o?r(o.originalName):$J.ajax({method:"GET",url:"https://store.steampowered.com/api/appdetails?appids=".concat(e),success:function(t){t[e]&&t[e].success?r(t[e].data.name):n()},error:function(){n()}})}))};function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function V(){V=function(t,e){return new r(t,void 0,e)};var t=RegExp.prototype,e=new WeakMap;function r(t,n,o){var i=RegExp(t,n);return e.set(i,o||e.get(t)),Q(i,r.prototype)}function n(t,r){var n=e.get(r);return Object.keys(n).reduce((function(e,r){var o=n[r];if("number"==typeof o)e[r]=t[o];else{for(var i=0;void 0===t[o[i]]&&i+1<o.length;)i++;e[r]=t[o[i]]}return e}),Object.create(null))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Q(t,e)}(r,RegExp),r.prototype.exec=function(e){var r=t.exec.call(this,e);if(r){r.groups=n(r,this);var o=r.indices;o&&(o.groups=n(o,this))}return r},r.prototype[Symbol.replace]=function(r,o){if("string"==typeof o){var i=e.get(this);return t[Symbol.replace].call(this,r,o.replace(/\$<([^>]+)>/g,(function(t,e){var r=i[e];return"$"+(Array.isArray(r)?r.join("$"):r)})))}if("function"==typeof o){var a=this;return t[Symbol.replace].call(this,r,(function(){var t=arguments;return"object"!=Y(t[t.length-1])&&(t=[].slice.call(t)).push(n(t,a)),o.apply(this,t)}))}return t[Symbol.replace].call(this,r,o)},V.apply(this,arguments)}function Q(t,e){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Q(t,e)}function q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,c=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==e);l=!0);}catch(t){c=!0,o=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return X(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function z(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */z=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new O(n||[]);return o(a,"_invoke",{value:I(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var p="suspendedStart",d="suspendedYield",h="executing",m="completed",y={};function v(){}function b(){}function g(){}var S={};c(S,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(T([])));w&&w!==r&&n.call(w,a)&&(S=w);var C=g.prototype=v.prototype=Object.create(S);function x(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(o,i,a,s){var l=f(t[o],t,i);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Y(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function I(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=E(s,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?m:d,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Y(e)+" is not iterable")}return b.prototype=g,o(C,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=c(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c(t,l,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},x(L.prototype),c(L.prototype,s,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(C),c(C,l,"Generator"),c(C,a,(function(){return this})),c(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function tt(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function et(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){tt(i,n,o,a,s,"next",t)}function s(t){tt(i,n,o,a,s,"throw",t)}a(void 0)}))}}var rt=["RU","AZ","AM","BY","KZ","KG","MD","TJ","UZ","TM"];function nt(){ot(),it(),lt(),vt(),ft(),yt(),pt().then((function(t){window.show_online_users&&mt(t),setTimeout((function(){ht(t)}),500)}))}var ot=function(){var t="opened_from_banner";chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_LOCAL_STORAGE",data:{key:t}},(function(e){if(e&&e[t]){var r=$J("#add_to_wishlist_area"),n=$J("#queueBtnFollow .queue_btn_inactive");r.is(":visible")&&r.find(".add_to_wishlist")[0].click(),n.is(":visible")&&n[0].click(),chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_LOCAL_STORAGE",data:{key:t,value:false}},(function(){}))}}))},it=function(){var t=et(z().mark((function t(){var e,r,n,o,i,a,s,l;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Z(),t.next=3,F.getProducts(e);case 3:if(r=t.sent,(n=r.filter((function(t){return t.name.includes("Steam CD Key")}))).length){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,K(n,e);case 9:return o=t.sent,t.next=12,new Promise((function(t,e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_CURRENT_USER_COUNTRY_CODE"},(function(r){r.success?t(r.country):e()}))}));case 12:if(i=t.sent,a=F.prepareArray(n,o),(s=F.filterBySteamPrice(a)).length){t.next=17;break}return t.abrupt("return");case 17:l=F.findItemByRegion(s,i),at(l.priceText,l.link),st(s),ct();case 21:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),at=function(t,e){var r=$J('\n    <div class="external-store">\n      <div class="top-panel">\n        <div class="top-panel__sih-bg"></div>\n        <div class="top-panel__market-logo top-panel__market-logo_kinguin"></div>\n        <div class="top-panel__store-content store-content">\n          <div class="store-content__price">'.concat(t,'</div>\n          <div class="store-content__button-wrapper">\n            <a class="store-content__button" href="').concat(e,'" target="_blank">').concat(SIHLang.buy,'</a>\n            <div class="store-content__tooltip-btn">?</div>\n            <div class="store-content__fake-tooltip" title="').concat(SIHLang.externalStoreTooltip,'"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  '));$J(".game_area_purchase_game_wrapper").first().after(r)},st=function(t){var e=$J('<div class="bottom-panel"></div>');t.forEach((function(t){var r=$J('\n      <a class="bottom-panel__item" href="'.concat(t.link,'" target="_blank">\n        <span>').concat(t.region||"","</span>\n        <span>Key</span>\n        <span>").concat(t.priceText,"</span>\n      </a>\n    "));e.append(r)})),$J(".external-store").append(e)},lt=function(){var t,e=$J(".page_content .leftcol.game_description_column"),r=$J("#application_config").attr("data-userinfo"),n=r?null===(t=JSON.parse(r))||void 0===t?void 0:t.country_code:null;if(!disabledSteamRefillBanner&&n&&rt.includes(n)){var o=$J('\n      <div class="sih-steam-refill-banner sih-global">\n        <div class="row items-center">\n          <span class="text text_white fs-24">Пополни Steam баланс по логину!</span>\n        </div>\n        <div class="sih-steam-refill-banner__buttons-bg">\n          <div class="sih-steam-refill-banner__btn">Пополнить баланс</div>\n        </div>\n      </div>\n    ');o.find(".sih-steam-refill-banner__btn").off("click").click((function(){w(),C()})),e.find(".sih-steam-refill-banner").length||e.prepend(o)}},ct=function(){var t=$J(".store-content__fake-tooltip"),e=$J(".store-content__tooltip-btn");t.tooltip({position:{of:".store-content__tooltip-btn",my:"center bottom",at:"center top"},tooltipClass:"collaboration_tooltip"}),e.click((function(){t.tooltip("open")})),e.on("mouseleave",(function(e){$J(".collaboration_tooltip:hover").length||(t.tooltip(),t.tooltip("close"))})),$J("body").on("mouseleave",".collaboration_tooltip",(function(e){t.tooltip(),t.tooltip("close")}))},ut=function(t){for(var e=0,r=[[80,"green"],[50,"yellow"],[20,"orange"]];e<r.length;e++){var n=q(r[e],2),o=n[0],i=n[1];if(t>=o)return i}return"red"},ft=function(){var t=+$J('label[for="review_type_all"] .user_reviews_count').text().replace("(","").replace(")","").replaceAll(",",""),e=+$J('label[for="review_type_positive"] .user_reviews_count').text().replace("(","").replace(")","").replaceAll(",",""),r=100*e/t;r&&($J("#userReviews").append('<div\n        class="user_reviews_summary_row sih-reviews"\n        data-tooltip-text="'.concat(e.toLocaleString("en-US")," ").concat(SIHLang.game_page.out_of," ").concat(t.toLocaleString("en-US")," ").concat(SIHLang.game_page.positive_reviews,'"\n        onclick="window.location=\'#app_reviews_hash\'"\n      >\n        <div class="subtitle column all">').concat(SIHLang.game_page.sih_rate,':</div>\n        <div class="summary column">\n          <span class="sih-colors_').concat(ut(r),'">').concat(r.toFixed(2),'%</span>\n          <span class="responsive_hidden">(').concat(t.toLocaleString("en-US"),")</span>\n        </div>\n      </div>")),SetupTooltips({tooltipCSSClass:"store_tooltip"}))},pt=function(){return new Promise((function(t,e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_STEAMDB_APPINFO",data:Z()},(function(r){r.success?t(r.data):e()}))}))},dt=function(t){var e={appId:Z(),currency:t};return new Promise((function(t,r){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_STEAMDB_APPPRICE",data:e},(function(e){e.success?t(e.data):r()}))}))},ht=function(){var t=et(z().mark((function t(e){var r,n,o;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.u&&(r=e.u,n=!!$J("._1TRFtE8IfXpDQ_loHnB_bU").length,o=Date.now()/1e3-r,$J(".release_date").after(' <div class="sih-info">\n          <div class="subtitle column sih-info__subtitle">'.concat(SIHLang.game_page.last_update,':</div>\n          <a\n            id="sih-last-update"\n            href="javascript:void(0)"\n            class="date sih-info__date ').concat(n?"sih-info__date_clickable":"",'"\n          >\n            ').concat(new Date(1e3*r).toLocaleDateString()," ").concat((i=o,a=void 0,s=void 0,l=void 0,c=void 0,s=Math.floor(i/86400),l=Math.floor(i/2592e3),c="green",i<86400?a=SIHLang.game_page.today:1===s?a=SIHLang.game_page.yesterday:l>=1?(a="".concat(l," ").concat(1===l?SIHLang.game_page.month_ago:SIHLang.game_page.months_ago),l>6&&l<=12&&(c="yellow"),l>12&&l<=24&&(c="orange"),l>24&&(c="red")):a="".concat(s," ").concat(SIHLang.game_page.days_ago),'<span class="sih-colors_'.concat(c,'">(').concat(a,")</span>")),"\n          </a>\n        </div>")),n&&$J("#sih-last-update").click((function(){$J("._1TRFtE8IfXpDQ_loHnB_bU").trigger("click")})))}catch(t){console.error(t)}case 1:case"end":return t.stop()}var i,a,s,l,c}),t)})));return function(e){return t.apply(this,arguments)}}(),mt=function(t){var e='\n    <div class="sih-online-info">\n      <div class="sih-online-info__item-row item-row">\n        <div class="item-row__title">'.concat(SIHLang.app_online_info.current_online,':</div>\n        <div class="item-row__value">').concat(t.cp.toLocaleString("ru"),'</div>\n      </div>\n      <div class="sih-online-info__item-row item-row">\n        <div class="item-row__title">').concat(SIHLang.app_online_info.today_peak,':</div>\n        <div class="item-row__value">').concat(t.mdp.toLocaleString("ru"),'</div>\n      </div>\n      <div class="sih-online-info__item-row item-row">\n        <div class="item-row__title">').concat(SIHLang.app_online_info.all_time_peak,':</div>\n        <div class="item-row__value">').concat(t.mp.toLocaleString("ru"),'</div>\n      </div>\n      <div class="sih-online-info__item-row item-row">\n        <div class="item-row__title">').concat(SIHLang.app_online_info.followers,':</div>\n        <div class="item-row__value">').concat(t.f.toLocaleString("ru"),"</div>\n      </div>\n    </div>\n  "),r=$J(".game_meta_data").has("#category_block");r.find(".sih_video_links").length?r.find(".sih_video_links").after(e):r.prepend(e)},yt=function(){var t=et(z().mark((function t(){var e,r,n,o,i,a,s,l,c,u,f,p,d,h;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=$J('meta[itemprop="price"]'),r=e.attr("content"),!e.length||""===r){t.next=6;break}if(!(Number.parseFloat(r.replace(",","."),10)<.01)){t.next=6;break}return t.abrupt("return");case 6:if(n=$J('meta[itemprop="priceCurrency"]'),"USD"!==(o=n?n.attr("content"):"USD")){t.next=23;break}i=document.evaluate('//script[contains(text(), "EnableSearchSuggestions")]',document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,a=null,i&&(s=i.textContent.match(V(/EnableSearchSuggestions\(.+?'([A-Z]{2})',/,{cc:1})))&&(a=s.groups.cc),t.t0=a,t.next="AZ"===t.t0||"AM"===t.t0||"BY"===t.t0||"GE"===t.t0||"KG"===t.t0||"MD"===t.t0||"TJ"===t.t0||"TM"===t.t0||"UZ"===t.t0?15:"BD"===t.t0||"BT"===t.t0||"NP"===t.t0||"PK"===t.t0||"LK"===t.t0?17:"AR"===t.t0||"BO"===t.t0||"BZ"===t.t0||"EC"===t.t0||"GT"===t.t0||"GY"===t.t0||"HN"===t.t0||"NI"===t.t0||"PA"===t.t0||"PY"===t.t0||"SR"===t.t0||"SV"===t.t0||"VE"===t.t0?19:"BH"===t.t0||"DZ"===t.t0||"EG"===t.t0||"IQ"===t.t0||"JO"===t.t0||"LB"===t.t0||"LY"===t.t0||"MA"===t.t0||"OM"===t.t0||"PS"===t.t0||"SD"===t.t0||"TN"===t.t0||"TR"===t.t0||"YE"===t.t0?21:23;break;case 15:return o="USD-CIS",t.abrupt("break",23);case 17:return o="USD-SASIA",t.abrupt("break",23);case 19:return o="USD-LATAM",t.abrupt("break",23);case 21:return o="USD-MENA",t.abrupt("break",23);case 23:if((l=$J("#game_area_purchase")).length){t.next=26;break}return t.abrupt("return");case 26:return t.next=28,dt(o);case 28:c=t.sent,f=(u=function(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll('"',"&quot;").replaceAll("'","&apos;")})(c.p),p="".concat(SIHLang.app_price_history.min_fixed_price," <b>").concat(f,"</b>"),c.l?p="".concat(SIHLang.app_price_history.min_fixed_price," <b>").concat(f,"</b>. ").concat(SIHLang.app_price_history.limited," <b>").concat(u(c.l),"</b>"):Number.isInteger(c.d)&&c.d>0&&(p="".concat(SIHLang.app_price_history.min_fixed_price," <b>").concat(f,"</b> ").concat(SIHLang.app_price_history.discount," <b>-").concat(c.d.toString(),"%</b>")),d=new Date(1e3*c.t).toLocaleDateString(),h='<div class="sih-history-price">\n      <div class="sih-history-price__title">'.concat(p,'</div>\n      <div class="sih-history-price__subtitle">\n        ').concat(Number.isInteger(c.c)&&c.c>1?"".concat(SIHLang.app_price_history.subtitle_multi_pt1," ").concat(c.c," ").concat(SIHLang.app_price_history.subtitle_multi_pt2," ").concat(d):"".concat(SIHLang.app_price_history.subtitle," ").concat(d),"\n      </div>\n    </div>"),l.prepend(h);case 36:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),vt=function(){var t=$J("#userReviews .user_reviews_summary_row"),e=t.eq(0),r=t.eq(1);bt(e),bt(r)},bt=function(t){if(t.length&&!t.find(".not_enough_reviews").length){var e=t.attr("data-tooltip-html").match(/^(\d+)%/);if(e){var r=e[1];t.find(".game_review_summary").after('<span class="sih-colors_'.concat(ut(r),'"> ').concat(r,"%</span>"))}}};SIH=e})();