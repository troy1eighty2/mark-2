var SIH;(()=>{"use strict";var __webpack_modules__={6794:(e,t,n)=>{n.r(t),n.d(t,{App:()=>y,BuyOrders:()=>E,FormatNumberWithSuffix:()=>w,ModifyHoverItemName:()=>C,SKIN_WEAR_MAP:()=>h,SellListing:()=>x,SihUserPrices:()=>A,chromeStorage:()=>v,formatNumber:()=>k,formatNumberToLocalRu:()=>S,getLocation:()=>p,getPageParams:()=>g,getPercentNumberDifference:()=>I,getPriceFromSteam:()=>f,parseNumber:()=>b});var a,i,r=n(3080);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,r,s,o=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=r.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,m(a.key),a)}}function u(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=l(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var h=new Map([["fn","Factory New"],["mw","Minimal Wear"],["ft","Field-Tested"],["ww","Well-Worn"],["bs","Battle-Scarred"]]);function p(e){var t=(e=decodeURIComponent(e)).match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return t&&{href:e,protocol:t[1],host:t[2],hostname:t[3],port:t[4],pathname:t[5],search:t[6],hash:t[7]}}function f(e){return new Promise((function(t){Object.keys(e).length>0?chrome.runtime.sendMessage(SIHID,{type:"GET_PRICE_FROM_STEAM",data:e},t):t()}))}function g(e){var t=p(e=e||window.location.href);if(t.pathname.indexOf("market/listings/")>-1){var n=t.pathname.split("/");return{appId:n[3],marketHashName:n[4]+t.hash,location:t}}return{}}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=".";return(e=e.replace(/[^0-9.,]/g,"")).indexOf(",")>e.indexOf(".")&&(t=","),(e.match(new RegExp("\\"+t,"g"))||[]).length>1&&(t=""),""!==t&&e.length-e.indexOf(t)-1==3&&0!==e.indexOf("0"+t)&&(t=""),e=(e=e.replace(new RegExp("[^0-9"+t+"]","g"),"")).replace(",","."),parseFloat(e)}var v={getSync:function(e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SYNC_STORAGE",data:{key:e}},(function(n){var a=n[e]||{};t(a)}))}))},setSync:function(e,t){return new Promise((function(n){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_SYNC_STORAGE",data:{key:e,value:t}},(function(e){n(e)}))}))},getLocal:function(e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_LOCAL_STORAGE",data:{key:e}},(function(n){var a=n[e]||{};t(a)}))}))},setLocal:function(e,t){return new Promise((function(n){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_LOCAL_STORAGE",data:{key:e,value:t}},(function(e){n(e)}))}))}},y={getManifest:function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"GET_MANIFEST_APP",data:{}},e)})).then((function(e){return e.data}))}};function k(e){return(+e.toFixed(2)).toLocaleString("ru").replace(",",".")}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,s=r.A.getPriceFromCurrency(e,t,n,a,i),o=s.price,l=s.symbolPosition,c=s.symbol;return o>1e5&&(o=Math.ceil(o)),2!==i&&o>.03&&(i=2),"".concat("before"===l?c:""," ").concat((+o.toFixed(i)).toLocaleString("ru").replace(",",".")," ").concat("after"===l?c:"")}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return Math.round(100*(1-e/t)*100)/100*n}var C=function(e){var t=e.item;$J(".item-hover-name-tooltip").remove(),t.prop("title",SIHLang.market.blockBestOfferOfMarketplaceCopyItemName),t.css({display:"inline-block",cursor:"pointer"}),t.tooltip({position:{my:"center bottom",at:"center top"},tooltipClass:"name-tooltip item-hover-name-tooltip"}),t.off("click").click((function(){var t=$J(this);$J(".name-tooltip").css("opacity",".3").animate({opacity:"1"},"fast"),navigator.clipboard.writeText(e.marketHashName).then((function(){t.tooltip({content:SIHLang.market.blockBestOfferOfMarketplaceCopiedItemName})})).catch((function(e){console.error("Error in copying text: ",e)}))})),t.mouseout((function(){t.tooltip("close"),t.tooltip({content:SIHLang.market.blockBestOfferOfMarketplaceCopyItemName})}))},w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=r.A.getPriceFromCurrency(e,t,n,i),o=s.price,l=s.symbol,c=s.symbolPosition,d=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].findLast((function(e){return o>=e.value})),_=d?(o/d.value).toFixed(a).replace(/\.0+$|(?<=\.[0-9]*[1-9])0+$/,"").concat(d.symbol):Math.ceil(100*o)/100;return{price:_,text:"before"===c?"".concat(l," ").concat(_):"".concat(_," ").concat(l),symbol:l,symbolPosition:c}},A=function(){return u((function e(){d(this,e)}),null,[{key:"sendItemData",value:function(e,t,n,a,i,r){try{var s,o,l=JSON.parse(JSON.stringify(e)),c=JSON.parse(JSON.stringify(l.buy_order_graph)),d=JSON.parse(JSON.stringify(l.sell_order_graph));if(!t||5!==a)return!1;if(!g_steamID)return!1;if(0===d.length)return;d.length>5?d.length=5:d.length,c.length>1?c.length=1:c.length;for(var _=[],u=d.length-1;u>=0;u--){var m=d[u][0],h=0!==u?d[u][1]-d[u-1][1]:d[u][1];_.unshift({price:m,count:h})}var p=null==c||null===(s=c[0])||void 0===s?void 0:s[0],f=null==c||null===(o=c[0])||void 0===o?void 0:o[1],g={app_id:t,hash_name:n,prices:_,steamid:g_steamID};if(c.length){var b={price:p,count:f};Object.assign(g,{buy_price:b})}if(i&&Object.keys(i).length&&Object.assign(g,{steamSoldData:i}),r){var v,y;"russian"===r?(v=Number($J.parseHTML(l.buy_order_summary)[1].innerHTML),y=Number($J.parseHTML(l.sell_order_summary)[1].innerHTML)):["koreana","japanese","turkish"].includes(r)?(v=Number($J(l.buy_order_summary)[2].innerHTML),y=Number($J(l.sell_order_summary)[2].innerHTML)):(v=Number($J(l.buy_order_summary)[0].innerHTML),y=Number($J(l.sell_order_summary)[0].innerHTML)),g.orders={buy:v,sell:y}}chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_USER_STEAM_PRICE",data:g})}catch(e){}}}])}(),x=u((function e(){d(this,e)}));a=x,c(x,"SELL_LISTING",{}),c(x,"setItem",(function(e){if(e){var t={sessionid:g_sessionID,steamid:g_steamID},n="".concat(e.appid,"/").concat(e.contextid),i="".concat(e.market_hash_name,"/").concat(e.price);if(Object.keys(a.SELL_LISTING).length){var r=a.SELL_LISTING.data.findIndex((function(e){return Object.keys(e)[0]===n}));if(r>=0)if(a.SELL_LISTING.data[r][n].length){var s=a.SELL_LISTING.data[r][n].findIndex((function(e){return Object.keys(e)[0]===i}));if(s<0)a.SELL_LISTING.data[r][n].push(c({},i,[e]));else a.SELL_LISTING.data[r][n][s][i].findIndex((function(t){return t.assetid===e.assetid}))<0&&a.SELL_LISTING.data[r][n][s][i].push(e)}else a.SELL_LISTING.data[r][n].push(c({},i,[e]));else a.SELL_LISTING.data.push(c({},n,[c({},i,[e])]))}else a.SELL_LISTING={data:[c({},n,[c({},i,[e])])],userInfo:t}}})),c(x,"removeItem",(function(e){e&&a.SELL_LISTING&&a.SELL_LISTING.data&&a.SELL_LISTING.data.length&&a.SELL_LISTING.data.forEach((function(t,n){for(var i=function(){var t=s(o[r],2),i=t[0];t[1].forEach((function(t,r){for(var o=0,l=Object.entries(t);o<l.length;o++){var c=s(l[o],2),d=c[0],_=c[1].findIndex((function(t){return t.assetid===e}));_>=0&&(a.SELL_LISTING.data[n][i][r][d].splice(_,1),a.SELL_LISTING.data[n][i][r][d].length||(a.SELL_LISTING.data[n][i].splice(r,1),a.SELL_LISTING.data[n][i].length||a.SELL_LISTING.data.splice(n,1)))}}))},r=0,o=Object.entries(t);r<o.length;r++)i()}))})),c(x,"resellItems",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_RESELL_ITEMS",data:a.SELL_LISTING},(function(t){e()}))}))}));var E=u((function e(){d(this,e)}));i=E,c(E,"BUY_ORDERS",[]),c(E,"setItem",(function(e){e&&(i.BUY_ORDERS.length?-1===i.BUY_ORDERS.findIndex((function(t){return t.payload.buy_orderid===e.payload.buy_orderid}))&&i.BUY_ORDERS.push(e):i.BUY_ORDERS.push(e))})),c(E,"removeItem",(function(e){if(e&&i.BUY_ORDERS.length){var t=i.BUY_ORDERS.findIndex((function(t){return t.payload.buy_orderid===e}));-1!==t&&i.BUY_ORDERS.splice(t,1)}})),c(E,"createBuyOrders",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_RESUBMIT_BUY_ORDER",data:i.BUY_ORDERS},(function(t){e()}))}))}))},3080:(e,t,n)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,s(a.key),a)}}function r(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}n.d(t,{A:()=>o});const o=new(function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"getPriceFromCurrency",(function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,s=t.getCurrency(+n),o=t.getCurrency(+a),l=i?ExchangeSteamRates[s.strCode]:ExchangeRates._rates[s.strCode],c=i?ExchangeSteamRates[o.strCode]:ExchangeRates._rates[o.strCode];return"USD"===o.strCode&&e?"USD"!=s.strCode&&(e*=l)<.03&&2===r&&(e=.03):o.strCode!=s.strCode&&e&&(e=e/c*l)<.03&&2===r&&(e=.03),2!==r&&e>.03&&(r=2),{price:e||0,code:s.strCode,symbol:s.strSymbol,text:"".concat(s.bSymbolIsPrefix?"".concat(s.strSymbol).concat(s.strSymbolAndNumberSeparator):"").concat(e?e.toFixed(r):0).concat(s.bSymbolIsPrefix?"":"".concat(s.strSymbolAndNumberSeparator).concat(s.strSymbol)),template:"".concat(s.bSymbolIsPrefix?"".concat(s.strSymbol).concat(s.strSymbolAndNumberSeparator):"","$price").concat(s.bSymbolIsPrefix?"":"".concat(s.strSymbolAndNumberSeparator).concat(s.strSymbol)),symbolPosition:s.bSymbolIsPrefix?"before":"after"}})),r(this,"getCurrency",(function(e){var n=null;for(var a in e=e||"undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_currency||1,t.g_rgCurrencyData)if(t.g_rgCurrencyData[a].eCurrencyCode===+e){n=t.g_rgCurrencyData[a];break}return n})),r(this,"getCurrencyCodeSteam",(function(){return"undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_currency||1})),r(this,"g_rgCurrencyData",{USD:{strCode:"USD",eCurrencyCode:1,strSymbol:"$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},GBP:{strCode:"GBP",eCurrencyCode:2,strSymbol:"£",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},EUR:{strCode:"EUR",eCurrencyCode:3,strSymbol:"€",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},CHF:{strCode:"CHF",eCurrencyCode:4,strSymbol:"CHF",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},RUB:{strCode:"RUB",eCurrencyCode:5,strSymbol:"₽",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:"",strSymbolAndNumberSeparator:" "},BRL:{strCode:"BRL",eCurrencyCode:7,strSymbol:"R$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},JPY:{strCode:"JPY",eCurrencyCode:8,strSymbol:"¥",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},NOK:{strCode:"NOK",eCurrencyCode:9,strSymbol:"kr",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},IDR:{strCode:"IDR",eCurrencyCode:10,strSymbol:"Rp",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},MYR:{strCode:"MYR",eCurrencyCode:11,strSymbol:"RM",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},PHP:{strCode:"PHP",eCurrencyCode:12,strSymbol:"P",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},SGD:{strCode:"SGD",eCurrencyCode:13,strSymbol:"S$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},THB:{strCode:"THB",eCurrencyCode:14,strSymbol:"฿",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},VND:{strCode:"VND",eCurrencyCode:15,strSymbol:"₫",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""},KRW:{strCode:"KRW",eCurrencyCode:16,strSymbol:"₩",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},TRY:{strCode:"TRY",eCurrencyCode:17,strSymbol:"TL",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},UAH:{strCode:"UAH",eCurrencyCode:18,strSymbol:"₴",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},MXN:{strCode:"MXN",eCurrencyCode:19,strSymbol:"Mex$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CAD:{strCode:"CAD",eCurrencyCode:20,strSymbol:"CDN$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},AUD:{strCode:"AUD",eCurrencyCode:21,strSymbol:"A$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},NZD:{strCode:"NZD",eCurrencyCode:22,strSymbol:"NZ$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},PLN:{strCode:"PLN",eCurrencyCode:6,strSymbol:"zł",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},CNY:{strCode:"CNY",eCurrencyCode:23,strSymbol:"¥",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},INR:{strCode:"INR",eCurrencyCode:24,strSymbol:"₹",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CLP:{strCode:"CLP",eCurrencyCode:25,strSymbol:"CLP$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},PEN:{strCode:"PEN",eCurrencyCode:26,strSymbol:"S/.",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},COP:{strCode:"COP",eCurrencyCode:27,strSymbol:"COL$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},ZAR:{strCode:"ZAR",eCurrencyCode:28,strSymbol:"R",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:" ",strSymbolAndNumberSeparator:" "},HKD:{strCode:"HKD",eCurrencyCode:29,strSymbol:"HK$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},TWD:{strCode:"TWD",eCurrencyCode:30,strSymbol:"NT$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},SAR:{strCode:"SAR",eCurrencyCode:31,strSymbol:"SR",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},AED:{strCode:"AED",eCurrencyCode:32,strSymbol:"AED",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},ARS:{strCode:"ARS",eCurrencyCode:34,strSymbol:"ARS$",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:" "},ILS:{strCode:"ILS",eCurrencyCode:35,strSymbol:"₪",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},BYN:{strCode:"BYN",eCurrencyCode:36,strSymbol:"Br",bSymbolIsPrefix:!0,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:""},KZT:{strCode:"KZT",eCurrencyCode:37,strSymbol:"₸",bSymbolIsPrefix:!1,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:" ",strSymbolAndNumberSeparator:""},KWD:{strCode:"KWD",eCurrencyCode:38,strSymbol:"KD",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},QAR:{strCode:"QAR",eCurrencyCode:39,strSymbol:"QR",bSymbolIsPrefix:!1,bWholeUnitsOnly:!1,strDecimalSymbol:".",strThousandsSeparator:",",strSymbolAndNumberSeparator:" "},CRC:{strCode:"CRC",eCurrencyCode:40,strSymbol:"₡",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""},UYU:{strCode:"UYU",eCurrencyCode:41,strSymbol:"$U",bSymbolIsPrefix:!0,bWholeUnitsOnly:!0,strDecimalSymbol:",",strThousandsSeparator:".",strSymbolAndNumberSeparator:""}})},(t=[{key:"getCurrencyIdByCode",value:function(e){var t;return(null===(t=g_rgCurrencyData[e])||void 0===t?void 0:t.eCurrencyCode)||null}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}())},4056:(e,t,n)=>{n.d(t,{z:()=>a});var a={set:function(e,t){try{t=t||"",localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error(e)}},get:function(e){try{var t=localStorage.getItem(e)||null;return JSON.parse(t)}catch(e){return console.error(e),null}}}},4285:(e,t,n)=>{n.d(t,{I:()=>r,P:()=>i});var a=n(4056),i={_name:"SIH_FILTER_MARKET_HISTORY",get:function(){return a.z.get(this._name)},set:function(e){a.z.set(this._name,e)}},r={_name:"SIH_MARKET_TAB",get:function(){return a.z.get(this._name)},set:function(e){a.z.set(this._name,e)}}},8156:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{marketMyHistoryRequestBefore:()=>marketMyHistoryRequestBefore,marketMyHistoryRequestOnFailureBefore:()=>marketMyHistoryRequestOnFailureBefore,marketMyHistoryRequestOnSuccessAfter:()=>marketMyHistoryRequestOnSuccessAfter,marketMyHistoryRequestOnSuccessBefore:()=>marketMyHistoryRequestOnSuccessBefore,selectTabMarket:()=>selectTabMarket});var _common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4285),g_sihSelectTabMarket="",g_sihSettingFiltration={};function selectTabMarket(){$J("#myMarketTabs").find(".market_tab_well_tabs a").on("click",(function(){g_sihSelectTabMarket=$J(this).attr("id"),$J(this).addClass("market_tab_well_tab_active").siblings().removeClass("market_tab_well_tab_active").addClass("market_tab_well_tab_inactive"),"tabMyMarketHistory"===g_sihSelectTabMarket?($J("#BG_bottom").find(".my_market_history_filtration").show(),$J("#BG_bottom").find("#sih-tab-content-export-market-history").hide()):"sih-tab-export-market-history"===g_sihSelectTabMarket?($J("#BG_bottom").find(".my_market_history_filtration").hide(),$J("#BG_bottom").find("#tabContentsMyMarketHistory").hide(),$J("#BG_bottom").find("#tabContentsMyListings").hide()):($J("#BG_bottom").find(".my_market_history_filtration").hide(),$J("#BG_bottom").find(".animated").removeClass("animated"),$J("#BG_bottom").find("#sih-tab-content-export-market-history").hide())}))}function marketMyHistoryRequestBefore(e,t){spinnerFilterMarketHistory(!0);var n=getLocalStorage();t.parameters.count=n.isVisibleSlots?500:window.historypagesize}function marketMyHistoryRequestOnFailureBefore(){spinnerFilterMarketHistory(!1)}function marketMyHistoryRequestOnSuccessBefore(){"tabMyMarketHistory"===(g_sihSelectTabMarket=$J("#myMarketTabs .market_tab_well_tabs a.market_tab_well_tab_active").attr("id"))?(loadCheckboxHistoryFiltration(getLocalStorage()),$J("#BG_bottom").find(".my_market_history_filtration").show()):($J("#BG_bottom").find(".my_market_history_filtration").hide(),$J("#BG_bottom").find(".animated").removeClass("animated"))}function marketMyHistoryRequestOnSuccessAfter(e,t,n){if($J(".sih.my_market_history_filtration .switcher_history_filtration").hasClass("selected")){if(t.start||$J("#tabContentsMyMarketHistoryRows .market_listing_row.market_recent_listing_row").hide(),0===$J("#tabContentsMyMarketHistory").find(".market_listing_table_showmore").length){var a=$J("#tabContentsMyMarketHistory_ctn");a.hide();for(var i='<a\n        class="sih_button sih_pre_shadow_button collapse_my_history"\n        href="javascript:void(0);"\n        >'.concat(SIHLang.collapseHistoryMarket,"</a\n      >"),r=0,s=[10,25,50,100];r<s.length;r++){var o=s[r];i+='<a\n          class="sih_button sih_pre_shadow_button upload_my_history"\n          data-number="'.concat(o,'"\n          href="javascript:void(0);"\n          >').concat(SIHLang.uploadHistoryMarket.replace("$1",o),"</a\n        >")}a.after('<div class="market_listing_table_showmore sih">\n          <div class="upload_my_history_buttons">'.concat(i,"</div>\n        </div>")),$J("#tabContentsMyMarketHistory").find(".upload_my_history").click($J.debounce(300,(function(){viewFilterMarketHistory(!0,$J(this).data("number"),this),colorMarketHistory()}))),$J("#tabContentsMyMarketHistory").find(".collapse_my_history").click($J.debounce(300,(function(){$J("body, html").animate({scrollTop:240},400),g_sihSettingFiltration.totalCountView=10,clearTableHistory(this)})))}Object.keys(n.responseJSON.assets).length>0?g_sihSettingFiltration.start=n.responseJSON.start+n.responseJSON.pagesize:g_sihSettingFiltration.emptyAssets=!0,g_sihSettingFiltration.totalCount=n.responseJSON.total_count,0===$J(".market_listing_table_showmore.sih").find(".sih__total-count").length&&$J(".market_listing_table_showmore.sih").prepend('<div class="sih__total-count">\n          <span>'.concat(SIHLang.historyTotal,": ").concat(g_sihSettingFiltration.totalCount,"</span>\n        </div>")),viewFilterMarketHistory(),spinnerFilterMarketHistory(!1)}else ImprovedMyMarketHistoryNav.init();colorMarketHistory()}function getLocalStorage(){var e=_common__WEBPACK_IMPORTED_MODULE_0__.P.get();return e||(e={isSlotPlacedHistoryTran:!1,isSlotRemovedHistoryTran:!1,isSlotPurchasedHistoryTran:!0,isSlotSoldHistoryTran:!0,isVisibleSlots:!1},_common__WEBPACK_IMPORTED_MODULE_0__.P.set(e)),e}function loadCheckboxHistoryFiltration(e){0===$J("#BG_bottom").find(".my_market_history_filtration").length&&($J("#myMarketTabs").after('\n      <div class="sih my_market_history_filtration">\n        <div class="switch_history_filtration">\n          <a class="sih_button sih_pre_shadow_button switcher_history_filtration" href="javascript:void(0);"\n            >'.concat(SIHLang.filtrationHistoryMarketName,'</a\n          >\n        </div>\n\n        <div class="slots_history_tran">\n          <div class="slot_history_tran">\n            <label\n              for="slot_placed_history_tran"\n              class="sih_checkbox ui-checkboxradio-label ui-corner-all ui-button ui-widget ui-checkboxradio-checked ui-state-active"\n              >').concat(SIHLang.historySaleSlotPlaced,'</label\n            >\n            <input\n              type="checkbox"\n              data-id="isSlotPlacedHistoryTran"\n              ').concat(e.isSlotPlacedHistoryTran?"checked":"",'\n              class="ui-checkboxradio ui-helper-hidden-accessible"\n              id="slot_placed_history_tran"\n            />\n          </div>\n\n          <div class="slot_history_tran">\n            <label\n              for="slot_removed_history_tran"\n              class="sih_checkbox ui-checkboxradio-label ui-corner-all ui-button ui-widget ui-checkboxradio-checked ui-state-active"\n              >').concat(SIHLang.historySaleSlotRemoved,'</label\n            >\n            <input\n              type="checkbox"\n              data-id="isSlotRemovedHistoryTran"\n              class="ui-checkboxradio ui-helper-hidden-accessible"\n              ').concat(e.isSlotRemovedHistoryTran?"checked":"",'\n              id="slot_removed_history_tran"\n            />\n          </div>\n\n          <div class="slot_history_tran">\n            <label\n              for="slot_purchased_history_tran"\n              class="sih_checkbox ui-checkboxradio-label ui-corner-all ui-button ui-widget ui-checkboxradio-checked ui-state-active"\n              >').concat(SIHLang.historySaleSlotPurchased,'</label\n            >\n            <input\n              type="checkbox"\n              data-id="isSlotPurchasedHistoryTran"\n              class="ui-checkboxradio ui-helper-hidden-accessible"\n              ').concat(e.isSlotPurchasedHistoryTran?"checked":"",'\n              id="slot_purchased_history_tran"\n            />\n          </div>\n\n          <div class="slot_history_tran">\n            <label\n              for="slot_sold_history_tran"\n              class="sih_checkbox ui-checkboxradio-label ui-corner-all ui-button ui-widget ui-checkboxradio-checked ui-state-active"\n              >').concat(SIHLang.historySaleSlotSold,'</label\n            >\n            <input\n              type="checkbox"\n              data-id="isSlotSoldHistoryTran"\n              ').concat(e.isSlotSoldHistoryTran?"checked":"",'\n              class="ui-checkboxradio ui-helper-hidden-accessible"\n              id="slot_sold_history_tran"\n            />\n          </div>\n        </div>\n      </div>\n    ')),e.isVisibleSlots&&$J(".sih.my_market_history_filtration .switcher_history_filtration").addClass("selected"),loadSlots(e),$J(".sih.my_market_history_filtration .switcher_history_filtration").click((function(){var t=$J(this);t.hasClass("selected")?(t.removeClass("selected"),e.isVisibleSlots=!1):(t.addClass("selected"),e.isVisibleSlots=!0),_common__WEBPACK_IMPORTED_MODULE_0__.P.set(e),loadSlots(e)})))}function loadSlots(e){$J("#new_tab_contents_my_market_history_table").remove();var t=$J(".my_market_history_filtration");if($J("#slot_removed_history_tran, #slot_placed_history_tran, #slot_purchased_history_tran, #slot_sold_history_tran").checkboxradio(),e.isVisibleSlots)$J("#BG_bottom").append('<div id="new_tab_contents_my_market_history_table" style="display: none"></div>'),g_sihSettingFiltration={},$J(".slots_history_tran").find(".disabled").remove(),t.find("input").change((function(){var n=$J(this);t.find("input:checked").length?(e[n.data("id")]=n.prop("checked"),_common__WEBPACK_IMPORTED_MODULE_0__.P.set(e),g_sihSettingFiltration={},LoadMarketHistory()):n.prop("checked",!0).checkboxradio("refresh")}));else{var n=t.find(".slots_history_tran");$J(n).children().hasClass("disabled")||$J(n).append('<div class="disabled"></div>')}LoadMarketHistory(),changeEventFilterOnClickDisabledSlots()}function changeEventFilterOnClickDisabledSlots(){var e=$J(".my_market_history_filtration").find(".disabled");$J(e).click((function(){var e=$J(".switcher_history_filtration");$J(e).hasClass("animated")?($J(e).removeClass("animated"),setTimeout((function(){$J(e).addClass("animated")}),100)):$J(e).addClass("animated")}))}function performFilterMarketHistory(){var e=0,t=!1;return $J("#tabContentsMyMarketHistoryRows .market_listing_row.market_recent_listing_row").each((function(n,a){var i=!1;g_sihSettingFiltration.totalCountView<=e&&(i=!0);var r=getLocalStorage();(r.isSlotRemovedHistoryTran&&$J(a).attr("id").indexOf("_event_2")>-1&&(i?t=!0:(e++,$J(a).addClass("new_history_row_market"))),r.isSlotPlacedHistoryTran&&$J(a).attr("id").indexOf("_event_1")>-1&&(i?t=!0:(e++,$J(a).addClass("new_history_row_market"))),r.isSlotPurchasedHistoryTran)&&($J(a).find(".market_listing_left_cell.market_listing_gainorloss").text().indexOf("+")>-1&&(i?t=!0:(e++,$J(a).addClass("new_history_row_market"))));r.isSlotSoldHistoryTran&&($J(a).find(".market_listing_left_cell.market_listing_gainorloss").text().indexOf("-")>-1&&(i?t=!0:(e++,$J(a).addClass("new_history_row_market"))));if(i&&t)return!1})),t}function clearTableHistory(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){var t=$J(e).text();$J(e).addClass("animation-background"),$J(e).text(SIHLang.loading);var n=0,a=$J("#tabContentsMyMarketHistoryRows");$J(a).find(".market_listing_row.market_recent_listing_row").each((function(e,t){$J(t).attr("style").includes("block")&&(++n>10?$J(t).hide("slow"):$J(t).show("slow"))})),setTimeout((function(){$J(e).removeClass("animation-background"),$J(e).text(t)}),500)}}function uploadMarketHistory(currentButton,defaultText){new Ajax.Request("https://steamcommunity.com/market/myhistory?count=500",{method:"get",parameters:{start:g_sihSettingFiltration.start},onSuccess:function onSuccess(transport){if($J(currentButton).removeClass("animation-background"),$J(currentButton).text(defaultText),transport.responseJSON){g_sihSettingFiltration.emptyAssets=!1;var response=transport.responseJSON,$newTable=$J("#new_tab_contents_my_market_history_table");$newTable.append(response.results_html),$newTable.find(".market_listing_row.market_recent_listing_row").hide(),$J("#tabContentsMyMarketHistoryRows").append($newTable.find(".market_listing_row.market_recent_listing_row")),$newTable.empty(),MergeWithAssetArray(response.assets),eval(response.hovers)}}})}function viewFilterMarketHistory(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;void 0===g_sihSettingFiltration.totalCountView?g_sihSettingFiltration.totalCountView=t:e&&!g_sihSettingFiltration.emptyAssets&&(g_sihSettingFiltration.totalCountView+=t);performFilterMarketHistory();var a=function(e){r.each((function(e,t){$J(t).removeClass("new_history_row_market").show()}))},i=$J("#tabContentsMyMarketHistoryRows .market_listing_row.market_recent_listing_row"),r=$J("#tabContentsMyMarketHistoryRows .market_listing_row.market_recent_listing_row.new_history_row_market");if(g_sihSettingFiltration.totalCountView>r.length)if(g_sihSettingFiltration.totalCount>i.length||g_sihSettingFiltration.emptyAssets){$J(n).addClass("animation-background");var s=$J(n).text();$J(n).text(SIHLang.loading),setTimeout((function(){uploadMarketHistory(n,s)}),3e3)}else a();else a()}function spinnerFilterMarketHistory(e){e?($J("#upload_my_history").addClass("sih-disabled"),$J(".spinner_upload_my_history").css({display:"inline-block"})):($J(".spinner_upload_my_history").css({display:"none"}),$J("#upload_my_history").removeClass("sih-disabled"))}function colorMarketHistory(){$J("#tabContentsMyMarketHistoryRows .market_listing_row.market_recent_listing_row:visible").each((function(e,t){$J(t).find(".sih_market_listing_left_cell_color").length||($J(t).find(".market_listing_gainorloss").before(' <div class="market_listing_left_cell sih_market_listing_left_cell_color"></div> '),$J(t).find(".sih_market_listing_left_cell_color").append($J(t).find(".market_listing_gainorloss")).append('<div class="color_background"></div>').append($J(t).find(".market_listing_item_img")));var n=$J(t).find(".market_listing_left_cell.market_listing_gainorloss").text();if(n.indexOf("+")>-1){var a=$J(t).find(".market_listing_price").text();a.includes("-")||$J(t).find(".market_listing_price").html("-".concat(a.trim()))}if(n.indexOf("-")>-1){var i=$J(t).find(".market_listing_price").text();i.includes("+")||$J(t).find(".market_listing_price").html("+".concat(i.trim()))}(window.color_slot_removed_history_tran_show&&$J(t).attr("id").indexOf("_event_2")>-1&&$J(t).find(".sih_market_listing_left_cell_color").css({"background-color":window.color_slot_removed_history_tran}),window.color_slot_placed_history_tran_show&&$J(t).attr("id").indexOf("_event_1")>-1&&$J(t).find(".sih_market_listing_left_cell_color").css({"background-color":window.color_slot_placed_history_tran}),window.color_slot_purchased_history_tran_show)&&($J(t).find(".market_listing_left_cell.market_listing_gainorloss").text().indexOf("+")>-1&&$J(t).find(".sih_market_listing_left_cell_color").css({"background-color":window.color_slot_purchased_history_tran}));window.color_slot_sold_history_tran_show&&($J(t).find(".market_listing_left_cell.market_listing_gainorloss").text().indexOf("-")>-1&&$J(t).find(".sih_market_listing_left_cell_color").css({"background-color":window.color_slot_sold_history_tran}))}))}},7465:(e,t,n)=>{n.d(t,{LoadSteamAppFilters:()=>i,RefactorAdvancedSearchDialog:()=>a});var a=function(){window.AdvancedSearchDialog={m_bInitialized:!1,m_fnDocumentKeyHandler:null,m_modal:null,Initialize:function(){},Show:function(){this.m_bInitialized||this.Initialize(),this.m_fnDocumentKeyHandler=this.OnDocumentKeyPress.bindAsEventListener(this),$(document).observe("keydown",this.m_fnDocumentKeyHandler);var e=this;this.m_modal=ShowDialog("Search Community Market",$J("#market_advancedsearch_dialog").show()),this.m_modal.SetRemoveContentOnDismissal(!1),this.m_modal.always((function(){e.Dismiss()})),$("market_advancedsearch_dialog").focus(),this.refactoredHeader()},Dismiss:function(){$(document).stopObserving("keydown",this.m_fnDocumentKeyHandler),this.m_modal&&(this.m_modal.Dismiss(),this.m_modal=null)},SelectApp:function(e){this.SelectAppElement($J("#app_option_"+e))},SelectAppElement:function(e){var t=e.clone();$J("#market_advancedsearch_appselect_activeapp").empty(),t.attr("id",t.attr("id")+"_selected"),$J("#market_advancedsearch_appselect_activeapp").append(t),$J("#market_advanced_search_app").remove();var n=$J('<input type="hidden" id="market_advanced_search_app" name="appid" value="'+e.data("appid")+'"/>');$J("#market_advanced_search").append(n)},OnCancel:function(e){this.Dismiss(),e.stop()},OnDocumentKeyPress:function(e){e.keyCode==Event.KEY_ESC&&(this.Dismiss(),e.stop())},refactoredHeader:function(){var e=$J(".newmodal_header:visible"),t=$J('\n        <div class="sih-global sih-market-search">\n          <div class="sih-market-search__header row gap-25">\n            <div class="sih-market-search__header_left">\n              <div class="sih-market-search__powered"></div>\n            </div>\n\n            <div class="sih-market-search__header_right">\n              <div class="row gap-16">\n                <a href="javascript:void(0)" class="sih-market-search__item" data-appid="730" title="CS 2">\n                  <img\n                    src="https://cdn.akamai.steamstatic.com/steamcommunity/public/images/apps/730/8dbc71957312bbd3baea65848b545be9eae2a355.jpg"\n                    alt="CS 2"\n                  />\n                </a>\n                <a href="javascript:void(0)" class="sih-market-search__item" data-appid="570" title="Dota 2">\n                  <img\n                    src="https://cdn.akamai.steamstatic.com/steamcommunity/public/images/apps/570/0bbb630d63262dd66d2fdd0f7d37e8661a410075.jpg"\n                    alt="Dota 2"\n                  />\n                </a>\n                <a href="javascript:void(0)" class="sih-market-search__item" data-appid="252490" title="Rust">\n                  <img\n                    src="https://cdn.akamai.steamstatic.com/steamcommunity/public/images/apps/252490/820be4782639f9c4b64fa3ca7e6c26a95ae4fd1c.jpg"\n                    alt="Rust"\n                  />\n                </a>\n                <a href="javascript:void(0)" class="sih-market-search__item" data-appid="440" title="Team Fortress 2">\n                  <img\n                    src="https://cdn.akamai.steamstatic.com/steamcommunity/public/images/apps/440/e3f595a92552da3d664ad00277fad2107345f743.jpg"\n                    alt="TF 2"\n                  />\n                </a>\n\n                <a href="javascript:void(0)" class="sih-market-search__item" data-appid="753" title="Steam">\n                  <img\n                    src="https://cdn.akamai.steamstatic.com/steamcommunity/public/images/apps/753/1d0167575d746dadea7706685c0f3c01c8aeb6d8.jpg"\n                    alt="Steam"\n                  />\n                </a>\n                <a href="javascript:void(0)" class="sih-market-search__item" data-appid="866510" title="!Anyway!">\n                  <img\n                    src="https://cdn.akamai.steamstatic.com/steamcommunity/public/images/apps/866510/7cf8f282dabdd1f7f33a02653f877551632e6ecd.jpg"\n                    alt="!Anyway!"\n                  />\n                </a>\n                <a\n                  href="javascript:void(0)"\n                  class="sih-market-search__item"\n                  data-appid="322330"\n                  title="Don\'t Starve Together"\n                >\n                  <img\n                    src="https://cdn.akamai.steamstatic.com/steamcommunity/public/images/apps/322330/a80aa6cff8eebc1cbc18c367d9ab063e1553b0ee.jpg"\n                    alt="Don\'t Starve Together"\n                  />\n                </a>\n                <a href="javascript:void(0)" class="sih-market-search__item" data-appid="304930" title="Unturned">\n                  <img\n                    src="https://cdn.akamai.steamstatic.com/steamcommunity/public/images/apps/304930/e18009fb628b35953826efe47dc3be556b689f4c.jpg"\n                    alt="Unturned"\n                  />\n                </a>\n                <a href="javascript:void(0)" class="sih-market-search__item" data-appid="218620" title="PAYDAY 2">\n                  <img\n                    src="https://cdn.akamai.steamstatic.com/steamcommunity/public/images/apps/218620/a6abc0d0c1e79c0b5b0f5c8ab81ce9076a542414.jpg"\n                    alt="PAYDAY 2"\n                  />\n                </a>\n                <a\n                  href="javascript:void(0)"\n                  class="sih-market-search__item"\n                  data-appid="232090"\n                  title="Killing Floor 2"\n                >\n                  <img\n                    src="https://cdn.akamai.steamstatic.com/steamcommunity/public/images/apps/232090/15837cefb378766e9916548f8591b6eb490b9e52.jpg"\n                    alt="Killing Floor 2"\n                  />\n                </a>\n                <a\n                  href="javascript:void(0)"\n                  class="sih-market-search__item"\n                  data-appid="578080"\n                  title="PUBG: BATTLEGROUNDS"\n                >\n                  <img\n                    src="https://cdn.akamai.steamstatic.com/steamcommunity/public/images/apps/578080/609f27278aa70697c13bf99f32c5a0248c381f9d.jpg"\n                    alt="PUBG: BATTLEGROUNDS"\n                  />\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      ');e.find(".sih-market-search").length||(e.append(t),e.find(".title_text").prependTo(".sih-market-search__header_left"),e.find(".sih-market-search__item").tooltip({position:{my:"center bottom",at:"center top"},tooltipClass:"name-tooltip item-hover-name-tooltip"}));t.find(".sih-market-search__item").click((function(){var e=$J(this).data("appid");$J(".popup_item.popup_menu_item.market_advancedsearch_appname").each((function(t,n){var a=$J(n);e===a.data("appid")&&a.trigger("click")}))}))}}},i=function(){"undefined"!=typeof g_rgFilterData&&ProcessFilterData({facets:g_rgFilterData});var e=$J('<form id="sih_advanced_search" accept-charset="UTF8" action="https://steamcommunity.com/market/search" method="GET"></form>'),t=$J(".market_app_selector").clone(),n=$J("#market_advancedsearch_filters").clone(),a=$J('<div class="sih-market-search__powered"></div>');t.find("#market_advancedsearch_appselect").attr("id","sih_advancedsearch_appselect").attr("onClick","ShowMenu('sih_advancedsearch_appselect','sih_advancedsearch_appselect_options', 'left');"),t.find("#market_advancedsearch_appselect_activeapp").attr("id","sih_advancedsearch_appselect_activeapp"),t.find("#appselect_arrow").attr("id","sih_appselect_arrow"),t.find("#market_advancedsearch_appselect_options").attr("id","sih_advancedsearch_appselect_options"),t.find("#market_advancedsearch_appselect_options_apps").attr("id","sih_advancedsearch_appselect_options_apps"),n.attr("id","sih_advancedsearch_filters");var i=$J('\n    <div class="market_advancedsearch_bottombuttons">\n      <a href="javascript:ResetSearchFilters();">'.concat(SIHLang.reset,'</a>\n      <div onclick="document.forms[\'sih_advanced_search\'].submit();" class="btn_medium btn_green_white_innerfade">\n        <span>').concat(SIHLang.search,"</span>\n      </div>\n    </div>\n  "));e.append(a).append(t).append(n).append(i),$J("#sideBar").append(e);var r=new URLSearchParams(window.location.search);function s(e){var t=e.clone();t.attr("id",t.attr("id")+"_selected"),$J("#sih_advancedsearch_appselect_activeapp").empty().append(t),$J("#sih_advanced_search_app").remove();var n=$J('<input type="hidden" id="sih_advanced_search_app" name="appid" value="'.concat(e.data("appid"),'" />'));$J("#sih_advanced_search").append(n)}$J("#sih_advancedsearch_appselect_options .popup_item.popup_menu_item.market_advancedsearch_appname").each((function(e,t){var n=$J(t);+r.get("appid")===n.data("appid")&&s(n)})),$J("#sih_advanced_search #sih_advancedsearch_appselect_options_apps .popup_item").click((function(){HideMenu($("sih_advancedsearch_appselect"),$("sih_advancedsearch_appselect_options")),s($J(this));var e=$J(this).data("appid"),t=$J("#sih_advancedsearch_filters");if(e){t.empty();var n=$J('<img\n          src="https://community.akamai.steamstatic.com/public/images/login/throbber.gif"\n          alt="Загрузка"\n          style="margin-top: 139px"\n        />');t.append(n).css("text-align","center"),$J.ajax({url:"https://steamcommunity.com/market/appfilters/"+e,type:"GET"}).error((function(){t.empty().css("text-align","inherit").text("Oops. We are sorry, but something went wrong")})).success((function(e){if(e.success){ProcessFilterData(e);var n=$J("#market_advancedsearch_filters").clone();n.attr("id","sih_advancedsearch_filters"),$J("#sih_advanced_search #sih_advancedsearch_filters").replaceWith(n)}else t.empty().css("text-align","inherit").text("Oops. We are sorry, but something went wrong")}))}}))}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LoadSteamAppFilters:()=>marketSearch.LoadSteamAppFilters,RefactorAdvancedSearchDialog:()=>marketSearch.RefactorAdvancedSearchDialog,activeListings:()=>activeListings_namespaceObject,exportMarketHistory:()=>exportMarketHistory_namespaceObject,global:()=>global,marketHistory:()=>marketHistory_namespaceObject,sihMarketTab:()=>sihMarketTab_namespaceObject});var sihMarketTab_namespaceObject={};__webpack_require__.r(sihMarketTab_namespaceObject),__webpack_require__.d(sihMarketTab_namespaceObject,{LoadSihMarketTab:()=>LoadSihMarketTab});var filterPanel_namespaceObject={};__webpack_require__.r(filterPanel_namespaceObject),__webpack_require__.d(filterPanel_namespaceObject,{RenderHeaderTotal:()=>RenderHeaderTotal,RenderMarketFilter:()=>RenderMarketFilter});var listingRow_namespaceObject={};__webpack_require__.r(listingRow_namespaceObject),__webpack_require__.d(listingRow_namespaceObject,{RefactorListingRow:()=>RefactorListingRow});var resubmitButton_namespaceObject={};__webpack_require__.r(resubmitButton_namespaceObject),__webpack_require__.d(resubmitButton_namespaceObject,{LoadResubmitOrderButton:()=>LoadResubmitOrderButton});var resubmitOrders_namespaceObject={};__webpack_require__.r(resubmitOrders_namespaceObject),__webpack_require__.d(resubmitOrders_namespaceObject,{SaveSellListing:()=>SaveSellListing,resubmitButton:()=>resubmitButton_namespaceObject});var activeListings_namespaceObject={};__webpack_require__.r(activeListings_namespaceObject),__webpack_require__.d(activeListings_namespaceObject,{AddSortableColumns:()=>AddSortableColumns,RenderHeaderTable:()=>RenderHeaderTable,filterPanel:()=>filterPanel_namespaceObject,listingRow:()=>listingRow_namespaceObject,resubmitOrders:()=>resubmitOrders_namespaceObject});var exportMarketHistory_namespaceObject={};__webpack_require__.r(exportMarketHistory_namespaceObject),__webpack_require__.d(exportMarketHistory_namespaceObject,{RenderExportMarketHistoryBtn:()=>RenderExportMarketHistoryBtn});var marketHistory_namespaceObject={};__webpack_require__.r(marketHistory_namespaceObject),__webpack_require__.d(marketHistory_namespaceObject,{filter:()=>filter});var global=__webpack_require__(6794),common=__webpack_require__(4285),currency_service=__webpack_require__(3080),utils=__webpack_require__(4056),Exterior={"Factory new":{id:"FN",color:"#5EB648",min:0,max:.07},"Minimal Wear":{id:"MW",color:"#79D154",min:.07,max:.15},"Field-Tested":{id:"FT",color:"#E3E15B",min:.15,max:.38},"Well-Worn":{id:"WW",color:"#E9A75D",min:.38,max:.45},"Battle-Scarred":{id:"BS",color:"#E05A59",min:.45,max:1}},common_LocalStorageMarketplace={_name:"SIH_MARKETPLACE_BANNERS",get:function(){return utils.z.get(this._name)||{}},set:function(e){utils.z.set(this._name,e)}},LocalStorageControlPanel={_name:"SIH_CONTROL_PANEL_MARKET_LISTINGS",get:function(){return utils.z.get(this._name)||{}},set:function(e){utils.z.set(this._name,e)}},LocalStorageMarketCommoditySpread={_name:"SIH_MARKET_COMMODITY_ORDER_SPREAD",get:function(){return utils.z.get(this._name)||{}},set:function(e){utils.z.set(this._name,e)}},LocalStorageSearchPaintSeedAndFloat={_name:"SIH_SEARCH_PAINT_SEED_AND_FLOAT_V3",get:function(){return utils.z.get(this._name)},set:function(e){utils.z.set(this._name,e)}},LocalStorageMarketplacesCache={_name:"SIH_MARKETPLACES_CACHE",get:function(){return utils.z.get(this._name)||{}},set:function(e){utils.z.set(this._name,e)}},LocalStoragePriceHistoryGraph={_name:"SIH_PRICE_HISTORY_GRAPH",get:function(){return utils.z.get(this._name)},set:function(e){utils.z.set(this._name,e)}},_Marketplace;function getVolumeOfSales(e){var t=0;g_plotPriceHistory&&Array.isArray(g_plotPriceHistory.data)&&g_plotPriceHistory.data.length>0&&Array.isArray(g_plotPriceHistory.data[0])&&g_plotPriceHistory.data[0].forEach((function(n){var a=new Date(n[0]).getTime(),i=new Date;i.setDate(i.getDate()-e)<=a&&isFinite(n[2])&&(t+=parseFloat(n[2]))}));return t}function getNumberFromHtml(e){var t=(e=(e=e||"").trim().replace(/[^0-9.,]/g,"").replace(/\.$/,"")).replace(/[^0-9]/g,"");return/[,\.]\d{2}$/.test(e)&&(t=t.replace(/(\d{2})$/,".$1")),isFinite(t)?+t:null}function registerStatEvent(e){}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,_toPropertyKey(a.key),a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var marketplace_service_Marketplace=function(){function e(){var t=this;_classCallCheck(this,e),_defineProperty(this,"getLink",(function(t,n,a,i,r){return e._getLink(t,n,a,i,r)})),_defineProperty(this,"getPriceMarket",(function(e){var t=common_LocalStorageMarketplace.get(),n=!1,a=0,i=0,r=0,s=0,o=0,l=0;return e.data&&(r=e.data.price||0,s=e.data.count||0,e.data.locked&&(o=e.data.locked.price||0,l=e.data.locked.count||e.data.locked.locked||0)),t.isPriceLotsTradeLock?("A"===e.group&&(a=r,i=s),"B"===e.group&&(r?r>o&&o?(a=o,n=!0,i=l):(a=r,i=s):(a=o,i=l,n=!0)),"C"===e.group&&(a=o,i=l,n=!0)):"A"!==e.group&&"B"!==e.group||(a=r,i=s),{price:a,isLock:n,count:i}})),_defineProperty(this,"makeNewData",(function(){e._statusLoadMarkers=e._statusLoadMarkersEnum.NO_LOADING})),_defineProperty(this,"loadMarkets",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(e._statusLoadMarkers=e._statusLoadMarkersEnum.NO_LOADING),e._statusLoadMarkers===e._statusLoadMarkersEnum.NO_LOADING){e._statusLoadMarkers=e._statusLoadMarkersEnum.LOADING;var a=null===t&&null===n?(0,global.getPageParams)():{appId:t,marketHashName:n};if(a.marketHashName=decodeURIComponent(a.marketHashName),a){var i=LocalStorageMarketplacesCache.get(),r="".concat(a.appId,"_").concat(a.marketHashName);if(sih_app_account&&(window.marketCacheTime=3e4),i[r]&&Date.now()-i[r].time<window.marketCacheTime)return e._statusLoadMarkers=e._statusLoadMarkersEnum.SUCCESS,e._marketplace||(e._marketplace={}),void(e._marketplace.markets=i[r].data);var s=t&&n,o=e._getMarkets(a.appId,a.marketHashName,s),l={appId:a.appId,markets:o.map((function(e){return e.name})),items:[a.marketHashName]};chrome.runtime.sendMessage(SIHID,{type:"GET_PRICES_BY_MARKETPLACES",data:l},(function(t){t&&t.success&&t.items?(e._statusLoadMarkers=e._statusLoadMarkersEnum.SUCCESS,t.items&&t.items[a.marketHashName]&&t.items[a.marketHashName].csmoney&&(t.items[a.marketHashName].csmoney.csmoneyStore&&(t.items[a.marketHashName].csmoneyStore=t.items[a.marketHashName].csmoney.csmoneyStore),t.items[a.marketHashName].csmoney.csmoneyTrade&&(t.items[a.marketHashName].csmoneyTrade=t.items[a.marketHashName].csmoney.csmoneyTrade)),e._marketplace={},e._marketplace.markets=o.map((function(e){return e.data=t.items[a.marketHashName]&&t.items[a.marketHashName][e.name],e})).filter((function(e){return!(!e.data||!(e.data.price||e.data.locked&&e.data.locked.price))})),i[r]={},i[r].data=e._marketplace.markets,i[r].time=Date.now(),LocalStorageMarketplacesCache.set(i)):e._statusLoadMarkers=e._statusLoadMarkersEnum.ERROR}))}}})),_defineProperty(this,"checkLoadMarkets",(function(){var n=[e._statusLoadMarkersEnum.SUCCESS,e._statusLoadMarkersEnum.ERROR].includes(e._statusLoadMarkers);if(n){var a=common_LocalStorageMarketplace.get();a.market&&t.getMarkets().filter((function(e){return e.isView})).forEach((function(e){var t=a.market[e.name];t&&(e.depositPercentage=t.depositPercentage||0,e.fixedDepositPercentage=t.fixedDepositPercentage||0)}))}return n})),_defineProperty(this,"getMarkets",(function(){return e._marketplace?common_LocalStorageMarketplace.get().isPriceLotsTradeLock?e._marketplace.markets:e._marketplace.markets.filter((function(e){return"A"===e.group||"B"===e.group&&(e.data||{}).price})):[]})),_defineProperty(this,"getMarketLowerPrice",(function(){var n=null;if(t.checkLoadMarkets()&&e._marketplace&&Array.isArray(e._marketplace.markets)&&e._marketplace.markets.length>0){var a=common_LocalStorageMarketplace.get(),i=function(e,t){return t.isServiceCommission?1+(e||0)/100:1},r=function(e,t){return t.isServiceCommission&&e||0},s=e.excludeBuyMarkets(t.getMarkets()).filter((function(e){return e.isView}));s.length>1?n=s.reduce((function(e,n){var s=t.getPriceMarket(e),o=t.getPriceMarket(n);return s.price*i(e.depositPercentage,a)+r(e.fixedDepositPercentage,a)<o.price*i(n.depositPercentage,a)+r(n.fixedDepositPercentage,a)?e:n})):1===s.length&&(n=s[0])}return n})),_defineProperty(this,"getOffersCount",(function(n){return e.excludeBuyMarkets(n).reduce((function(e,n){return e+t.getPriceMarket(n).count}),0)})),_defineProperty(this,"getMarketsForExternal",(function(){return e._markets.filter((function(e){return e.forExternalInjection}))})),_defineProperty(this,"getAllMarkets",(function(t){return t?e._markets.filter((function(e){return e.appIds.includes(t)})):e._markets}))}return _createClass(e,null,[{key:"_markets",get:function(){return[{name:"waxpeer",title:"Waxpeer",isView:!0,appIds:["730","252490","440"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"dmarket",title:"DMarket",isView:!0,appIds:["570","730","252490","440"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"csgocom",title:"Csgocom",isView:!0,appIds:["730","570","440","252490"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0,priorityPosition:2},{name:"csgocomBuy",title:"Csgocom buy",isView:!0,appIds:["730","570","440","252490"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!1,priorityPosition:2},{name:"csmoney",title:"CS.money",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!1},{name:"csmoneyStore",title:"CS.money Store",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0,priorityPosition:3},{name:"csmoneyTrade",title:"CS.money Trade",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0,priorityPosition:3},{name:"skinport",title:"Skinport",isView:!0,appIds:["730","570","440","252490"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"bitskins",title:"BitSkins",isView:!0,appIds:["730","570","440"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"skinbaron",title:"Skinbaron",isView:!0,appIds:["730","440"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"shadowpay",title:"ShadowPay",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"mannco",title:"Mann.Co",isView:!0,appIds:["440","730","570","252490"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"tradeit",title:"Tradeit",isView:!0,appIds:["730","440","570","252490"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0,priorityPosition:1},{name:"tradeitDeposit",title:"Tradeit Deposit",isView:!0,appIds:["730","440","570","252490"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!1,priorityPosition:1},{name:"cstrade",title:"CS.Trade",isView:!0,appIds:["440","570","730","252490"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"lootfarm",title:"LOOTfarm",isView:!0,appIds:["440","570","730","252490"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"swapgg",title:"Swapgg",isView:!0,appIds:["440","570","730","252490"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"lisskins",title:"Lisskins",isView:!0,appIds:["730","570","252490"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"buff163",title:"Buff163",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"cs2go",title:"CS2GO",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"haloskins",title:"HaloSkins",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"igxe",title:"Igxe",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"gamerpay",title:"GamerPay",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"skinsmonkey",title:"Skinsmonkey",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"skinsmonkeycash",title:"Skinsmonkey cash",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"skinout",title:"SkinOut",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"bitskinsp2p",title:"Bitskins P2P",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"whitemarket",title:"White.market",isView:!0,appIds:["730"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"steamprices",title:"Steamprices",isView:!1,appIds:["730","570","440","252490"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!1},{name:"sihmarket",title:"SIH.Market",isView:!0,appIds:["730","252490","440"],depositPercentage:0,link:null,data:null,group:"B",forExternalInjection:!0},{name:"rustskins",title:"Rustskins",isView:!0,appIds:["252490"],depositPercentage:0,link:null,data:null,group:"A",forExternalInjection:!0},{name:"steamLiveSell",title:"Steam",isView:!1,appIds:["730"],link:null,data:null,group:"B",forExternalInjection:!0}]}},{key:"_getMarkets",value:function(t,n,a){var i,r=e._markets.filter((function(e){return e.isView&&e.appIds.includes(t)}));if(!window.sih_subscribe_ads){var s="undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_country?g_rgWalletInfo.wallet_country:"US";r=["RU","BY"].includes(s)?"zh-TW"!==g_strCountryCode&&"zh-CN"!==g_strCountryCode?r.filter((function(e){if("dmarket"!==e.name&&"igxe"!==e.name)return e.name})):r.filter((function(e){return e.name})):["ZH","CN"].includes(s)?r.filter((function(e){return e.name})):"zh-TW"!==g_strCountryCode&&"zh-CN"!==g_strCountryCode?r.filter((function(e){return"igxe"!==e.name})):r.filter((function(e){return e.name}))}r.forEach((function(i){i.link=e._getLink(i.name,t,n,a)}));var o=e._markets.filter((function(e){return!e.isView}));return(i=r).push.apply(i,_toConsumableArray(o)),r}},{key:"_getRandomInt",value:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}},{key:"excludeBuyMarkets",value:function(e){var t=["csgocomBuy"];return e.filter((function(e){return!t.includes(e.name)}))}}])}();_Marketplace=marketplace_service_Marketplace,_defineProperty(marketplace_service_Marketplace,"_statusLoadMarkersEnum",{NO_LOADING:"no_loading",LOADING:"loading",ERROR:"error",SUCCESS:"success"}),_defineProperty(marketplace_service_Marketplace,"_statusLoadMarkers",_Marketplace._statusLoadMarkersEnum.NO_LOADING),_defineProperty(marketplace_service_Marketplace,"_marketplace",null),_defineProperty(marketplace_service_Marketplace,"_getLink",(function(e,t,n,a,i){var r="https://t.sih-db.com/".concat(i?"external-panel":"15GzoA"),s="",o="";if("csgocom"===e||"csgocomBuy"===e){switch(t){case"730":o="csgo.com";break;case"570":o="market.dota2.net";break;case"440":o="tf2.tm";break;case"252490":o="rust.tm";break;default:return}s="".concat(r,"?subid1=").concat(encodeURIComponent("?s=price&t=all&search=".concat(n,"&sd=asc")),"&subid2=").concat(o).concat(a?"-side-menu":"")}if("csmoneyStore"===e&&(s="".concat(r,"?subid1=").concat(encodeURIComponent("".concat(n)),"&subid2=cs.moneyStore").concat(a?"-side-menu":"")),"csmoneyTrade"===e&&(s="".concat(r,"?subid1=").concat(encodeURIComponent("".concat(n)),"&subid2=cs.moneyTrade").concat(a?"-side-menu":"")),"skinport"===e){var l=n.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"-").replace(/^-+|-+$/g,""),c="";"570"===t?c="/dota2":"440"===t?c="/tf2":"252490"===t&&(c="/rust"),s="".concat(r,"?subid1=").concat(encodeURIComponent("".concat(c,"/market?search=").concat(l,"&sort=price&order=asc")),"&subid2=skinport").concat(a?"-side-menu":"")}if("bitskins"===e){var d="";switch(t){case"730":d="csgo";break;case"570":d="dota2";break;case"440":d="tf2"}s="".concat(r,"?subid1=").concat(encodeURIComponent("".concat(d,'?ref_alias=sihfree&search={"order":[{"field":"price","order":"ASC"}],"where":{"skin_name":"').concat(n,'"}}')),"&subid2=newBitskins").concat(a?"-side-menu":"")}if("bitskinsp2p"===e){var _=n.replace(/ /g,"+");s="".concat(r,"?subid1=").concat(encodeURIComponent('?search={"where":{"name":"'.concat(_,'"}}')),"&subid2=p2p-bitskins").concat(a?"-side-menu":"")}if("skinbaron"===e){n=n.replace("Souvenir Package","");var u="";"730"===t?u="/csgo":"440"===t&&(u="/tf2");var m=encodeURIComponent("".concat(u,"?str=").concat(n,"&sort=CF"));s="".concat(r,"?subid1=").concat(m,"&subid2=skinbaron").concat(a?"-side-menu":"")}if("shadowpay"===e){var h=encodeURIComponent("?search=".concat(n));s="".concat(r,"?subid1=").concat(h,"&subid2=shadowpay").concat(a?"-side-menu":"")}if("waxpeer"===e){var p=n.toLocaleLowerCase().replace(/[|()™★]/g,"").replace(/\s{2,}/g," ").trim().replace(/ /g,"-").replace(/&/g,"%26").replace(/cs:/g,"cs-"),f="";["252490"].includes(t)&&(f="rust/"),["440"].includes(t)&&(f="tf2/"),s="".concat(r,"?subid1=").concat(f).concat(p,"/item/&subid2=waxpeer").concat(a?"-side-menu":"")}if("dmarket"===e&&["570","730","252490","440"].includes(t)){var g=n.replace(/[™★]/g,""),b="";"730"===t&&(b="csgo-skins"),"570"===t&&(b="dota2-skins"),"252490"===t&&(b="rust-skins"),"440"===t&&(b="tf2-skins");var v=encodeURIComponent("/ingame-items/item-list/".concat(b,"?title=").concat(g));s="".concat(r,"?subid1=").concat(v,"&subid2=dmarket").concat(a?"-side-menu":"")}if("mannco"===e&&["440","730","570","252490"].includes(t)){var y="";if(n.indexOf("Unusual")>-1)y=encodeURIComponent("/market?e=".concat(n,"&f=ASC&appid=").concat(t));else{var k=n.replace(/[^a-zA-Z0-9 -]/gi,"").replace(/\s{2,}/g," ").trim().replace(/ /gi,"-").toLowerCase();y="/item/".concat(t,"-").concat(k)}s="".concat(r,"?subid1=").concat(y,"&subid2=manncostore").concat(a?"-side-menu":"")}if("tradeit"===e&&["730","440","570","252490"].includes(t)){var S="";"730"===t&&(S="csgo"),"440"===t&&(S="tf2"),"570"===t&&(S="dota2"),"252490"===t&&(S="rust");var I=encodeURIComponent("/".concat(S,"/store?search=").concat(n));s="".concat(r,"?subid1=").concat(I,"&subid2=tradeit").concat(a?"-side-menu":"")}if("tradeitDeposit"===e&&["730","440","570","252490"].includes(t)){var C="";"730"===t&&(C="csgo"),"440"===t&&(C="tf2"),"570"===t&&(C="dota2"),"252490"===t&&(C="rust");var w=encodeURIComponent("/".concat(C,"/trade?search=").concat(n));s="".concat(r,"?subid1=").concat(w,"&subid2=tradeit").concat(a?"-side-menu":"")}if("cstrade"===e&&["440","570","730","252490"].includes(t)&&(s="".concat(r,"?subid1=").concat(n,"&subid2=cstrade").concat(a?"-side-menu":"")),"lootfarm"===e&&["440","570","730","252490"].includes(t)){var A=encodeURIComponent("#skin=".concat(t,"_").concat(n));s="".concat(r,"?subid1=").concat(A,"&subid2=lootfarm").concat(a?"-side-menu":"")}if("swapgg"===e&&["440","570","730","252490"].includes(t)){var x=encodeURIComponent("/browse/".concat(t,"?search=").concat(n.replace("|"," ")));s="".concat(r,"?subid1=").concat(x,"&subid2=swapgg").concat(a?"-side-menu":"")}if("lisskins"===e&&["730","570","252490"].includes(t)){var E="";"730"===t&&(E="csgo"),"570"===t&&(E="dota2"),"252490"===t&&(E="rust");var R=encodeURIComponent("/".concat(E,"/?query=").concat(n));s="".concat(r,"?subid1=").concat(R,"&subid2=lisskins").concat(a?"-side-menu":"")}if("buff163"===e&&["730"].includes(t)){var T="";"730"===t&&(T="csgo");var L=encodeURIComponent("/market/".concat(T,"#tab=selling&page_num=1&search=").concat(n));s="".concat(r,"?subid1=").concat(L,"&subid2=buff163").concat(a?"-side-menu":"")}if("igxe"===e&&["730"].includes(t)){var P=n,O="";"730"===t&&(O="csgo");var M=encodeURIComponent("/market/".concat(O,"?keyword=").concat(P));s="".concat(r,"?subid1=").concat(M,"&subid2=igxe").concat(a?"-side-menu":"")}if("gamerpay"===e&&["730"].includes(t)){var H=encodeURIComponent("/buy?query=".concat(n));s="".concat(r,"?subid1=").concat(H,"&subid2=gamerpay").concat(a?"-side-menu":"")}if("skinsmonkey"===e&&["730"].includes(t)){var N=n,$=encodeURIComponent("appId=".concat(t,"&q=").concat(N));s="".concat(r,"?subid1=").concat($,"&subid2=skinmonkey").concat(a?"-side-menu":"")}if("skinsmonkeycash"===e&&["730"].includes(t)){var J=n,B=encodeURIComponent("appId=".concat(t,"&q=").concat(J));s="".concat(r,"?subid1=").concat(B,"&subid2=skinmonkey").concat(a?"-side-menu":"")}if("skinout"===e&&["730"].includes(t)){var D=n.replace(/[^a-zA-Z0-9★ -]/gi,"").replace(/\s{2,}/g," ").trim().replace(/ /gi,"-").toLowerCase();s="".concat(r,"?subid1=").concat(D,"&subid2=skinout").concat(a?"-side-menu":"")}if("whitemarket"===e&&["730"].includes(t)){var U=n;s="".concat(r,"?subid1=").concat(U,"&subid2=whitemarket").concat(a?"-side-menu":"")}if("haloskins"===e&&["730"].includes(t)){var G=encodeURIComponent(n.replace(/&/,""));s="".concat(r,"?subid1=").concat(G,"&subid2=haloskins").concat(a?"-side-menu":"")}if("cs2go"===e&&["730"].includes(t)){var j=n.replace(/[^a-zA-Z0-9★ -]/gi,"").replace(/\s{2,}/g," ").trim().replace(/ /gi,"-").toLowerCase(),K="".concat(t,"/").concat(j);s="".concat(r,"?subid1=").concat(K,"&subid2=cs2go").concat(a?"-side-menu":"")}if("rustskins"===e&&["252490"].includes(t)){var F="".concat(n);s="".concat(r,"?subid1=").concat(F,"&subid2=rustskins").concat(a?"-side-menu":"")}if("csdeal"===e&&["730","570","440","252490"].includes(t)){var V="";"730"===t&&(V="csgo"),"440"===t&&(V="tf2"),"570"===t&&(V="dota2"),"252490"===t&&(V="rust");var Y=encodeURIComponent(n.replace(/&/,"")),W="".concat(Y,"&game=").concat(V);s="".concat(r,"?subid1=").concat(W,"&subid2=cs.deals").concat(a?"-side-menu":"")}if("sihmarket"===e&&["730"].includes(t)){var z=encodeURIComponent(n);s="".concat(r,"?subid1=").concat(z,"&subid2=sih.app").concat(a?"-side-menu":"")}if("csmarket"===e&&["730"].includes(t)){var Z=encodeURIComponent("".concat(n,"&sortBy=price&utm_source=sih&utm_medium=cpm&utm_campaign=first"));s="".concat(r,"?subid1=").concat(Z,"&subid2=csmarket").concat(a?"-side-menu":"")}if("steamLiveSell"===e&&["730"].includes(t)){var q=encodeURIComponent("".concat(n));s="".concat(r,"?subid1=").concat(q,"&subid2=steam").concat(a?"-side-menu":"")}return i&&(s="".concat(s,"&subid3=").concat(i)),s}));const marketplace_service=new marketplace_service_Marketplace;function sih_app_global_service_typeof(e){return sih_app_global_service_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sih_app_global_service_typeof(e)}function sih_app_global_service_toConsumableArray(e){return sih_app_global_service_arrayWithoutHoles(e)||sih_app_global_service_iterableToArray(e)||sih_app_global_service_unsupportedIterableToArray(e)||sih_app_global_service_nonIterableSpread()}function sih_app_global_service_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function sih_app_global_service_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return sih_app_global_service_arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sih_app_global_service_arrayLikeToArray(e,t):void 0}}function sih_app_global_service_iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function sih_app_global_service_arrayWithoutHoles(e){if(Array.isArray(e))return sih_app_global_service_arrayLikeToArray(e)}function sih_app_global_service_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function sih_app_global_service_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sih_app_global_service_defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,sih_app_global_service_toPropertyKey(a.key),a)}}function sih_app_global_service_createClass(e,t,n){return t&&sih_app_global_service_defineProperties(e.prototype,t),n&&sih_app_global_service_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function sih_app_global_service_defineProperty(e,t,n){return(t=sih_app_global_service_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sih_app_global_service_toPropertyKey(e){var t=sih_app_global_service_toPrimitive(e,"string");return"symbol"==sih_app_global_service_typeof(t)?t:t+""}function sih_app_global_service_toPrimitive(e,t){if("object"!=sih_app_global_service_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=sih_app_global_service_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var sih_app_global_service_SihAppGlobal=function(){function e(){var t=this;sih_app_global_service_classCallCheck(this,e),sih_app_global_service_defineProperty(this,"getOrderStatusText",(function(t){return e._buyOrderStatusEnum[t]})),sih_app_global_service_defineProperty(this,"getLoginSihAppUser",(function(){return new Promise((function(e,t){sih_app_account?chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SIH_APP_USER_INFO"},(function(t){t.success&&Object.keys(t).length||chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_LOGIN_SIH_APP"},(function(t){e(t)})),t.success&&Object.keys(t).length?e(t):e({success:!1})})):e({success:!1,auth:!1})}))})),sih_app_global_service_defineProperty(this,"getUserSihApp",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_USER_AUTH_SIH_APP"},(function(t){e(t)}))}))})),sih_app_global_service_defineProperty(this,"getSubscribeAds",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_CHECK_SUBSCRIBE_ADS"},(function(t){e(t)}))}))})),sih_app_global_service_defineProperty(this,"getSubscribeAdsPlans",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SUBSCRIBE_ADS_PLANS_SIH_APP"},(function(t){e(t)}))}))})),sih_app_global_service_defineProperty(this,"getDaysNumber",(function(e){var t=(new Date).toUTCString(),n=new Date("".concat(t)).getTime(),a=new Date("".concat(e)).getTime()-n,i=Math.round(a/36e5);return i>24?{days:Math.ceil((i-24)/24)}:{hours:i}})),sih_app_global_service_defineProperty(this,"setItemToBuyStack",(function(n){var a=n.hashName,i=void 0===a?null:a,r=n.countAdd,s=void 0===r?1:r,o=n.statusCode,l=void 0===o?null:o,c=n.steamId,d=void 0===c?null:c,_=n.appId,u=void 0===_?"730":_,m=n.price,h=void 0===m?null:m,p=n.image,f=n.url,g=n.gameName,b=void 0===g?null:g,v=n.color,y=void 0===v?"rgb(210, 210, 210)":v,k=n.rarityColor,S=void 0===k?"default":k,I=n.itemId,C=void 0===I?null:I;return new Promise((function(n,a){var r=marketplace_service.getMarkets().find((function(e){return"sihmarket"===e.name}));if(b||(b=e._gameNames[u]),r||h){var o=h||marketplace_service.getPriceMarket(r);if(o&&(o.price||h)){var c=(0,global.getPageParams)(),_=i||encodeURIComponent(c.marketHashName);t.getAllItemsBuyStackByName(_).then((function(r){for(var m=t.getFilterItemsByStatus(r,l),g=[],v=s>1?s-m.length:s,k=p||$J(".market_listing_largeimage").find("img").attr("src"),I=b||$J(".market_listing_nav > a:nth(0)").text(),w=y||$J("#largeiteminfo_item_name").css("color"),A=u&&i?"".concat(u,"/").concat(i):"".concat(c.appId,"/").concat(encodeURIComponent(c.marketHashName)),x=0;x<v;x++){var E,R={appid:u||c.appId,market_hash_name:i?decodeURIComponent(i):c.marketHashName,price:h||o.price,providerName:"sih",steam_id:d||(null!==(E=window)&&void 0!==E&&E.g_steamID?window.g_steamID:sih_steamID),custom_trade_link:null,createdAt:Date.now()+x+1,image:k,url:f||window.location.href,gameName:I,hashMarket:A,color:w,isChecked:!0,rarityColor:S||"default",itemId:C||null};null!==l&&(R.status=l),g.push(R)}if(c&&encodeURIComponent(c.marketHashName)===_&&730==+Object.keys(g_rgAssets)[0]){var T=+Object.keys(g_rgAssets[730]||{})[0],L=Object.values(g_rgAssets[730][T])[0];e.getRarityColor(730,L.classid,L.instanceid).then((function(t){g.forEach((function(e){e.rarityColor=t})),e.setPreparedDataToBuyStack(_,g).then((function(e){n(e)})).catch((function(e){a(e)}))}))}else e.setPreparedDataToBuyStack(_,g).then((function(e){n(e)})).catch((function(e){a(e)}))}))}}else i&&t.getAllItemsBuyStackByName(i).then((function(e){var r=t.getFilterItemsByStatus(e,l);if(r.length){for(var o=r.map((function(e){return e.createdAt})),c=r.find((function(e){return e.createdAt===Math.max.apply(Math,sih_app_global_service_toConsumableArray(o))})),d=s>1?s-r.length:s,_=[],u=0;u<d;u++){var m=Object.assign({},c);m.createdAt=Date.now()+u+1,_.push(m)}var h=sih_app_global_service_defineProperty({},i,[].concat(sih_app_global_service_toConsumableArray(e),_));chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_BUY_STACK_SIH_APP",data:h},(function(e){e.success?n(h[i]):a(e)}))}}))}))})),sih_app_global_service_defineProperty(this,"deleteItemFromBuyStack",(function(e){var n=e.hashName,a=e.argCountDelete,i=void 0===a?null:a,r=e.statusCode,s=void 0===r?null:r,o=e.itemId,l=void 0===o?null:o;return new Promise((function(e,a){t.getAllItemsBuyStackByName(n).then((function(r){var o=t.getFilterItemsByStatus(r,s),c=o.length-(null!==i?i:o.length-1);chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_DELETE_LAST_BUY_STACK_SIH_APP",data:{hashName:n,statusCode:s,countDelete:c,itemId:l}},(function(i){t.getAllItemsBuyStackByName(n).then((function(t){i.success?e(t):a(i)}))}))}))}))})),sih_app_global_service_defineProperty(this,"getAllBuyStack",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_ALL_BUY_STACK_SIH_APP"},(function(t){e(t)}))}))})),sih_app_global_service_defineProperty(this,"getFilterItemsByStatus",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.filter((function(e){return Array.isArray(t)?t.length?t.includes(e.status):!e.status:t?e.status===t:!e.status}))||[]})),sih_app_global_service_defineProperty(this,"updateSIHMarketPrice",(function(){return new Promise((function(e,n){t.getAllBuyStack().then((function(t){if(t.length>0){var n=[],a=[],i=[];t.forEach((function(e){e.itemId?n.push(e.itemId.toString()):a.push(e.market_hash_name)})),n.length&&i.push(new Promise((function(e,t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SIH_MARKET_ACTUAL_PRICES",data:{itemIds:n}},(function(n){n.success?e(n.data):t()}))}))),a.length&&i.push(new Promise((function(e,t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SIH_MARKET_ACTUAL_PRICES",data:{items:a}},(function(n){n.success?e(n.data):t()}))}))),Promise.all(i).then((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_UPDATE_PRICE_ITEMS_BUY_STACK_SIH_APP",data:{items:t.flat()}},(function(t){e(t)}))})).catch((function(){e()}))}else e()}))}))})),sih_app_global_service_defineProperty(this,"changeItemsStatus",(function(e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_CHANGE_STATUS_ITEM_BUY_STACK_SIH_APP",data:e},(function(){t()}))}))})),sih_app_global_service_defineProperty(this,"cancelSihAppOrder",(function(e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_CANCEL_ORDER_SIH_APP",data:{orderId:e}},(function(e){t(e)}))}))})),sih_app_global_service_defineProperty(this,"updateItemLocalHistoryOrders",(function(e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_UPDATE_LOCAL_ITEM_ORDER_SIH_APP",data:{orderId:e}},(function(e){t(e)}))}))})),sih_app_global_service_defineProperty(this,"getUserOrdersHistory",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return new Promise((function(a){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_ORDERS_HISTORY_SIH_APP",data:{isLocal:e,page:t,number:n}},(function(e){a(e)}))}))})),sih_app_global_service_defineProperty(this,"createBuyOrder",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_CREATE_BUY_ORDER_SIH_APP"},(function(t){e(t)}))}))})),sih_app_global_service_defineProperty(this,"getTopSales",(function(e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_TOP_SALES",data:e},(function(e){t(e)}))}))})),sih_app_global_service_defineProperty(this,"getLogs",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SIH_APP_LOG"},(function(t){e(t)}))}))})),sih_app_global_service_defineProperty(this,"readAllNotification",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_READ_SIH_APP_LOG"},(function(t){e(t)}))}))})),sih_app_global_service_defineProperty(this,"renderTextLog",(function(t){return"".concat(e._buyOrderErrorsEnum[t.error]?"".concat(e._buyOrderErrorsEnum[t.error]," <br>"):t.error||t.message||"".concat(SIHLang.sihAppMarket.orders.order," № ").concat(t.orderId," ").concat(SIHLang.sihAppMarket.orders.successful_operation," <br>")," ").concat(t.itemData?"".concat(t.itemData.market_hash_name," <br>"):""," ").concat(t.itemData?"".concat(SIHLang.sihAppMarket.orders.price,": ").concat(t.itemData.price," <br>"):"")})),sih_app_global_service_defineProperty(this,"getLogTemplateByGroup",(function(e){var n;if("bookmarks"===e.groupType){var a=marketplace_service.getLink(e.itemData.marketName||"buff163",e.itemData.appId||"730",e.itemData.market_hash_name,e.itemData.market_hash_name),i=currency_service.A.getPriceFromCurrency(e.itemData.price,e.itemData.currencyId||1).text;n='\n          <div class="column gap-5 items-start pl-50">\n            <span class="text">'.concat(e.title,'</span>\n            <a href="').concat(a,'" target="_blank" class="text text_blue hover-opacity-8"\n              >').concat(e.itemData.market_hash_name,'</a\n            >\n          </div>\n          <div class="row gap-5 items-end pb-2">\n            \x3c!--                    TODO: Добавить проверку на data.itemData.marketName, если его нету, то иконку не рендерить (текущая иконка для теста)--\x3e\n            <img\n              class="notification-panel__icon"\n              src="chrome-extension://').concat(SIHID,"/assets/marketplace/mini-icons/").concat(e.itemData.marketName||"buff163",'.svg"\n              alt="').concat(e.itemData.marketName||"buff163",'"\n            />\n            <span class="text text_green whitespace-nowrap">').concat(i,"</span>\n          </div>\n        ")}else n='\n          <div class="column gap-5 items-start pl-50">\n            <span class="text">'.concat(SIHLang.notifications[e.title],'</span>\n            <span class="text ').concat(e.success?"text_green":"text_red",'">').concat(t.renderTextLog(e),"</span>\n          </div>\n        ");return n})),sih_app_global_service_defineProperty(this,"validateInput",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return isNaN(e)||e<=n?n:e>=t?Math.ceil(t):a?Math.floor(1e3*e)/1e3:Math.ceil(e)})),sih_app_global_service_defineProperty(this,"getSubscribeAdsMethods",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SUBSCRIBE_ADS_METHODS_SIH_APP"},(function(t){e(t)}))}))})),sih_app_global_service_defineProperty(this,"getLinkForInvoice",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new Promise((function(n){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_CREATE_INVOICE",data:{amount:e,method:t}},(function(e){n(e)}))}))})),sih_app_global_service_defineProperty(this,"updateTradeLink",(function(e){chrome.runtime.sendMessage(window.SIHID,{type:"BACKGROUND_UPDATE_TRADELINK_SIH_APP",data:{link:e}})})),sih_app_global_service_defineProperty(this,"getSihAppToken",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SIH_APP_TOKEN"},(function(t){e(t)}))}))})),sih_app_global_service_defineProperty(this,"getAutoLoadFloats",(function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_AUTO_LOAD_FLOATS"},(function(t){e(t)}))}))})),sih_app_global_service_defineProperty(this,"errorHandler",(function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Please, try again";a.toLowerCase().includes("invalid token or session is over")&&(e.text(SIHLang.subscribeAds.modal.reload_page),e.off("click").click((function(){window.location.reload()}))),0===n.length?t.append('<span class="sih-modal__text sih-modal__error_message">'.concat("Error! "+a,"</span>")):(n.text("".concat("Error! "+a)),n.hasClass("blink")?(n.removeClass("blink"),setTimeout((function(){n.addClass("blink")}),100)):n.addClass("blink")),e.removeClass("animated-background animated-background-btn"),t.show()})),this.getAllItemsBuyStackByName=e.getAllItemsBuyStackByName}return sih_app_global_service_createClass(e,null,[{key:"setPreparedDataToBuyStack",value:function(t,n){var a=this;return new Promise((function(i,r){e.getAllItemsBuyStackByName(t).then((function(e){var s=sih_app_global_service_defineProperty({},t,[].concat(sih_app_global_service_toConsumableArray(e),sih_app_global_service_toConsumableArray(n)));chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_BUY_STACK_SIH_APP",data:s},(function(e){e.success?a.getAllItemsBuyStackByName(t).then((function(e){i(e)})):r(e)}))}))}))}},{key:"getRarityColor",value:function(e,t,n){return new Promise((function(a,i){$J.ajax({url:"https://steamcommunity.com/economy/itemclasshover/".concat(e,"/").concat(t,"/").concat(n,"?content_only=1&l=english"),cache:!0}).done((function(e){var t=/BuildHover\( '(.*)', (.*)\);/i.exec(e);switch(JSON.parse(t[2]).tags.find((function(e){return"Rarity"===e.category})).name.toLowerCase()){case"consumer grade":case"base grade":a("b0c3d9");break;case"mil-spec grade":case"distinguished":case"high grade":a("4b69ff");break;case"industrial grade":a("5e98d9");break;case"restricted":case"exceptional":case"remarkable":a("8847ff");break;case"classified":case"superior":case"exotic":a("d32ce6");break;case"covert":case"extraordinary":case"master":a("eb4b4b");break;case"contraband":a("e4ae39")}})).fail((function(e){i(e)}))}))}},{key:"getAllItemsBuyStackByName",value:function(e){return new Promise((function(t){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_BUY_STACK_BY_NAME_SIH_APP",data:{hashName:e}},(function(e){t(e)}))}))}}])}();sih_app_global_service_defineProperty(sih_app_global_service_SihAppGlobal,"_buyOrderStatusEnum",{ordering:SIHLang.sihAppMarket.orders.statuses.ordering,pending:SIHLang.sihAppMarket.orders.statuses.pending,new:SIHLang.sihAppMarket.orders.statuses.new,created:SIHLang.sihAppMarket.orders.statuses.created,processing:SIHLang.sihAppMarket.orders.statuses.processing,sent:SIHLang.sihAppMarket.orders.statuses.sent,finished:SIHLang.sihAppMarket.orders.statuses.finished,failed:SIHLang.sihAppMarket.orders.statuses.failed,penalized:SIHLang.sihAppMarket.orders.statuses.penalized}),sih_app_global_service_defineProperty(sih_app_global_service_SihAppGlobal,"_buyOrderErrorsEnum",{"Not enough balance":SIHLang.sihAppMarket.orders.errors.not_enough_balance,"Time for refills is up":SIHLang.sihAppMarket.orders.errors.time_refills_up,"receiver failed":SIHLang.sihAppMarket.orders.errors.receiver_failed,"max retries reached":SIHLang.sihAppMarket.orders.errors.max_retries_reached}),sih_app_global_service_defineProperty(sih_app_global_service_SihAppGlobal,"_gameNames",{730:"Counter-Strike 2",252490:"Rust",440:"TF2"});const sih_app_global_service=new sih_app_global_service_SihAppGlobal;var debounce=null,RenderFilterCategory=function(){loadHtml(),actionsListener()},UpdateFilterCategoryBalance=function(){var e=$J("#sih-inventory-market-listing"),t=$J("#sih-filter-category");sih_app_global_service.getLoginSihAppUser().then((function(n){if(n.success&&!n.tfaNeed){var a=n.user.balance/1e3;Math.floor(1e3*a)/1e3!==+e.find('.sih-market-store-filter .sih-market-store-filter__input[data-key="maxPrice"]').val()&&t.find('.sih-filter-category__item[data-name="balance"]').removeClass("active")}}))},loadHtml=function(){var e=$J("#sih-inventory-market-listing"),t=$J('\n    <div id="sih-filter-category" class="sih-filter-category">\n      <a href="javascript:void(0)" class="sih-filter-category__item active" data-name="all"\n        >'.concat(SIHLang.sihAppMarket.filter_category.all,'</a\n      >\n      <a href="javascript:void(0)" class="sih-filter-category__item" data-name="balance"\n        >').concat(SIHLang.sihAppMarket.filter_category.balance,"</a\n      >\n    </div>\n  "));e.find(".sih-filter-category").length||$J(".sih-market-header").after(t)},actionsListener=function(){selectCategoryItemAction()},selectCategoryItemAction=function(){$J("#sih-filter-category").find(".sih-filter-category__item").each((function(e,t){var n=$J(t);n.off("click").click((function(){clearTimeout(debounce),debounce=setTimeout((function(){if(n.addClass("active").siblings().removeClass("active"),"balance"===n.attr("data-name"))SihAppGlobal.getLoginSihAppUser().then((function(e){if(e.success&&!e.tfaNeed){var t=e.user.balance/1e3,n=$J('.sih-market-store-filter .sih-market-store-filter__input[data-key="minPrice"]');n.val()>t&&n.val(""),$J(".sih-market-store-filter .sih-market-store-filter__input").val(""),$J('.sih-market-store-filter .sih-market-store-filter__input[data-key="maxPrice"]').val(t).trigger("change").trigger("focusout")}}));else $J(".sih-market-store-filter__reset:visible").trigger("click")}),200)}))}))};function skin_wear_service_typeof(e){return skin_wear_service_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},skin_wear_service_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){skin_wear_service_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function skin_wear_service_defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,skin_wear_service_toPropertyKey(a.key),a)}}function skin_wear_service_createClass(e,t,n){return t&&skin_wear_service_defineProperties(e.prototype,t),n&&skin_wear_service_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function skin_wear_service_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function skin_wear_service_defineProperty(e,t,n){return(t=skin_wear_service_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function skin_wear_service_toPropertyKey(e){var t=skin_wear_service_toPrimitive(e,"string");return"symbol"==skin_wear_service_typeof(t)?t:t+""}function skin_wear_service_toPrimitive(e,t){if("object"!=skin_wear_service_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=skin_wear_service_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var SkinWearService=skin_wear_service_createClass((function e(){var t=this;skin_wear_service_classCallCheck(this,e),skin_wear_service_defineProperty(this,"getWearInfo",(function(t){var n=e._skinWear.find((function(e){return t.includes(e.wearFull)})),a=t.includes("StatTrak™"),i=t.includes("Souvenir");return n?_objectSpread(_objectSpread({},n),{},{name:t,stattrak:a,souvenir:i}):null})),skin_wear_service_defineProperty(this,"getSplitName",(function(e){var n=e.split("|"),a=n[0].replace(/StatTrak™/g,"").replace(/Souvenir/g,"").replace(/[^a-zA-Z0-9 -]/gi,"").replace(/\s{2,}/g,"").trim(),i=2===n.length?n[1]:n.splice(1,n.length).join("|"),r=t.getWearInfo(e),s=r&&null!=r&&r.wearFull?i.replace("(".concat(null==r?void 0:r.wearFull,")"),"").trim():null;return{skinTagName:a,skinName:i,nameWithoutWear:s}}))}));skin_wear_service_defineProperty(SkinWearService,"_skinWear",[{wearFull:"Battle-Scarred",wearShort:"BS",color:"#E05A59",priorityPosition:1},{wearFull:"Field-Tested",wearShort:"FT",color:"#E3E15B",priorityPosition:2},{wearFull:"Minimal Wear",wearShort:"MW",color:"#79D154",priorityPosition:3},{wearFull:"Well-Worn",wearShort:"WW",color:"#E9A75D",priorityPosition:4},{wearFull:"Factory New",wearShort:"FN",color:"#5EB648",priorityPosition:5}]);const skin_wear_service=new SkinWearService;var RenderListingContent=function(){content_loadHtml(),content_actionsListener()},GoToItemPageAction=function(){$J("#sih-market-listing").find(".sih-market-listing__content").find(".sih-market-listing__item").each((function(e,t){$J(t).off("click").click((function(){global.chromeStorage.getLocal("SIH_MARKET_LISTINGS_INFO").then((function(e){1!==e.indexBlockBestOfferOfMarketplaceTabs&&(e.indexBlockBestOfferOfMarketplaceTabs=1,global.chromeStorage.setLocal("SIH_MARKET_LISTINGS_INFO",e))}))}))}))},toggleSIHMarketItemLoaders=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=$J("#sih-market-listing .sih-market-listing__fake-content"),n=t.is(":visible");e?n&&t.fadeOut():n||t.addClass("active").fadeIn()},content_loadHtml=function(){var e=$J("#sih-market-listing"),t=$J('\n    <div class="sih-market-listing__main">\n      <div class="sih-market-listing__fake-content">\n        <div class="sih-market-listing__fake-item"></div>\n        <div class="sih-market-listing__fake-item"></div>\n        <div class="sih-market-listing__fake-item"></div>\n        <div class="sih-market-listing__fake-item"></div>\n        <div class="sih-market-listing__fake-item"></div>\n        <div class="sih-market-listing__fake-item"></div>\n        <div class="sih-market-listing__fake-item"></div>\n        <div class="sih-market-listing__fake-item"></div>\n        <div class="sih-market-listing__fake-item"></div>\n        <div class="sih-market-listing__fake-item"></div>\n      </div>\n      <div class="sih-market-listing__content"></div>\n    </div>\n  ');e.find(".sih-market-listing__content").length||e.append(t)},content_actionsListener=function(){GoToItemPageAction()};function bookmarkBtn_typeof(e){return bookmarkBtn_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bookmarkBtn_typeof(e)}function bookmarkBtn_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function bookmarkBtn_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bookmarkBtn_ownKeys(Object(n),!0).forEach((function(t){bookmarkBtn_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bookmarkBtn_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bookmarkBtn_defineProperty(e,t,n){return(t=bookmarkBtn_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bookmarkBtn_toPropertyKey(e){var t=bookmarkBtn_toPrimitive(e,"string");return"symbol"==bookmarkBtn_typeof(t)?t:t+""}function bookmarkBtn_toPrimitive(e,t){if("object"!=bookmarkBtn_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=bookmarkBtn_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||bookmarkBtn_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bookmarkBtn_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return bookmarkBtn_arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bookmarkBtn_arrayLikeToArray(e,t):void 0}}function bookmarkBtn_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,r,s,o=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=r.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var APP_FULL_NAMES={730:"Counter-Strike 2",252490:"Rust",440:"Team Fortress 2"},RenderBookmarkBtn=function(){bookmarkBtn_loadHtml(),bookmarkBtn_actionsListener()},bookmarkBtn_loadHtml=function(){$J("#sih-market-listing").find(".sih-market-listing__content").find(".sih-market-listing__item").each((function(e,t){var n=$J(t),a=n.find(".sih-market-listing__name").text(),i="730/".concat(encodeURIComponent(a)),r=$J(' <div\n        class="text text_light-blue fs-12 hover-opacity-8 sih-market-listing__'.concat(bookmarkeditems[i]?"remove-bookmark":"add-bookmark",'"\n      >\n        ').concat(bookmarkeditems[i]?"".concat(SIHLang.sihAppMarket.global.remove_bookmark):"".concat(SIHLang.sihAppMarket.global.add_bookmark),"\n      </div>"));n.find(".sih-market-listing__add-bookmark").length||n.find(".sih-market-listing__game-name").after(r)}))},bookmarkBtn_actionsListener=function(){addToBookmarkAction(),removeBookmarkAction()},addToBookmarkAction=function(){var e=$J("#sih-market-listing").find(".sih-market-listing__content").find(".sih-market-listing__item .sih-market-listing__add-bookmark"),t=(new Date).getTime();function n(){var e=bookmarkBtn_objectSpread(bookmarkBtn_objectSpread({},bookmarkscategories),{},bookmarkBtn_defineProperty({},t,"SIHMarket"));global.chromeStorage.setSync("bookmarkscategories",e),window.bookmarkscategories=bookmarkBtn_objectSpread({},e)}e.each((function(e,a){var i=$J(a);i.off("click").click((function(e){if(e.preventDefault(),e.stopPropagation(),Object.keys(bookmarkscategories).length){var a=!0;Object.entries(bookmarkscategories).forEach((function(e){var n=_slicedToArray(e,2),i=n[0],r=n[1];"SIHMarket"===r&&(t=i),a="SIHMarket"===r})),a||n()}else n();var r=$J(this).closest(".sih-market-listing__item"),s=r.find(".sih-market-listing__name").text(),o=r.find(".sih-market-listing__game-name").data("appid"),l="".concat(o,"/").concat(encodeURIComponent(s)),c=+r.find(".sih-market-listing__sih-price").attr("data-price"),d=currency_service.A.getPriceFromCurrency(c,currencyId,1),_=r.find(".market_listing_item_img").attr("src"),u=r.find(".market_listing_item_img").css("border-color"),m=r.attr("href"),h=bookmarkBtn_defineProperty({},l,{marketHashName:s,hashmarket:l,name:s,appid:o,img:_,color:u,gamename:APP_FULL_NAMES[o],url:m,price:d,cat:t});chrome.runtime.sendMessage(SIHID,{type:"UpdateBookmarks",data:h},(function(e){global.chromeStorage.getLocal("bookmarks").then((function(e){window.bookmarkeditems=bookmarkBtn_objectSpread({},e)}))})),i.removeClass("sih-market-listing__add-bookmark").addClass("sih-market-listing__remove-bookmark").text("".concat(SIHLang.sihAppMarket.global.remove_bookmark)),removeBookmarkAction()}))}))},removeBookmarkAction=function(){$J("#sih-market-listing").find(".sih-market-listing__content").find(".sih-market-listing__item .sih-market-listing__remove-bookmark").each((function(e,t){var n=$J(t);n.off("click").click((function(e){e.preventDefault(),e.stopPropagation();var t=$J(this).closest(".sih-market-listing__item").find(".sih-market-listing__name").text(),a="730/".concat(encodeURIComponent(t));chrome.runtime.sendMessage(SIHID,{type:"RemoveBookmark",data:{hashmarket:a}},(function(e){global.chromeStorage.getLocal("bookmarks").then((function(e){window.bookmarkeditems=bookmarkBtn_objectSpread({},e)}))})),n.removeClass("sih-market-listing__remove-bookmark").addClass("sih-market-listing__add-bookmark").text("".concat(SIHLang.sihAppMarket.global.add_bookmark)),addToBookmarkAction()}))}))};function EventRegister_typeof(e){return EventRegister_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EventRegister_typeof(e)}function EventRegister_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function EventRegister_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EventRegister_ownKeys(Object(n),!0).forEach((function(t){EventRegister_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EventRegister_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function EventRegister_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EventRegister_defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,EventRegister_toPropertyKey(a.key),a)}}function EventRegister_createClass(e,t,n){return t&&EventRegister_defineProperties(e.prototype,t),n&&EventRegister_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function EventRegister_defineProperty(e,t,n){return(t=EventRegister_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EventRegister_toPropertyKey(e){var t=EventRegister_toPrimitive(e,"string");return"symbol"==EventRegister_typeof(t)?t:t+""}function EventRegister_toPrimitive(e,t){if("object"!=EventRegister_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=EventRegister_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var EventRegister=function(){return EventRegister_createClass((function e(t){var n=t.eventGroup,a=t.eventType,i=void 0===a?e.EVENT_TYPE:a,r=t.messageType,s=void 0===r?e.MESSAGE_TYPE:r,o=t.lang,l=void 0===o?e.DEFAULT_LANG:o,c=t.country,d=void 0===c?e.DEFAULT_COUNTRY:c,_=t.uid,u=void 0===_?e.DEFAULT_UID:_,m=t.location,h=void 0===m?h&&h.href||"":m,p=t.SIHID,f=void 0===p?window.SIHID:p;EventRegister_classCallCheck(this,e),this.eventGroup=n,this.eventType=i,this.messageType=s,this.location=h,this.SIHID=f,this.lang=l,this.country=d,this.uid=u}),[{key:"register",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={type:this.eventType,payload:EventRegister_objectSpread({uid:this.uid,country:this.country,lang:this.lang,group:this.eventGroup,link:this.location},e)};chrome.runtime.sendMessage(this.SIHID,{type:this.messageType,data:t})}}])}();function InventoryPageEventRegister_typeof(e){return InventoryPageEventRegister_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},InventoryPageEventRegister_typeof(e)}function InventoryPageEventRegister_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function InventoryPageEventRegister_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?InventoryPageEventRegister_ownKeys(Object(n),!0).forEach((function(t){InventoryPageEventRegister_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):InventoryPageEventRegister_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function InventoryPageEventRegister_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function InventoryPageEventRegister_defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,InventoryPageEventRegister_toPropertyKey(a.key),a)}}function InventoryPageEventRegister_createClass(e,t,n){return t&&InventoryPageEventRegister_defineProperties(e.prototype,t),n&&InventoryPageEventRegister_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _callSuper(e,t,n){return t=_getPrototypeOf(t),_possibleConstructorReturn(e,_isNativeReflectConstruct()?Reflect.construct(t,n||[],_getPrototypeOf(e).constructor):t.apply(e,n))}function _possibleConstructorReturn(e,t){if(t&&("object"==InventoryPageEventRegister_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _superPropGet(e,t,n,a){var i=_get(_getPrototypeOf(1&a?e.prototype:e),t,n);return 2&a&&"function"==typeof i?function(e){return i.apply(n,e)}:i}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var a=_superPropBase(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},_get.apply(null,arguments)}function _superPropBase(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function InventoryPageEventRegister_defineProperty(e,t,n){return(t=InventoryPageEventRegister_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function InventoryPageEventRegister_toPropertyKey(e){var t=InventoryPageEventRegister_toPrimitive(e,"string");return"symbol"==InventoryPageEventRegister_typeof(t)?t:t+""}function InventoryPageEventRegister_toPrimitive(e,t){if("object"!=InventoryPageEventRegister_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=InventoryPageEventRegister_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}EventRegister_defineProperty(EventRegister,"EVENT_TYPE","events"),EventRegister_defineProperty(EventRegister,"MESSAGE_TYPE","EVENT_STORE"),EventRegister_defineProperty(EventRegister,"DEFAULT_COUNTRY","n/a"),EventRegister_defineProperty(EventRegister,"DEFAULT_LANG","n/a"),EventRegister_defineProperty(EventRegister,"DEFAULT_UID","n/a");var InventoryPageEventRegister=function(e){function t(e){var n,a=e.eventType,i=void 0===a?t.EVENT_TYPE:a,r=e.messageType,s=void 0===r?t.MESSAGE_TYPE:r,o=e.SIHID,l=void 0===o?window.SIHID:o;return InventoryPageEventRegister_classCallCheck(this,t),(n=_callSuper(this,t,[{eventGroup:t.EVENT_GROUP,eventType:i,messageType:s,SIHID:l}])).eventType=i,n.messageType=s,n.SIHID=l,n}return _inherits(t,e),InventoryPageEventRegister_createClass(t,[{key:"register",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.getUID(this.SIHID).then((function(a){return _superPropGet(t,"register",e,3)([InventoryPageEventRegister_objectSpread({uid:a,country:(g_strCountryCode||"").toLowerCase(),lang:(g_strLanguage||"").toLowerCase(),data:{steamId:g_steamID}},n)])}))}}],[{key:"getUID",value:function(e){try{return new Promise((function(t){chrome.runtime.sendMessage(e,{type:"BACKGROUND_GET_SIH_TOKEN"},t)}))}catch(e){}}}])}(EventRegister);InventoryPageEventRegister_defineProperty(InventoryPageEventRegister,"EVENT_GROUP","inventory-page-events"),InventoryPageEventRegister_defineProperty(InventoryPageEventRegister,"EVENT_TYPE","events"),InventoryPageEventRegister_defineProperty(InventoryPageEventRegister,"MESSAGE_TYPE","EVENT_STORE");var MAX_ITEM_STACK_COUNT=1,SIH_MARKET_AVAILABLE_APPS=null;function load(){var e=getPageParams();if(SIH_MARKET_AVAILABLE_APPS.includes(+e.appId)&&sih_app_account&&g_steamID)var t=setInterval((function(){if(Marketplace.checkLoadMarkets()){clearInterval(t);var e=Marketplace.getMarkets().find((function(e){return"sihmarket"===e.name}));if(e){var n=Marketplace.getPriceMarket(e);n&&n.price&&n.price>=.01&&(loadSIHMarketContainerHTML(Math.ceil(100*n.price)/100,"sih"),addToCart(),renderCountItemFromBuyStack().then((function(){changeCountItemInBuyStack()})))}}}),100)}function loadSIHMarketContainerHTML(e,t){var n=LocalStorageMarketplace.get(),a=CurrencyService.getPriceFromCurrency(1,n.currencyCode).text,i=formatNumberToLocalRu(e,1),r=formatNumberToLocalRu(e,n.currencyCode),s=$J("#sih_block_best_offer_of_marketplace_tabs_2"),o=$J('\n    <div class="sih-v-splitter"></div>\n    <div class="sih_market column sihmarket_container">\n      <div class="title">'.concat(SIHLang.sihAppMarket.listing_lot.sih_best_price,'</div>\n\n      <div class="sih_market__column items-start ').concat(1==+n.currencyCode?"mb-18":"",'">\n        <span class="sih_market__price"\n          >').concat(1!==n.currencyCode?r:i,"</span\n        >\n        ").concat(1!=+n.currencyCode?'<span class="sih_market__text sih_market__text--gray sih_converted-market__price pt-2" title="'.concat(SIHLang.sihAppMarket.listing_lot.current_rate,"  $1 - ").concat(a,'">').concat(i,"</span>"):"",'\n      </div>\n\n      <div class="sih_market__row mt-16 gap-12">\n        <a\n          href="javascript:void(0)"\n          id="sih_market__add-to-cart"\n          class="sih_market__button sih_market__button--blue sih_market__button--cart"\n        >\n          <span class="sih_market__text sih_market__text--small sih_market__text--white text-uppercase"\n            >').concat(SIHLang.sihAppMarket.listing_lot.add_cart,'</span\n          >\n\n          <div class="sih_market__in-cart sih_market__row">\n            <svg width="16" height="16" viewBox="0 0 22 19" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path\n                fill-rule="evenodd"\n                clip-rule="evenodd"\n                d="M16.21 7H21C21.55 7 22 7.45 22 8L21.97 8.27L19.43 17.54C19.19 18.38 18.42 19 17.5 19H4.5C3.58 19 2.81 18.38 2.58 17.54L0.04 8.27C0 8.18 0 8.09 0 8C0 7.45 0.45 7 1 7H5.79L10.17 0.45C10.36 0.16 10.68 0 11 0C11.32 0 11.64 0.16 11.83 0.44L16.21 7ZM13.8 7L11 2.8L8.2 7H13.8Z"\n                fill="white"\n              />\n            </svg>\n\n            <svg width="8" height="12" viewBox="0 0 8 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path\n                d="M0.589844 10.58L5.16984 6L0.589844 1.41L1.99984 0L7.99984 6L1.99984 12L0.589844 10.58Z"\n                fill="white"\n              />\n            </svg>\n          </div>\n        </a>\n      </div>\n      <div class="sih_market__error"></div>\n    </div>\n  '));o.find(".sih_converted-market__price").tooltip({position:{my:"left bottom",at:"left top"}}),0!==s.find(".sih_market").length&&(s.find(".sih-v-splitter").remove(),s.find(".sihmarket_container").remove()),s.find(".markets_container").append(o),$J(".market_container").hide()}function loadCartCountBlockHtml(e){var t=$J("#sih_block_best_offer_of_marketplace_tabs_2");if(e){var n=t.find(".sih_market__row--cart-counter"),a=t.find("#sih_market__add-to-cart"),i=e.filter((function(e){return!e.status})).length;!n.length&&i&&(a.find(".sih_market__in-cart").css("display","flex").show(),a.find(".sih_market__text").text(""))}}function addToCart(){var e=$J(".sih_market"),t=e.find("#sih_market__add-to-cart"),n=e.find(".sih_market__error");t.click((function(){var t=e.find(".sih_market__in-cart"),a=n.find(".sih-modal__error_message");if("none"===t.css("display")){var i=getPageParams(),r={hashName:encodeURIComponent(i.marketHashName),countAdd:1,appId:i.appId,image:$J(".market_listing_largeimage").find("img").attr("src"),url:window.location.href};SihAppGlobal.setItemToBuyStack(r).then((function(e){loadCartCountBlockHtml(e),changeCountItemInBuyStack(),ChangeCartCountHeaderMenu(),ChangeItemCountInItemPage(),$J("#sih-header-cart").trigger("click")})).catch((function(e){SihAppGlobal.errorHandler(null,n,a,e.error)})),registerAddToCartClick()}else $J("#sih-header-cart").trigger("click")}))}function renderCountItemFromBuyStack(){return new Promise((function(e){var t=encodeURIComponent(getPageParams().marketHashName);SihAppGlobal.getAllItemsBuyStackByName(t).then((function(t){loadCartCountBlockHtml(t),e()}))}))}function changeCountItemInBuyStack(){var e=$J("#sih_block_best_offer_of_marketplace_tabs_2"),t=e.find(".sih_market__error"),n=e.find("#sih_market__increment"),a=e.find("#sih_market__decrement"),i=e.find("#sih_market__cart-count-input"),r=encodeURIComponent(getPageParams().marketHashName);n.click((function(){var e=t.find(".sih-modal__error_message");+i.val()>=MAX_ITEM_STACK_COUNT-1&&$J(this).addClass("opacity-5 pointer-events-none"),SihAppGlobal.setItemToBuyStack({}).then((function(e){ChangeItemCountInItemPage(),ChangeCartCountHeaderMenu(),t.hide()})).catch((function(n){SihAppGlobal.errorHandler(null,t,e,n.error)}))})),a.click((function(){var e=t.find(".sih-modal__error_message");+i.val()<=MAX_ITEM_STACK_COUNT&&n.removeClass("opacity-5 pointer-events-none"),SihAppGlobal.deleteItemFromBuyStack({hashName:r}).then((function(){ChangeItemCountInItemPage(),ChangeCartCountHeaderMenu(),t.hide()})).catch((function(n){SihAppGlobal.errorHandler(null,t,e,n.error)}))})),i.focusout((function(){var e=Math.ceil($J(this).val());(e=SihAppGlobal.validateInput(e,MAX_ITEM_STACK_COUNT))>=MAX_ITEM_STACK_COUNT?n.addClass("opacity-5 pointer-events-none"):n.removeClass("opacity-5 pointer-events-none");var a=t.find(".sih-modal__error_message");SihAppGlobal.getAllItemsBuyStackByName(r).then((function(n){var i=n.filter((function(e){return!e.status})).length;if(e>=i&&1!==e)SihAppGlobal.setItemToBuyStack({hashName:r,countAdd:e}).then((function(e){ChangeItemCountInItemPage(),ChangeCartCountHeaderMenu(),t.hide()})).catch((function(e){SihAppGlobal.errorHandler(null,t,a,e.error)}));else{var s={hashName:r,argsCountDelete:e};SihAppGlobal.deleteItemFromBuyStack(s).then((function(e){ChangeItemCountInItemPage(),ChangeCartCountHeaderMenu(),t.hide()})).catch((function(e){SihAppGlobal.errorHandler(null,t,a,e.error)}))}}))}))}function ChangeItemCountInItemPage(){var e=$J("#sih_block_best_offer_of_marketplace_tabs_2"),t=e.find(".sih_market__row--cart-counter"),n=e.find("#sih_market__cart-count-input"),a=e.find("#sih_market__add-to-cart"),i=(0,global.getPageParams)().marketHashName,r=encodeURIComponent(i);sih_app_global_service.getAllItemsBuyStackByName(r).then((function(e){var r=sih_app_global_service.getFilterItemsByStatus(e),s=r.length;s?r.find((function(e){return e.market_hash_name===i}))&&(n.val(s),"none"===t.css("display")&&(t.show(),a.find(".sih_market__in-cart").css("display","flex").show(),a.find(".sih_market__text").text(""))):(t.hide(),a.find(".sih_market__in-cart").hide(),a.find(".sih_market__text").text(SIHLang.sihAppMarket.listing_lot.add_cart))}))}function eventRegister_registerAddToCartClick(){}function eventRegister_registerOpenNotificationClick(){}function registerOpenShoppingCartClick(){}function registerOpenOrdersClick(){}function registerCartBuyNowClick(){}var MARKET_LISTING_KEY="SIH_MARKET_LISTINGS_INFO",topSales_debounce=null;function RenderTopSalesPanel(e){topSales_loadHtml(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}var topSales_loadHtml=function(e,t){e.find(".sih-top-sales").length&&e.find(".sih-top-sales").remove(),renderFakeTopSales(e,t);var n={offset:Math.floor(10*Math.random()+1),limit:5,appId:730};sih_app_global_service.getTopSales(t||n).then((function(a){var i=a.data;a.pagination;removeFakeTopSales().then((function(){if(i&&i.length){var a=$J('\n          <div class="sih-global sih-top-sales">\n            <span class="title sih-modal__text_md"\n              >'.concat(e.closest("#skins-refilling").length?"".concat(SIHLang.skinsRefilling.modal.top_sales_title):SIHLang.sihAppMarket.topSales.title,'</span\n            >\n            <div class="sih-top-sales__content row items-stretch gap-12"></div>\n          </div>\n        ')),r=$J('\n          <a href="javascript:void(0)" class="row items-center sih-top-sales__refresh">\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path\n                d="M17.65 6.35C16.2 4.9 14.21 4 12 4C9.87827 4 7.84344 4.84285 6.34315 6.34315C4.84285 7.84344 4 9.87827 4 12C4 14.1217 4.84285 16.1566 6.34315 17.6569C7.84344 19.1571 9.87827 20 12 20C15.73 20 18.84 17.45 19.73 14H17.65C16.83 16.33 14.61 18 12 18C10.4087 18 8.88258 17.3679 7.75736 16.2426C6.63214 15.1174 6 13.5913 6 12C6 10.4087 6.63214 8.88258 7.75736 7.75736C8.88258 6.63214 10.4087 6 12 6C13.66 6 15.14 6.69 16.22 7.78L13 11H20V4L17.65 6.35Z"\n                fill="white"\n              />\n            </svg>\n          </a>\n        ');a.find(".sih-top-sales__content").append(r),e.find(".sih-top-sales").length||(e.append(a),renderSaleItems(i,730).then((function(){$J(".sih-top-sales__content").find(".sih-top-sales__item").fadeIn(),topSales_actionsListener(t||n)})))}else renderEmptyBlock(e,t)}))}))},renderFakeTopSales=function(e,t){for(var n=(t||{limit:5}).limit,a=$J('\n    <div class="sih-global sih-top-sales sih-top-sales__fake">\n      <div class="w-265 h-18 bg-grey rounded-4"></div>\n      <div class="sih-top-sales__content row items-center gap-12"></div>\n    </div>\n  '),i=0;i<n;i++)a.find(".sih-top-sales__content").append('<div class="sih-top-sales__item h-197 bg-grey rounded-4"></div>');if(n<=5){a.find(".sih-top-sales__content").append('<div class="w-24 h-24 rounded-50per bg-grey"></div>')}e.find(".sih-top-sales__fake").length||e.append(a)},renderEmptyBlock=function(e,t){var n=$J('\n    <div class="sih-global sih-top-sales sih-top-sales__empty">\n      <div class="column w-320 justify-center gap-20">\n        <span class="text text_white fs-24 bold">'.concat(SIHLang.sihAppMarket.topSales.plug_tab.title,'</span>\n        <span class="text text_white">').concat(SIHLang.sihAppMarket.topSales.plug_tab.text_1,'</span>\n        <a href="javascript:void(0)" class="relative text text_blue"\n          >').concat(SIHLang.sihAppMarket.topSales.plug_tab.text_2,"</a\n        >\n      </div>\n    </div>\n  "));n.find("a").off("click").click((function(){$J(".sih-top-sales__empty").fadeOut(300,(function(){$J(".sih-top-sales__empty").remove(),topSales_loadHtml(e,t)}))})),e.find(".sih-top-sales__empty").length||e.append(n)},removeFakeTopSales=function(){return new Promise((function(e){$J(".sih-top-sales__fake").fadeOut(500,(function(){e(),$J(".sih-top-sales__fake").remove()}))}))},topSales_actionsListener=function(e){refreshAction(e),addInCartAction()},renderSaleItems=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:730;return new Promise((function(n,a){sih_app_global_service.getAllBuyStack().then((function(a){e.reverse().forEach((function(e){var n=skin_wear_service.getWearInfo(e.item),i=skin_wear_service.getSplitName(e.item),r=i.skinTagName,s=i.skinName,o=encodeURIComponent(e.item),l=currency_service.A.getPriceFromCurrency(e.steamPrice,1,1).text,c=currency_service.A.getPriceFromCurrency(e.price,1,1,!1,3).text,d=a.find((function(t){return t.itemId||e.id?t.market_hash_name===e.item&&+t.itemId==+e.id:t.market_hash_name===e.item})),_=$J('\n          <a\n            href="https://steamcommunity.com/market/listings/'.concat(t,"/").concat(o,'"\n            class="sih-top-sales__item column justify-between"\n            style="display: none"\n          >\n            <div class="row justify-between px-8">\n              <div class="row items-center gap-5">\n                <div\n                  class="row w-8 h-8 rounded-50per"\n                  style="background-color: ').concat(n&&n.color?n.color:"transparent",'"\n                ></div>\n                <span class="sih-top-sales__wear-short text fs-12"\n                  >').concat(n&&n.wearShort?n.wearShort:"",'</span\n                >\n              </div>\n\n              <span class="text text_green-900 fs-12">-').concat(Math.ceil(100*e.profitPercent)/100,' %</span>\n            </div>\n            <div class="row justify-center">\n              <div class="sih-top-sales__image">\n                <img\n                  src="https://community.cloudflare.steamstatic.com/economy/image/').concat(e.image,'"\n                  alt="').concat(e.item,'"\n                />\n              </div>\n            </div>\n            <div class="column px-8 sih-top-sales__name-block" title="').concat(e.item,'">\n              <span class="text text_light-grey fs-10">').concat(r,'</span>\n              <span class="text fs-12 sih-top-sales__item-name">').concat(s,'</span>\n            </div>\n            <div class="column gap-8 mt-11 px-8">\n              <div class="row items-center gap-5">\n                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                  <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2C6.73 2 2.43 6.05 2 11.2L7.38 13.41C7.83 13.1 8.38 12.92 8.97 12.92L9.13 12.93L11.5 9.47V9.42C11.5 7.34 13.2 5.65 15.28 5.65C17.36 5.65 19.05 7.34 19.05 9.42C19.05 11.5 17.36 13.19 15.28 13.19H15.2L11.8 15.62V15.75C11.8 17.31 10.53 18.58 8.97 18.58C7.6 18.58 6.45 17.6 6.19 16.31L2.36 14.73C3.55 18.92 7.4 22 12 22C12.8828 22 13.7536 21.8833 14.5917 21.6583C13.6124 20.7456 13 19.4443 13 18C13 15.2386 15.2386 13 18 13C19.4443 13 20.7456 13.6124 21.6583 14.5917C21.8833 13.7536 22 12.8828 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7362 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612ZM10.33 16.33C10 17.13 9.08 17.5 8.28 17.17L7.06 16.67C7.27 17.12 7.65 17.5 8.15 17.71C9.23 18.16 10.5 17.64 10.93 16.56C11.15 16.04 11.15 15.46 10.93 14.94C10.72 14.41 10.31 14 9.78 13.79C9.26 13.57 8.71 13.58 8.22 13.76L9.5 14.29C10.28 14.62 10.66 15.53 10.33 16.33ZM15.28 11.94C16.67 11.94 17.8 10.81 17.8 9.42C17.8 8.04 16.67 6.91 15.28 6.91C14.95 6.90868 14.623 6.9727 14.3179 7.09837C14.0128 7.22404 13.7356 7.40887 13.5022 7.64221C13.2689 7.87555 13.084 8.15278 12.9584 8.4579C12.8327 8.76303 12.7687 9.09001 12.77 9.42C12.77 10.81 13.9 11.94 15.28 11.94ZM15.29 11.31C14.24 11.31 13.4 10.46 13.4 9.42C13.4 8.38 14.24 7.53 15.29 7.53C16.33 7.53 17.17 8.38 17.17 9.42C17.17 10.46 16.33 11.31 15.29 11.31Z"\n                    fill="white"\n                  />\n                  <circle cx="18" cy="18" r="3" fill="#3DC67D" />\n                </svg>\n\n                <span class="sih-top-sales__price max-w-90 text text_light-grey fs-12"\n                  >').concat(l,'</span\n                >\n              </div>\n\n              <button\n                class="sih-top-sales__in-cart-btn sih-modal__button sih-modal__button_blue sih-modal__row justify-center items-center gap-4 py-8 px-24 rounded-4"\n                data-price="').concat(e.price,'"\n                data-rarity-color="').concat(e.color||"",'"\n                data-itemid="').concat(e.id||"",'"\n              >\n                ').concat(d?"":'<img class="w-14 h-14" src="chrome-extension://'.concat(SIHID,'/assets/icons/top_sales_cart.svg" alt="sihmarket">'),'\n                <span class="sih-modal__text sih-modal__text_md sih-modal__text_medium lh-16 whitespace-nowrap"\n                  >').concat(d?SIHLang.sihAppMarket.listing_lot.in_cart:c,"</span\n                >\n              </button>\n            </div>\n          </a>\n        ")),u=$J('\n          <div class="row gap-5">\n            <span class="text fs-12" style="color: #F39227">ST</span>\n            <span class="text fs-12">|</span>\n          </div>\n        '),m=$J('\n          <div class="row gap-5">\n            <span class="text fs-12" style="color: #FFC700">SV</span>\n            <span class="text fs-12">|</span>\n          </div>\n        ');n&&n.stattrak&&_.find(".sih-top-sales__wear-short").before(u),n&&n.souvenir&&_.find(".sih-top-sales__wear-short").before(m),_.find(".sih-top-sales__name-block").tooltip({classes:{"ui-tooltip":"sih-top-sales__tooltip"},position:{my:"left top",at:"left bottom+10"}}),goToItemPageAction(_),$J(".sih-top-sales__content").prepend(_)})),addInCartAction(),n()}))}))},goToItemPageAction=function(e){e.off("click").click((function(){global.chromeStorage.getLocal(MARKET_LISTING_KEY).then((function(e){1!==e.indexBlockBestOfferOfMarketplaceTabs&&(e.indexBlockBestOfferOfMarketplaceTabs=1,e.set(e))}))}))},refreshAction=function(e){var t=$J(".sih-top-sales");t.find(".sih-top-sales__refresh").off("click").click((function(){t.hide(),renderFakeTopSales($J(".sih-modal__inner .sih-modal__bottom"),e);var n=$J(this);!n.hasClass("pointer-events-none")&&n.addClass("pointer-events-none");var a=t.find(".sih-top-sales__item");a.each((function(e,t){$J(t).append('<div class="animated-item"></div>')})),clearTimeout(topSales_debounce),topSales_debounce=setTimeout((function(){e.offset=Math.floor(10*Math.random()+1),sih_app_global_service.getTopSales(e).then((function(i){var r=i.data,s=(i.pagination,0);r&&r.length&&a.fadeOut(300,(function(){++s===r.length&&(t.find(".sih-top-sales__item").remove(),renderSaleItems(r,e.appId).then((function(){removeFakeTopSales().then((function(){var e=t.find(".sih-top-sales__item");t.fadeIn(),e.fadeIn(),n.removeClass("pointer-events-none")}))})))}))}))}),500)}))},addInCartAction=function(){$J(".sih-top-sales").find(".sih-top-sales__in-cart-btn").off("click").click((function(e){e.preventDefault(),e.stopPropagation();var t=$J(this).closest(".sih-top-sales__item"),n=t.find(".sih-top-sales__name-block").attr("title"),a=encodeURIComponent(n),i=+t.find(".sih-top-sales__in-cart-btn").data("price"),r=t.find(".sih-top-sales__in-cart-btn").data("rarityColor"),s=t.find(".sih-top-sales__image img").attr("src"),o=t.attr("href"),l=t.find(".sih-top-sales__in-cart-btn").data("itemid"),c={appId:"730",hashName:a,countAdd:1,price:i,image:s,url:o,rarityColor:r,itemId:l};sih_app_global_service.getAllBuyStack().then((function(e){var i=e.find((function(e){return e.itemId||l?e.market_hash_name===n&&+e.itemId==+l:e.market_hash_name===n}));i?sih_app_global_service.deleteItemFromBuyStack({hashName:a,itemId:l}).then((function(){r()})):sih_app_global_service.setItemToBuyStack(c).then((function(){r()}));var r=function(){var e=t.find(".sih-top-sales__in-cart-btn");actionMenu_ChangeCartCountHeaderMenu(),ChangeItemCountInItemPage(),UpdateSihMarketTabBuyStack(),t.closest("#sih-modal__buy-orders").length?RenderItemsRow("cart-tab").then((function(){toggleInCartBtn(e,!!i),RenderCart(null,!1)})):toggleInCartBtn(e,!!i)}}))}))},toggleInCartBtn=function(e,t){if(t){var n=currency_service.A.getPriceFromCurrency(e.data("price"),1,1,!1,3).text;e.html('\n      <img class="w-14 h-14" src="chrome-extension://'.concat(SIHID,'/assets/icons/top_sales_cart.svg" alt="sihmarket" />\n      <span class="sih-modal__text sih-modal__text_md sih-modal__text_medium lh-16 whitespace-nowrap"\n        >').concat(n,"</span\n      >\n    "))}else e.html('\n      <span class="sih-modal__text sih-modal__text_md sih-modal__text_medium lh-16 whitespace-nowrap"\n        >'.concat(SIHLang.sihAppMarket.listing_lot.in_cart,"</span\n      >\n    "))};function ordersHistory_toConsumableArray(e){return ordersHistory_arrayWithoutHoles(e)||ordersHistory_iterableToArray(e)||ordersHistory_unsupportedIterableToArray(e)||ordersHistory_nonIterableSpread()}function ordersHistory_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ordersHistory_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return ordersHistory_arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ordersHistory_arrayLikeToArray(e,t):void 0}}function ordersHistory_iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ordersHistory_arrayWithoutHoles(e){if(Array.isArray(e))return ordersHistory_arrayLikeToArray(e)}function ordersHistory_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var currencyIdLocal=1;function ModalOrdersHistory(){ordersHistory_loadHtml()}function ordersHistory_loadHtml(){var e=$J("#sih-modal__buy-orders").find(".orders-tab").find(".sih-modal__inner");e.find(".orders-history-tab__content").length||e.append('\n    <div class="orders-tab__content orders-history-tab__content hidden"></div>\n    <div id="pagination-container"></div>\n  ')}function RenderOrdersHistoryItems(){var e=$J("#sih-modal__buy-orders").find(".sih-modal.orders-tab").find(".orders-history-tab__content");e.find(".orders-tab__item").remove(),e.find(".orders-tab__plug").remove(),sih_app_global_service.getUserOrdersHistory().then((function(t){if(t.success||t.tfaNeed)if(t.orders.data.length){var n=sih_app_global_service.getFilterItemsByStatus(t.orders.data,["failed","finished","penalized"]);n.length&&UpdateRefreshOrderTimer(),renderPaginationOrdersHistory(n,t.orders.pagination)}else{var a=$J('\n          <div class="orders-tab__plug sih-modal__column w-100per h-100per justify-center items-center gap-20">\n            <span class="sih-modal__text sih-modal__text_xl">'.concat(SIHLang.sihAppMarket.orders.plug_history_title,'</span>\n            <span class="sih-modal__text sih-modal__text_md">').concat(SIHLang.sihAppMarket.orders.plug_text,"</span>\n          </div>\n        "));e.find(".orders-tab__plug").length||e.append(a)}else{var i=$J('\n        <div class="orders-tab__plug sih-modal__column w-100per h-100per justify-center items-center gap-20">\n          <span class="sih-modal__text sih-modal__text_xl">'.concat(SIHLang.sihAppMarket.orders.plug_history_title,'</span>\n          <span class="sih-modal__text sih-modal__text_md">').concat(SIHLang.sihAppMarket.orders.plug_text,"</span>\n        </div>\n      "));e.find(".orders-tab__plug").length||e.append(i)}HideActiveTabOrdersLoaders()}))}function renderPaginationOrdersHistory(e,t){var n=$J("#sih-modal__buy-orders").find(".sih-modal.orders-tab"),a=n.find(".orders-history-tab__content"),i=n.find("#pagination-container");function r(n){var a=$J(n.currentTarget).attr("data-num").trim();if(a&&10*a>t.perPage*t.page){for(var r=t.page,s=Math.ceil(10*a/t.perPage),o=[],l=r+1;l<=s;l++)o.push(sih_app_global_service.getUserOrdersHistory(!1,l));ShowActiveTabOrdersLoaders().then((function(){Promise.all(o).then((function(t){var n,r=[];t.forEach((function(t){var a=sih_app_global_service.getFilterItemsByStatus(t.orders.data,["failed","finished","penalized"]);r=r.length?[].concat(ordersHistory_toConsumableArray(r),ordersHistory_toConsumableArray(a)):[].concat(ordersHistory_toConsumableArray(e.map((function(e){return e}))),ordersHistory_toConsumableArray(a)),n=t.orders.pagination})),renderPaginationOrdersHistory(r,n),i.pagination(a),HideActiveTabOrdersLoaders()}))}))}}e.length<=t.total&&(e.length=t.total),i.pagination({dataSource:e,pageSize:10,afterNextOnClick:function(e){r(e)},afterPageOnClick:function(e){r(e)},callback:function(e){var t=simpleTemplating(e);a.html(t)}})}function simpleTemplating(e){var t='<div class="sih-modal__column gap-10">';return e.forEach((function(e){var n=currency_service.A.getPriceFromCurrency(e.item_amount/1e3,currencyIdLocal,1,!1,3).text,a=new Date(e.created_at).toLocaleString();t+='\n      <div class="orders-tab__item item sih-modal__column rounded-8">\n        <div class="sih-modal__row sih-modal__text sih-modal__text_xl">\n          '.concat(SIHLang.sihAppMarket.orders.order," #").concat(e.id,'\n        </div>\n\n        <div class="sih-modal__row justify-between mt-20">\n          \x3c!--TODO: change appid when the store is expanded--\x3e\n\n          <div class="sih-modal__column gap-10">\n            <div class="sih-modal__row items-start gap-15">\n              <a\n                href="https://steamcommunity.com/market/listings/730/').concat(encodeURIComponent(e.item_name),'"\n                class="item__image"\n              >\n                <img\n                  src="https://community.cloudflare.steamstatic.com/economy/image/').concat(e.item_info.image,'"\n                  alt="').concat(e.item_name,'"\n                />\n              </a>\n\n              <div class="sih-modal__column gap-5">\n                <span class="sih-modal__text sih-modal__text_md">').concat(e.item_name,'</span>\n                <span class="sih-modal__text sih-modal__text_md">').concat(n,'</span>\n                <span class="sih-modal__text sih-modal__text_sm">').concat(sih_app_global_service.getOrderStatusText(e.status),"</span>\n              </div>\n            </div>\n\n            ").concat(e.sender?'\n                        <div class="sih-modal__row items-start gap-15">\n\n                           <div class="item__image '.concat(e.sender.avatar?"bg-grey":"",'">\n\n                              ').concat(e.sender.avatar?'<img src="'.concat(e.sender.avatar.match(/https:/g)?e.sender.avatar:"https://avatars.steamstatic.com/".concat(e.sender.avatar,"_medium.jpg"),'" alt="').concat(e.sender.nickname?e.sender.nickname:"",'">'):"",'\n\n                           </div>\n\n\n                            <div class="sih-modal__column gap-5">\n                              ').concat(e.sender.nickname?'<span class="sih-modal__text sih-modal__text_md">'.concat(SIHLang.sihAppMarket.orders.sender,": ").concat(e.sender.nickname,"</span>"):"","\n                              ").concat(e.sender.offerId?'<span class="sih-modal__text sih-modal__text_sm">'.concat(SIHLang.sihAppMarket.orders.trade_number_text,": ").concat(e.sender.offerId,"</span>"):"","\n                            </div>\n                        </div>\n                     "):"",'\n          </div>\n\n          <div class="sih-modal__column w-320 gap-15">\n            <div class="sih-modal__row justify-between">\n              <div class="sih-modal__text sih-modal__text_md sih-modal__text_light-grey">\n                ').concat(SIHLang.sihAppMarket.orders.order_date,'\n              </div>\n              <div class="sih-modal__text sih-modal__text_md">').concat(a,'</div>\n            </div>\n\n            <div class="sih-modal__row justify-between">\n              <div class="sih-modal__text sih-modal__text_md sih-modal__text_light-grey">\n                ').concat(SIHLang.sihAppMarket.orders.purchased_on_steam,'\n              </div>\n              <div class="sih-modal__text sih-modal__text_md">').concat(e.steam_id,"</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    ")})),t+="</div>"}function ordersActive_typeof(e){return ordersActive_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ordersActive_typeof(e)}function ordersActive_defineProperty(e,t,n){return(t=ordersActive_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ordersActive_toPropertyKey(e){var t=ordersActive_toPrimitive(e,"string");return"symbol"==ordersActive_typeof(t)?t:t+""}function ordersActive_toPrimitive(e,t){if("object"!=ordersActive_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=ordersActive_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function ordersActive_toConsumableArray(e){return ordersActive_arrayWithoutHoles(e)||ordersActive_iterableToArray(e)||ordersActive_unsupportedIterableToArray(e)||ordersActive_nonIterableSpread()}function ordersActive_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ordersActive_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return ordersActive_arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ordersActive_arrayLikeToArray(e,t):void 0}}function ordersActive_iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ordersActive_arrayWithoutHoles(e){if(Array.isArray(e))return ordersActive_arrayLikeToArray(e)}function ordersActive_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var MARKET_TAB_KEY="SIH_MARKET_TAB",ordersActive_currencyIdLocal=1,ACTIVE_ORDERS_TIMER_INTERVAL=null,PENDING_ITEMS_TIMESTAMPS=null,TEN_MINUTES=6e5,PROCESSING_ORDER_STATUSES=["created","processing","sent"];function ModalOrdersActive(){ordersActive_loadHtml()}function ordersActive_loadHtml(){var e=$J("#sih-modal__buy-orders").find(".orders-tab").find(".sih-modal__inner");e.find(".orders-active-tab__content").length||e.append('\n    <div class="orders-tab__content orders-active-tab__content sih-modal__column gap-10"></div>\n  ')}function RenderOrdersActiveItems(){var e=$J("#sih-modal__buy-orders"),t=e.find(".sih-modal.orders-tab").find(".orders-active-tab__content").removeClass("empty");t.find(".orders-tab__item").remove(),t.find(".orders-tab__plug").remove(),sih_app_global_service.getAllBuyStack().then((function(n){sih_app_global_service.getUserOrdersHistory().then((function(a){var i=n;a&&a.success&&!a.tfaNeed&&a.orders.data.length&&(i=[].concat(ordersActive_toConsumableArray(i),ordersActive_toConsumableArray(a.orders.data)));var r=sih_app_global_service.getFilterItemsByStatus(i,["new","pending","created","processing","sent"]);if(!r.length||a.tfaNeed){var s=$J('\n          <div\n            class="orders-tab__plug sih-modal__column w-100per h-100per justify-center items-center gap-20 mt-31 mb-50"\n          >\n            <span class="sih-modal__text sih-modal__text_xl">'.concat(SIHLang.sihAppMarket.orders.plug_active_title,'</span>\n            <span class="sih-modal__text sih-modal__text_md">').concat(SIHLang.sihAppMarket.orders.plug_text,'</span>\n            <a\n              href="javascript:void(0)"\n              class="sih-go-market sih-modal__button sih-modal__button_blue py-10 px-14 fs-12 h-28 rounded-4 mt-10"\n              >SIH Market</a\n            >\n          </div>\n        '));t.append(s),$J(".orders-active-tab__content").addClass("empty"),RenderTopSalesPanel($J(".orders-active-tab__content")),e.find(".sih-go-market").off("click").click((function(){global.chromeStorage.getLocal(MARKET_TAB_KEY).then((function(e){e.openTab=!0,global.chromeStorage.setLocal(MARKET_TAB_KEY,e)})),window.open("https://steamcommunity.com/market/","_self")}))}else{var o=r.sort((function(e,t){return t.orderAt-e.orderAt}));o.forEach((function(e,n){var a=currency_service.A.getPriceFromCurrency(e.price||e.item_amount/1e3,ordersActive_currencyIdLocal,1,!1,3).text,i=new Date(e.orderAt||e.created_at).toLocaleString(),r=$J('\n            <div class="orders-tab__item item sih-modal__column rounded-8">\n              '.concat(e.id?'<div class="sih-modal__row sih-modal__text sih-modal__text_xl">'.concat(SIHLang.sihAppMarket.orders.order," #").concat(e.id,"</div>"):"",'\n              <div class="sih-modal__row mt-20 justify-between">\n                <div class="item__left-side sih-modal__row items-start gap-15">\n                  ').concat(e.item_info?'<a href="https://steamcommunity.com/market/listings/'.concat(e.app_id,"/").concat(encodeURIComponent(e.item_name),'"\n                         class="item__image">\n                        <img src="https://community.cloudflare.steamstatic.com/economy/image/').concat(e.item_info.image,'"\n                             alt="').concat(e.item_name,'">\n                      </a>'):'\n                        <a href="https://steamcommunity.com/market/listings/'.concat(e.appid,"/").concat(encodeURIComponent(e.market_hash_name),'" class="item__image">\n                            <img src="').concat(e.image.replace("/360fx360f",""),'" alt="').concat(e.market_hash_name,'">\n                        </a>\n                      '),'\n\n                  <div class="sih-modal__column gap-5">\n                    <span class="item__name sih-modal__text sih-modal__text_md"\n                      >').concat(e.market_hash_name||e.item_name,'</span\n                    >\n                    <span class="sih-modal__text sih-modal__text_md">').concat(a,'</span>\n                    <div class="item__status-block sih-modal__row items-center gap-8">\n                      <span\n                        class="item__status sih-modal__text sih-modal__text_sm"\n                        data-status="').concat(e.status,'"\n                        ').concat("pending"===e.status?'title="'.concat(SIHLang.sihAppMarket.orders.pending_payment_tooltip,'"'):"","\n                        >").concat(sih_app_global_service.getOrderStatusText(e.status),'</span\n                      >\n                    </div>\n                    <div class="item__buttons sih-modal__row items-center mt-5 gap-20"></div>\n                    <div class="item__cancel-block sih-modal__row items-center mt-5 gap-8">\n                      <div class="item__cancel sih-modal__text sih-modal__text_sm"></div>\n                    </div>\n                  </div>\n                </div>\n\n                <div class="item__right-side sih-modal__column w-320 gap-15">\n                  <div class="sih-modal__row justify-between">\n                    <div class="sih-modal__text sih-modal__text_md sih-modal__text_light-grey">\n                      ').concat(SIHLang.sihAppMarket.orders.order_date,'\n                    </div>\n                    <div class="sih-modal__text sih-modal__text_md">').concat(i,'</div>\n                  </div>\n\n                  <div class="sih-modal__row justify-between">\n                    <div class="sih-modal__text sih-modal__text_md sih-modal__text_light-grey">\n                      ').concat(SIHLang.sihAppMarket.orders.purchased_on_steam,'\n                    </div>\n                    <div class="sih-modal__text sih-modal__text_md">').concat(e.steam_id,"</div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          "));e.createdAt?r[0].createdTimestamp=e.createdAt:e.created_at&&(r[0].createdTimestamp=new Date(e.created_at).getTime()),r.find(".item__status").tooltip({position:{my:"left top",at:"left+10 bottom"},classes:{"ui-tooltip":"ordering__tooltip"}}),t.append(r)})),updatePurchaseItemTimer(),initLoadersForItems(o),initRemoveOrderBtn(o)}HideActiveTabOrdersLoaders()}))}))}function updatePurchaseItemTimer(){var e=$J("#sih-modal__buy-orders").find(".sih-modal.orders-tab").find(".orders-active-tab__content");function t(){var t=e.find(".item__spinner"),n=e.find(".item__timer"),a=e.find(".item__left-to-pay"),i=e.find(".item__left-to-pay--button");t.css("display","flex").hide().fadeOut(),n.css("display","flex").hide().fadeOut(),a.remove(),i.remove(),ShowActiveTabOrdersLoaders().then((function(){actionMenu_ChangeCartCountHeaderMenu(),ChangeItemCountInItemPage(),ChangeOrdersCountHeaderMenu(),RenderOrdersActiveItems(),RenderOrdersHistoryItems(),UpdateSihMarketTabBuyStack()}))}clearInterval(ACTIVE_ORDERS_TIMER_INTERVAL),ACTIVE_ORDERS_TIMER_INTERVAL=setInterval((function(){sih_app_global_service.getAllBuyStack().then((function(n){sih_app_global_service.getUserOrdersHistory().then((function(a){var i=n;a&&a.success&&a.orders.data.length&&(i=[].concat(ordersActive_toConsumableArray(i),ordersActive_toConsumableArray(a.orders.data)));var r=sih_app_global_service.getFilterItemsByStatus(i,["new","pending","created","processing","sent"]);if(r.length){var s=r.find((function(e){return e.finishOrderAt})),o=r.map((function(e){return e.createdAt?e.createdAt:new Date(e.created_at).getTime()})).filter((function(e){return e})),l=sih_app_global_service.getFilterItemsByStatus(r,"new"),c=sih_app_global_service.getFilterItemsByStatus(r,"sent");e.find(".orders-tab__item").each((function(e,n){var a=$J(n);updateItemRowStatus(a,r),l.length&&l.forEach((function(e){if(a[0].createdTimestamp===new Date(e.created_at).getTime()){var n=new Date(e.created_at).getTime()+TEN_MINUTES-Date.now();if(n>0){var i=new Date(n).toISOString().slice(14,19);timeToLeft(a,e,"cancel",i)}else t()}})),c.length&&c.forEach((function(e){a[0].createdTimestamp===new Date(e.created_at).getTime()&&timeToLeft(a,e)})),s&&s.createdAt===a[0].createdTimestamp&&timeToLeft(a,s),JSON.stringify(PENDING_ITEMS_TIMESTAMPS)!==JSON.stringify(o)&&(null!==PENDING_ITEMS_TIMESTAMPS&&t(),PENDING_ITEMS_TIMESTAMPS=o)}))}else clearInterval(ACTIVE_ORDERS_TIMER_INTERVAL),t()}))}))}),1e3)}function initLoadersForItems(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];$J("#sih-modal__buy-orders").find(".sih-modal.orders-tab").find(".orders-active-tab__content").find(".orders-tab__item").each((function(t,n){var a=$J(n);if(e[t]&&(e[t].createdAt||new Date(e[t].created_at).getTime())===a[0].createdTimestamp){var i=a.find(".item__status-block .item__spinner");i.length?i.css("display","flex").hide().fadeIn():a.find(".item__status").before('<div class="item__spinner"></div>')}}))}function updateItemRowStatus(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(t){var n=t.createdAt?t.createdAt:new Date(t.created_at).getTime();if(e[0].createdTimestamp===n){var a=e.find(".item__status"),i=a.attr("data-status"),r=e.find(".item__cancel-block:visible");i!==t.status&&(a.attr("data-status",t.status),a.text(sih_app_global_service.getOrderStatusText(t.status)),PROCESSING_ORDER_STATUSES.includes(t.status)&&r.length&&r.hide())}}))}function timeToLeft(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"status",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!a){var i=(t.finishOrderAt?t.finishOrderAt:t.sender.timeout)-Date.now();a=new Date(i>0?i:0).toISOString().slice(14,19)}var r=e.find(".item__".concat(n,"-block")),s=r.find(".item__spinner"),o=r.find(".item__timer"),l=r.find(".item__".concat(n));if(s.length||l.before('<div class="item__spinner"></div>'),o.length)o.is(":visible")||(s.css("display","flex").fadeIn(),o.css("display","flex").fadeIn()),o.text(a);else{if(l.after('<div class="item__timer sih-modal__text sih-modal__text_sm">'.concat(a,"</div>")),"cancel"===n&&l.text(SIHLang.sihAppMarket.orders.cancel_info),"status"!==n)return;t.finishOrderAt&&renderBlockLeftToPay(e,t.price),t.sender&&t.sender.timeout&&renderBlockLeftToConfirmOffer(e,t.sender.offerId)}}function renderBlockLeftToPay(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.find(".item__right-side"),a=e.find(".item__left-side").find(".item__buttons"),i=a.find(".item__left-to-pay--button"),r=n.find(".item__left-to-pay");sih_app_global_service.getLoginSihAppUser().then((function(e){var s;if(e.success&&e.user){var o=(s=e.user.balance/1e3)-t<0?Math.abs(s-t):t,l=currency_service.A.getPriceFromCurrency(o,ordersActive_currencyIdLocal,1,!1,3).text;r.length||n.append('\n        <div class="item__left-to-pay sih-modal__row justify-between">\n          <div class="sih-modal__text sih-modal__text_md sih-modal__text_light-grey">\n            '.concat(SIHLang.sihAppMarket.orders.payment,'\n          </div>\n          <div class="sih-modal__row items-center gap-5">\n            <span class="sih-modal__text sih-modal__text_md sih-modal__text_light-grey sih-modal__text_bold"\n              >').concat(l,'</span\n            >\n            <span class="sih-modal__text sih-modal__text_sm sih-modal__text_light-grey"\n              >').concat(SIHLang.sihAppMarket.orders.pending_payment,"</span\n            >\n          </div>\n        </div>\n      ")),i.length||(a.prepend('\n        <a\n          href="javascript:void(0)"\n          data-payment="'.concat(o,'"\n          class="item__left-to-pay--button sih-modal__row sih-modal__button sih-modal__button_blue px-20 py-8"\n        >\n          <span class="sih-modal__text sih-modal__text_tiny sih-modal__text_bold"\n            >').concat(SIHLang.sihAppMarket.orders.pay,"</span\n          >\n        </a>\n      ")),paymentListenerAction())}}))}function renderBlockLeftToConfirmOffer(e,t){var n=e.find(".item__left-side").find(".item__buttons"),a=n.find(".trade-sent__buttons");sih_app_global_service.getLoginSihAppUser().then((function(e){if(e.success&&e.socials){var i=e.socials.findIndex((function(e){return"steam"===e[0]})),r=e.socials[i][1];a.length||n.prepend('\n        <div class="trade-sent__buttons sih-modal__row justify-between items-center gap-20">\n          <a\n            href="https://steamcommunity.com/tradeoffer/'.concat(t,'/"\n            target="_blank"\n            class="sih-modal__row sih-modal__button sih-modal__button_blue px-20 py-8"\n          >\n            <span class="sih-modal__text sih-modal__text_tiny sih-modal__text_bold"\n              >').concat(SIHLang.sihAppMarket.orders.open,'</span\n            >\n          </a>\n          <a\n            href="https://steamcommunity.com/profiles/').concat(r,'/tradeoffers/"\n            target="_blank"\n            class="sih-modal__text sih-modal__text_tiny sih-modal__text_bold sih-modal__text_blue hover-opacity-8"\n            >').concat(SIHLang.sihAppMarket.orders.go_to_trades,"</a\n          >\n        </div>\n      "))}}))}function initRemoveOrderBtn(e){var t=$J("#sih-modal__buy-orders").find(".sih-modal.orders-tab").find(".orders-active-tab__content"),n=sih_app_global_service.getFilterItemsByStatus(e,"pending"),a=n.map((function(e){return e.createdAt})),i=n.find((function(e){return e.finishOrderAt})),r=Math.max.apply(Math,ordersActive_toConsumableArray(a));t.find(".orders-tab__item").each((function(e,t){var n=$J(t),s=n.find(".item__left-side").find(".item__buttons");!s.find(".item__remove").length&&a.includes(n[0].createdTimestamp)&&r!==n[0].createdTimestamp&&(s.append('\n        <a\n          href="javascript:void(0)"\n          class="item__remove sih-modal__text sih-modal__text_tiny sih-modal__text_bold sih-modal__text_blue hover-opacity-8"\n          >'.concat(SIHLang.sihAppMarket.orders.cancel_purchase,"</a\n        >\n      ")),removeOrderListenerAction(n,i))}))}function paymentListenerAction(){$J("#sih-modal__buy-orders").find(".sih-modal.orders-tab").find(".orders-active-tab__content").find(".item__left-to-pay--button").each((function(e,t){$J(t).off("click").click((function(){var e=$J(this),t=Number(e.attr("data-payment")),n=Math.ceil(1e3*t)/1e3;sih_app_global_service.getSihAppToken().then((function(e){window.open("https://sih.app/pay?amount=".concat(n,"#payToken=").concat(e),"_blank")}))}))}))}function removeOrderListenerAction(e,t){e.find(".item__remove").off("click").click((function(){var n=e.find(".item__name").text(),a=ordersActive_defineProperty({},encodeURIComponent(n),[{createdAt:e[0].createdTimestamp,statusCode:null}]);sih_app_global_service.changeItemsStatus(a).then((function(){ShowActiveTabOrdersLoaders().then((function(){t&&t.createdAt===e[0].createdTimestamp&&chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_DEFAULT_BUY_COUNT"},(function(e){})),e.remove(),HideActiveTabOrdersLoaders(),actionMenu_ChangeCartCountHeaderMenu(),ChangeItemCountInItemPage(),ChangeOrdersCountHeaderMenu()}))}))}))}var REFRESH_ORDERS_TIMER=30,REFRESH_ORDERS_TIMER_INTERVAL=null;function ModalOrders(){orders_loadHtml(),modalListeners(),ModalOrdersActive(),ModalOrdersHistory()}function ShowActiveTabOrdersLoaders(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,a=$J("#sih-modal__buy-orders").find(".sih-modal.orders-tab").find(".orders-tab__content");return t='\n      <div class="fake-orders-tab__content">'.concat(e='\n      <div class="fake-orders__row sih-modal__column rounded-8">\n        <div class="sih-modal__row w-100 h-28 bg-grey rounded-4"></div>\n        <div class="sih-modal__row mt-20 justify-between">\n          <div class="sih-modal__row items-start gap-15">\n            <div class="sih-modal__column w-40 h-40 bg-grey rounded-4"></div>\n\n            <div class="sih-modal__column gap-5">\n              <span class="w-100 h-20 bg-grey rounded-4"></span>\n              <span class="w-100 h-20 bg-grey rounded-4"></span>\n              <span class="w-100 h-20 bg-grey rounded-4"></span>\n            </div>\n          </div>\n\n          <div class="sih-modal__column w-320 gap-15">\n            <div class="sih-modal__row justify-between">\n              <div class="w-100 h-20 bg-grey rounded-4"></div>\n              <div class="w-100 h-20 bg-grey rounded-4"></div>\n            </div>\n\n            <div class="sih-modal__row justify-between">\n              <div class="w-100 h-20 bg-grey rounded-4"></div>\n              <div class="w-100 h-20 bg-grey rounded-4"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n    '," ").concat(e," ").concat(e,"</div>\n    "),a.each((function(e,n){var a=$J(n),i=a.find(".fake-orders-tab__content");a.find(".orders-tab__item").fadeOut(),i.length?i.fadeIn():a.append(t)})),new Promise((function(e){return setTimeout(e,n)}))}function HideActiveTabOrdersLoaders(){var e=$J("#sih-modal__buy-orders").find(".sih-modal.orders-tab").find(".orders-tab__content"),t=e.find(".orders-tab__item");e.find(".fake-orders-tab__content").fadeOut(),t.fadeIn()}function UpdateRefreshOrderTimer(){REFRESH_ORDERS_TIMER=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30}function orders_loadHtml(){var e=$J("#sih-modal__buy-orders"),t='\n    <div class="sih-modal sih-global orders-tab">\n      <div class="sih-modal__close"></div>\n      <div class="sih-modal__inner sih-modal__column">\n        <div class="orders-tab__header sih-modal__row gap-60">\n          <div class="sih-modal__column">\n            <div class="title sih-modal__title">'.concat(SIHLang.sihAppMarket.orders.title,'</div>\n          </div>\n        </div>\n        <div class="orders-tabs orders-tabs__container sih-modal__row gap-30 mb-20">\n          <label for="orders-active" class="orders-tabs__label">\n            <input type="radio" name="orders-tab" id="orders-active" class="orders-tabs__input" checked />\n            <span class="orders-tabs__item sih-modal__text sih-modal__text_sm"\n              >').concat(SIHLang.sihAppMarket.orders.tab_active,'</span\n            >\n          </label>\n          <label for="orders-history" class="orders-tabs__label">\n            <input type="radio" name="orders-tab" id="orders-history" class="orders-tabs__input" />\n            <span class="orders-tabs__item sih-modal__text sih-modal__text_sm"\n              >').concat(SIHLang.sihAppMarket.orders.tab_history,'</span\n            >\n          </label>\n          <a\n            href="javascript:void(0)"\n            class="orders-tabs__refresh-btn sih-modal__row items-center gap-5 absolute right-32 bottom-0 ').concat(REFRESH_ORDERS_TIMER>0?"pointer-events-none opacity-5":"",'"\n          >\n            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path\n                d="M17.65 6.35C16.2 4.9 14.21 4 12 4C9.87827 4 7.84344 4.84285 6.34315 6.34315C4.84285 7.84344 4 9.87827 4 12C4 14.1217 4.84285 16.1566 6.34315 17.6569C7.84344 19.1571 9.87827 20 12 20C15.73 20 18.84 17.45 19.73 14H17.65C16.83 16.33 14.61 18 12 18C10.4087 18 8.88258 17.3679 7.75736 16.2426C6.63214 15.1174 6 13.5913 6 12C6 10.4087 6.63214 8.88258 7.75736 7.75736C8.88258 6.63214 10.4087 6 12 6C13.66 6 15.14 6.69 16.22 7.78L13 11H20V4L17.65 6.35Z"\n                fill="white"\n              />\n            </svg>\n            <div class="orders-tabs__timer sih-modal__row items-center">\n              <span class="sih-modal__text sih-modal__text_md sih-modal__text_light-grey">00:</span>\n              <span class="orders-tabs__timer-seconds sih-modal__text sih-modal__text_md sih-modal__text_light-grey"\n                >').concat(REFRESH_ORDERS_TIMER||"","</span\n              >\n            </div>\n          </a>\n        </div>\n      </div>\n    </div>\n  ");e.find(".orders-tab").length||e.append(t)}function modalListeners(){showOrders(),changeOrdersTab(),refreshOrderHistoryAction(),updateRefreshTimer()}function showOrders(){var e=$J("#sih-modal__buy-orders"),t=e.find(".sih-modal.orders-tab");function n(){e.show(),t.show(),ChangeOrdersCountHeaderMenu(),ShowActiveTabOrdersLoaders().then((function(){RenderOrdersActiveItems(),RenderOrdersHistoryItems()}))}$J("#sih-header-orders").off("click").click((function(){$J("body").css("overflow","hidden");var t=$J("body").find("#sih-enter-password");sih_app_global_service.getUserOrdersHistory(!1).then((function(a){a&&a.success?a.tfaNeed?(e.hide(),t.attr("data-show-modal","orders").show()):n():a&&!a.hasOwnProperty("authorization")?sih_app_global_service.getLoginSihAppUser().then((function(a){a.tfaNeed?(e.hide(),t.attr("data-show-modal","orders").show()):n()})):n()})),registerOpenOrdersClick()}))}function changeOrdersTab(){var e=$J("#sih-modal__buy-orders").find(".sih-modal.orders-tab");e.find(".orders-tabs__container").find(".orders-tabs__input").each((function(t,n){$J(n).change((function(){var t=$J(this),n=e.find("#pagination-container"),a=e.find(".orders-tabs__refresh-btn");e.find(".orders-tab__content").addClass("hidden"),e.find(".".concat(t.attr("id"),"-tab__content")).removeClass("hidden"),"orders-history"===t.attr("id")?(n.css("display","flex"),a.css("display","flex")):(n.hide(),a.hide())}))}))}function refreshOrderHistoryAction(){var e=$J("#sih-modal__buy-orders");e.find(".sih-modal.orders-tab").find(".orders-tabs__refresh-btn").off("click").click((function(){UpdateRefreshOrderTimer();var t=$J("body").find("#sih-enter-password");sih_app_global_service.getUserOrdersHistory(!1).then((function(n){n&&n.success?n.tfaNeed?(e.hide(),t.attr("data-show-modal","orders").show()):ShowActiveTabOrdersLoaders().then((function(){RenderOrdersHistoryItems()})):(n&&n.hasOwnProperty("authorization"),sih_app_global_service.getLoginSihAppUser().then((function(e){ShowActiveTabOrdersLoaders().then((function(){RenderOrdersHistoryItems()}))})))}))}))}function updateRefreshTimer(){var e=$J("#sih-modal__buy-orders").find(".sih-modal.orders-tab"),t=e.find(".orders-tabs__refresh-btn");clearInterval(REFRESH_ORDERS_TIMER_INTERVAL),UpdateRefreshOrderTimer(),REFRESH_ORDERS_TIMER_INTERVAL=setInterval((function(){var n=e.find(".orders-tabs__timer"),a=n.find(".orders-tabs__timer-seconds");REFRESH_ORDERS_TIMER>0?(n.is(":visible")||(t.addClass("pointer-events-none opacity-5"),n.show()),REFRESH_ORDERS_TIMER-=1,a.text(REFRESH_ORDERS_TIMER>=10?REFRESH_ORDERS_TIMER:"0".concat(REFRESH_ORDERS_TIMER))):(t.removeClass("pointer-events-none opacity-5"),n.hide())}),1e3)}function common_modals_RenderModals(){common_modals_loadHtml(),ModalOrdering(),LoadEnterPasswordModal(),ModalOrders(),ModalCart(),setTimeout((function(){modalListenersAction(),ModalPasswordListenersAction()}),500)}function SetModalToDefaultState(){$J("#sih-modal__buy-orders").hide().remove(),CloseRefillSIHBalance(),common_modals_RenderModals()}function common_modals_loadHtml(){var e=$J("body");e.find("#sih-modal__buy-orders").length||e.append('\n    <div id="sih-modal__buy-orders">\n      <div class="sih-modal__buy-orders__fade"></div>\n    </div>\n  ')}function modalListenersAction(){hideMainMarketModal()}function setDefaultItemsStatusOnCloseModal(){var e=$J("#sih-modal__buy-orders");e.find(".sih-modal:visible").hasClass("ordering-tab")&&ChangeItemsStatus(),e.hide()}function hideMainMarketModal(){$J(document).off("keydown").keydown((function(e){27===e.keyCode&&(e.stopPropagation(),$J("body").css("overflow","auto"),setDefaultItemsStatusOnCloseModal(),SetModalToDefaultState(),ResetPriceTimer())})),$J(".sih-modal__buy-orders__fade").off("click").click((function(){isVisibleImportantModal()||($J("body").css("overflow","auto"),setDefaultItemsStatusOnCloseModal(),SetModalToDefaultState(),ResetPriceTimer())})),$J("#sih-modal__buy-orders").find(".sih-modal__close").each((function(e,t){$J(t).off("click").click((function(){$J("body").css("overflow","auto"),setDefaultItemsStatusOnCloseModal(),SetModalToDefaultState(),ResetPriceTimer()}))}))}function isVisibleImportantModal(){var e=$J("#sih-modal__buy-orders"),t=$J("body").find("#sih-enter-password").is(":visible"),n=["ordering-tab","cart-tab"];return e.find(".sih-modal:visible").each((function(e,a){var i=$J(a);n.forEach((function(e){i.hasClass(e)&&(t=!0)}))})),t}window.onbeforeunload=function(){setDefaultItemsStatusOnCloseModal()};var cart_MARKET_TAB_KEY="SIH_MARKET_TAB",cart_currencyIdLocal=1,ONE_MINUTE=6e4,ONE_SECOND=1e3,TIMER=ONE_MINUTE,ACTUAL_PRICE_INTERVAL=null;function ModalCart(){cart_loadHtml(),showCartAction()}function cart_loadHtml(){var e=$J("#sih-modal__buy-orders"),t='\n    <div class="sih-modal sih-global cart-tab">\n      <div class="sih-modal__close"></div>\n      <div class="sih-modal__inner sih-modal__column">\n        <div class="sih-modal__header sih-modal__column gap-20">\n          <div class="header-container">\n            <div class="sih-modal__row title gap-23 items-center lh-26 pt-32 px-36">\n              <div class="cart-tab__title sih-modal__text fs-24"></div>\n              <div class="sih-modal__cart-count fs-24"></div>\n            </div>\n            <div class="header-container__timer fs-24" title="'.concat(SIHLang.cart.timer_tooltip,'"></div>\n          </div>\n\n          <div class="sih-modal__column cart-tab__content mt-16"></div>\n          <div class="sih-modal__error"></div>\n        </div>\n\n        <div class="sih-modal__bottom sih-modal__column gap-20"></div>\n      </div>\n    </div>\n  ');e.find(".cart-tab")&&e.append(t)}function RenderCart(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=$J("#sih-modal__buy-orders").find(".sih-modal.cart-tab"),a=n.find(".cart-tab__title"),i=n.find(".sih-modal__cart-count");sih_app_global_service.getAllBuyStack().then((function(r){if(r&&r.length){var s=sih_app_global_service.getFilterItemsByStatus(r,e);if(s&&s.length){var o=0;s.forEach((function(e,t){o+=e.price||0}));var l=currency_service.A.getPriceFromCurrency(o,cart_currencyIdLocal,1,!1,3).text;a.text("".concat(SIHLang.sihAppMarket.cart.title)),i.text("".concat(s.length," - ").concat(l)),renderItemsRowButtons(n,o),renderPriceTimer(n),ModalCartListenerAction()}else n.addClass("empty"),renderEmptyCart()}else n.addClass("empty"),renderEmptyCart();t&&global.chromeStorage.getLocal("sihAppUserProfile").then((function(e){var t={offset:Math.floor(10*Math.random()+1),limit:5,appId:730,sortBy:"-profit"};if(e&&e.user&&e.user.balance)t.maxPrice=e.user.balance/1e3;else if("undefined"!=typeof g_rgWalletInfo&&g_rgWalletInfo.wallet_balance){var a=g_rgWalletInfo.wallet_balance/100,i=g_rgWalletInfo.wallet_currency;t.maxPrice=1===i?a:currency_service.A.getPriceFromCurrency(a,1,i).price}else t.minPrice=20,t.maxPrice=200;RenderTopSalesPanel(n.find(".sih-modal__bottom"),t)}))}))}function renderEmptyCart(){var e=$J("#sih-modal__buy-orders").find(".sih-modal.cart-tab"),t=e.find(".cart-tab__title"),n=e.find(".sih-modal__cart-count"),a=e.find(".cart-tab__content"),i=a.find(".title"),r=e.find(".sih-modal__info-message"),s=e.find(".sih-modal__buttons"),o=e.find(".sih-modal__sum-cart-cost");i.length||a.append('\n      <div class="sih-modal__column w-100per h-100per justify-center items-center gap-20 h-300 mt-40">\n        <span class="sih-modal__text sih-modal__text_xl">'.concat(SIHLang.sihAppMarket.cart.empty_title,'</span>\n        <span class="sih-modal__text sih-modal__text_md">').concat(SIHLang.sihAppMarket.cart.empty_text,'</span>\n        <a\n          href="javascript:void(0)"\n          class="sih-go-market sih-modal__button sih-modal__button_blue py-10 px-14 fs-12 h-28 rounded-4 mt-10"\n          >SIH Market</a\n        >\n      </div>\n    ')),t.text("".concat(SIHLang.sihAppMarket.cart.title_empty)),n.text(""),o.hide(),r.hide(),s.hide(),e.find(".sih-go-market").off("click").click((function(){global.chromeStorage.getLocal(cart_MARKET_TAB_KEY).then((function(e){e.openTab=!0,global.chromeStorage.setLocal(cart_MARKET_TAB_KEY,e)})),window.open("https://steamcommunity.com/market/","_self")}))}function renderItemsRowButtons(e,t){var n=currency_service.A.getPriceFromCurrency(t,cart_currencyIdLocal,1,!1,3).text,a='\n    <div class="sih-modal__buttons sih-modal__row justify-center px-36 pb-4">\n      <button class="sih-modal__button-exit sih-modal__button bg-grey py-13 px-24">\n        '.concat(SIHLang.sihAppMarket.cart.continue,'\n      </button>\n      <button\n        id="sih-cart-buy"\n        class="sih-modal__button sih-modal__button_blue sih-modal__row justify-center items-center gap-5 py-13 px-24"\n      >\n        <span class="sih-modal__text sih-modal__text_md lh-14">').concat(SIHLang.sihAppMarket.cart.buy_now,'</span\n        ><span class="sih-modal__text sih-modal__text_md sih-modal__text_bold lh-14 cart-tab__button-sum"\n          >').concat(t&&t>0?n:"","</span\n        >\n      </button>\n    </div>\n  ");e.find(".sih-modal__buttons").length?(e.find(".sih-modal__buttons").show(),$J("#sih-cart-buy").find(".cart-tab__button-sum").text(n)):e.find(".sih-modal__bottom").prepend(a),t&&t>0?e.find("#sih-cart-buy").prop("disabled",!1):e.find("#sih-cart-buy").prop("disabled",!0)}function renderPriceTimer(e){var t=e.find(".header-container__timer");t.tooltip({tooltipClass:"timer-tooltip",position:{my:"center bottom",at:"center top"}}),ResetPriceTimer(),ACTUAL_PRICE_INTERVAL=setInterval((function(){if(t.text(new Date(TIMER).toISOString().slice(14,19)),!TIMER)return ResetPriceTimer(),void sih_app_global_service.updateSIHMarketPrice().then((function(){RenderItemsRow("cart-tab").then((function(){RenderCart()}))}));TIMER-=ONE_SECOND}),ONE_SECOND)}function ModalCartListenerAction(){hideCartAction(),DeleteItemsAllByName(RenderCart),ChangeCountItemInBuyStack(RenderCart),buyItemsCartAction()}function showCartAction(){var e=$J("body").find("#sih-enter-password"),t=$J("#sih-modal__buy-orders"),n=t.find(".sih-modal.cart-tab"),a=t.find(".sih-modal.ordering-tab"),i=t.find(".sih-modal.orders-history-tab");$J("#sih-header-cart").off("click").click((function(){RenderItemsRow("cart-tab",null,!0).then((function(){RenderCart(null,!0),n.show(),t.show(),e.hide(),a.hide(),i.hide(),$J("body").css("overflow","hidden"),sih_app_global_service.updateSIHMarketPrice().then((function(){RenderItemsRow("cart-tab").then((function(){RenderCart()}))}))}))}))}function hideCartAction(){$J(".sih-modal__button-exit").off("click").click((function(){$J("body").css("overflow","auto"),SetModalToDefaultState(),ResetPriceTimer()}))}function buyItemsCartAction(){var e=$J("#sih-modal__buy-orders").find(".sih-modal.cart-tab"),t=e.find("#sih-cart-buy"),n=e.find(".sih-modal__error");t.off("click").click((function(){var e=n.find(".sih-modal__error_message"),t=$J(this);t.addClass("animated-background-btn"),sih_app_global_service.getUserSihApp().then((function(a){a.success?(t.removeClass("animated-background-btn"),ChangeItemsStatus(!0,"ordering")):a.hasOwnProperty("error")?sih_app_global_service.errorHandler(t,n,e,a.error):sih_app_global_service.errorHandler(t,n,e)})),registerCartBuyNowClick(),ResetPriceTimer()}))}function ResetPriceTimer(){clearInterval(ACTUAL_PRICE_INTERVAL),TIMER=ONE_MINUTE}var left_block_currencyIdLocal=1,left_block_debounce=null;function LoadLeftBlock(){left_block_loadHtml()}function LocalCalculateOrderingItemRow(e){var t=e.find(".sih-item-order__name").data("hashname"),n=e.find(".sih-modal__cart-count-input"),a=e.find(".sih-modal__item-row-single-price"),i=e.find(".sih-modal__item-row-count"),r=e.find(".sih-modal__item-row-price-group"),s=(e.find(".sih-modal__increment"),0);return new Promise((function(e,o){GetUserBalance("ordering-tab").then((function(o){GetSortedGroupList("ordering").then((function(l){l&&l.length||e(),l.forEach((function(e,l){var c=0,d=0,_=e[e.length-1];if(s+=e.reduce((function(e,t){return s+e+t.price<=o?(c++,e+=t.price):(d++,t.price),e}),0),t===_.market_hash_name){var u=c+d;n.val(u);var m=_.price;if(m){var h=u*m,p=currency_service.A.getPriceFromCurrency(h,left_block_currencyIdLocal).text,f=currency_service.A.getPriceFromCurrency(m,left_block_currencyIdLocal).text;a.text(f),i.text("".concat(c+d," ").concat(SIHLang.sihAppMarket.global.units)),r.text(p)}else a.text("".concat(SIHLang.sihAppMarket.global.not_available))}})),e()}))}))}))}function RenderLeftBlockOrderingInfo(){setTotalNumberPositionItemsInBlock(),renderPlugAvailableBlock(),CalculateTotalInfo()}function OrderingLeftBlockActionListeners(){controlsPanelListeners(),selectSingleItemRow()}function left_block_loadHtml(){var e=$J("#sih-modal__buy-orders").find(".orders-tab__main"),t='\n    <div class="ordering-tab__left-block sih-modal__column">\n      <div class="sih-modal__column ordering-tab__listing-block available">\n        <div class="sih-modal__controls sih-modal__row justify-between">\n          <div class="sih-modal__row gap-5">\n            <span class="sih-modal__text sih-modal__text_md sih-modal__text_bold"\n              >'.concat(SIHLang.sihAppMarket.ordering.available_items,'</span\n            >\n\n            <div class="sih-modal__controls__total-row sih-modal__row">\n              <span class="ordering-tab__total-number sih-modal__text sih-modal__text_md sih-modal__text_bold"></span>\n              <span class="ordering-animated"></span>\n            </div>\n          </div>\n          <div class="sih-modal__row gap-23 items-center px-10">\n            <a href="javascript:void(0)" class="ordering-tab__delete-all sih-modal__text sih-modal__text_sm"\n              >').concat(SIHLang.sihAppMarket.global.delete_all,'</a\n            >\n\n            <label class="sih-modal__row items-center flex-row-reverse gap-15" for="select-all-available">\n              <input\n                type="checkbox"\n                name="select-all"\n                id="select-all-available"\n                class="ordering-tab__select-all-items-checkbox hidden"\n                checked\n              />\n              <label class="fake-checkbox" for="select-all-available"></label>\n              <label\n                for="select-all-available"\n                class="ordering-tab__select-all_label sih-modal__text sih-modal__text_sm"\n                >').concat(SIHLang.sihAppMarket.global.remove_all,'</label\n              >\n            </label>\n          </div>\n        </div>\n        <div class="splitter-1 bg-grey mt-16 mb-10"></div>\n        <div class="ordering-tab__content available sih-modal__column"></div>\n      </div>\n\n      <div class="sih-modal__column ordering-tab__listing-block unavailable">\n        <div class="sih-modal__controls sih-modal__row justify-between mt-51">\n          <div class="sih-modal__row gap-5">\n            <span class="sih-modal__text sih-modal__text_md sih-modal__text_bold"\n              >').concat(SIHLang.sihAppMarket.ordering.unavailable_items,'\n            </span>\n\n            <div class="sih-modal__controls__total-row sih-modal__row">\n              <span class="ordering-tab__total-number sih-modal__text sih-modal__text_md sih-modal__text_bold"></span>\n              <span class="ordering-animated"></span>\n            </div>\n          </div>\n          <div class="sih-modal__row gap-23 items-center px-10">\n            <a href="javascript:void(0)" class="ordering-tab__delete-all sih-modal__text sih-modal__text_sm"\n              >').concat(SIHLang.sihAppMarket.global.delete_all,'</a\n            >\n\n            <label class="sih-modal__row items-center flex-row-reverse gap-15" for="select-all-unavailable">\n              <input\n                type="checkbox"\n                name="select-all"\n                id="select-all-unavailable"\n                class="ordering-tab__select-all-items-checkbox hidden"\n                checked\n              />\n              <label class="fake-checkbox" for="select-all-unavailable"></label>\n              <label\n                for="select-all-unavailable"\n                class="ordering-tab__select-all_label sih-modal__text sih-modal__text_sm"\n                >').concat(SIHLang.sihAppMarket.global.remove_all,'</label\n              >\n            </label>\n          </div>\n        </div>\n\n        <div class="splitter-1 bg-grey mt-16 mb-10"></div>\n\n        <div class="ordering-tab__content unavailable  sih-modal__column"></div>\n      </div>\n    </div>\n  ');e.find(".ordering-tab__left-block").length||e.append(t)}function renderPlugAvailableBlock(){var e=$J("#sih-modal__buy-orders").find(".ordering-tab").find(".ordering-tab__content.available"),t=e.find(".sih-modal__row_item").length,n='\n    <div\n      class="plug-available ordering-tab__plug-available sih-modal__column justify-center items-center h-100per gap-30"\n    >\n      <div class="sih-modal__column items-center gap-5">\n        <span class="sih-modal__text sih-modal__text_xl">'.concat(SIHLang.sihAppMarket.ordering.plug_text_1,'</span>\n        <span class="sih-modal__text sih-modal__text_md">').concat(SIHLang.sihAppMarket.ordering.plug_text_2,'</span>\n      </div>\n\n      <button\n        class="sih__buy-all-items sih-modal__button sih-modal__button_light-grey justify-center rounded-8 py-16 w-100per max-w-360 opacity-5 pointer-events-none"\n      >\n        ').concat(SIHLang.sihAppMarket.ordering.buy_all,"\n      </button>\n    </div>\n  ");e.find(".plug-available").length||e.find(".sih-modal__row_item").length||0!==t||e.append(n)}function setTotalNumberPositionItemsInBlock(){$J(".sih-modal.ordering-tab").find(".ordering-tab__listing-block").each((function(e,t){var n=$J(t),a=n.find(".sih-modal__controls"),i=n.find(".sih-modal__controls").find(".ordering-tab__total-number"),r=n.find(".sih-modal__row_item").length,s=a.find(".ordering-tab__delete-all");a.removeClass("opacity-5 pointer-events-none"),0===r?(disabledControlPanel(n),s.is(":visible")&&s.addClass("hidden")):s.removeClass("hidden"),i.text(r)}))}function disabledControlPanel(e){e.find(".sih-modal__controls").addClass("opacity-5 pointer-events-none")}function controlsPanelListeners(){selectAllItemsRow(),removeAllCheckedItems()}function selectAllItemsRow(){var e=$J(".sih-modal.ordering-tab").find(".ordering-tab__listing-block");e.each((function(t,n){var a=$J(n),i=a.find(".sih-modal__controls").find(".ordering-tab__select-all-items-checkbox");i.off("change").change((function(){clearTimeout(left_block_debounce),left_block_debounce=setTimeout((function(){var t=a.find(".ordering-tab__content"),n=t.find(".sih-modal__row_item");if(e.each((function(e,t){var a=$J(t),r=a.find(".ordering-tab__delete-all"),s=a.find(".ordering-tab__select-all_label");i.prop("checked")?(s.text("".concat(SIHLang.sihAppMarket.global.remove_all)),r.removeClass("hidden"),n.find(".select-item").prop("checked",!0)):(s.text("".concat(SIHLang.sihAppMarket.global.select_all)),r.addClass("hidden"),n.find(".select-item").prop("checked",!1))})),t.hasClass("available")){var r=[];n.each((function(e,t){var n=$J(t),a=n.find(".sih-item-order__name").data("hashname"),i=n.find(".select-item").prop("checked"),s=r.findIndex((function(e){return e.name===a}));r.length&&-1!==s||r.push({name:a,isChecked:i})})),$J(e[1]).find(".sih-modal__row_item").each((function(e,t){var n=$J(t),a=n.find(".sih-item-order__name").data("hashname"),i=n.find(".select-item"),s=r.find((function(e){return e.name===a}));s&&s.name===a&&s.isChecked!==i.prop("checked")&&i.trigger("click")}))}ShowAndHideLoaders().then((function(){CalculateTotalInfo().then((function(){RenderItemsRow("ordering-tab","ordering").then((function(){ChangeItemCountInItemPage(),actionMenu_ChangeCartCountHeaderMenu(),UpdateSihMarketTabBuyStack(),ModalOrderingListenersAction()}))}))}))}),300)}))}))}function selectSingleItemRow(){var e=$J(".sih-modal.ordering-tab").find(".ordering-tab__listing-block");e.each((function(t,n){var a=$J(n),i=a.find(".sih-modal__controls"),r=a.find(".ordering-tab__content"),s=r.find(".sih-modal__row_item"),o=i.find(".ordering-tab__select-all-items-checkbox");s.each((function(t,n){var a=$J(n);a.find(".select-item").off("change").change((function(){var t=this;clearTimeout(left_block_debounce),left_block_debounce=setTimeout((function(){if(r.hasClass("available")){var n=a.find(".sih-item-order__name").data("hashname");$J(e[1]).find(".sih-modal__row_item").each((function(e,a){var i=$J(a),r=i.find(".select-item"),s=i.find(".sih-item-order__name").data("hashname");n===s&&$J(t).prop("checked")!==r.prop("checked")&&r.trigger("click")}))}ShowAndHideLoaders().then((function(){CalculateTotalInfo().then((function(){RenderItemsRow("ordering-tab","ordering").then((function(){ChangeItemCountInItemPage(),actionMenu_ChangeCartCountHeaderMenu(),UpdateSihMarketTabBuyStack(),ModalOrderingListenersAction(),e.each((function(e,t){var n=$J(t),a=n.find(".ordering-tab__delete-all"),i=n.find(".ordering-tab__select-all_label");!!n.find(".select-item:checked").length?(i.text("".concat(SIHLang.sihAppMarket.global.remove_all)),o.prop("checked",!0),a.removeClass("hidden")):(o.prop("checked",!1),i.text("".concat(SIHLang.sihAppMarket.global.select_all)),a.addClass("hidden"))}))}))}))}))}),1e3)}))}))}))}function removeAllCheckedItems(){var e=$J("#sih-modal__buy-orders").find(".ordering-tab");e.find(".ordering-tab__listing-block").each((function(t,n){var a=$J(n),i=a.find(".sih-modal__controls").find(".ordering-tab__delete-all"),r=e.find(".ordering-tab__select-all_label");i.off("click").click((function(){var t=a.find(".ordering-tab__content").find(".sih-modal__row_item"),n=e.find("#select-all");UpdateStatusCheckedItems(GetListingForUpdateStatus(t,null)).then((function(){})),n.prop("checked")?(n.prop("checked",!1),r.text("".concat(SIHLang.sihAppMarket.global.select_all))):i.is(":visible")&&i.addClass("hidden")}))}))}function LoadPlugSteamGuard(e){plugSteamGuard_loadHtml(e)}function plugSteamGuard_loadHtml(e){var t='\n    <div class="sih-plug sih-plug__steam-guard sih-steam-guard hidden">\n      <div class="sih-steam-guard__container">\n        <div class="column max-w-360 gap-14">\n          <span class="title">'.concat(SIHLang.sihAppMarket.plug_steam_guard.title,'</span>\n          <span class="sih-modal__text sih-modal__text_md sih-modal__text_light-grey lh-26"\n            >').concat(SIHLang.sihAppMarket.plug_steam_guard.info_text,'</span\n          >\n        </div>\n\n        <div class="row mt-52">\n          <a\n            href="https://store.steampowered.com/twofactor/manage"\n            target="_blank"\n            class="sih-modal__text sih-modal__text_md sih-modal__text_blue underline hover-opacity-8"\n            >').concat(SIHLang.sihAppMarket.plug_steam_guard.setup,'</a\n          >\n        </div>\n\n        <div class="column mt-40 gap-14">\n          <a\n            href="https://help.steampowered.com/ru/faqs/view/06B0-26E6-2CF8-254C"\n            target="_blank"\n            class="sih-modal__text sih-modal__text_md sih-modal__text_blue underline hover-opacity-8"\n            >').concat(SIHLang.sihAppMarket.plug_steam_guard.learn_more_guard,'</a\n          >\n          <a\n            href="https://help.steampowered.com/ru/faqs/view/7EFD-3CAE-64D3-1C31"\n            target="_blank"\n            class="sih-modal__text sih-modal__text_md sih-modal__text_blue underline hover-opacity-8"\n            >').concat(SIHLang.sihAppMarket.plug_steam_guard.learn_more_guard_mobile,"</a\n          >\n        </div>\n      </div>\n    </div>\n  ");e.find(".sih-plug__steam-guard").length||e.append(t)}var tos_GetTOSTemplate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"global";return $J('\n    <label class="sih-global sih-tos" for="sih-tos-'.concat(e,'">\n      <input type="checkbox" name="sih-tos" id="sih-tos-').concat(e,'" class="sih-modal__input hidden" />\n      <label class="fake-checkbox sih-tos__input" for="sih-tos-').concat(e,'"></label>\n      <div class="row items-center flex-wrap gap-5 sih-modal__text sih-modal__text_md ticker-wrapper">\n        <span class="ticker">\n          <span>').concat(SIHLang.TOS.tos_1,'</span>\n          <a\n            href="https://sih.app/terms-of-service"\n            target="_blank"\n            class="sih-modal__text_blue text-decoration-underline hover-opacity-8"\n            >').concat(SIHLang.TOS.tos_2,'.</a\n          >\n          <span class="sih-tos__info">').concat(SIHLang.TOS.tos_tooltip,"</span>\n        </span>\n      </div>\n    </label>\n  "))},right_block_currencyIdLocal=1;function LoadRightBlock(){right_block_loadHtml()}function RenderRightBlockOrderingInfo(){setTotalAllItemsPrice(),paymentActionListeners(),addTooltipForButtons()}function OrderingRightBlockActionListeners(){setUserInfo(),paymentActionListeners()}function right_block_loadHtml(){var e=$J("#sih-modal__buy-orders").find(".orders-tab__main"),t=tos_GetTOSTemplate("ordering"),n=$J('\n    <div class="right-block ordering-tab__right-block sih-modal__column">\n      <div class="sih-modal__row justify-between">\n        <span class="sih-modal__text sih-modal__text_lg">'.concat(SIHLang.sihAppMarket.ordering.buy_on_steam,'</span>\n      </div>\n      <div class="sih-modal__row justify-between bg-grey mt-16 rounded-4 px-6 py-6">\n        <div class="sih-modal__row gap-8 items-center">\n          <div class="right-block__user-image w-36 h-36 bg-black-100"></div>\n          <div class="sih-modal__column">\n            <span class="right-block__user-name sih-modal__text sih-modal__text_md"></span>\n            <span\n              class="right-block__user-steamid sih-modal__text sih-modal__text_sm sih-modal__text_light-grey"\n            ></span>\n          </div>\n        </div>\n      </div>\n\n      <div class="right-block__order-info">\n        <div class="right-block__order-info_inner">\n          <div class="sih-modal__row justify-between mt-31 gap-5">\n            <span class="sih-modal__text sih-modal__text_md sih-modal__text_bold"\n              >').concat(SIHLang.sihAppMarket.ordering.your_balance,'</span\n            >\n            <span class="sih-modal__user-balance sih-modal__text sih-modal__text_md sih-modal__text_bold"></span>\n          </div>\n          <div class="sih-modal__column mt-16 gap-8">\n            <div class="right-block__unavailable-row sih-modal__row justify-between gap-5 hidden">\n              <div class="sih-modal__row gap-5">\n                <span class="sih-modal__text sih-modal__text_md sih-modal__text_light-grey"\n                  >').concat(SIHLang.sihAppMarket.ordering.not_enough_balance,'</span\n                >\n                <div class="sih-modal__row">\n                  <span class="sih-modal__text sih-modal__text_md sih-modal__text_light-grey">(</span>\n                  <span\n                    class="sih-modal__unavailable-item-count sih-modal__text sih-modal__text_md sih-modal__text_light-grey"\n                  ></span>\n                  <span class="sih-modal__text sih-modal__text_md sih-modal__text_light-grey">)</span>\n                </div>\n              </div>\n              <span\n                class="sih-modal__unavailable-total-cost sih-modal__text sih-modal__text_md sih-modal__text_light-grey"\n              ></span>\n            </div>\n\n            <div class="splitter-1 bg-grey mt-9"></div>\n          </div>\n\n          <div class="sih-modal__column mt-11 mb-10 gap-10">\n            <span class="sih-modal__text sih-modal__text_lg">').concat(SIHLang.sihAppMarket.ordering.summary,'</span>\n\n            <div class="right-block__available-row sih-modal__row justify-between gap-5 hidden">\n              <div class="sih-modal__row gap-5">\n                <span class="sih-modal__text sih-modal__text_md sih-modal__text_blue"\n                  >').concat(SIHLang.sihAppMarket.ordering.available_item_now,'</span\n                >\n                <div class="sih-modal__row">\n                  <span class="sih-modal__text sih-modal__text_md sih-modal__text_blue">(</span>\n                  <span\n                    class="sih-modal__available-item-count sih-modal__text sih-modal__text_blue sih-modal__text_md"\n                  ></span>\n                  <span class="sih-modal__text sih-modal__text_md sih-modal__text_blue">)</span>\n                </div>\n              </div>\n\n              <span\n                class="sih-modal__available-total-cost sih-modal__text sih-modal__text_blue sih-modal__text_md"\n              ></span>\n            </div>\n\n            <div class="right-block__all-orders-row sih-modal__row justify-between gap-5">\n              <div class="sih-modal__row gap-5">\n                <span class="sih-modal__text sih-modal__text_md">').concat(SIHLang.sihAppMarket.ordering.for_all,'</span>\n                <div class="sih-modal__row">\n                  <span class="sih-modal__text sih-modal__text_md">(</span>\n                  <span class="sih-modal__ordering-item-count sih-modal__text sih-modal__text_md"></span>\n                  <span class="sih-modal__text sih-modal__text_md">)</span>\n                </div>\n              </div>\n              <span class="sih-modal__total-cost sih-modal__text sih-modal__text_md"></span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class="right-block__buttons sih-modal__column gap-15 mt-34">\n        <button\n          id="sih_buy_available"\n          class="sih-modal__button sih-modal__button_blue justify-center opacity-5 pointer-events-none rounded-8 py-16"\n          title="buy_available"\n        >\n          ').concat(SIHLang.sihAppMarket.ordering.buy_available,'\n        </button>\n        <button\n          class="sih__buy-all-items sih-modal__button sih-modal__button_light-grey justify-center opacity-5 pointer-events-none rounded-8 py-16"\n          title="buy_all"\n        >\n          ').concat(SIHLang.sihAppMarket.ordering.buy_all,'\n        </button>\n      </div>\n\n      <div class="sih-modal__error mt-20"></div>\n\n      <div class="sih-modal__row text-center mt-47">\n        <span class="sih-modal__text sih-modal__text_md"> ').concat(SIHLang.sihAppMarket.ordering.info_text," </span>\n      </div>\n    </div>\n  "));t.find("#sih-tos-ordering").off("change").change((function(e){CalculateTotalInfo()})),n.find(".right-block__order-info_inner").append(t),e.find(".ordering-tab__right-block").length||e.append(n)}function setUserInfo(){var e=$J("#sih-modal__buy-orders").find(".sih-modal.ordering-tab"),t=$J(".right-block__user-image"),n=e.find(".right-block__user-name"),a=e.find(".right-block__user-steamid"),i=e.find(".sih-modal__user-balance");sih_app_global_service.getLoginSihAppUser().then((function(e){t.find("img").length||t.append('<img src="'.concat(e.user.avatar,'">')),n.text(e.user.username);var r=e.socials.findIndex((function(e){return"steam"===e[0]}));a.text(e.socials[r][1]);var s=e.user.balance/1e3,o=currency_service.A.getPriceFromCurrency(s,right_block_currencyIdLocal).text;i.text(o)}))}function setTotalAllItemsPrice(){var e=$J("#sih-modal__buy-orders").find(".sih-modal.ordering-tab").find(".sih-modal__total-cost");sih_app_global_service.getAllBuyStack().then((function(t){var n=sih_app_global_service.getFilterItemsByStatus(t,"ordering"),a=0;n.forEach((function(e){e.isChecked&&(a+=e.price)}));var i=currency_service.A.getPriceFromCurrency(a,right_block_currencyIdLocal,1,!1,3).text;e.text(i)}))}function paymentActionListeners(){buyAllItemsAction(),buyAvailableItemsAction()}function buyAllItemsAction(){var e=$J("#sih-modal__buy-orders"),t=e.find(".sih-modal.ordering-tab"),n=t.find(".sih-modal__error");t.find(".sih__buy-all-items").off("click").click((function(){var a=$J(this);a.addClass("animated-background-btn");var i=n.find(".sih-modal__error_message");sih_app_global_service.getUserSihApp().then((function(r){r.success?sih_app_global_service.getLoginSihAppUser().then((function(r){if(r.success)if(r.tfaNeed)sih_app_global_service.errorHandler(a,n,i,"Enter password"),setTimeout((function(){RenderItemsRow("cart-tab",null).then((function(){RenderCart(),ModalCartListenerAction();var n=e.find(".sih-modal.cart-tab");t.hide(),n.show()}))}),1e3);else{a.removeClass("animated-background-btn");var s=r.user.balance/1e3;GetSortedGroupList("ordering").then((function(e){var n=0,a=0;e.forEach((function(e){a+=e.reduce((function(e,t){return t.isChecked&&(a+e+t.price<=s?e+=t.price:n+=t.price),e}),0)})),n=n>0?Math.abs(s-(a+n)):0;var i=Math.ceil(1e3*n)/1e3;sih_app_global_service.getSihAppToken().then((function(e){window.open("https://sih.app/pay?amount=".concat(i,"#payToken=").concat(e),"_blank");var n=GetListingForUpdateStatus(t.find(".sih-modal__row_item"),"pending");sih_app_global_service.changeItemsStatus(n).then((function(){ChangeItemsStatus(),SetModalToDefaultState(),ChangeOrdersCountHeaderMenu(),$J("#sih-header-orders").trigger("click"),sih_app_global_service.updateTradeLink(),setTimeout((function(){sih_app_global_service.createBuyOrder().then((function(e){}))}),1e3)}))}))}))}else sih_app_global_service.errorHandler(a,n,i)})):r.hasOwnProperty("error")?sih_app_global_service.errorHandler(a,n,i,r.error):sih_app_global_service.errorHandler(a,n,i)}))}))}function buyAvailableItemsAction(){var e=$J("#sih-modal__buy-orders"),t=e.find(".sih-modal.ordering-tab"),n=t.find(".ordering-tab__content.available"),a=t.find(".sih-modal__error");t.find("#sih_buy_available").off("click").click((function(){var i=a.find(".sih-modal__error_message"),r=n.find(".sih-modal__row_item"),s=$J(this);s.addClass("animated-background-btn"),sih_app_global_service.getUserSihApp().then((function(n){n.success?sih_app_global_service.getLoginSihAppUser().then((function(n){if(n.success)if(n.tfaNeed)sih_app_global_service.errorHandler(s,a,i,"Enter password"),setTimeout((function(){RenderItemsRow("cart-tab",null).then((function(){RenderCart(),ModalCartListenerAction();var n=e.find(".sih-modal.cart-tab");t.hide(),n.show()}))}),1e3);else{var o=GetListingForUpdateStatus(r,"pending");sih_app_global_service.changeItemsStatus(o).then((function(){ChangeItemsStatus(),SetModalToDefaultState(),ChangeOrdersCountHeaderMenu(),$J("#sih-header-orders").trigger("click"),sih_app_global_service.updateTradeLink(),setTimeout((function(){sih_app_global_service.createBuyOrder().then((function(e){}))}),1e3)}))}else sih_app_global_service.errorHandler(s,a,i)})):n.hasOwnProperty("error")?sih_app_global_service.errorHandler(s,a,i,n.error):sih_app_global_service.errorHandler(s,a,i)}))}))}function addTooltipForButtons(){var e=$J("#sih-modal__buy-orders").find(".sih-modal.ordering-tab");e.find("#sih_buy_available").tooltip({content:SIHLang.sihAppMarket.ordering.buy_available_tooltip,position:{my:"left top",at:"left+10 bottom"},classes:{"ui-tooltip":"ordering__tooltip"}}),e.find(".sih__buy-all-items").each((function(e,t){$J(t).tooltip({content:SIHLang.sihAppMarket.ordering.buy_all_tooltip,position:{my:"left bottom",at:"left+10 top"},classes:{"ui-tooltip":"ordering__tooltip"}})}))}var buyItem_currencyIdLocal=1;function ModalOrdering(){buyItem_loadHtml(),LoadLeftBlock(),LoadRightBlock()}function ModalOrderingListenersAction(){DeleteItemsAllByName(renderOrderingInfo,"ordering-tab","ordering"),ChangeCountItemInBuyStack(renderOrderingInfo,"ordering-tab","ordering"),renderOrderingInfo(),OrderingLeftBlockActionListeners(),OrderingRightBlockActionListeners()}function CalculateTotalInfo(){return new Promise((function(e){sih_app_global_service.getLoginSihAppUser().then((function(t){var n=t.user.balance/1e3,a=0,i=0,r=0,s=0;updateCheckedStateInBuyStack().then((function(){GetSortedGroupList("ordering").then((function(t){t.forEach((function(e){r+=e.reduce((function(e,t){return t.isChecked&&(r+e+t.price<=n?(a++,e+=t.price):(i++,s+=t.price)),e}),0)})),s=s>0?Math.abs(n-(r+s)):0;var o=currency_service.A.getPriceFromCurrency(r,buyItem_currencyIdLocal,1,!1,3).text,l=currency_service.A.getPriceFromCurrency(s,buyItem_currencyIdLocal,1,!1,3).text,c=$J(".sih-modal.ordering-tab"),d=c.find(".sih-modal__ordering-item-count"),_=c.find(".right-block__available-row"),u=c.find(".sih-modal__available-item-count"),m=c.find(".sih-modal__available-total-cost"),h=c.find(".right-block__unavailable-row"),p=c.find(".sih-modal__unavailable-item-count"),f=c.find(".sih-modal__unavailable-total-cost"),g=c.find(".sih__buy-all-items"),b=c.find("#sih_buy_available"),v=c.find("#sih-tos-ordering");d.text(a+i),u.text(a),m.text(o),m.data("total-price",r),p.text(i),f.text(l),f.data("total-price",s),h.toggleClass("hidden",0===s),$J("#select-all-unavailable").prop("checked",0!==s),_.toggleClass("hidden",0===r),$J("#select-all-available").prop("checked",0!==r),0!==s?g.toggleClass("opacity-5 pointer-events-none",!v.is(":checked")&&0!==s):g.addClass("opacity-5 pointer-events-none"),0!==r?b.toggleClass("opacity-5 pointer-events-none",!v.is(":checked")&&0!==r):b.addClass("opacity-5 pointer-events-none"),e()}))}))}))}))}function GetListingForUpdateStatus(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ordering",n={};return e.each((function(e,a){var i=$J(a),r=[],s=i.find(".select-item"),o=encodeURIComponent(i.find(".sih-item-order__name").data("hashname"));s.prop("checked")&&(i[0].createTimestamps.forEach((function(e){r.push({createdAt:e,statusCode:t})})),n[o]=[].concat(r),i.remove())})),n}function UpdateStatusCheckedItems(e){return new Promise((function(t){var n=$J("#sih-modal__buy-orders"),a=n.find(".sih-modal.ordering-tab");sih_app_global_service.changeItemsStatus(e).then((function(){ShowAndHideLoaders().then((function(){CalculateTotalInfo().then((function(){RenderItemsRow("ordering-tab","ordering").then((function(){ChangeItemCountInItemPage(),actionMenu_ChangeCartCountHeaderMenu(),UpdateSihMarketTabBuyStack(),ModalOrderingListenersAction(),RenderItemsRow("cart-tab",null).then((function(){RenderCart(),renderOrderingInfo(),ModalCartListenerAction(),sih_app_global_service.getAllBuyStack().then((function(e){if(!sih_app_global_service.getFilterItemsByStatus(e,"ordering").length){var i=n.find(".sih-modal.cart-tab");a.hide(),i.show()}t()}))}))}))}))}))}))}))}function buyItem_loadHtml(){var e=$J("#sih-modal__buy-orders"),t='\n    <div class="sih-modal sih-global ordering-tab">\n      <div class="sih-modal__close"></div>\n      <div class="sih-modal__inner sih-modal__column">\n        <div class="ordering-tab__header sih-modal__row gap-12 items-baseline">\n          <div class="sih-modal__title title">'.concat(SIHLang.sihAppMarket.ordering.title,'</div>\n          <div class="ordering-tab__header-total-block sih-modal__row">\n            <div class="ordering-tab__header-total-row sih-modal__row items-center gap-5">\n              <span\n                class="sih-modal__all-item-count sih-modal__text sih-modal__text_md sih-modal__text_light-grey"\n              ></span>\n              <span class="sih-modal__text sih-modal__text_md sih-modal__text_light-grey"\n                >').concat(SIHLang.sihAppMarket.ordering.items,'</span\n              >\n            </div>\n            <span class="ordering-animated"></span>\n          </div>\n        </div>\n\n        <div class="orders-tab__main sih-modal__row justify-between mt-36 gap-20"></div>\n      </div>\n    </div>\n  ');e.find(".ordering-tab").length||(e.append(t),LoadPlugSteamGuard(e.find(".ordering-tab")))}function renderOrderingInfo(){setTotalItemsCount(),RenderLeftBlockOrderingInfo(),RenderRightBlockOrderingInfo()}function setTotalItemsCount(){var e=$J(".sih-modal.ordering-tab").find(".sih-modal__all-item-count");sih_app_global_service.getAllBuyStack().then((function(t){var n=sih_app_global_service.getFilterItemsByStatus(t,"ordering").length;e.text(n)}))}function updateCheckedStateInBuyStack(){var e=$J("#sih-modal__buy-orders").find(".ordering-tab").find(".ordering-tab__content"),t=[],n={};return new Promise((function(a){e.each((function(e,a){$J(a).find(".sih-modal__row_item").each((function(e,a){var i=$J(a),r=i.find(".select-item").prop("checked"),s=encodeURIComponent(i.find(".sih-item-order__name").data("hashname"));i[0].createTimestamps.forEach((function(e){t.push({createdAt:e,isChecked:r})})),n[s]=[].concat(t)}))})),Object.keys(n).length?chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_UPDATE_ITEM_CHECKBOX_SIH_APP",data:n},(function(e){a()})):a()}))}function global_slicedToArray(e,t){return global_arrayWithHoles(e)||global_iterableToArrayLimit(e,t)||global_unsupportedIterableToArray(e,t)||global_nonIterableRest()}function global_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function global_iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,r,s,o=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=r.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function global_arrayWithHoles(e){if(Array.isArray(e))return e}function global_typeof(e){return global_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},global_typeof(e)}function global_defineProperty(e,t,n){return(t=global_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function global_toPropertyKey(e){var t=global_toPrimitive(e,"string");return"symbol"==global_typeof(t)?t:t+""}function global_toPrimitive(e,t){if("object"!=global_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=global_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function global_toConsumableArray(e){return global_arrayWithoutHoles(e)||global_iterableToArray(e)||global_unsupportedIterableToArray(e)||global_nonIterableSpread()}function global_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function global_iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function global_arrayWithoutHoles(e){if(Array.isArray(e))return global_arrayLikeToArray(e)}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=global_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function global_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return global_arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?global_arrayLikeToArray(e,t):void 0}}function global_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var global_currencyIdLocal=1,RESPONSE_ITEMS_PRICES,MAX_ITEM_BUY_COUNT=1,global_MAX_ITEM_STACK_COUNT=1,isShowLoaders=!0;function GetSortedGroupList(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(t){sih_app_global_service.getAllBuyStack().then((function(n){var a,i=sih_app_global_service.getFilterItemsByStatus(n,e),r=[],s=[],o=[],l=_createForOfIteratorHelper(i);try{for(l.s();!(a=l.n()).done;){var c=a.value;0!==r.length&&r.includes(c.market_hash_name)||r.push(c.market_hash_name)}}catch(e){l.e(e)}finally{l.f()}for(var d=0,_=r;d<_.length;d++){var u=_[d],m=encodeURIComponent(u);o.push(sih_app_global_service.getAllItemsBuyStackByName(m))}Promise.all(o).then((function(n){n.forEach((function(t){var n=sih_app_global_service.getFilterItemsByStatus(t,e);s.push(n)}));var a=s.sort((function(e,t){return Math.min.apply(Math,global_toConsumableArray(e.map((function(e){return e.createdAt}))))>Math.min.apply(Math,global_toConsumableArray(t.map((function(e){return e.createdAt}))))?1:-1}));t(a)}))}))}))}function GetUserBalance(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cart-tab";return new Promise((function(t){"cart-tab"!==e?sih_app_global_service.getLoginSihAppUser().then((function(e){e.success&&e.user?t(e.user.balance/1e3):t(null)})):t(null)}))}function RenderItemsRow(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=$J("#sih-modal__buy-orders").find(".sih-modal.".concat(e)),i=a.find(".".concat(e,"__content"));return i.children().remove(),new Promise((function(r,s){GetUserBalance(e).then((function(s){var o=0,l={};GetSortedGroupList(t).then((function(t){(t=t.reduce((function(e,t){var n=t.filter((function(t){return!t.itemId||(e.push([t]),!1)}));return n.length&&e.push(n),e}),[]))&&t.length||r(),t.forEach((function(c,d){var _,u,m,h=0,p=0,f=c.length,g=c[f-1],b=[],v=[];if("cart-tab"!==e){m=MAX_ITEM_BUY_COUNT;var y=c.length;v=c.slice(m,y),c=c.slice(0,m)}var k=v.map((function(e){return e?{createdAt:e.createdAt,statusCode:null}:{}}));if(v&&v.length){var S=encodeURIComponent(v[0].market_hash_name);Object.assign(l,global_defineProperty({},S,k))}o+=c.reduce((function(t,n){"cart-tab"!==e?(o+t+(n.isChecked?n.price:0)<=s?(h++,t+=n.isChecked?n.price:0,i=a.find(".".concat(e,"__content.available")),_=n):(p++,n.isChecked?n.price:0,i=a.find(".".concat(e,"__content.unavailable")),u=n),b.find((function(e){return e.attr("class")===i.attr("class")}))||b.push(i)):b.length||b.push(i);return t}),0);var I=c.length;b.forEach((function(a){"cart-tab"!==e&&(a.hasClass("available")?(g=_,I=h):(g=u,I=p));var i=g.price,s=null!==i?currency_service.A.getPriceFromCurrency(i,global_currencyIdLocal,1,!1,3).text:null,o=currency_service.A.getPriceFromCurrency(i*I,global_currencyIdLocal,1,!1,3).text,f=!0;a.find(".sih-modal__row_item").each((function(e,t){$J(t).find(".sih-item-order__name").each((function(e,t){var n=$J(t).data("hashname"),a=$J(t).data("itemid");g.market_hash_name===n&&+g.itemId==+a&&(f=!1)}))}));var b=parseHashName(g.market_hash_name),v=getHeaderInfoHtml(b);if(!a.find(".sih-item-order__name").length||f){var y=$J('\n                <div\n                  class="sih-item-order sih-modal__row sih-modal__row_item items-center justify-between bg-black-100 border-solid border-x-0 border-y-1 border-grey py-13 px-24"\n                >\n                  <div class="sih-modal__row items-center">\n                    \x3c!--              '.concat("ordering-tab"!==e?'<input type="checkbox" name="sih-item-order__checkbox" id="sih-item-order__'.concat(d,'" class="sih-modal__input hidden" checked>\n                    <label class="fake-checkbox sih-item-order__checkbox-label" for="sih-item-order__').concat(d,'"></label>'):"",' --\x3e\n\n                    <a href="').concat(g.url,'" class="sih-modal__image mr-20">\n                      <img class="w-62 h-47" src="').concat(g.image,'" />\n                    </a>\n                    <div class="vertical-divider" data-rarity="').concat(g.rarityColor||"default",'"></div>\n                    <div class="sih-modal__column gap-3">\n                      <div class="sih-item-order__header">').concat(v,'</div>\n                      <a\n                        href="').concat(g.url,'"\n                        class="sih-item-order__name sih-modal__text sih-modal__text_white sih-modal__text_bold max-w-200 text-ellipsis lh-16"\n                        data-hashname="').concat(g.market_hash_name,'"\n                        data-itemid="').concat(g.itemId?g.itemId:null,'"\n                        >').concat(b.name,'</a\n                      >\n\n                      <div class="sih-modal__row gap-15 items-center">\n                        <a\n                          href="javascript:void(0)"\n                          class="sih-modal__remove-item sih-modal__text sih-modal__text_sm sih-modal__text_blue lh-16"\n                          >').concat(SIHLang.sihAppMarket.global.delete,'</a\n                        >\n                      </div>\n                    </div>\n                  </div>\n\n                  \x3c!--                   <div class="sih-modal__column">\n                     <div class="sih-modal__row bg-black-100 br2-grey sih-modal__row_cart-counter h-28 ').concat(g.isChecked&&i&&i>0?"":"pointer-events-none opacity-5",'">\n                          <a href="javascript:void(0)" class="sih-modal__decrement sih-modal__button py-8 px-14"></a>\n                          <input type="number" class="sih-modal__row sih-modal__cart-count-input sih-modal__input sih-modal__text sih-modal__text_md w-68 text-center bg-transparent border-none" value="').concat(I,'">\n                          <a href="javascript:void(0)" class="sih-modal__increment sih-modal__button py-8 px-14 ').concat(I>=global_MAX_ITEM_STACK_COUNT?"opacity-5 pointer-events-none":"",'"></a>\n                     </div>\n                     ').concat(a.hasClass("available")||a.hasClass("unavailable")?'\n                       <div class="sih-modal__row justify-center">\n                          <span class="sih-modal__buy-stack-count sih-modal__text sih-modal__text_sm opacity-5">'.concat(h+p,'</span>\n                          <span class="sih-modal__text sih-modal__text_sm opacity-5">/</span>\n                          <span class="sih-modal__buy-available-count sih-modal__text sih-modal__text_sm opacity-5">').concat(m,"</span>\n                        </div>\n                        "):"","\n\n                  </div>--\x3e\n                  ").concat(n?'<div class="sih-modal_row-price-loader"></div>':'<div class="sih-modal__row gap-30 items-center">\n                        <div class="sih-modal__column_price sih-modal__column items-end w-100">\n                          <div class="sih-modal__row items-center gap-2">\n                            <div class="sih-modal__row mr-5">\n                              <img\n                                class="w-22 h-22"\n                                src="chrome-extension://'.concat(SIHID,"/assets/marketplace/mini-icons/").concat(g.providerName,'.svg"\n                                alt="').concat(g.providerName,'"\n                              />\n                            </div>\n                            <span\n                              class="sih-modal__item-row-single-price sih-modal__text sih-modal__text_sm sih-modal__text_white text-ellipsis"\n                              >').concat(null!==s?s:"".concat(SIHLang.sihAppMarket.global.not_available),'</span\n                            >\n                            <span class="sih-modal__text sih-modal__text_sm sih-modal__text_white text-ellipsis"\n                              >').concat(null!==s?"/":"",'</span\n                            >\n                            <span\n                              class="sih-modal__item-row-count sih-modal__text sih-modal__text_sm sih-modal__text_white text-ellipsis"\n                              >').concat(null!==s?I+"".concat(SIHLang.sihAppMarket.global.units):"",'</span\n                            >\n                          </div>\n                          <span\n                            class="sih-modal__item-row-price-group sih-modal__text sih-modal__text_lg sih-modal__text_white text-ellipsis"\n                            >').concat(null!==s?o:"","\n                          </span>\n                        </div>\n                      </div>"),"\n                </div>\n              "));if("ordering-tab"===e){var k,S="";a.hasClass("available")?(k=c.map((function(e){return e.createdAt})).slice(0,h),S="available-"):(k=c.map((function(e){return e.createdAt})).slice(h,c.length),S="unavailable-"),y[0].createTimestamps=k;var C='\n                  <label class="sih-modal__row items-center -mr-14" for="'.concat(S,"select-item-").concat(d,'">\n                    <input\n                      type="checkbox"\n                      name="').concat(S,"select-item-").concat(d,'"\n                      id="').concat(S,"select-item-").concat(d,'"\n                      class="select-item hidden"\n                      ').concat(g.isChecked?"checked":"",'\n                    />\n                    <label class="fake-checkbox" for="').concat(S,"select-item-").concat(d,'"></label>\n                  </label>\n                ');y.find(".sih-modal__column_price").after(C)}else y[0].createTimestamps=c.map((function(e){return e.createdAt}));a.append(y)}d+1===t.length&&(Object.keys(l).length?sih_app_global_service.changeItemsStatus(l).then((function(){r()})):r())}))}))}))}))}))}function ChangeItemsStatus(){var e,t,n,a,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=$J("#sih-modal__buy-orders"),o=$J("body").find("#sih-enter-password");i?(e=s.find(".cart-tab"),t=s.find(".ordering-tab"),n="cart-tab",a="ordering-tab"):(e=s.find(".ordering-tab"),t=s.find(".cart-tab"),n="ordering-tab",a="cart-tab"),function(e){return new Promise((function(t){e?sih_app_global_service.updateSIHMarketPrice().then((function(e){t(e)})):t()}))}(i).then((function(i){sih_app_global_service.getLoginSihAppUser().then((function(i){if(i.success&&i.tfaNeed)s.hide(),o.attr("data-show-modal","ordering").show();else if(i.success){e.hide();var l={};e.find(".".concat(n,"__content")).find(".sih-modal__row_item").each((function(e,t){var n=[],a=$J(t);if(a.find(".sih-modal__item-row-price-group").text().length>0){var i=a.find(".sih-item-order__name").data("hashname"),s=encodeURIComponent(i);a[0].createTimestamps.forEach((function(e){a.remove(),n.push({createdAt:e,statusCode:r})})),l[s]=[].concat(n)}})),sih_app_global_service.changeItemsStatus(l).then((function(){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_UPDATE_ITEM_CHECKBOX_SIH_APP",data:null},(function(e){RenderItemsRow(a,r).then((function(){if(ChangeItemCountInItemPage(),actionMenu_ChangeCartCountHeaderMenu(),UpdateSihMarketTabBuyStack(),t.show(),"ordering-tab"===a){var e=i.socials.findIndex((function(e){return"steam"===e[0]}));i.socials[e][3]&&"object"!==global_typeof(i.socials[e][3])?ModalOrderingListenersAction():t.find(".sih-plug__steam-guard").removeClass("hidden")}}))}))}))}}))}))}function DeleteItemsAllByName(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cart-tab",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=$J("#sih-modal__buy-orders").find(".sih-modal.".concat(t)),i=a.find(".".concat(t,"__content")).find(".sih-modal__row_item"),r=a.find(".sih-modal__error");i.each((function(a,i){var s=$J(i);s.find(".sih-modal__remove-item").off("click").click((function(){var a=encodeURIComponent($J(this).closest(".sih-item-order").find(".sih-item-order__name").data("hashname")),i=$J(this).closest(".sih-item-order").find(".sih-item-order__name").data("itemid"),o=$J(this).parent().parent().parent().parent(),l=r.find(".sih-modal__error_message");if("ordering-tab"!==t){var c={hashName:a,argsCountDelete:0,statusCode:n,itemId:i};sih_app_global_service.deleteItemFromBuyStack(c).then((function(t){o.remove(),e&&e(),actionMenu_ChangeCartCountHeaderMenu(),ChangeItemCountInItemPage(),UpdateSihMarketTabBuyStack(),r.hide()})).catch((function(e){sih_app_global_service.errorHandler(null,r,l,e.error)}))}else{var d={},_=[];s[0].createTimestamps.forEach((function(e){_.push({createdAt:e,statusCode:null})})),Object.assign(d,global_defineProperty({},a,[].concat(_))),UpdateStatusCheckedItems(d).then((function(){}))}}))}))}function ChangeCountItemInBuyStack(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cart-tab",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=$J("#sih-modal__buy-orders").find(".sih-modal.".concat(t)),i=a.find(".".concat(t,"__content")).find(".sih-modal__row_item"),r=a.find(".sih-modal__error"),s=null;function o(t,a){t.parent().hasClass("available")||t.parent().hasClass("unavailable")?LocalCalculateOrderingItemRow(t).then((function(){clearTimeout(s),s=setTimeout((function(){ShowAndHideLoaders().then((function(){e&&e(),UpdateItemRowInfo(t,a,n),actionMenu_ChangeCartCountHeaderMenu(),ChangeItemCountInItemPage(),UpdateSihMarketTabBuyStack(),r.hide()}))}),400)})):(e&&e(),UpdateItemRowInfo(t,a,n),actionMenu_ChangeCartCountHeaderMenu(),ChangeItemCountInItemPage(),UpdateSihMarketTabBuyStack(),r.hide())}i.each((function(e,a){var i=$J(a),s=i.find(".sih-modal__decrement"),l=i.find(".sih-modal__increment"),c=i.find(".sih-modal__cart-count-input");s.off("click").click((function(){var e=$J(this);+c.val()<=global_MAX_ITEM_STACK_COUNT&&1!==global_MAX_ITEM_STACK_COUNT&&l.removeClass("opacity-5 pointer-events-none");var a=$J(this).parent().parent().parent(),i=r.find(".sih-modal__error_message"),s=e.closest(".sih-item-order").find(".sih-item-order__name").data("hashname"),d=encodeURIComponent(s);sih_app_global_service.getAllItemsBuyStackByName(d).then((function(e){var s=sih_app_global_service.getFilterItemsByStatus(e,n);if("ordering-tab"!==t||"ordering-tab"===t&&s.length>1){var l={hashName:d,statusCode:n};sih_app_global_service.deleteItemFromBuyStack(l).then((function(e){o(a,e)})).catch((function(e){sih_app_global_service.errorHandler(null,r,i,e.error)}))}}))})),l.off("click").click((function(){var e=$J(this);+c.val()>=global_MAX_ITEM_STACK_COUNT-1&&$J(this).addClass("opacity-5 pointer-events-none");var t=$J(this).parent().parent().parent(),a=r.find(".sih-modal__error_message"),i=e.closest(".sih-item-order").find(".sih-item-order__name").data("hashname"),s=encodeURIComponent(i);sih_app_global_service.setItemToBuyStack({hashName:s,countAdd:1,statusCode:n}).then((function(e){e&&o(t,e)})).catch((function(e){sih_app_global_service.errorHandler(null,r,a,e.error)}))})),c.off("focusout").focusout((function(){var e=$J(this),a=Math.ceil($J(this).val());(a=sih_app_global_service.validateInput(a,global_MAX_ITEM_STACK_COUNT))>=global_MAX_ITEM_STACK_COUNT?l.addClass("opacity-5 pointer-events-none"):l.removeClass("opacity-5 pointer-events-none");var i=$J(this).parent().parent().parent(),s=e.closest(".sih-item-order").find(".sih-item-order__name").data("hashname"),c=r.find(".sih-modal__error_message"),d=encodeURIComponent(s);sih_app_global_service.getAllItemsBuyStackByName(d).then((function(s){var l=sih_app_global_service.getFilterItemsByStatus(s,n).length;if(0===a&&"ordering-tab"===t&&(e.val(1),a=1),a>=l&&1!==a)sih_app_global_service.setItemToBuyStack({hashName:d,countAdd:a,statusCode:n}).then((function(e){o(i,e)})).catch((function(e){sih_app_global_service.errorHandler(null,r,c,e.error)}));else{var _={hashName:d,argsCountDelete:a,statusCode:n};sih_app_global_service.deleteItemFromBuyStack(_).then((function(e){o(i,e)})).catch((function(e){sih_app_global_service.errorHandler(null,r,c,e.error)}))}}))}))}))}function UpdateItemRowInfo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.find(".sih-modal__cart-count-input"),i=e.find(".sih-modal__item-row-single-price"),r=e.find(".sih-modal__item-row-count"),s=e.find(".sih-modal__item-row-price-group");if(e.parent().hasClass("available")||e.parent().hasClass("unavailable"))RenderItemsRow("ordering-tab","ordering").then((function(){ChangeItemCountInItemPage(),actionMenu_ChangeCartCountHeaderMenu(),UpdateSihMarketTabBuyStack(),ModalOrderingListenersAction()}));else{var o=sih_app_global_service.getFilterItemsByStatus(t,n),l=o.length;if(e[0].createTimestamps=o.map((function(e){return e.createdAt})),l>0){var c=o[l-1].price;if(c){var d=o.reduce((function(e,t){return e+t.price}),0),_=currency_service.A.getPriceFromCurrency(d,global_currencyIdLocal).text,u=currency_service.A.getPriceFromCurrency(c,global_currencyIdLocal).text;a.val(l),i.text(u),r.text("".concat(l," ").concat(SIHLang.sihAppMarket.global.units)),s.text(_)}else i.text("".concat(SIHLang.sihAppMarket.global.not_available))}else e.remove()}}function ShowAndHideLoaders(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ordering-tab";isShowLoaders=!0;var n=$J("#sih-modal__buy-orders").find(".".concat(t));return r(),s(),a(),i(),new Promise((function(t){return setTimeout((function(){isShowLoaders=!1,s(),r(),a(),i(),t()}),e)}));function a(){var e=n.find(".".concat(t,"__content")),a='\n      <div class="fake-ordering__row sih-modal__row items-center justify-between bg-black-100 py-13 px-24">\n        <div class="sih-modal__row items-center w-265">\n          <div class="sih-modal__image mr-20">\n            <div class="w-62 h-47 bg-grey rounded-4"></div>\n          </div>\n\n          <div class="sih-modal__column gap-6">\n            <div class="w-100 h-16 bg-grey rounded-4"></div>\n            <div class="sih-modal__row gap-15 items-center">\n              <div class="w-62 h-16 bg-grey rounded-4"></div>\n            </div>\n          </div>\n        </div>\n\n        \x3c!--                  <div class="sih-modal__column gap-2">--\x3e\n        \x3c!--                     <div class="sih-modal__row bg-black-100 br2-grey sih-modal__row_cart-counter h-28 ">--\x3e\n        \x3c!--                          <div class="pointer-events-none sih-modal__decrement sih-modal__button py-8 px-14"></div>--\x3e\n        \x3c!--                          <input type="number" class="sih-modal__row sih-modal__input sih-modal__text sih-modal__text_md w-68 text-center bg-transparent border-none" value="" disabled>--\x3e\n        \x3c!--                          <div class="pointer-events-none sih-modal__increment sih-modal__button py-8 px-14"></div>--\x3e\n        \x3c!--                     </div>--\x3e\n        \x3c!--                     <div class="sih-modal__row w-100per justify-center">--\x3e\n        \x3c!--                        <div class="sih-modal__row w-22 h-16 bg-grey rounded-4"></div>--\x3e\n        \x3c!--                     </div>--\x3e\n        \x3c!--                  </div>--\x3e\n\n        <div class="sih-modal__row gap-30 items-center">\n          <div class="sih-modal__column_price sih-modal__column items-end w-100 gap-2">\n            <div class="sih-modal__row gap-2">\n              <span class="w-100 h-16 bg-grey rounded-4"></span>\n            </div>\n            <span class="w-62 h-20 bg-grey rounded-4"></span>\n          </div>\n\n          <div class="w-22 h-22 bg-grey rounded-4 -mr-14"></div>\n        </div>\n      </div>\n    ',i='\n      <div class="fake-ordering fake-ordering__content">'.concat(a," ").concat(a," ").concat(a,"</div>\n    ");e.each((function(e,n){var a=$J(n);a.find(".sih-modal__row_item").hide();var r=a.find(".fake-ordering__content");isShowLoaders?r.length?r.fadeIn():GetUserBalance(t).then((function(e){e&&e>0?a.find(".sih-modal__row_item").length&&a.append(i):!e&&e<=0&&a.hasClass("unavailable")&&a.append(i)})):r.fadeOut()}))}function i(){var e=n.find(".".concat(t,"__right-block")),a=e.find(".right-block__order-info"),i=' <div class="right-block__fake">'.concat('\n      <div class="right-block__fake-order-info">\n        <div class="sih-modal__row justify-between mt-31 gap-5">\n          <span class="w-150 h-20 bg-grey rounded-4"></span>\n          <span class="w-100 h-20 bg-grey rounded-4"></span>\n        </div>\n        <div class="sih-modal__column mt-16 gap-8">\n          <div class="sih-modal__row justify-between gap-5">\n            <div class="sih-modal__row gap-5">\n              <span class="w-150 h-20 bg-grey rounded-4"></span>\n            </div>\n            <span class="w-100 h-20 bg-grey rounded-4"></span>\n          </div>\n\n          <div class="splitter-1 bg-grey mt-9"></div>\n        </div>\n\n        <div class="sih-modal__column mt-11 mb-10 gap-10">\n          <span class="w-80 h-20 bg-grey rounded-4"></span>\n\n          <div class="sih-modal__row justify-between gap-5">\n            <div class="sih-modal__row gap-5">\n              <span class="w-150 h-20 bg-grey rounded-4"></span>\n            </div>\n\n            <span class="w-100 h-20 bg-grey rounded-4"></span>\n          </div>\n\n          <div class="sih-modal__row justify-between gap-5">\n            <div class="sih-modal__row gap-5">\n              <span class="w-150 h-20 bg-grey rounded-4"></span>\n            </div>\n            <span class="w-100 h-20 bg-grey rounded-4"></span>\n          </div>\n        </div>\n\n        <div class="sih-modal__row items-center gap-14">\n          <div class="sih-modal__row w-22 h-22 bg-grey rounded-4"></div>\n          <div class="sih-modal__row w-300 h-44 bg-grey rounded-4"></div>\n        </div>\n      </div>\n    '," ").concat('\n      <div class="right-block__fake-buttons sih-modal__column gap-15 mt-34">\n        <div class="w-100per h-47 bg-grey rounded-4"></div>\n        <div class="w-100-per h-47 bg-grey rounded-4"></div>\n      </div>\n    ',"</div> "),r=a.find(".right-block__order-info_inner"),s=e.find(".right-block__buttons");if(isShowLoaders){var o=a.find(".right-block__fake");r.css("opacity",0),s.css("opacity",0),o.length?o.fadeIn():a.append(i)}else{var l=e.find(".right-block__fake");r.css("opacity",1),s.css("opacity",1),l.fadeOut()}}function r(){var e=n.find(".ordering-tab__header").find(".ordering-tab__header-total-block"),t=e.find(".ordering-tab__header-total-row"),a=e.find(".ordering-animated");isShowLoaders?(t.css("opacity",0),a.fadeIn()):(a.fadeOut(),t.css("opacity",1))}function s(){n.find(".sih-modal__controls").each((function(e,t){var n=$J(t),a=n.find(".ordering-tab__total-number"),i=n.find(".ordering-animated");isShowLoaders?(a.css("opacity",0),i.fadeIn()):(i.fadeOut(),a.css("opacity",1))}))}}function parseHashName(e){var t,n,a=_createForOfIteratorHelper(global.SKIN_WEAR_MAP.entries());try{for(a.s();!(n=a.n()).done;){var i=global_slicedToArray(n.value,2),r=i[0],s=i[1];e.includes(s)&&(t=r)}}catch(e){a.e(e)}finally{a.f()}var o=e.replace("★","").replace("Souvenir ","").replace("StatTrak™ ","").replace("(".concat(global.SKIN_WEAR_MAP.get(t),")"),""),l=o.lastIndexOf("|");return{type:-1===l?o.trim():o.slice(0,l).trim(),name:-1===l?o.trim():o.slice(l+1).trim(),currentWear:t,hasStatrak:e.includes("StatTrak™"),hasSouvenir:e.includes("Souvenir")}}function getHeaderInfoHtml(e){var t=e.type,n=e.currentWear,a=e.hasStatrak,i=e.hasSouvenir,r="<span>".concat(t,"</span>");return n&&(r="<span>".concat(n.toUpperCase(),"</span> | ")+r),a&&(r='<span class="sih-item-order__header_statrak">St</span> | '+r),i&&(r='<span class="sih-item-order__header_souvenir">Sv</span> | '+r),r}function activePlan_createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=activePlan_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function activePlan_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return activePlan_arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?activePlan_arrayLikeToArray(e,t):void 0}}function activePlan_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function loadActivePlanTab(){activePlan_loadHtml(),buttonActions()}function RenderActivePlanInfo(e){var t,n=$J(".sih-modal.active-plan-tab"),a=activePlan_createForOfIteratorHelper(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if("adfree"===i.for_what){n.find(".sih-modal__smile").html(i.icon),n.find(".plans__name").text("".concat(void 0!==i.plan_txt?i.plan_txt:""));var r=sih_app_global_service.getDaysNumber(i.active_till);r.hasOwnProperty("days")?n.find(".plans__time").text("".concat(SIHLang.subscribeAds.modal.activePlan.days_left,": ").concat(r.days)):n.find(".plans__time").text("".concat(SIHLang.subscribeAds.modal.activePlan.hours_left,": ").concat(r.hours))}}}catch(e){a.e(e)}finally{a.f()}}function activePlan_loadHtml(){var e=$J(".sih-pagecontent").find(".sih-subscribe-ads"),t='\n    <div class="sih-modal sih-global active-plan-tab">\n      <div class="sih-modal__close"></div>\n      <div class="sih-modal__inner">\n        <h2 class="sih-modal__title text-center">'.concat(SIHLang.subscribeAds.modal.activePlan.title,'</h2>\n        <div class="sih-modal__plans plans active">\n          <div class="plans__active-plan">\n            <div class="plans__bottom gap-10">\n              <span class="plans__active-plan_icon"></span>\n              <span class="sih-modal__text sih-modal__text_lg sih-modal__text_extra-bold sih-modal__text_light-green"\n                >').concat(SIHLang.subscribeAds.modal.activePlan.active,'</span\n              >\n            </div>\n            <span class="sih-modal__smile sih-modal__smile_lg"></span>\n            <span class="plans__name sih-modal__text sih-modal__text_lg sih-modal__text_extra-bold"></span>\n            <span class="plans__time sih-modal__text sih-modal__text_sm opacity-50per"></span>\n          </div>\n        </div>\n        <div class="sih-modal__buttons justify-center">\n          <button class="sih-modal__button sih-modal__button_blue px-24 py-16 sih-modal__button-okey">\n            ').concat(SIHLang.subscribeAds.modal.okey,'\n          </button>\n        </div>\n\n        <a\n          href="https://sih.app/user/subscription"\n          target="_blank"\n          class="sih-modal__text_blue text-decoration-underline absolute left-50per -bottom-40 hover-opacity-8"\n          >').concat(SIHLang.subscribeAds.modal.sub_management,"</a\n        >\n      </div>\n    </div>\n  ");e.find(".active-plan-tab").length||e.append(t)}function buttonActions(){okayBtnAction()}function okayBtnAction(){$J(".sih-modal.active-plan-tab").find(".sih-modal__button-okey").click((function(){$J(".sih-subscribe-ads").hide(),SetModalSubscribeToDefaultState()}))}function selectingPlan_toConsumableArray(e){return selectingPlan_arrayWithoutHoles(e)||selectingPlan_iterableToArray(e)||selectingPlan_unsupportedIterableToArray(e)||selectingPlan_nonIterableSpread()}function selectingPlan_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function selectingPlan_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return selectingPlan_arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?selectingPlan_arrayLikeToArray(e,t):void 0}}function selectingPlan_iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function selectingPlan_arrayWithoutHoles(e){if(Array.isArray(e))return selectingPlan_arrayLikeToArray(e)}function selectingPlan_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var selectingPlan_debounce=null,SUBSCRIBE_BUTTON_DATA_NAME;function loadSelectingPlanTab(){selectingPlan_loadHtml()}function RenderPlans(e){renderPlansItems(e),setUserAndPlanCost(),sortPlansItemsByPrice(),selectingPlan_modalListeners()}function selectingPlan_loadHtml(){var e=$J(".sih-pagecontent").find(".sih-subscribe-ads"),t=tos_GetTOSTemplate("selecting-plan"),n=$J('\n    <div class="sih-modal sih-global selecting-plan-tab">\n      <div class="sih-modal__close"></div>\n      <div class="sih-modal__row gap-10 sih-modal__back sih-modal__back-info mb-20">\n        <span class="sih-modal__back_icon"></span>\n        <span class="sih-modal__text sih-modal__text_md">'.concat(SIHLang.subscribeAds.modal.back,'</span>\n      </div>\n      <div class="sih-modal__inner">\n        <span class="sih-modal__title">').concat(SIHLang.subscribeAds.modal.selectingPlan.title,'</span>\n\n        <span class="sih-modal__text sih-modal__text_lg sih-modal__text_extra-bold"\n          >').concat(SIHLang.subscribeAds.modal.selectingPlan.payment_method,'</span\n        >\n\n        <div class="sih-modal__column gap-10">\n          <div class="sih-modal__row gap-10 items-center mb-20">\n            <div class="payment payment-balance payment-balance__button payment__button">\n              <input\n                type="radio"\n                name="payment"\n                id="payment-balance"\n                class="payment__input"\n                data-name="Balance"\n                checked\n              />\n              <label class="sih-modal__row gap-10 sih-modal__button px-24 py-8 bg-grey" for="payment-balance">\n                <svg width="21" height="15" viewBox="0 0 21 15" fill="none" xmlns="http://www.w3.org/2000/svg">\n                  <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M11.1803 0H9.69118V2.77931H11.1803V0ZM4.42178 8.07162H7.12788V9.37668H4.42178V10.9234H8.54498V6.75044H5.80685V5.52593H8.54498V4.07586H4.42178V8.07162ZM11.1803 4.07586H9.69118V10.9234H11.1803V4.07586ZM15.1505 6.75044V4.07586H16.5676V10.9234H15.1826V7.97495H13.8375V10.9234H12.4685V4.07586H13.8615V6.75044H15.1505ZM3.26214 6.75051H0.5V8.24892H3.26214V6.75051ZM17.7379 6.75051H20.5V8.24892H17.7379V6.75051ZM9.69118 12.2207H11.1803V15H9.69118V12.2207ZM16.2864 1.37762H12.5075V2.77935H16.2864C17.0791 2.77935 17.7276 3.43189 17.7276 4.22943V5.47005H19.1206V4.22943C19.1126 2.65851 17.8477 1.37762 16.2864 1.37762ZM1.87106 5.47005V3.95553C1.87106 2.53768 3.02395 1.37762 4.43305 1.37762H8.48419V2.77935H4.43305C3.78454 2.77935 3.26414 3.31105 3.26414 3.95553V5.47005H1.87106ZM17.7276 10.7542C17.7276 11.5518 17.0791 12.2043 16.2864 12.2043H12.5075V13.606H16.2864C17.8477 13.606 19.1206 12.3251 19.1206 10.7542V9.51361H17.7276V10.7542ZM3.26414 9.51361V10.7542C3.26414 11.5598 3.91264 12.2043 4.70526 12.2043H8.48419V13.606H4.70526C3.14405 13.606 1.87106 12.3251 1.87106 10.7542V9.51361H3.26414Z"\n                    fill="white"\n                  />\n                </svg>\n                <span class="sih-modal__text sih-modal__text_white sih-modal__text_md"\n                  >').concat(SIHLang.subscribeAds.modal.selectingPlan.sih_balance,'</span\n                >\n              </label>\n            </div>\n            <div class="payment payment-stripe payment-stripe__button payment__button">\n              <input type="radio" name="payment" id="payment-stripe" class="payment__input" data-name="Stripe" />\n              <label class="sih-modal__row gap-10 sih-modal__button px-24 py-8 bg-grey" for="payment-stripe">\n                <svg width="14" height="20" viewBox="0 0 14 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n                  <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M5.57795 5.95604C5.57795 5.0989 6.28346 4.76923 7.45197 4.76923C9.12756 4.76923 11.2441 5.27473 12.9197 6.17582V1.01099C11.0898 0.285714 9.28189 0 7.45197 0C2.97638 0 0 2.32967 0 6.21978C0 12.2857 8.37795 11.3187 8.37795 13.9341C8.37795 14.9451 7.49606 15.2747 6.26142 15.2747C4.4315 15.2747 2.09449 14.5275 0.24252 13.5165V18.7473C2.29291 19.6264 4.36535 20 6.26142 20C10.8472 20 14 17.7363 14 13.8022C13.978 7.25275 5.57795 8.41758 5.57795 5.95604Z"\n                    fill="white"\n                  />\n                </svg>\n                <span class="sih-modal__text sih-modal__text_white sih-modal__text_md">Stripe (Worldwide)</span>\n              </label>\n            </div>\n          </div>\n\n          <div class="payment-info__message sih-modal__column -mt-20">\n            <span class="sih-modal__text sih-modal__text_md"\n              >').concat(SIHLang.subscribeAds.modal.selectingPlan.payment_message_info,'</span\n            >\n          </div>\n        </div>\n\n        <span class="sih-modal__text sih-modal__text_lg sih-modal__text_extra-bold"\n          >').concat(SIHLang.subscribeAds.modal.selectingPlan.sub_packages,'</span\n        >\n\n        <div class="sih-modal__plans plans plans-balance" data-id="payment-balance" data-payment="balance"></div>\n        <div class="sih-modal__plans plans plans-stripe" data-id="payment-stripe" data-payment="stripe"></div>\n\n        <div class="sih-modal__error"></div>\n        <div class="sih-modal__buttons hidden">\n          <button class="sih-modal__button sih-modal__button_blue px-24 py-16 sih-modal__button-subscribe" disabled>\n            ').concat(SIHLang.subscribeAds.modal.selectingPlan.support_sih_now,'\n          </button>\n          <a\n            href="https://sih.app/user/subscription"\n            target="_blank"\n            class="sih-modal__text_blue text-decoration-underline hover-opacity-8"\n            >').concat(SIHLang.subscribeAds.modal.what_is_black,'</a\n          >\n\n          <a\n            href="https://steamcommunity.com/groups/SteamInventoryHelper/discussions/0/3832042807499341165/"\n            target="_blank"\n            class="sih-modal__text sih-modal__text_blue absolute right-50 -bottom-20 hover-opacity-8"\n            >').concat(SIHLang.subscribeAds.modal.questions,'</a\n          >\n        </div>\n        <div class="sih-balance sih-modal__row justify-between">\n          <div class="sih-modal__column">\n            <div class="sih-modal__row items-center gap-20">\n              <div class="sih-modal__row gap-5 items-center">\n                <span class="sih-modal__text sih-modal__text_md">').concat(SIHLang.subscribeAds.modal.in_wallet,':</span>\n                <div class="sih-modal__sih-coins">\n                  <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path\n                      fill-rule="evenodd"\n                      clip-rule="evenodd"\n                      d="M13.6654 7.64594H10.5392V6.19862H13.6487C13.2732 3.05747 10.7173 0.584913 7.53535 0.333008V2.71898C7.79502 2.77089 8.03807 2.84986 8.2645 2.95588C8.70318 3.15944 9.06677 3.45257 9.35527 3.83527C9.64772 4.21797 9.8552 4.67802 9.97772 5.21542L8.51348 5.49023C8.45815 5.20117 8.34947 4.94672 8.18744 4.72687C8.0254 4.50702 7.82187 4.33603 7.57685 4.21389C7.33182 4.09176 7.05913 4.02662 6.75877 4.01848C6.47027 4.0144 6.21141 4.06122 5.9822 4.15893C5.75298 4.25257 5.57118 4.38692 5.43681 4.56199C5.30244 4.73298 5.23526 4.92636 5.23526 5.14214C5.23526 5.38234 5.32813 5.58794 5.51388 5.75893C5.70358 5.92992 6.00196 6.07648 6.40902 6.19862L7.94439 6.65663C8.68342 6.87648 9.21497 7.17572 9.53904 7.55434C9.86706 7.9289 10.0311 8.42762 10.0311 9.05052C10.0311 9.59607 9.89868 10.0744 9.63389 10.4856C9.3691 10.8968 8.99761 11.2185 8.51941 11.4505C8.22133 11.5926 7.89331 11.6904 7.53535 11.744V13.6663C10.7694 13.4103 13.3567 10.8603 13.6654 7.64594ZM6.10669 13.6287V11.728C5.79795 11.672 5.50945 11.5795 5.24119 11.4505C4.76694 11.2225 4.37766 10.9009 4.07336 10.4856C3.773 10.0704 3.58133 9.57775 3.49833 9.00777L4.90921 8.77571C5.01987 9.27647 5.25699 9.67546 5.62058 9.97266C5.98812 10.2658 6.4268 10.4123 6.93661 10.4123C7.42667 10.4123 7.82978 10.2943 8.14594 10.0582C8.46211 9.81795 8.62019 9.51464 8.62019 9.14823C8.62019 8.89174 8.5451 8.68411 8.39492 8.52533C8.24474 8.36248 8.00367 8.22813 7.6717 8.12228L5.61465 7.46274C4.41718 7.08004 3.81845 6.33094 3.81845 5.21542C3.81845 4.6943 3.93899 4.24036 4.18006 3.85359C4.42509 3.46275 4.76892 3.16352 5.21155 2.95588C5.4807 2.82715 5.77908 2.73831 6.10669 2.68936V0.370649C3.0914 0.771354 0.710116 3.1753 0.348711 6.19862H3.02612V7.64594H0.332031C0.629302 10.7417 3.04011 13.2212 6.10669 13.6287Z"\n                      fill="white"\n                    />\n                  </svg>\n                </div>\n                <span class="sih-balance__user  sih-modal__text sih-modal__text_md">---</span>\n              </div>\n\n              <div class="sih-balance__not-enough sih-modal__row gap-5 items-center">\n                <span class="sih-modal__text sih-modal__text_md sih-modal__text_red"\n                  >').concat(SIHLang.subscribeAds.modal.not_enough_funds,'</span\n                >\n                <div class="sih-modal__sih-coins red">\n                  <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path\n                      fill-rule="evenodd"\n                      clip-rule="evenodd"\n                      d="M13.6654 7.64594H10.5392V6.19862H13.6487C13.2732 3.05747 10.7173 0.584913 7.53535 0.333008V2.71898C7.79502 2.77089 8.03807 2.84986 8.2645 2.95588C8.70318 3.15944 9.06677 3.45257 9.35527 3.83527C9.64772 4.21797 9.8552 4.67802 9.97772 5.21542L8.51348 5.49023C8.45815 5.20117 8.34947 4.94672 8.18744 4.72687C8.0254 4.50702 7.82187 4.33603 7.57685 4.21389C7.33182 4.09176 7.05913 4.02662 6.75877 4.01848C6.47027 4.0144 6.21141 4.06122 5.9822 4.15893C5.75298 4.25257 5.57118 4.38692 5.43681 4.56199C5.30244 4.73298 5.23526 4.92636 5.23526 5.14214C5.23526 5.38234 5.32813 5.58794 5.51388 5.75893C5.70358 5.92992 6.00196 6.07648 6.40902 6.19862L7.94439 6.65663C8.68342 6.87648 9.21497 7.17572 9.53904 7.55434C9.86706 7.9289 10.0311 8.42762 10.0311 9.05052C10.0311 9.59607 9.89868 10.0744 9.63389 10.4856C9.3691 10.8968 8.99761 11.2185 8.51941 11.4505C8.22133 11.5926 7.89331 11.6904 7.53535 11.744V13.6663C10.7694 13.4103 13.3567 10.8603 13.6654 7.64594ZM6.10669 13.6287V11.728C5.79795 11.672 5.50945 11.5795 5.24119 11.4505C4.76694 11.2225 4.37766 10.9009 4.07336 10.4856C3.773 10.0704 3.58133 9.57775 3.49833 9.00777L4.90921 8.77571C5.01987 9.27647 5.25699 9.67546 5.62058 9.97266C5.98812 10.2658 6.4268 10.4123 6.93661 10.4123C7.42667 10.4123 7.82978 10.2943 8.14594 10.0582C8.46211 9.81795 8.62019 9.51464 8.62019 9.14823C8.62019 8.89174 8.5451 8.68411 8.39492 8.52533C8.24474 8.36248 8.00367 8.22813 7.6717 8.12228L5.61465 7.46274C4.41718 7.08004 3.81845 6.33094 3.81845 5.21542C3.81845 4.6943 3.93899 4.24036 4.18006 3.85359C4.42509 3.46275 4.76892 3.16352 5.21155 2.95588C5.4807 2.82715 5.77908 2.73831 6.10669 2.68936V0.370649C3.0914 0.771354 0.710116 3.1753 0.348711 6.19862H3.02612V7.64594H0.332031C0.629302 10.7417 3.04011 13.2212 6.10669 13.6287Z"\n                      fill="white"\n                    />\n                  </svg>\n                </div>\n                <span class="sih-balance__user-not-enough  sih-modal__text sih-modal__text_md sih-modal__text_red"\n                  >---</span\n                >\n              </div>\n            </div>\n\n            <div class="sih-modal__row gap-5 items-center">\n              <span class="sih-modal__text sih-modal__text_lg sih-modal__text_extra-bold"\n                >').concat(SIHLang.subscribeAds.modal.total,':</span\n              >\n              <div class="sih-modal__sih-coins">\n                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                  <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M13.6654 7.64594H10.5392V6.19862H13.6487C13.2732 3.05747 10.7173 0.584913 7.53535 0.333008V2.71898C7.79502 2.77089 8.03807 2.84986 8.2645 2.95588C8.70318 3.15944 9.06677 3.45257 9.35527 3.83527C9.64772 4.21797 9.8552 4.67802 9.97772 5.21542L8.51348 5.49023C8.45815 5.20117 8.34947 4.94672 8.18744 4.72687C8.0254 4.50702 7.82187 4.33603 7.57685 4.21389C7.33182 4.09176 7.05913 4.02662 6.75877 4.01848C6.47027 4.0144 6.21141 4.06122 5.9822 4.15893C5.75298 4.25257 5.57118 4.38692 5.43681 4.56199C5.30244 4.73298 5.23526 4.92636 5.23526 5.14214C5.23526 5.38234 5.32813 5.58794 5.51388 5.75893C5.70358 5.92992 6.00196 6.07648 6.40902 6.19862L7.94439 6.65663C8.68342 6.87648 9.21497 7.17572 9.53904 7.55434C9.86706 7.9289 10.0311 8.42762 10.0311 9.05052C10.0311 9.59607 9.89868 10.0744 9.63389 10.4856C9.3691 10.8968 8.99761 11.2185 8.51941 11.4505C8.22133 11.5926 7.89331 11.6904 7.53535 11.744V13.6663C10.7694 13.4103 13.3567 10.8603 13.6654 7.64594ZM6.10669 13.6287V11.728C5.79795 11.672 5.50945 11.5795 5.24119 11.4505C4.76694 11.2225 4.37766 10.9009 4.07336 10.4856C3.773 10.0704 3.58133 9.57775 3.49833 9.00777L4.90921 8.77571C5.01987 9.27647 5.25699 9.67546 5.62058 9.97266C5.98812 10.2658 6.4268 10.4123 6.93661 10.4123C7.42667 10.4123 7.82978 10.2943 8.14594 10.0582C8.46211 9.81795 8.62019 9.51464 8.62019 9.14823C8.62019 8.89174 8.5451 8.68411 8.39492 8.52533C8.24474 8.36248 8.00367 8.22813 7.6717 8.12228L5.61465 7.46274C4.41718 7.08004 3.81845 6.33094 3.81845 5.21542C3.81845 4.6943 3.93899 4.24036 4.18006 3.85359C4.42509 3.46275 4.76892 3.16352 5.21155 2.95588C5.4807 2.82715 5.77908 2.73831 6.10669 2.68936V0.370649C3.0914 0.771354 0.710116 3.1753 0.348711 6.19862H3.02612V7.64594H0.332031C0.629302 10.7417 3.04011 13.2212 6.10669 13.6287Z"\n                    fill="white"\n                  />\n                </svg>\n              </div>\n              <span class="sih-balance__plan-price sih-modal__text sih-modal__text_lg sih-modal__text_extra-bold"\n                >---</span\n              >\n            </div>\n          </div>\n\n          <div class="sih-balance__buttons">\n            <button class="sih-balance__button sih-modal__button sih-modal__button_blue px-24 py-16">\n              ').concat(SIHLang.subscribeAds.modal.selectingPlan.refill,"\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  "));n.find(".sih-modal__error").before(t),e.find(".selecting-plan-tab").length||e.append(n)}function renderPlansItems(e){var t=$J(".selecting-plan-tab"),n=t.find(".plans"),a=t.find(".payment__input:checked");n.each((function(t,n){var i=$J(n),r=i.data("payment"),s={},o=e.map((function(e){return e.is_enabled&&e.payment_system===r?e.full_price||e.price:0})).filter((function(e){return e}));s["".concat(r)]=Math.max.apply(Math,selectingPlan_toConsumableArray(o)),e.forEach((function(e){if(e.payment_system===r&&e.is_enabled){var t=e.full_price||e.price,n=getPlanInfoLocalization(e.title),o=n.plan_icon,l=n.plan_name,c=n.plan_period,d=(t/1e3).toLocaleString("ru"),_=((e.per_month?e.per_month:e.price)/1e3).toLocaleString("ru"),u=g_rgCurrencyData[e.price_currency]||g_rgCurrencyData.USD,m=$J('\n          <div\n            class="plans__item '.concat(s["".concat(r)]===t?"active":"",'"\n            data-plan-title="').concat(e.title,'"\n            data-id="').concat(e.id,'"\n            data-total-price="').concat(t,'"\n          >\n            <div class="plans__header">\n              <span class="sih-modal__smile sih-modal__smile_lg">').concat(o,'</span>\n              <span class="sih-modal__text sih-modal__text_sm plans__name">').concat(l,'</span>\n              <span class="sih-modal__text sih-modal__text_lg sih-modal__text_extra-bold -mt-5">').concat(c,'</span>\n              <div class="sih-modal__row -mt-5">\n                <span class="sih-modal__text sih-modal__text_sm sih-modal__text_light-grey "\n                  >').concat(e.per_month&&t!==e.per_month&&u.bSymbolIsPrefix?"".concat(u.strSymbol):"",'</span\n                >\n\n                <span class="sih-modal__text sih-modal__text_sm sih-modal__text_light-grey"\n                  >').concat(e.per_month&&t!==e.per_month?d:"",'</span\n                >\n\n                <span class="sih-modal__text sih-modal__text_sm sih-modal__text_light-grey"\n                  >').concat(e.per_month&&t!==e.per_month&&!u.bSymbolIsPrefix?"".concat(u.strSymbol):"",'</span\n                >\n              </div>\n            </div>\n            <div class="plans__bottom">\n              <span class="sih-modal__text sih-modal__text_md sih-modal__text_bold"\n                >').concat("balance"!==e.payment_system&&u.bSymbolIsPrefix?"".concat(u.strSymbol):"","</span\n              >\n\n              ").concat("balance"===e.payment_system?'<div class="sih-modal__sih-coins mr-5">\n                                    <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                        <path fill-rule="evenodd" clip-rule="evenodd" d="M13.6654 7.64594H10.5392V6.19862H13.6487C13.2732 3.05747 10.7173 0.584913 7.53535 0.333008V2.71898C7.79502 2.77089 8.03807 2.84986 8.2645 2.95588C8.70318 3.15944 9.06677 3.45257 9.35527 3.83527C9.64772 4.21797 9.8552 4.67802 9.97772 5.21542L8.51348 5.49023C8.45815 5.20117 8.34947 4.94672 8.18744 4.72687C8.0254 4.50702 7.82187 4.33603 7.57685 4.21389C7.33182 4.09176 7.05913 4.02662 6.75877 4.01848C6.47027 4.0144 6.21141 4.06122 5.9822 4.15893C5.75298 4.25257 5.57118 4.38692 5.43681 4.56199C5.30244 4.73298 5.23526 4.92636 5.23526 5.14214C5.23526 5.38234 5.32813 5.58794 5.51388 5.75893C5.70358 5.92992 6.00196 6.07648 6.40902 6.19862L7.94439 6.65663C8.68342 6.87648 9.21497 7.17572 9.53904 7.55434C9.86706 7.9289 10.0311 8.42762 10.0311 9.05052C10.0311 9.59607 9.89868 10.0744 9.63389 10.4856C9.3691 10.8968 8.99761 11.2185 8.51941 11.4505C8.22133 11.5926 7.89331 11.6904 7.53535 11.744V13.6663C10.7694 13.4103 13.3567 10.8603 13.6654 7.64594ZM6.10669 13.6287V11.728C5.79795 11.672 5.50945 11.5795 5.24119 11.4505C4.76694 11.2225 4.37766 10.9009 4.07336 10.4856C3.773 10.0704 3.58133 9.57775 3.49833 9.00777L4.90921 8.77571C5.01987 9.27647 5.25699 9.67546 5.62058 9.97266C5.98812 10.2658 6.4268 10.4123 6.93661 10.4123C7.42667 10.4123 7.82978 10.2943 8.14594 10.0582C8.46211 9.81795 8.62019 9.51464 8.62019 9.14823C8.62019 8.89174 8.5451 8.68411 8.39492 8.52533C8.24474 8.36248 8.00367 8.22813 7.6717 8.12228L5.61465 7.46274C4.41718 7.08004 3.81845 6.33094 3.81845 5.21542C3.81845 4.6943 3.93899 4.24036 4.18006 3.85359C4.42509 3.46275 4.76892 3.16352 5.21155 2.95588C5.4807 2.82715 5.77908 2.73831 6.10669 2.68936V0.370649C3.0914 0.771354 0.710116 3.1753 0.348711 6.19862H3.02612V7.64594H0.332031C0.629302 10.7417 3.04011 13.2212 6.10669 13.6287Z" fill="white"/>\n                                    </svg>\n                                  </div>':"",'\n\n              <span class="plans__actual-price sih-modal__text sih-modal__text_md sih-modal__text_bold"\n                >').concat(_,'</span\n              >\n\n              <span class="sih-modal__text sih-modal__text_md sih-modal__text_bold"\n                >').concat("balance"===e.payment_system||u.bSymbolIsPrefix?"":"".concat(u.strSymbol),'</span\n              >\n\n              <span class="sih-modal__text sih-modal__text_md sih-modal__text_bold">/</span>\n\n              <span class="sih-modal__text sih-modal__text_md sih-modal__text_bold"\n                >').concat(SIHLang.subscribeAds.modal.month,"</span\n              >\n            </div>\n          </div>\n        "));i.find(m).length||(i.append(m),a.length&&a.attr("id")&&i.attr("data-id")===a.attr("id")&&i.css("display","flex").show())}}))}))}function setUserAndPlanCost(){sih_app_global_service.getLoginSihAppUser().then((function(e){if(e&&e.success&&!e.tfaNeed&&e.user){var t=e.user.balance,n=$J(".selecting-plan-tab"),a=n.find(".plans-balance"),i=n.find(".sih-balance"),r=a.find(".plans__item.active");if(r.length){var s=r.attr("data-total-price");if(!s)return;var o=i.find(".sih-balance__user"),l=i.find(".sih-balance__plan-price"),c=i.find(".sih-balance__not-enough"),d=c.find(".sih-balance__user-not-enough"),_=i.find(".sih-balance__button");o.text(t/1e3),l.text(s/1e3);var u=t-s;if(u<0){var m=Math.abs(u/1e3);c.css("display","flex").show(),d.text(m),_.text(SIHLang.subscribeAds.modal.selectingPlan.refill),$J("#sih-tos-selecting-plan").is(":checked")||_.attr("disabled",!0),subscribeFromBalanceAction("refill",m)}else $J("#sih-tos-selecting-plan").is(":checked")||_.attr("disabled",!0),c.hide(),_.text(SIHLang.subscribeAds.modal.selectingPlan.buy_sub),subscribeFromBalanceAction("buy")}}}))}function sortPlansItemsByPrice(){$J(".selecting-plan-tab").find(".plans").each((function(e,t){var n=$J(t),a=n.find(".plans__item");a.sort((function(e,t){return $J(e).data("total-price")-$J(t).data("total-price")})),a.detach().appendTo(n)}))}function getPlanInfoLocalization(e){var t,n,a;switch(e.toLowerCase()){case"for one year":t="&#128526;",n="".concat(SIHLang.subscribeAds.modal.plan_for_one_year_name),a="".concat(SIHLang.subscribeAds.modal.plan_for_one_year_period);break;case"every 6 months":t="&#128527;",n="".concat(SIHLang.subscribeAds.modal.plan_every_6_month_name),a="".concat(SIHLang.subscribeAds.modal.plan_every_6_month_period);break;case"every 3 month":t="&#128521;",n="".concat(SIHLang.subscribeAds.modal.plan_every_3_month_name),a="".concat(SIHLang.subscribeAds.modal.plan_every_3_month_period);break;case"every month":t="&#128522;",n="".concat(SIHLang.subscribeAds.modal.plan_every_month_name),a="".concat(SIHLang.subscribeAds.modal.plan_every_month_period);break;default:t=null,n=null,a=null}return{plan_icon:t,plan_name:n,plan_period:a}}function selectingPlan_modalListeners(){buttonsActions(),changePaymentMethod()}function buttonsActions(){selectPlanAction(),checkTOSSubscribe(),subscribeAction(),modalPaginationBack()}function selectPlanAction(){$J(".sih-modal").find(".plans__item").each((function(e,t){var n=$J(t);n.off("click").click((function(){$J(this).parent().find(".active").removeClass("active"),n.addClass("active"),setUserAndPlanCost()}))}))}function checkTOSSubscribe(){$J("#sih-tos-selecting-plan").off("change").change((function(){$J(this).is(":checked")?($J(".sih-modal__button-subscribe").removeAttr("disabled"),$J(".sih-balance__button").removeAttr("disabled")):($J(".sih-modal__button-subscribe").attr("disabled",!0),$J(".sih-balance__button").attr("disabled",!0))}))}function subscribeFromBalanceAction(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"refill",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=$J(".selecting-plan-tab"),a=n.find(".plans-balance"),i=n.find(".sih-balance"),r=a.find(".plans__item.active"),s=i.find(".sih-balance__button"),o=n.find(".sih-modal__error"),l=r.attr("data-id");"buy"!==e?s.off("click").click((function(){sih_app_global_service.getSihAppToken().then((function(e){clearTimeout(selectingPlan_debounce),selectingPlan_debounce=setTimeout((function(){t<1&&(t=1),window.open("https://sih.app/pay?amount=".concat(t,"#payToken=").concat(e),"_blank")}),300)}))})):s.off("click").click((function(){var e=this;$J(this).addClass("animated-background-btn"),o.hide(),chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_LINK_TO_PAYMENT_SUBSCRIBE",data:{id:l}},(function(t){if(t.success)$J(e).removeClass("animated-background-btn"),sih_app_global_service.getUserSihApp().then((function(e){e.success&&sih_app_global_service.getSubscribeAds().then((function(e){e.success?sih_app_global_service.getLoginSihAppUser().then((function(e){RenderActivePlanInfo(e.subscribes),n.hide(),$J(".sih-modal.active-plan-tab").show()})):(n.hide(),$J(".sih-modal.refill-plug-info").show())}))}));else{var a=o.find(".sih-modal__error_message");sih_app_global_service.errorHandler($J(e),o,a)}}))}))}function subscribeAction(){var e=$J(".selecting-plan-tab"),t=e.find(".sih-modal__button-subscribe"),n=e.find("#sih-tos-selecting-plan"),a=e.find(".sih-modal__error");t.each((function(t,i){$J(i).off("click").click($J.debounce(300,(function(){var t=this;$J(this).addClass("animated-background-btn");var i=a.find(".sih-modal__error_message"),r=e.find(".plans:visible").find(".plans__item.active"),s=r.find(".plans__name").text(),o=r.attr("data-id"),l={planName:s,paymentId:o};o?n.is(":checked")?chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_LINK_TO_PAYMENT_SUBSCRIBE",data:{id:o}},(function(e){e.success?(a.hide(),$J(t).removeClass("animated-background-btn"),OpenEmailTabInModal(l,e.email)):e.hasOwnProperty("authorization")?sih_app_global_service.errorHandler($J(t),a,i):e.hasOwnProperty("error")?sih_app_global_service.errorHandler($J(t),a,i,e.error):($J(t).removeClass("animated-background-btn"),OpenEmailTabInModal(l))})):sih_app_global_service.errorHandler($J(this),a,i,"Please, select checkbox subscription TOS"):sih_app_global_service.errorHandler($J(this),a,i,"Please, enter plan")})))}))}function changePaymentMethod(){var e=$J(".selecting-plan-tab"),t=e.find(".plans"),n=e.find(".payment-info__message"),a=e.find(".sih-balance"),i=e.find(".sih-modal__buttons");e.find(".payment__input").each((function(e,r){$J(r).change((function(){var e=$J(this);t.each((function(t,r){var s=$J(r);s.hide(),s.attr("data-id")===e.attr("id")&&(s.css("display","flex").show(),"payment-balance"===s.attr("data-id")?(i.addClass("hidden"),n.css("display","flex").show(),a.css("display","flex").show()):(n.hide(),a.hide(),i.removeClass("hidden")))}))}))}))}function modalPaginationBack(){var e=$J(".sih-subscribe-ads");e.find(".sih-modal__back-info").click((function(){$J(".selecting-plan-tab").hide(),$J(".subscription-info-tab").show(),e.find(".sih-modal__error").children().remove()}))}function LoadEnterPasswordModal(){enterPassword_loadHtml(),ModalPasswordListenersAction()}function enterPassword_loadHtml(){var e=$J("body"),t='\n    <div id="sih-enter-password">\n      <div class="sih-enter-password__fade"></div>\n      <div class="sih-modal sih-global">\n        <div class="sih-modal__close"></div>\n        <div class="sih-modal__inner sih-modal__column items-start">\n          <div class="sih-modal__text sih-modal__text_xl sih-modal__text_white">\n            '.concat(SIHLang.subscribeAds.modal.enterPassword.title,'\n          </div>\n          <label class="sih-modal__column w-248" for="sih-password-input">\n            <input\n              type="password"\n              autocomplete="new-password"\n              class="sih-modal__input"\n              id="sih-password-input"\n              placeholder="').concat(SIHLang.subscribeAds.modal.enterPassword.enter_pwd,'"\n            />\n          </label>\n          <a\n            href="https://sih.app/"\n            target="_blank"\n            class="sih-modal__text_md sih-modal__text_blue text-decoration-underline"\n            >').concat(SIHLang.subscribeAds.modal.enterPassword.forgot_pwd,'</a\n          >\n          <label class="sih-modal__trading-rules sih-modal__row items-center gap-10 mt-16" for="trading-rules">\n            <input type="checkbox" name="trading-rules" id="trading-rules" class="hidden" />\n            <label class="fake-checkbox" for="trading-rules"></label>\n            <div class="sih-modal__text sih-modal__text_md">\n              ').concat(SIHLang.subscribeAds.modal.enterPassword.trade_rule_1,'\n              <a href="https://sih.app/" target="_blank" class="sih-modal__text_blue text-decoration-underline"\n                >').concat(SIHLang.subscribeAds.modal.enterPassword.trade_rule_2,'</a\n              >\n            </div>\n          </label>\n          <div class="sih-modal__error mt-20"></div>\n          <div class="sih-modal__buttons mt-16">\n            <button\n              id="sih-enter-password-btn"\n              class="sih-modal__button sih-modal__button_blue px-24 py-16"\n              disabled="disabled"\n            >\n              ').concat(SIHLang.subscribeAds.modal.enterPassword.continue,"\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  ");e.find("#sih-enter-password").length||e.append(t)}function ModalPasswordListenersAction(){hidePasswordModal(),passwordInputActionListener(),sendPasswordToBackground()}function hidePasswordModal(){$J(document).keydown((function(e){27===e.keyCode&&(e.stopPropagation(),$J("#sih-enter-password").hide().remove(),LoadEnterPasswordModal(),$J("body").css("overflow","auto"))})),$J("#sih-enter-password").find(".sih-modal__close").off("click").click((function(){$J("#sih-enter-password").hide().remove(),LoadEnterPasswordModal(),$J("body").css("overflow","auto")}))}function passwordInputActionListener(){var e=$J("body").find("#sih-enter-password"),t=e.find("#sih-password-input"),n=e.find("#trading-rules"),a=e.find("#sih-enter-password-btn");t.off().keyup((function(){var e=$J(this);n.prop("checked")&&e.val().length>0?a.prop("disabled",!1):a.prop("disabled",!0)})),n.off("click").click((function(){$J(this).prop("checked")&&t.val().length>0?a.prop("disabled",!1):a.prop("disabled",!0)}))}function sendPasswordToBackground(){var e=$J("#sih-enter-password"),t=e.find(".sih-modal__error");e.find("#sih-enter-password-btn").off("click").click((function(){var n=$J(this);n.addClass("animated-background-btn");var a=t.find(".sih-modal__error_message"),i=e.find("#sih-password-input").val();""!==i&&i?chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_ENTER_PASSWORD_SIH_APP",data:{password:i}},(function(i){if(i.success){var r=e.data("show-modal"),s=$J(".sih-modal.".concat(r,"-tab"));switch(e.hide(),r){case"subscription-info":sih_app_global_service.getSubscribeAds().then((function(e){e.success?sih_app_global_service.getLoginSihAppUser().then((function(e){RenderActivePlanInfo(e.subscribes),$J(".sih-subscribe-ads").show(),$J(".sih-subscribe-ads").find(".sih-modal").hide(),$J(".sih-modal.active-plan-tab").show()})):sih_app_global_service.getSubscribeAdsPlans().then((function(e){e&&e.length&&RenderPlans(e),$J(".sih-subscribe-ads").show()}))}));break;case"orders":sih_app_global_service.getUserOrdersHistory(!1).then((function(e){e.success&&(ChangeOrdersCountHeaderMenu(),RenderOrdersActiveItems(),RenderOrdersHistoryItems()),$J("#sih-modal__buy-orders").show()}));break;case"ordering":ChangeItemsStatus(!0,"ordering"),$J("#sih-modal__buy-orders").show();break;case"notification-panel":$J("#sih-header-notifications").trigger("click")}s.show()}else sih_app_global_service.errorHandler(n,t,a,i.error)})):sih_app_global_service.errorHandler(n,t,a)}))}function RenderRefillPlugInfo(){refillPlugInfo_loadHtml(),refillPlugInfo_buttonsActions()}function refillPlugInfo_loadHtml(){var e=$J(".sih-pagecontent").find(".sih-subscribe-ads");e.find(".refill-plug-info").length||e.append('\n    <div class="sih-modal sih-global refill-plug-info">\n      <div class="sih-modal__close"></div>\n      <div class="sih-modal__inner">\n        <div class="sih-modal__column items-center gap-20">\n          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path\n              fill-rule="evenodd"\n              clip-rule="evenodd"\n              d="M16 0C7.16344 0 0 7.16344 0 16C0 24.8366 7.16344 32 16 32C24.8366 32 32 24.8366 32 16C32 7.16344 24.8366 0 16 0ZM12.6742 24.728L4.3625 16.3525L6.7064 13.9906L12.6742 19.9874L25.2913 7.27344L27.6352 9.65208L12.6742 24.728Z"\n              fill="#00F900"\n            />\n          </svg>\n          <h2 class="sih-modal__title text-center">Успешно оплачено</h2>\n        </div>\n\n        <span class="sih-modal__text sih-modal__text_md sih-modal__text_light-grey text-center"\n          >Активация подписки SIH Black может занимать до 15 минут</span\n        >\n\n        <div class="sih-modal__buttons mt-70 justify-center">\n          <button class="sih-modal__button sih-modal__button_blue px-24 py-16 text-uppercase refill-plug-info__reload">\n            перезагрузить страницу\n          </button>\n        </div>\n      </div>\n    </div>\n  ')}function refillPlugInfo_buttonsActions(){refillReloadBtn()}function refillReloadBtn(){$J(".refill-plug-info").find(".refill-plug-info__reload").off("click").click((function(){$J(this).addClass("animated-background-btn"),window.location.reload()}))}function loadSubscriptionInfoTab(){subscriptionInfo_loadHtml(),subscriptionInfo_modalListeners(),loadTooltips()}function subscriptionInfo_loadHtml(){var e=$J(".sih-pagecontent").find(".sih-subscribe-ads"),t='\n    <div class="sih-modal sih-global subscription-info-tab">\n      <div class="sih-modal__close"></div>\n      <div class="sih-modal__inner">\n        <div class="sih-modal__header sih-modal__column gap-20">\n          <h2 class="sih-modal__title">'.concat(SIHLang.subscribeAds.modal.subscriptionInfo.title,'</h2>\n          <span class="subscription-info-tab__info-text sih-modal__text sih-modal__text_md"\n            >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.subtitle,'\n          </span>\n          <div class="sih-modal__row mt-5">\n            <button class="go-to-plan go-to-plan_top sih-modal__button sih-modal__button_blue py-16 px-24">\n              ').concat(SIHLang.subscribeAds.modal.subscriptionInfo.button_1,'\n            </button>\n          </div>\n        </div>\n        <div class="sih-modal__bottom sih-modal__column mt-52">\n          <div class="sih-modal__bottom_header">\n            <div class="sih-modal__column-grid grid-columns-4-1">\n              <span class="sih-modal__text sih-modal__text_lg sih-modal__text_bold"\n                >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.in_sih,'\n              </span>\n\n              <div class="sih-modal__row justify-between gap-36">\n                <span class="sih-modal__text sih-modal__text_lg sih-modal__text_bold w-100per text-center break-words"\n                  >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.without_sih_black,'\n                </span>\n                <span class="sih-modal__text sih-modal__text_lg sih-modal__text_bold w-100per text-center break-words"\n                  >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.with_sih_black,'\n                </span>\n              </div>\n            </div>\n            <div class="splitter-1 bg-grey mt-20 mb-20"></div>\n          </div>\n          <div class="sih-modal__content sih-modal__column gap-45">\n            <div class="sih-modal__column-grid grid-columns-4-1">\n              <div class="sih-modal__row items-center gap-5">\n                <span class="sih-modal__text sih-modal__text_md"\n                  >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_option_1,'\n                </span>\n                <div\n                  class="subscription-info-tab__tooltip"\n                  title="').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_option_1_tooltip,'"\n                ></div>\n              </div>\n              <div class="sih-modal__row justify-between gap-36">\n                <span class="cross_red"></span>\n                <span class="checkbox_green"></span>\n              </div>\n            </div>\n            <div class="sih-modal__column-grid grid-columns-4-1">\n              <div class="sih-modal__row items-center gap-5">\n                <span class="sih-modal__text sih-modal__text_md"\n                  >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_option_2,'\n                </span>\n                <div\n                  class="subscription-info-tab__tooltip"\n                  title="').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_option_2_tooltip,'"\n                ></div>\n              </div>\n              <div class="sih-modal__row justify-between gap-36">\n                <span class="cross_red"></span>\n                <span class="checkbox_green"></span>\n              </div>\n            </div>\n\n            <div class="sih-modal__column-grid grid-columns-4-1">\n              <div class="sih-modal__row items-center gap-5">\n                <span class="sih-modal__text sih-modal__text_md"\n                  >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_option_3,'\n                </span>\n                <div\n                  class="subscription-info-tab__tooltip"\n                  title="').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_option_3_tooltip,'"\n                ></div>\n              </div>\n              <div class="sih-modal__row justify-between gap-36">\n                <span class="cross_red"></span>\n                <span class="checkbox_green"></span>\n              </div>\n            </div>\n\n            <div class="sih-modal__column-grid grid-columns-4-1">\n              <div class="sih-modal__row items-center gap-5">\n                <span class="sih-modal__text sih-modal__text_md"\n                  >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_option_4,'\n                </span>\n                <div\n                  class="subscription-info-tab__tooltip"\n                  title="').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_option_4_tooltip,'"\n                ></div>\n              </div>\n              <div class="sih-modal__row justify-between gap-36">\n                <span class="cross_red"></span>\n                <span class="checkbox_green"></span>\n              </div>\n            </div>\n\n            <div class="sih-modal__column-grid grid-columns-4-1">\n              <div class="sih-modal__row items-center gap-5">\n                <span class="sih-modal__text sih-modal__text_md"\n                  >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_option_5,'\n                </span>\n                <div\n                  class="subscription-info-tab__tooltip"\n                  title="').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_option_5_tooltip,'"\n                ></div>\n              </div>\n              <div class="sih-modal__row justify-between gap-36">\n                <span class="cross_red"></span>\n                <span class="checkbox_green"></span>\n              </div>\n            </div>\n\n            <div class="splitter-1 bg-grey -mt-25"></div>\n          </div>\n\n          <div class="sih-modal__bottom_header mt-62">\n            <div class="sih-modal__column-grid grid-columns-4-1">\n              <span class="sih-modal__text sih-modal__text_lg sih-modal__text_bold"\n                >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.in_sih_app,'\n              </span>\n\n              <div class="sih-modal__row justify-between gap-36">\n                <span class="sih-modal__text sih-modal__text_lg sih-modal__text_bold w-100per text-center break-words"\n                  >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.without_sih_black,'\n                </span>\n                <span class="sih-modal__text sih-modal__text_lg sih-modal__text_bold w-100per text-center break-words"\n                  >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.with_sih_black,'\n                </span>\n              </div>\n            </div>\n            <div class="splitter-1 bg-grey mt-20 mb-20"></div>\n          </div>\n          <div class="sih-modal__content sih-modal__column gap-45">\n            <div class="sih-modal__column-grid grid-columns-4-1">\n              <div class="sih-modal__row items-center gap-5">\n                <span class="sih-modal__text sih-modal__text_md"\n                  >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_app_option_1,'\n                </span>\n                <div\n                  class="subscription-info-tab__tooltip"\n                  title="').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_app_option_1_tooltip,'"\n                ></div>\n              </div>\n              <div class="sih-modal__row justify-between gap-36">\n                <span class="w-100per text-center sih-modal__text sih-modal__text_md sih-modal__text_red"\n                  >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_app_option_1_without,'</span\n                >\n                <span class="w-100per text-center sih-modal__text sih-modal__text_md sih-modal__text_green"\n                  >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_app_option_1_with,'</span\n                >\n              </div>\n            </div>\n            <div class="sih-modal__column-grid grid-columns-4-1">\n              <div class="sih-modal__row items-center gap-5">\n                <span class="sih-modal__text sih-modal__text_md"\n                  >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_app_option_2,'\n                </span>\n                <div\n                  class="subscription-info-tab__tooltip"\n                  title="').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_app_option_2_tooltip,'"\n                ></div>\n              </div>\n              <div class="sih-modal__row justify-between gap-36">\n                <span class="w-100per text-center sih-modal__text sih-modal__text_md sih-modal__text_red">9</span>\n                <span class="w-100per text-center sih-modal__text sih-modal__text_md sih-modal__text_green">24</span>\n              </div>\n            </div>\n            <div class="sih-modal__column-grid grid-columns-4-1">\n              <div class="sih-modal__column items-start">\n                <div class="sih-modal__row items-center gap-5">\n                  <span class="sih-modal__text sih-modal__text_md"\n                    >').concat(SIHLang.subscribeAds.modal.subscriptionInfo.sih_app_option_3,'\n                  </span>\n                </div>\n              </div>\n\n              <div class="sih-modal__row justify-between gap-36">\n                <span class="cross_red"></span>\n                <span class="checkbox_green"></span>\n              </div>\n            </div>\n\n            <div class="splitter-1 bg-grey -mt-25"></div>\n          </div>\n        </div>\n        <button class="go-to-plan go-to-plan_bottom sih-modal__button sih-modal__button_blue px-24 py-16">\n          ').concat(SIHLang.subscribeAds.modal.subscriptionInfo.button_1,'\n        </button>\n        <a\n          href="https://steamcommunity.com/groups/SteamInventoryHelper/discussions/0/3832042807499341165/"\n          target="_blank"\n          class="sih-modal__text_blue absolute right-50 -bottom-20 hover-opacity-8"\n          >').concat(SIHLang.subscribeAds.modal.questions,"</a\n        >\n      </div>\n    </div>\n  ");e.find(".subscription-info-tab").length||e.append(t)}function subscriptionInfo_modalListeners(){openSelectPlanTabAction(),onScrollAction()}function openSelectPlanTabAction(){var e=$J(".sih-modal.subscription-info-tab"),t=$J(".sih-modal.selecting-plan-tab");e.find(".go-to-plan").click((function(){e.hide(),t.show()}))}function onScrollAction(){var e=$J(".sih-modal.subscription-info-tab").find(".sih-modal__inner");e.scroll((function(){var t=e.find(".go-to-plan_top"),n=e.find(".go-to-plan_bottom"),a=t.position().top;a<25&&0!==a&&0!==t.css("opacity")?(t.css("opacity",0),n.css("opacity",1)):(t.css("opacity",1),n.css("opacity",0))}))}function loadTooltips(){var e=$J(".sih-modal.subscription-info-tab"),t=$J(".pagecontent").css("zoom");$J(".sih-subscribe-ads").css("zoom",2-Number(t)),e.find(".subscription-info-tab__tooltip").each((function(e,t){$J(t).tooltip({classes:{"ui-tooltip":"subscription__tooltip"}})}))}function loadSubscribeAds(){renderSubscribeModal(),loadSelectingPlanTab(),LoadEnterPasswordModal(),loadSubscriptionInfoTab(),loadEnterEmailTab(),loadActivePlanTab(),RenderRefillPlugInfo(),common_modalListeners()}function ShowModalSubscribeAds(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];SUBSCRIBE_BUTTON_DATA_NAME=e&&e.attr("data-name")?e.attr("data-name"):null,$J(".sih-subscribe-ads").show(),t?sih_app_global_service.getUserSihApp().then((function(e){loginInSihApp()})):loginInSihApp()}function SetModalSubscribeToDefaultState(){$J(".sih-subscribe-ads").hide().remove()}function renderSubscribeModal(){$J("body").find("#mainContent").length>0?$J("#mainContent").addClass("sih-pagecontent"):$J("#mainContents").addClass("sih-pagecontent"),$J(".inventory_page").addClass("sih-inventory_page");var e=$J(".sih-pagecontent");e.find(".sih-subscribe-ads").length||e.append('\n    <div class="sih-modal__fade sih-subscribe-ads">\n      <div class="sih-modal sih-global loader-tab">\n        <div class="sih-modal__close"></div>\n        <div class="sih-modal__inner sih-loader">\n          <div class="sih-logo-loader"></div>\n        </div>\n      </div>\n    </div>\n  ')}function common_modalListeners(){hideModalSubscribeAds()}function loginInSihApp(){sih_app_global_service.getLoginSihAppUser().then((function(e){e.success?renderTabAfterCheckedUser(e):(window.sih_app_account=!0,e.hasOwnProperty("auth")?chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_LOGIN_SIH_APP"},(function(){renderTabAfterCheckedUser()})):renderTabAfterCheckedUser())})),new InventoryPageEventRegister({location:location.href,SIHID}).register({target:"sih-adept-button",targetType:"button",action:"click"})}function renderTabAfterCheckedUser(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;sih_app_global_service.getSubscribeAds().then((function(t){var n;t.success?showActivePlanTab():e?e.tfaNeed?($J(".sih-subscribe-ads").hide(),$J("#sih-enter-password").attr("data-show-modal","subscription-info").show()):showSubscriptionInfoTab():n=setInterval((function(){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SIH_APP_USER_INFO"},(function(e){e.success&&!e.authorization&&(clearInterval(n),e.tfaNeed?($J(".sih-subscribe-ads").hide(),$J("#sih-enter-password").attr("data-show-modal","subscription-info").show()):sih_app_global_service.getSubscribeAds().then((function(e){e.success?showActivePlanTab():showSubscriptionInfoTab()})))}))}),500)}))}function showActivePlanTab(e){$J(".sih-modal.loader-tab").hide(),e?RenderActivePlanInfo(e.subscribes):chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_SIH_APP_USER_INFO"},(function(e){RenderActivePlanInfo(e.subscribes)})),$J(".sih-modal.active-plan-tab").show()}function showSubscriptionInfoTab(){sih_app_global_service.getSubscribeAdsPlans().then((function(e){e&&e.length&&RenderPlans(e)})),$J(".sih-modal.loader-tab").hide(),SUBSCRIBE_BUTTON_DATA_NAME?$J(".sih-modal.".concat(SUBSCRIBE_BUTTON_DATA_NAME)).show():$J(".sih-modal.subscription-info-tab").show()}function hideModalSubscribeAds(){$J(document).off("keydown").keydown((function(e){27===e.keyCode&&(e.stopPropagation(),SetModalSubscribeToDefaultState(),CloseRefillSIHBalance())})),$J(".sih-subscribe-ads").find(".sih-modal__close").each((function(e,t){$J(t).off("click").click((function(){SetModalSubscribeToDefaultState()}))})),$J(".sih-subscribe-ads").find(".sih-modal__button-exit").click((function(){SetModalSubscribeToDefaultState()}))}function loadEnterEmailTab(){enterEmail_loadHtml(),enterEmail_modalListeners()}function OpenEmailTabInModal(e){var t=e.planName,n=e.paymentId,a=e.amount,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=$J(".sih-subscribe-ads"),s=$J(".selecting-plan-tab"),o=$J(".enter-email-tab"),l=o.find("#sih-email");s.hide(),o.show();var c=r.find(".sih-modal__save-email"),d=r.find(".sih-modal__cancel-email"),_=r.find(".sih-modal__edit-email"),u=o.find(".sih-modal__button-send-email");c.hide(),d.hide(),_.hide(),o.find(".sih-modal__title").text("".concat(SIHLang.subscribeAds.modal.second_title," ").concat(t?", ".concat(t):"")),i?l.val()!==i&&""!==l.val()||(l.val("".concat(i)),o.find(".sih-modal__buttons_email").css("display","flex"),l.focus()):l.focus(),s.find(".payment__input").each((function(e,t){var n=$J(t);if(n.prop("checked"))switch(n.data("name").toLowerCase()){case"stripe":u.text(SIHLang.subscribeAds.modal.complete_payment_stripe);break;case"gamemoney":u.text(SIHLang.subscribeAds.modal.complete_payment_gamemoney);break;default:u.text(SIHLang.subscribeAds.modal.complete_payment)}})),sendEmailAction(n,a)}function enterEmail_loadHtml(){var e=$J(".sih-pagecontent").find(".sih-subscribe-ads"),t='\n    <div class="sih-modal sih-global enter-email-tab">\n      <div class="sih-modal__row gap-10 sih-modal__back sih-modal__back-selecting">\n        <span class="sih-modal__back_icon"></span>\n        <span class="sih-modal__text sih-modal__text_md">'.concat(SIHLang.subscribeAds.modal.back,'</span>\n      </div>\n      <div class="sih-modal__close"></div>\n      <div class="sih-modal__inner mt-20">\n        <h2 class="sih-modal__title"></h2>\n        <p class="sih-modal__text sih-modal__text_md">').concat(SIHLang.subscribeAds.modal.text_3,'</p>\n        <div class="sih-modal__row">\n          <label class="sih-modal__column w-328 gap-12" for="sih-email">\n            <span class="sih-modal__text sih-modal__text_lg sih-modal__text_extra-bold"\n              >').concat(SIHLang.subscribeAds.modal.text_4,'</span\n            >\n            <input type="text" class="sih-modal__input" id="sih-email" placeholder="example@mail.com" />\n          </label>\n          <div class="sih-modal__buttons sih-modal__buttons_email">\n            <button class="sih-modal__button sih-modal__edit-email">').concat(SIHLang.subscribeAds.modal.edit,'</button>\n            <button class="sih-modal__button sih-modal__button_blue sih-modal__save-email">\n              ').concat(SIHLang.subscribeAds.modal.save,'\n            </button>\n            <button class="sih-modal__button sih-modal__cancel-email">').concat(SIHLang.subscribeAds.modal.cancel,'</button>\n          </div>\n        </div>\n        <div class="sih-modal__error"></div>\n        <div class="sih-modal__buttons">\n          <button class="sih-modal__button sih-modal__button_blue px-24 py-16 sih-modal__button-send-email">\n            ').concat(SIHLang.subscribeAds.modal.complete_payment,"\n          </button>\n        </div>\n      </div>\n    </div>\n  ");e.find(".enter-email-tab").length||e.append(t)}function enterEmail_modalListeners(){enterEmail_buttonsActions()}function enterEmail_buttonsActions(){enterEmail_modalPaginationBack(),sendEmailOnEnterAction(),editEmailAction(),cancelEmailAction(),saveEmailAction()}function sendEmailAction(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=$J(".sih-subscribe-ads"),a=n.find(".sih-modal__error");n.find(".sih-modal__button-send-email").off("click").click($J.debounce(300,(function(){var i=this;$J(this).addClass("animated-background-btn");var r=a.find(".sih-modal__error_message"),s=n.find("#sih-email").val();validateEmail(s)?chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SET_EMAIL_SIH_APP",data:{email:s}},(function(n){if(n.success){if(!e)return void sih_app_global_service.errorHandler($J(i),a,r,"Please, select method");t?sih_app_global_service.getLinkForInvoice(t>1?t:1,e).then((function(e){e&&e.success&&e.url?($J(i).removeClass("animated-background-btn"),SetModalSubscribeToDefaultState(),window.open(e.url,"_blank")):e.hasOwnProperty("error")?sih_app_global_service.errorHandler($J(i),a,r,e.error):sih_app_global_service.errorHandler($J(i),a,r)})):chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_LINK_TO_PAYMENT_SUBSCRIBE",data:{id:e}},(function(e){e.success?($J(i).removeClass("animated-background-btn"),SetModalSubscribeToDefaultState(),e.url&&window.open(e.url,"_blank")):e.hasOwnProperty("error")?sih_app_global_service.errorHandler($J(i),a,r,e.error):sih_app_global_service.errorHandler($J(i),a,r)}))}else n.hasOwnProperty("authorization")?sih_app_global_service.errorHandler($J(i),a,r):sih_app_global_service.errorHandler($J(i),a,r,n.error)})):sih_app_global_service.errorHandler($J(this),a,r,"Invalid email")})))}function editEmailAction(){var e=$J(".sih-subscribe-ads"),t=e.find(".sih-modal__edit-email"),n=e.find(".sih-modal__save-email"),a=e.find(".sih-modal__cancel-email"),i=e.find(".sih-modal__button-send-email"),r=e.find("#sih-email");t.click((function(){r.attr("disabled",!1),r.focus(),t.hide(),n.show(),a.show(),i.attr("disabled",!0)}))}function cancelEmailAction(){var e=$J(".sih-subscribe-ads"),t=e.find(".sih-modal__cancel-email"),n=e.find(".sih-modal__edit-email"),a=e.find(".sih-modal__save-email"),i=e.find(".sih-modal__button-send-email"),r=e.find("#sih-email");t.click((function(){r.attr("disabled",!0),r.focus(),t.hide(),a.hide(),n.show(),i.attr("disabled",!1)}))}function saveEmailAction(){var e=$J(".sih-subscribe-ads"),t=e.find(".sih-modal__save-email"),n=e.find(".sih-modal__cancel-email"),a=e.find(".sih-modal__edit-email"),i=e.find(".sih-modal__button-send-email"),r=e.find("#sih-email"),s=e.find(".sih-modal__error");t.click((function(){var e=this,o=s.find(".sih-modal__error_message");chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_DELETE_EMAIL_SIH_APP"},(function(l){l.hasOwnProperty("error")?sih_app_global_service.errorHandler($J(e),s,o,l.error):(r.attr("disabled",!0),r.focus(),n.hide(),t.hide(),a.show(),i.attr("disabled",!1))}))}))}function sendEmailOnEnterAction(){var e=$J(".sih-subscribe-ads").find(".sih-modal__button-send-email");1===$J(".selecting-plan-tab:visible").length&&$J(document).keydown($J.debounce(300,(function(t){13===t.keyCode&&(t.stopPropagation(),e.trigger("click"))})))}function enterEmail_modalPaginationBack(){var e=$J(".sih-subscribe-ads");e.find(".sih-modal__back-selecting").click((function(){$J(".enter-email-tab").hide(),$J(".selecting-plan-tab").show(),e.find(".sih-modal__error").children().remove()}))}function validateEmail(e){return e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}function paymentMethods_slicedToArray(e,t){return paymentMethods_arrayWithHoles(e)||paymentMethods_iterableToArrayLimit(e,t)||paymentMethods_unsupportedIterableToArray(e,t)||paymentMethods_nonIterableRest()}function paymentMethods_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function paymentMethods_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return paymentMethods_arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?paymentMethods_arrayLikeToArray(e,t):void 0}}function paymentMethods_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function paymentMethods_iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,r,s,o=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=r.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function paymentMethods_arrayWithHoles(e){if(Array.isArray(e))return e}var GROUP_METHODS={skins:["skinsback"],bank:["card","sberbank"],crypt:["bitcoin","ethereum","tether","tron","polygon","monero","ton","litecoin","dogecoin","dash","binance","chaingpt"],wallet:["yandex"]};function LoadPaymentMethods(){paymentMethods_loadHtml(),renderActiveMethodsAction()}function UpdatePaymentMethods(){var e=$J(".refill-sih-balance").find(".payment-methods").find(".payment-methods__item");sih_app_global_service.getSubscribeAdsMethods().then((function(t){e.each((function(e,n){var a=$J(n),i=a.find(".payment-methods__item_text"),r=getFilterParams(a.data("method")),s=getFilterMethods(t,r);if(s.length){a.removeClass("hidden");var o=s.map((function(e){return e.title})).filter((function(e){return e}));if(!o.length)return;if(o.length<=2){var l=o.join(",");i.text(l)}else{var c=o.slice(0,2).join(","),d=o.slice(2,o.length),_="".concat(c," ").concat(SIHLang.refillBalance.and," ").concat(d.length," ").concat(SIHLang.refillBalance.more_currencies);i.text(_)}}else a.addClass("hidden")}))}))}function paymentMethods_loadHtml(){var e=$J(".refill-sih-balance").find(".refill-sih-balance__payment-methods"),t='\n    <div class="payment-methods">\n      <div class="payment-methods__item hidden" data-method="bank">\n        <div class="sih-modal__row justify-between items-center">\n          <div class="sih-modal__row items-center gap-20">\n            <div class="payment-methods__icon">\n              <svg width="20" height="16" viewBox="0 0 20 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path\n                  d="M18 0H2C1.46957 0 0.960859 0.210714 0.585786 0.585786C0.210714 0.960859 0 1.46957 0 2V14C0 14.5304 0.210714 15.0391 0.585786 15.4142C0.960859 15.7893 1.46957 16 2 16H18C18.5304 16 19.0391 15.7893 19.4142 15.4142C19.7893 15.0391 20 14.5304 20 14V2C20 1.46957 19.7893 0.960859 19.4142 0.585786C19.0391 0.210714 18.5304 0 18 0ZM18 7H2V4H18V7Z"\n                  fill="white"\n                />\n              </svg>\n            </div>\n\n            <div class="sih-modal__column gap-5">\n              <span class="sih-modal__text sih-modal__text_white sih-modal__text_lg sih-modal__text_extra-bold"\n                >'.concat(SIHLang.refillBalance.bank_title,'</span\n              >\n              <span class="payment-methods__item_text sih-modal__text sih-modal__text_md"></span>\n            </div>\n          </div>\n\n          <div class="sih-modal__row">\n            <svg width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path\n                d="M1.38492 0.229989L6.7189 5.37768C6.91087 5.55355 7 5.76325 7 6C7 6.23675 6.90402 6.45321 6.7189 6.62909L1.38492 11.77C1.23408 11.9188 1.04211 12 0.815866 12C0.356513 12 -8.1477e-07 11.6483 -8.20094e-07 11.2018C-8.22675e-07 10.9853 0.0822717 10.7756 0.246816 10.6201L5.05289 6.00676L0.246816 1.37993C0.0891276 1.23112 -9.41494e-07 1.02142 -9.44156e-07 0.798196C-9.4948e-07 0.351748 0.356513 7.92228e-08 0.815866 7.37451e-08C1.03526 7.11288e-08 1.23408 0.0811725 1.38492 0.229989Z"\n                fill="#6F7F8A"\n              />\n            </svg>\n          </div>\n        </div>\n      </div>\n      <div class="payment-methods__item hidden" data-method="crypt">\n        <div class="sih-modal__row justify-between items-center">\n          <div class="sih-modal__row items-center gap-20">\n            <div class="payment-methods__icon">\n              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path\n                  d="M12.24 8.55967C11.93 9.79967 10 9.16967 9.4 8.99967L9.95 6.81967C10.57 6.99967 12.56 7.25967 12.24 8.55967ZM9.13 10.1197L8.53 12.5297C9.27 12.7197 11.56 13.4497 11.9 12.0897C12.26 10.6697 9.87 10.2997 9.13 10.1197ZM19.7 12.4197C18.36 17.7797 12.94 21.0397 7.58 19.6997C2.22 18.3597 -1.037 12.9397 0.300001 7.57967C1.64 2.21967 7.06 -1.03633 12.42 0.299674C17.77 1.63967 21.03 7.05967 19.7 12.4197ZM12.21 6.04967L12.66 4.24967L11.56 3.99967L11.12 5.72967C10.83 5.65967 10.54 5.58967 10.24 5.52967L10.68 3.75967L9.59 3.49967L9.14 5.28967C8.9 5.22967 8.66 5.17967 8.44 5.11967L6.93 4.73967L6.63 5.90967C6.63 5.90967 7.45 6.09967 7.43 6.10967C7.88 6.21967 7.96 6.49967 7.94 6.74967L6.71 11.6797C6.66 11.8197 6.5 11.9997 6.21 11.9497C6.22 11.9597 5.41 11.7497 5.41 11.7497L4.87 12.9997L6.29 13.3597C6.56 13.4297 6.82 13.4997 7.08 13.5597L6.62 15.3797L7.72 15.6597L8.17 13.8497C8.47 13.9297 8.76 13.9997 9.04 14.0797L8.59 15.8697L9.69 16.1497L10.15 14.3297C12 14.6797 13.42 14.5397 14 12.8497C14.5 11.4997 14 10.6997 13 10.1897C13.72 9.99967 14.26 9.54967 14.41 8.56967C14.61 7.23967 13.59 6.52967 12.21 6.04967Z"\n                  fill="white"\n                />\n              </svg>\n            </div>\n\n            <div class="sih-modal__column gap-5">\n              <span class="sih-modal__text sih-modal__text_white sih-modal__text_lg sih-modal__text_extra-bold"\n                >').concat(SIHLang.refillBalance.crypt_title,'</span\n              >\n              <span class="payment-methods__item_text sih-modal__text sih-modal__text_md"></span>\n            </div>\n          </div>\n\n          <div class="sih-modal__row">\n            <svg width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path\n                d="M1.38492 0.229989L6.7189 5.37768C6.91087 5.55355 7 5.76325 7 6C7 6.23675 6.90402 6.45321 6.7189 6.62909L1.38492 11.77C1.23408 11.9188 1.04211 12 0.815866 12C0.356513 12 -8.1477e-07 11.6483 -8.20094e-07 11.2018C-8.22675e-07 10.9853 0.0822717 10.7756 0.246816 10.6201L5.05289 6.00676L0.246816 1.37993C0.0891276 1.23112 -9.41494e-07 1.02142 -9.44156e-07 0.798196C-9.4948e-07 0.351748 0.356513 7.92228e-08 0.815866 7.37451e-08C1.03526 7.11288e-08 1.23408 0.0811725 1.38492 0.229989Z"\n                fill="#6F7F8A"\n              />\n            </svg>\n          </div>\n        </div>\n      </div>\n      <div class="payment-methods__item hidden" data-method="wallet">\n        <div class="sih-modal__row justify-between items-center">\n          <div class="sih-modal__row items-center gap-20">\n            <div class="payment-methods__icon">\n              <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path\n                  d="M14 0H4C1.79 0 0 1.79 0 4V14C0 16.21 1.79 18 4 18H16C17.11 18 18 17.11 18 16V6C18 4.9 17.11 4 16 4V2C16 0.9 15.11 0 14 0ZM14 2V4H4C3.27 4 2.59 4.2 2 4.54V4C2 2.9 2.9 2 4 2M12.5 12.5C11.67 12.5 11 11.83 11 11C11 10.17 11.67 9.5 12.5 9.5C13.33 9.5 14 10.17 14 11C14 11.83 13.33 12.5 12.5 12.5Z"\n                  fill="white"\n                />\n              </svg>\n            </div>\n\n            <div class="sih-modal__column gap-5">\n              <span class="sih-modal__text sih-modal__text_white sih-modal__text_lg sih-modal__text_extra-bold"\n                >').concat(SIHLang.refillBalance.wallet_title,'</span\n              >\n              <span class="payment-methods__item_text sih-modal__text sih-modal__text_md"></span>\n            </div>\n          </div>\n\n          <div class="sih-modal__row">\n            <svg width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path\n                d="M1.38492 0.229989L6.7189 5.37768C6.91087 5.55355 7 5.76325 7 6C7 6.23675 6.90402 6.45321 6.7189 6.62909L1.38492 11.77C1.23408 11.9188 1.04211 12 0.815866 12C0.356513 12 -8.1477e-07 11.6483 -8.20094e-07 11.2018C-8.22675e-07 10.9853 0.0822717 10.7756 0.246816 10.6201L5.05289 6.00676L0.246816 1.37993C0.0891276 1.23112 -9.41494e-07 1.02142 -9.44156e-07 0.798196C-9.4948e-07 0.351748 0.356513 7.92228e-08 0.815866 7.37451e-08C1.03526 7.11288e-08 1.23408 0.0811725 1.38492 0.229989Z"\n                fill="#6F7F8A"\n              />\n            </svg>\n          </div>\n        </div>\n      </div>\n    </div>\n  ');e.find(".payment-methods").length||e.append(t)}function renderActiveMethodsAction(){$J(".refill-sih-balance").find(".payment-methods").find(".payment-methods__item").each((function(e,t){$J(t).off("click").click((function(){var e=$J(this).data("method");sih_app_global_service.getSubscribeAdsMethods().then((function(t){renderMethodList(getGroupMethods(getFilterMethods(t,getFilterParams(e)),GROUP_METHODS[e]),e,"main")}))}))}))}function renderMethodList(e,t,n){var a=$J(".refill-sih-balance").find(".refill-sih-balance__inner"),i=a.find(".refill-sih-balance__tab"),r=$J('\n    <div\n      class="refill-sih-balance__tab '.concat(t,' sih-modal__column"\n      data-title="').concat(t,'"\n      data-prev-title="').concat(n,'"\n    >\n      <div class="sih-modal__column mb-35">\n        <span class="sih-modal__title text-capitalize"\n          >').concat(SIHLang.refillBalance["".concat(t,"_title")]?SIHLang.refillBalance["".concat(t,"_title")]:t,'</span\n        >\n      </div>\n      <div class="refill-sih-balance__tab-content"></div>\n    </div>\n  '));e.sort((function(e,t){Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);var n=groupSort(e,"title"),a=groupSort(t,"title");return n[0].local_title===a[0].local_title?0:n[0].local_title<a[0].local_title?-1:1})).forEach((function(e){if(Array.isArray(e)||(e=[e]),e.length>1){var n=$J('\n        <a\n          href="javascript:void(0)"\n          class="refill-sih-balance__method refill-sih-balance__new-tab sih-modal__row items-center justify-between"\n        >\n          <span class="sih-modal__text text-capitalize sih-modal__text_lg sih-modal__text_extra-bold"\n            >'.concat(e[0].local_title,'</span\n          >\n          <svg width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path\n              d="M1.38492 0.229989L6.7189 5.37768C6.91087 5.55355 7 5.76325 7 6C7 6.23675 6.90402 6.45321 6.7189 6.62909L1.38492 11.77C1.23408 11.9188 1.04211 12 0.815866 12C0.356513 12 -8.1477e-07 11.6483 -8.20094e-07 11.2018C-8.22675e-07 10.9853 0.0822717 10.7756 0.246816 10.6201L5.05289 6.00676L0.246816 1.37993C0.0891276 1.23112 -9.41494e-07 1.02142 -9.44156e-07 0.798196C-9.4948e-07 0.351748 0.356513 7.92228e-08 0.815866 7.37451e-08C1.03526 7.11288e-08 1.23408 0.0811725 1.38492 0.229989Z"\n              fill="#6F7F8A"\n            />\n          </svg>\n        </a>\n      '));r.find(".refill-sih-balance__tab-content").append(n),n.off("click").click((function(){a.find(".refill-sih-balance__tab").hide(),renderMethodList(e,e[0].local_title,t)}))}else r.find(".refill-sih-balance__tab-content").append('\n        <a\n          href="javascript:void(0)"\n          class="refill-sih-balance__method refill-sih-balance__payment-link sih-modal__row"\n          data-payment-id="'.concat(e[0].id,'"\n        >\n          <span class="sih-modal__text sih-modal__text_capitalize sih-modal__text_lg sih-modal__text_extra-bold"\n            >').concat(e[0].title,"</span\n          >\n        </a>\n      "))})),i.hide();var s=a.find(".refill-sih-balance__tab.".concat(t));s.length?(s.remove(),a.append(r)):a.append(r),goToPaymentAction()}function goToPaymentAction(){var e=$J(".refill-sih-balance");e.find(".refill-sih-balance__payment-link").each((function(t,n){$J(n).off("click").click((function(){ShowRefillLoader();var t=$J(this).data("payment-id"),n=+e.attr("data-refill-amount"),a={paymentId:t,amount:Math.ceil(1e3*(.01*n+n))/1e3};sih_app_global_service.getLoginSihAppUser().then((function(e){CloseRefillSIHBalance(),OpenEmailTabInModal(a,e.user.email)}))}))}))}function getFilterParams(e){var t={},n=utils.z.get("SIH_REFILL_BALANCE")||{},a="rus"===(n.country?n.country:"usa")?"rub":"usd";switch(e){case"crypt":t={payment_system:"cryptomus"};break;case"bank":t={method_name:GROUP_METHODS[e],currency:a};break;case"wallet":t={method_name:GROUP_METHODS[e],currency:a}}return t}function getFilterMethods(e,t){return e&&e.length&&t?e.reduce((function(e,n){return e.push(n),Object.entries(t).forEach((function(t){var n=paymentMethods_slicedToArray(t,2),a=n[0],i=n[1];e=Array.isArray(i)?e.filter((function(e){return e.is_enabled&&i.includes(e[a])})):e.filter((function(e){return e.is_enabled&&e[a]===i}))})),e}),[]):[]}function getGroupMethods(e,t){return t.map((function(t){return e.map((function(e){if(e.method_name.match(t))return e.local_title=t,e})).filter((function(e){return e}))})).filter((function(e){return e.length}))}function groupSort(e,t){return e.sort((function(e,n){return e[t]===n[t]?0:e[t]<n[t]?-1:1}))}const Constants={msg:{BACKGROUND_GET_WEAR_VALUE:"floatvalue",BACKGROUND_GET_INVENTORY_VALUE:"GetInventoryValue",BACKGROUND_GET_INVENTORY_ITEMS:"GetInventoryItems",BACKGROUND_GET_EXTPRICE_TF2BP:"TF2BP",BACKGROUND_GET_EXTPRICES:"GET_EXTERNAL_PRICES",BACKGROUND_GET_PLAYER_ITEMS:"GetPlayerItems",BACKGROUND_GET_PLAYER_BANS:"GetPlayerBans",BACKGROUND_GET_LAST_TRADES:"GetLastTrades",BACKGROUND_GET_EXCHANGE_RATES:"exchangerate",BACKGROUND_GET_BANNER:"GetBanner",BACKGROUND_GET_CUSTOM:"getcustom",BACKGROUND_GET_CUSTOM_TOTAL:"getcustomtotal",BACKGROUND_GET_STEAM_PRICES:"GET_STEAM_PRICES",BACKGROUND_GET_PRICE_FROM_STEAM:"GET_PRICE_FROM_STEAM",BACKGROUND_SEND_MARKETPLACE_FEEDBACK:"SEND_MARKETPLACE_FEEDBACK",BACKGROUND_GET_MANIFEST_APP:"GET_MANIFEST_APP",BACKGROUND_GET_MARKETPLACES:"GET_MARKETPLACES",BACKGROUND_REMOVE_BOOKMARK:"RemoveBookmark",BACKGROUND_UPDATE_BOOKMARKS:"UpdateBookmarks",BACKGROUND_SET_TRADEOFFER_NUMBERS:"SetTradeOfferNumbers",BACKGROUND_GET_STEAM_PLAYER_BADGES:"GetSteamPlayerBadges",BACKGROUND_GET_STEAM_BADGES:"GetSteamBadges",BACKGROUND_GET_STEAM_PLAYER_AVAILABLE_CARDS:"getSteamPlayerAvailableCards",BACKGROUND_SET_USER_STEAM_PRICE:"BACKGROUND_SET_USER_STEAM_PRICE",BACKGROUND_SEND_USER_STEAM_PRICE:"BACKGROUND_SEND_USER_STEAM_PRICE",BACKGROUND_GET_LISTING_ITEM_INFO:"GetListingItemInfo",BACKGROUND_GET_RATES:"GetRates",BACKGROUND_CHANGE_CURRENCY:"BACKGROUND_CHANGE_CURRENCY",BACKGROUND_GET_STEAM_BY_SIH_PRICES:"GET_STEAM_BY_SIH_PRICES",BACKGROUND_GET_PRICES_BY_MARKETPLACES:"GET_PRICES_BY_MARKETPLACES",BACKGROUND_GET_WEAPON_WEAR_MAP:"GET_WEAPON_WEAR_MAP",BACKGROUND_GET_STEAM_RUNES:"GET_STEAM_RUNES",BACKGROUND_GET_SKINS_GIVEAWAY:"GET_SKINS_GIVEAWAY",BACKGROUND_GET_STEAM_REP_BAN_INFO:"GET_STEAM_REP_BAN_INFO",BACKGROUND_GET_PLAYER_BANS_GAINSKINS:"GET_PLAYER_BANS_GAINSKINS",BACKGROUND_GET_ONLINE_USERS_BY_APPID:"GET_ONLINE_USERS_BY_APPID",BACKGROUND_GET_SIH_PRICES:"GET_SIH_PRICES",BACKGROUND_BADGE_PROGRESS_GET_BADGES:"BADGE_PROGRESS_GET_BADGES",BACKGROUND_OPEN_TAB_SETTINGS:"BACKGROUND_OPEN_TAB_SETTINGS",BACKGROUND_EVENT_STORE:"EVENT_STORE",BACKGROUND_EVENT_REGISTRATION:"EVENT_REGISTRATION",BACKGROUND_SET_EVENT_REGISTRATION_V2:"BACKGROUND_SET_EVENT_REGISTRATION_V2",BACKGROUND_SIH_SETTINGS:"SIH_SETTINGS",BACKGROUND_REGISTER_SIH_REFERRER:"REGISTER_SIH_REFERRER",BACKGROUND_REGISTER_SIH_REFERRER_DELETE:"REGISTER_SIH_REFERRER_DELETE",BACKGROUND_INVENTORY_MODE:"SIH_INVENTORY_MODE",BACKGROUND_INVENTORY_PRICE:"BACKGROUND_INVENTORY_PRICE",BACKGROUND_HIGHLIGHT_OVERPRICED:"BACKGROUND_HIGHLIGHT_OVERPRICED",BACKGROUND_TRADE_ACCEPT:"BACKGROUND_TRADE_ACCEPT",BACKGROUND_TRADE_DECLINE:"BACKGROUND_TRADE_DECLINE",BACKGROUND_TRADE_CANCEL:"BACKGROUND_TRADE_CANCEL",BACKGROUND_UPDATE_TRADE_STATUS:"BACKGROUND_UPDATE_TRADE_STATUS",BACKGROUND_TRADEOFFER_THROUGH_PARSING:"BACKGROUND_TRADEOFFER_THROUGH_PARSING",BACKGROUND_HIGHLIGHT_OVERPRICED_AWAIT:"BACKGROUND_HIGHLIGHT_OVERPRICED_AWAIT",BACKGROUND_HIGHLIGHT_LOWERPRICED_BUY:"BACKGROUND_HIGHLIGHT_LOWERPRICED_BUY",BACKGROUND_GET_MY_STEAM_ID:"BACKGROUND_GET_MY_STEAM_ID",BACKGROUND_UPDATE_KEY_STORAGE_SYNC:"BACKGROUND_UPDATE_KEY_STORAGE_SYNC",BACKGROUND_UPDATE_WALLET:"BACKGROUND_UPDATE_WALLET",BACKGROUND_MANUAL_LOGIN:"BACKGROUND_MANUAL_LOGIN",BACKGROUND_CHECK_USER:"BACKGROUND_CHECK_USER",BACKGROUND_ON_LOGOUT_STEAM_USER:"BACKGROUND_ON_LOGOUT_STEAM_USER",BACKGROUND_UPDATE_USER_SORT_MARKET:"BACKGROUND_UPDATE_USER_SORT_MARKET",BACKGROUND_LOGIN_SIH_APP:"BACKGROUND_LOGIN_SIH_APP",BACKGROUND_GET_USER_AUTH_SIH_APP:"BACKGROUND_GET_USER_AUTH_SIH_APP",BACKGROUND_GET_SIH_APP_USER_INFO:"BACKGROUND_GET_SIH_APP_USER_INFO",BACKGROUND_GET_LINK_TO_PAYMENT_SUBSCRIBE:"BACKGROUND_GET_LINK_TO_PAYMENT_SUBSCRIBE",BACKGROUND_SET_EMAIL_SIH_APP:"BACKGROUND_SET_EMAIL_SIH_APP",BACKGROUND_DELETE_EMAIL_SIH_APP:"BACKGROUND_DELETE_EMAIL_SIH_APP",BACKGROUND_CHECK_SUBSCRIBE_ADS:"BACKGROUND_CHECK_SUBSCRIBE_ADS",BACKGROUND_ENTER_PASSWORD_SIH_APP:"BACKGROUND_ENTER_PASSWORD_SIH_APP",BACKGROUND_UPDATE_TRADELINK_SIH_APP:"BACKGROUND_UPDATE_TRADELINK_SIH_APP",BACKGROUND_GET_SIH_APP_LOG:"BACKGROUND_GET_SIH_APP_LOG",BACKGROUND_READ_SIH_APP_LOG:"BACKGROUND_READ_SIH_APP_LOG",BACKGROUND_GET_SUBSCRIBE_ADS_PLANS_SIH_APP:"BACKGROUND_GET_SUBSCRIBE_ADS_PLANS_SIH_APP",BACKGROUND_GET_SUBSCRIBE_ADS_METHODS_SIH_APP:"BACKGROUND_GET_SUBSCRIBE_ADS_METHODS_SIH_APP",BACKGROUND_CREATE_INVOICE:"BACKGROUND_CREATE_INVOICE",BACKGROUND_GET_ORDER_HISTOGRAM:"BACKGROUND_GET_ORDER_HISTOGRAM",BACKGROUND_GET_SIH_TOKEN:"BACKGROUND_GET_SIH_TOKEN",BACKGROUND_GET_SIH_APP_TOKEN:"BACKGROUND_GET_SIH_APP_TOKEN",BACKGROUND_GET_EVENT_CARDS:"BACKGROUND_GET_EVENT_CARDS",BACKGROUND_CHECK_EVENT_GAME:"BACKGROUND_CHECK_EVENT_GAME",BACKGROUND_BUY_ITEM_SIH_APP:"BACKGROUND_BUY_ITEM_SIH_APP",BACKGROUND_CANCEL_ORDER_SIH_APP:"BACKGROUND_CANCEL_ORDER_SIH_APP",BACKGROUND_UPDATE_LOCAL_ITEM_ORDER_SIH_APP:"BACKGROUND_UPDATE_LOCAL_ITEM_ORDER_SIH_APP",BACKGROUND_SET_BUY_STACK_SIH_APP:"BACKGROUND_SET_BUY_STACK_SIH_APP",BACKGROUND_GET_BUY_STACK_BY_NAME_SIH_APP:"BACKGROUND_GET_BUY_STACK_BY_NAME_SIH_APP",BACKGROUND_GET_ALL_BUY_STACK_SIH_APP:"BACKGROUND_GET_ALL_BUY_STACK_SIH_APP",BACKGROUND_DELETE_BUY_STACK_SIH_APP:"BACKGROUND_DELETE_BUY_STACK_SIH_APP",BACKGROUND_DELETE_LAST_BUY_STACK_SIH_APP:"BACKGROUND_DELETE_LAST_BUY_STACK_SIH_APP",BACKGROUND_CHANGE_STATUS_ITEM_BUY_STACK_SIH_APP:"BACKGROUND_CHANGE_STATUS_ITEM_BUY_STACK_SIH_APP",BACKGROUND_UPDATE_PRICE_ITEMS_BUY_STACK_SIH_APP:"BACKGROUND_UPDATE_PRICE_ITEMS_BUY_STACK_SIH_APP",BACKGROUND_GET_ORDERS_HISTORY_SIH_APP:"BACKGROUND_GET_ORDERS_HISTORY_SIH_APP",BACKGROUND_CREATE_BUY_ORDER_SIH_APP:"BACKGROUND_CREATE_BUY_ORDER_SIH_APP",BACKGROUND_GET_TOP_SALES:"BACKGROUND_GET_TOP_SALES",BACKGROUND_UPDATE_ITEM_CHECKBOX_SIH_APP:"BACKGROUND_UPDATE_ITEM_CHECKBOX_SIH_APP",BACKGROUND_SET_DEFAULT_BUY_COUNT:"BACKGROUND_SET_DEFAULT_BUY_COUNT",BACKGROUND_GET_AUTO_LOAD_FLOATS:"BACKGROUND_GET_AUTO_LOAD_FLOATS",BACKGROUND_PING_SIH_APP_SESSION:"BACKGROUND_PING_SIH_APP_SESSION",BACKGROUND_UPDATE_USER_STATE:"BACKGROUND_UPDATE_USER_STATE",BACKGROUND_CREATE_BUY_ORDER:"BACKGROUND_CREATE_BUY_ORDER",BACKGROUND_GET_BUY_ORDER_STATUS:"BACKGROUND_GET_BUY_ORDER_STATUS",BACKGROUND_CANCEL_BUY_ORDER:"BACKGROUND_CANCEL_BUY_ORDER",BACKGROUND_GET_ENABLED_RESUBMIT_ORDERS:"BACKGROUND_GET_ENABLED_RESUBMIT_ORDERS",BACKGROUND_RESELL_ITEMS:"BACKGROUND_RESELL_ITEMS",BACKGROUND_SAVE_ITEM_FOR_SALE:"BACKGROUND_SAVE_ITEM_FOR_SALE",BACKGROUND_REMOVE_ITEM_FOR_SALE:"BACKGROUND_REMOVE_ITEM_FOR_SALE",BACKGROUND_GET_SAVED_ITEMS_FOR_SALE:"BACKGROUND_GET_SAVED_ITEMS_FOR_SALE",BACKGROUND_STOP_RESELL_ITEMS:"BACKGROUND_STOP_RESELL_ITEMS",BACKGROUND_GET_COMPLETED_SELL_MARKET_ITEMS:"BACKGROUND_GET_COMPLETED_SELL_MARKET_ITEMS",BACKGROUND_RESUBMIT_BUY_ORDER:"BACKGROUND_RESUBMIT_BUY_ORDER",BACKGROUND_GET_COMPLETED_BUY_ORDERS_MARKET_ITEMS:"BACKGROUND_GET_COMPLETED_BUY_ORDERS_MARKET_ITEMS",BACKGROUND_STOP_RELISTING_BUY_ORDERS_ITEMS:"BACKGROUND_STOP_RELISTING_BUY_ORDERS_ITEMS",BACKGROUND_CHECK_API_KEY:"BACKGROUND_CHECK_API_KEY",BACKGROUND_RECONNECT_NEW_SIH_AGENT:"BACKGROUND_RECONNECT_NEW_SIH_AGENT",BACKGROUND_GET_AVAILABLE_ITEM_PAY_IDS:"BACKGROUND_GET_AVAILABLE_ITEM_PAY_IDS",BACKGROUND_EDIT_PROJECTS_PERMISSION:"BACKGROUND_EDIT_PROJECTS_PERMISSION",BACKGROUND_DELETE_PROJECTS_PERMISSION:"BACKGROUND_DELETE_PROJECTS_PERMISSION",BACKGROUND_GET_PROJECTS_PERMISSION:"BACKGROUND_GET_PROJECTS_PERMISSION",BACKGROUND_GET_PRICES_FOR_EXTERNAL:"BACKGROUND_GET_PRICES_FOR_EXTERNAL",BACKGROUND_GET_SIH_MARKET_ACTUAL_PRICES:"BACKGROUND_GET_SIH_MARKET_ACTUAL_PRICES",BACKGROUND_CHECK_SIH_CASE:"BACKGROUND_CHECK_SIH_CASE",BACKGROUND_GET_SIH_CASES:"BACKGROUND_GET_SIH_CASES",BACKGROUND_GET_SIH_CASE_INFO:"BACKGROUND_GET_SIH_CASE_INFO",BACKGROUND_SIH_OPEN_CASE:"BACKGROUND_SIH_OPEN_CASE",BACKGROUND_GET_SIH_CASE_HISTORY:"BACKGROUND_GET_SIH_CASE_HISTORY",BACKGROUND_DELETE_SIH_CASE_HISTORY:"BACKGROUND_DELETE_SIH_CASE_HISTORY",BACKGROUND_GET_KINGUIN_PRODUCTS:"BACKGROUND_GET_KINGUIN_PRODUCTS",BACKGROUND_GET_CURRENT_USER_COUNTRY_CODE:"BACKGROUND_GET_CURRENT_USER_COUNTRY_CODE"},alarm:{MAIN:"main",CHECK_PRICE:"checkprice",CHECK_USER:"checkUser",CHECK_TRADEOFFER_THROUGH_API:"CHECK_TRADEOFFER_THROUGH_API",CHECK_TRADEOFFER_THROUGH_PARSING:"CHECK_TRADEOFFER_THROUGH_PARSING",CLEAR_TRADEOFFER_REQUEST_LIMIT:"CLEAR_TRADEOFFER_REQUEST_LIMIT",CHECK_MARKET_TOGGLE:"CHECK_MARKET_TOGGLE",CHECK_MARKET_AUTOACCEPT_TRADES_TOGGLE:"CHECK_MARKET_AUTOACCEPT_TRADES_TOGGLE",BACKGROUND_AD_HIT_SEND:"AD_HIT_SEND",ACTUALIZE_AGENTS_STATE:"ACTUALIZE_AGENTS_STATE",ACTUALIZE_NEW_SIH_AGENT_STATE:"ACTUALIZE_NEW_SIH_AGENT_STATE",PARSING_ACTUAL_INVENTORY:"PARSING_ACTUAL_INVENTORY",CHECK_ACTUAL_BALANCE:"CHECK_ACTUAL_BALANCE",CHECK_ACTIVE_LOTS_MARKET:"CHECK_ACTIVE_LOTS_MARKET",CHECK_HISTORY_LOTS_MARKET:"CHECK_HISTORY_LOTS_MARKET",GET_EXCHANGE_RATES:"GET_EXCHANGE_RATES",GET_STEAM_RATES:"GET_STEAM_RATES",GET_STEAM_CURRENCY:"GET_STEAM_CURRENCY",UPDATE_PRICE_BOOKMARKS:"UPDATE_PRICE_BOOKMARKS",CHECK_SIH_APP_AUTH:"CHECK_SIH_APP_AUTH",UPDATE_SUBSCRIBE_ADS_PLANS_AND_METHODS:"UPDATE_SUBSCRIBE_ADS_PLANS_AND_METHODS",PING_SIH_APP_SESSION:"PING_SIH_APP_SESSION",BACKGROUND_CREATE_BUY_ORDER_FROM_STACK_SIH_APP:"BACKGROUND_CREATE_BUY_ORDER_FROM_STACK_SIH_APP",BACKGROUND_UPDATE_ORDERS_HISTORY_SIH_APP:"BACKGROUND_UPDATE_ORDERS_HISTORY_SIH_APP",BACKGROUND_PARSE_OTHER_INVENTORY:"BACKGROUND_PARSE_OTHER_INVENTORY",BACKGROUND_SEND_EVENT_REGISTRATION_V2:"BACKGROUND_SEND_EVENT_REGISTRATION_V2",BACKGROUND_SEND_USER_MARKET_HISTORY:"BACKGROUND_SEND_USER_MARKET_HISTORY",BACKGROUND_CHECK_SIH_VERSION:"BACKGROUND_CHECK_SIH_VERSION"},notification:{EXTENSION_UPDATED:"update",INPUT_INVITE:"comInvites",INPUT_COMMENT:"comMessages",OUTPUT_OFFER:"comSentOffers",INPUT_OFFER:"comReceivedOffers",AVAILABLE_FREE_REWARDS:"available_free_rewards"},tradeOfferState:{Invalid:1,Active:2,Accepted:3,Countered:4,Expired:5,Canceled:6,Declined:7,InvalidItems:8,CreatedNeedsConfirmation:9,CanceledBySecondFactor:10,InEscrow:11},tradeOfferType:{Sent:0,Received:1},games:{CSGO:730,COUNTER_STRIKE_GLOBAL_OFFENSIVE:730,TEAM_FORTRESS_2:440,DOTA_2:570,PAYDAY_2:218620,RUST:252490,H1Z1_JUST_SURVIVE:295110,H1Z1_KING_OF_THE_KILL:433850,UNTURNED:304930,KILLING_FLOOR_2:232090,PLAYERUNKNOWNS_BATTLEGROUNDS:578080,STEAM_COMMUNITY:753},stats:{SIH_EVENT_REGISTER_VIEW_ITEM_EVENT_REGISTER_ENABLED:"SIH_EVENT_REGISTER_VIEW_ITEM_EVENT_REGISTER_ENABLED",SIH_EVENTS_REGISTER_ENABLED:"SIH_EVENTS_REGISTER_ENABLED",SIH_REFERRER:"SIH_REFERRER"},ALLOW_LAST_STEAM_NUMBERS:[0,1,2,3,4,5,6,7,8,9],UNAVAILABLE_GROUP_APP_IDS:[321360,753],AVAILABLE_DOTA_NAMES:[{"Music Pack":{isMarketHashName:!0,isType:!0}},{"Cursor Pack":{isMarketHashName:!0,isType:!0}},{Bundle:{isMarketHashName:!0,isType:!0}},{Taunt:{isMarketHashName:!0,isType:!1}},{"Treasure Chest":{isMarketHashName:!1,isType:!0}},{"Immortal Treasure":{isMarketHashName:!0,isType:!1}},{"Inscribed Gem":{isMarketHashName:!1,isType:!0}},{"Name Tag":{isMarketHashName:!0,isType:!1}},{"Treasure Key":{isMarketHashName:!1,isType:!0}},{"Loading Screen":{isMarketHashName:!1,isType:!0}},{"Priceless Treasure":{isMarketHashName:!1,isType:!0}}],STEAM_NOTIFICATIONS_TYPES:{TRADE:9},countries:{abw:"Aruba",afg:"Afghanistan",ago:"Angola",aia:"Anguilla",ala:"Åland Islands",alb:"Albania",and:"Andorra",are:"United Arab Emirates",arg:"Argentina",arm:"Armenia",asm:"American Samoa",ata:"Antarctica",atf:"French Southern Territories",atg:"Antigua and Barbuda",aus:"Australia",aut:"Austria",aze:"Azerbaijan",bdi:"Burundi",bel:"Belgium",ben:"Benin",bes:"Bonaire, Sint Eustatius and Saba",bfa:"Burkina Faso",bgd:"Bangladesh",bgr:"Bulgaria",bhr:"Bahrain",bhs:"Bahamas",bih:"Bosnia and Herzegovina",blm:"Saint Barthélemy",blr:"Belarus",blz:"Belize",bmu:"Bermuda",bol:"Bolivia",bra:"Brasil",brb:"Barbados",brn:"Brunei Darussalam",btn:"Bhutan",bvt:"Bouvet Island",bwa:"Botswana",caf:"Central African Republic",can:"Canada",cat:"Catalonia",cck:"Cocos (Keeling) Islands",che:"Switzerland",chl:"Chile",chn:"China",civ:"Côte d`Ivoire",cmr:"Cameroon",cod:"Congo (Democratic Republic of the Congo)",cog:"Congo (Congo-Brazzaville)",cok:"Cook Islands",col:"Colombia",com:"Comoros",cpv:"Cabo Verde",cri:"Costa Rica",cub:"Cuba",cuw:"Curaçao",cxr:"Christmas Island",cym:"Cayman Islands",cyp:"Cyprus",cze:"Czech Republic",deu:"Germany",dji:"Djibouti",dma:"Dominica",dnk:"Denmark",dom:"Dominican Republic",dza:"Algeria",ecu:"Ecuador",egy:"Egypt",eri:"Eritrea",esh:"Western Sahara",esp:"Spain",est:"Estonia",eth:"Ethiopia",fin:"Finland",fji:"Fiji",flk:"Falkland Islands (Malvinas)",fra:"France",fro:"Faroe Islands",fsm:"Micronesia",gab:"Gabon",gbr:"United Kingdom",geo:"Georgia",ggy:"Guernsey",gha:"Ghana",gib:"Gibraltar",gin:"Guinea",glp:"Guadeloupe",gmb:"Gambia",gnb:"Guinea-Bissau",gnq:"Equatorial Guinea",grc:"Greece",grd:"Grenada",grl:"Greenland",gtm:"Guatemala",guf:"French Guiana",gum:"Guam",guy:"Guyana",hkg:"Hong Kong",hmd:"Heard Island and McDonald Islands",hnd:"Honduras",hrv:"Croatia",hti:"Haiti",hun:"Hungary",idn:"Indonesia",imn:"Isle of Man",ind:"India",iot:"British Indian Ocean Territory",irl:"Ireland",irn:"Iran",irq:"Iraq",isl:"Iceland",isr:"Israel",ita:"Italy",jam:"Jamaica",jey:"Jersey",jor:"Jordan",jpn:"Japan",kaz:"Kazakstan",ken:"Kenya",kgz:"Kyrgyzstan",khm:"Cambodia",kir:"Kiribati",kna:"Saint Kitts and Nevis",kor:"Korea",kos:"Kosovo",kwt:"Kuwait",lbn:"Lebanon",lbr:"Liberia",lby:"Libya",lca:"Saint Lucia",lie:"Liechtenstein",lka:"Sri Lanka",lso:"Lesotho",ltu:"Lithuania",lux:"Luxembourg",lva:"Latvia",mac:"Macau",maf:"Saint Martin",mar:"Marokko",mco:"Monaco",mda:"Moldova",mdg:"Madagascar",mdv:"Maldives",mex:"Mexico",mhl:"Marshall Islands",mkd:"Makedonia",mli:"Mali",mlt:"Malta",mmr:"Myanmar",mne:"Montenegro",mng:"Mongolia",mnp:"Northern Mariana Islands",moz:"Mozambique",mrt:"Mauritania",msr:"Montserrat",mtq:"Martinique",mus:"Mauritius",mwi:"Malawi",mys:"Malaysia",myt:"Mayotte",nam:"Namibia",ncl:"New Caledonia",ner:"Niger",nfk:"Norfolk Island",nga:"Nigeria",nic:"Nicaragua",niu:"Niue",nld:"Netherlands",nor:"Norway",npl:"Nepal",nru:"Nauru",nzl:"New Zealand",omn:"Oman",pak:"Pakistan",pan:"Panama",pcn:"Pitcairn",per:"Peru",phl:"Phillipines",plw:"Palau",png:"Papua New Guinea",pol:"Poland",pri:"Puerto Rico",prk:"Korea",prt:"Portugal",pry:"Paraguay",pse:"State of Palestine",pyf:"French Polynesia",qat:"Qatar",reu:"Réunion",rou:"Roumania",rus:"Russia",rwa:"Rwanda",sau:"Saudi Arabia",sco:"Scotland",sdn:"Sudan",sen:"Senegal",sgp:"Singapore",sgs:"South Georgia and the South Sandwich Islands",shn:"Saint Helena, Ascension and Tristan da Cunha",sjm:"Svalbard and Jan Mayen",slb:"Solomon Islands",sle:"Sierra Leone",slv:"El Salvador",smr:"San Marino",som:"Somalia",spm:"Saint Pierre and Miquelon",srb:"Serbia",ssd:"South Sudan",stp:"Sao Tome and Principe",sur:"Suriname",svk:"Slovakia",svn:"Slovenia",swe:"Sweden",swz:"Swaziland",sxm:"Sint Maarten",syc:"Seychelles",syr:"Syrian Arab Republic",tca:"Turks and Caicos Islands",tcd:"Chad",tgo:"Togo",tha:"Thailand",tjk:"Tajikistan",tkl:"Tokelau",tkm:"Turkmenistan",tls:"Timor-Leste",ton:"Tonga",tto:"Trinidad and Tobago",tun:"Tunisia",tur:"Turkey",tuv:"Tuvalu",twn:"Taiwan, Province of China",tza:"United Republic of Tanzania",uga:"Uganda",ukr:"Ukraine",umi:"United States Minor Outlying Islands",ury:"Uruguay",usa:"USA",uzb:"Uzbekistan",vat:"Vanuatu",vct:"Vatican",ven:"Venezuela",vgb:"Virgin Islands",vnm:"Vietnam",vut:"Vanuatu",wlf:"Wallis and Futuna",wsm:"Samoa",yem:"Yemen",zaf:"South Africa",zmb:"Zambia",zwe:"Zimbabwe"}};function LoadSelectCountry(){selectCountry_loadHtml()}function selectCountry_loadHtml(){var e=$J(".refill-sih-balance").find(".refill-sih-balance__select-country-outer");e.find("#refill-sih-balance__select-country").length||e.append('<select id="refill-sih-balance__select-country"></select>'),renderSelectCountry()}function renderSelectCountry(){var e=$J(".refill-sih-balance").find("#refill-sih-balance__select-country");$J.each(Constants.countries,(function(t,n){e.append('<option class="flag-icon flag-icon-'.concat(t,' flag-icon-squared" data-country="').concat(t,'">\n        <span>').concat(n,"</span>\n      </option>"))})),$J.widget("custom.selectMenuWithIcons",$J.ui.selectmenu,{_renderItem:function(e,t){var n=$J(t.element).attr("data-country"),a=$J("<li>",{class:"refill-sih-balance__select-option",value:t.element.attr("value")}).attr("data-country","".concat(n)),i=$J("<span>",{class:t.element.attr("class")}),r=$J("<span>",{text:t.label});return r.prepend(i),a.append(r).appendTo(e)}}),$J("#refill-sih-balance__select-country").selectMenuWithIcons({position:{my:"left top",at:"left bottom+10",using:function(e,t){$J(this).css(e),$J(this).addClass("refill-sih-balance__widget_content")}}}),setCountryButtonActiveState(),setCountryOptionActiveState(),changeCountry()}function setCountryButtonActiveState(){var e=utils.z.get("SIH_REFILL_BALANCE")||{},t=e.country?e.country:"usa",n=$J("#refill-sih-balance__select-country-button").find(".ui-selectmenu-text");n.before('<span class="flag-icon flag-icon-'.concat(t,' flag-icon-squared"></span')),n.text(Constants.countries[t])}function setCountryOptionActiveState(){$J("#refill-sih-balance__select-country-button").click((function(){var e=utils.z.get("SIH_REFILL_BALANCE")||{},t=e.country?e.country:"usa";$J("#refill-sih-balance__select-country-menu").find(".refill-sih-balance__select-option").each((function(e,n){var a=$J(n),i=a.find(".ui-menu-item-wrapper");i.removeClass("ui-state-active"),a.data("country")===t&&i.addClass("ui-state-active")}))}))}function changeCountry(){$J("#refill-sih-balance__select-country-button").click((function(){var e=$J(this);$J(".refill-sih-balance__widget_content").find(".refill-sih-balance__select-option").each((function(t,n){$J(n).off("click").click((function(){var t=$J(this).data("country");e.find(".flag-icon").remove();var n=utils.z.get("SIH_REFILL_BALANCE")||{};n.country=t,utils.z.set("SIH_REFILL_BALANCE",n),setCountryButtonActiveState(),UpdatePaymentMethods(),SetRefillAmount()}))}))}))}function refillSihBalance_LoadRefillSIHBalance(){refillSihBalance_loadHtml(),LoadSelectCountry(),LoadPaymentMethods(),modalActionListeners()}function SetRefillAmount(){var e=$J(".refill-sih-balance"),t=+e.attr("data-refill-amount"),n=utils.z.get("SIH_REFILL_BALANCE")||{},a="rus"===(n.country?n.country:"usa")?5:1,i=currency_service.A.getPriceFromCurrency(t,a).text;e.find(".refill-sih-balance__refill-amount").text(i)}function ShowRefillLoader(){var e=$J(".refill-sih-balance");e.find(".refill-sih-balance__inner").hide(),e.find(".sih-modal__inner.sih-loader").css("display","flex").show()}function HideRefillLoader(){var e=$J(".refill-sih-balance");e.find(".refill-sih-balance__inner").css("display","flex").show(),e.find(".sih-modal__inner.sih-loader").hide()}function CloseRefillSIHBalance(){$J(".refill-sih-balance").hide().remove(),$J("body").css("overflow","auto"),refillSihBalance_LoadRefillSIHBalance()}function refillSihBalance_loadHtml(){var e=$J("body"),t=$J('\n    <div class="refill-sih-balance">\n      <div class="refill-sih-balance__fade"></div>\n      <div class="sih-modal sih-global refill-sih-balance__modal">\n        <div class="refill-sih-balance__close"></div>\n        <div class="refill-sih-balance__content">\n          <div class="sih-modal__row gap-10 sih-modal__back sih-modal__back-info mb-20">\n            <span class="sih-modal__back_icon"></span>\n            <span class="sih-modal__text sih-modal__text_md">'.concat(SIHLang.subscribeAds.modal.back,'</span>\n          </div>\n          <div class="sih-modal__inner refill-sih-balance__inner">\n            <div class="refill-sih-balance__tab sih-modal__column gap-20" data-title="main">\n              <div class="sih-modal__column">\n                <span class="sih-modal__title">').concat(SIHLang.refillBalance.title,'</span>\n                <div class="sih-modal__row refill-sih-balance__subtitle gap-5">\n                  <span>').concat(SIHLang.refillBalance.subtitle,'</span>\n                  <span class="refill-sih-balance__refill-amount"></span>\n                </div>\n              </div>\n\n              <div class="sih-modal__column gap-10">\n                <span class="sih-modal__text sih-modal__text_lg">').concat(SIHLang.refillBalance.payment_country,':</span>\n                <div class="sih-modal__row refill-sih-balance__select-country-outer"></div>\n              </div>\n\n              <div class="sih-modal__column">\n                <span class="sih-modal__text sih-modal__text_lg">').concat(SIHLang.refillBalance.payment_method,':</span>\n                <div class="sih-modal__row refill-sih-balance__payment-methods mt-10"></div>\n              </div>\n            </div>\n          </div>\n          <div class="sih-modal__inner sih-loader">\n            <div class="sih-logo-loader"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  '));e.find(".refill-sih-balance").length||e.append(t);var n=utils.z.get("SIH_REFILL_BALANCE")||{};n&&n.readRefillTerms||renderInfoMessage(t)}function renderInfoMessage(e){var t=e.find(".refill-sih-balance__modal"),n=$J('\n    <div\n      class="refill-sih-balance__info-message sih-modal__column w-100per h-100per absolute left-0 bottom-0 justify-end bg-glass"\n    >\n      <div class="sih-modal__column bg-main gap-15 px-36 py-36 items-start rounded-b-8">\n        <span class="title">'.concat(SIHLang.refillBalance.info_message.title,'</span>\n        <span class="sih-modal__text sih-modal__text_md">').concat(SIHLang.refillBalance.info_message.text_1,'</span>\n        <span class="sih-modal__text sih-modal__text_md">').concat(SIHLang.refillBalance.info_message.text_2,'</span>\n        <div class="sih-modal__text sih-modal__text_md">\n          ').concat(SIHLang.refillBalance.info_message.text_3,'\n          <a\n            href="https://sih.app/user/subscription"\n            target="_blank"\n            class="sih-modal__text_blue text-decoration-underline hover-opacity-8"\n            >https://sih.app/user/subscription</a\n          >\n        </div>\n        <div class="sih-modal__row items-center gap-20">\n          <a href="javascript:void(0)" class="close-info-message sih-modal__button sih-modal__button_blue py-16 px-24"\n            >').concat(SIHLang.refillBalance.info_message.btn_text,'</a\n          >\n          <label class="sih-modal__refill-terms" for="refill-terms">\n            <input type="checkbox" name="refill-terms" id="refill-terms" class="sih-modal__input_hidden" />\n            <label class="fake-checkbox" for="refill-terms"></label>\n            <span class="sih-modal__text sih-modal__text_md">').concat(SIHLang.refillBalance.info_message.refill_terms,"</span>\n          </label>\n        </div>\n      </div>\n    </div>\n  ")),a=t.find(".refill-sih-balance__info-message");a.length?a.show():t.append(n),t.find(".close-info-message").click((function(){t.find(".refill-sih-balance__info-message").hide()})),n.find("#refill-terms").change((function(){var e=$J(this).is(":checked"),t=utils.z.get("SIH_REFILL_BALANCE")||{};t.readRefillTerms=e,utils.z.set("SIH_REFILL_BALANCE",t)}))}function modalActionListeners(){closeModalListenerAction(),goToBackModal()}function closeModalListenerAction(){var e=$J(".refill-sih-balance");e.find(".refill-sih-balance__close").off("click").click((function(){CloseRefillSIHBalance()})),e.find(".refill-sih-balance__fade").off("click").click((function(){CloseRefillSIHBalance()}))}function goToBackModal(){var e=$J(".refill-sih-balance"),t=e.find(".refill-sih-balance__inner");e.find(".sih-modal__back").off("click").click((function(){var n=t.find(".refill-sih-balance__tab:visible"),a=n.data("prev-title");a?(n.hide(),t.find(".refill-sih-balance__tab").each((function(e,t){var n=$J(t);n.data("title")===a&&n.css("display","flex").show()}))):e.hide()}))}function setDefaultRefillTab(){$J(".refill-sih-balance").find(".refill-sih-balance__tab").each((function(e,t){var n=$J(t);"main"===n.data("title")?n.css("display","flex").show():n.hide()}))}var notificationPanel_debounce=null;function notificationPanel_LoadNotificationPanel(){notificationPanel_loadHtml(),panelListenerActions()}function notificationPanel_loadHtml(){var e=$J("body"),t='\n    <div id="sih-notification-panel">\n      <div class="notification-panel__fade"></div>\n      <div class="notification-panel sih-global">\n        <div class="row justify-between px-24">\n          <div class="notification-panel__title row gap-16 items-baseline">\n            <span class="text fs-16">'.concat(SIHLang.notifications.title,'</span>\n          </div>\n\n          <div class="notification-panel__close"></div>\n        </div>\n        <div class="notification-panel__header">\n          <div class="filter row gap-8">\n            <label for="notification-panel__filter-success" class="filter__label">\n              <input\n                type="checkbox"\n                id="notification-panel__filter-success"\n                class="filter__input"\n                data-filter="success"\n                checked\n              />\n              <div class="filter__item success">\n                <div class="row w-6 h-6 rounded-50per bg-green"></div>\n                <div class="filter__count text fs-12 lh-12"></div>\n              </div>\n            </label>\n            <label for="notification-panel__filter-error" class="filter__label">\n              <input\n                type="checkbox"\n                id="notification-panel__filter-error"\n                class="filter__input"\n                data-filter="error"\n                checked\n              />\n              <div class="filter__item error">\n                <div class="row w-6 h-6 rounded-50per bg-red"></div>\n                <div class="filter__count text fs-12 lh-12"></div>\n              </div>\n            </label>\n          </div>\n        </div>\n        <div class="notification-panel__content column"></div>\n      </div>\n    </div>\n  ');e.find("#sih-notification-panel").length||e.append(t)}function panelListenerActions(){openPanelAction(),closePanelAction()}function openPanelAction(){var e=$J("#sih-notification-panel");$J("#sih-header-notifications").off("click").click((function(){$J("body").css("overflow","hidden"),e.css("display","flex"),setTimeout((function(){e.find(".notification-panel").css({transform:"translateX(0)"})}),100),renderLogItems().then((function(){UpdateHeaderNotificationIndicator(),setItemsCount(),filterAction(),initReadAllNotification(),manualLoadHistoryLogs()})),registerOpenNotificationClick()}))}function closePanelAction(){var e=$J("#sih-notification-panel");function t(){e.find(".notification-panel").css({transform:"translateX(100%)"}),setTimeout((function(){e.hide(),$J("body").css("overflow","auto")}),300)}e.find(".notification-panel__close").off("click").click((function(){t()})),e.find(".notification-panel__fade").off("click").click((function(){t()}))}function renderLogItems(){var e=$J("#sih-notification-panel"),t=e.find(".notification-panel__content");return e.find(".notification-panel__content").children().remove(),new Promise((function(e){SihAppGlobal.getLogs().then((function(n){if(n)SihAppGlobal.getUserSihApp().then((function(a){SihAppGlobal.getLoginSihAppUser().then((function(i){if(i.success&&i.tfaNeed&&($J("#sih-notification-panel").find(".notification-panel__close").trigger("click"),$J("#sih-enter-password").attr("data-show-modal","notification-panel").show()),n.length&&a.success){var r=(new Date).toDateString();n.sort((function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()})).forEach((function(e,n){t.append('\n                    <div class="notification-panel__group notification-panel__group-'.concat(n,'">\n                      <div class="notification-panel__date-splitter">\n                        <div class="notification-panel__date-splitter_text">\n                          ').concat(r===e.date?"".concat(SIHLang.notifications.today):e.date.slice(4,10),"\n                        </div>\n                      </div>\n                    </div>\n                  ")),e.items.sort((function(e,t){return t.createdAt-e.createdAt})).forEach((function(e){var a=new Date(e.createdAt).getHours(),i=new Date(e.createdAt).getMinutes(),r=SihAppGlobal.getLogTemplateByGroup(e.data),s='\n                        <div\n                          class="notification-panel__item '.concat(e.isRead?"":"new",'"\n                          data-filter="').concat(e.data.success?"success":"error",'"\n                        >\n                          <div class="row items-center gap-14">\n                            <div class="row w-6 h-6 rounded-50per ').concat(e.data.success?"bg-green":"bg-red",'"></div>\n                            <div class="text text_grey">\n                              ').concat(a<10?"0".concat(a):a,":").concat(i<10?"0".concat(i):i,"\n                            </div>\n                          </div>\n\n                          ").concat(r,"\n                        </div>\n                      ");t.find(".notification-panel__group-".concat(n)).append(s)}))})),e()}else{var s='\n                <div class="column w-100per h-100per items-center justify-center">\n                  <div class="notification-panel__plug text">'.concat(SIHLang.notifications.no_notifications,"</div>\n                  ").concat(Array.isArray(n)?"":'\n                                            <div class="row items-center gap-5">\n                                                <span class="text">'.concat(SIHLang.notifications.missing_notifications,'</span>\n                                                <a id="upload-notification-logs" class="text text_blue hover-opacity-8" href="javascript:void(0)">').concat(SIHLang.notifications.download,"</a>\n                                            </div>\n                                        "),"\n                </div>\n              ");t.append(s),e()}}))}));else{var a='\n          <div class="column w-100per h-100per items-center justify-center">\n            <div class="notification-panel__plug text">'.concat(SIHLang.notifications.no_notifications,"</div>\n          </div>\n        ");t.append(a),e()}}))}))}function setItemsCount(){var e=$J("#sih-notification-panel"),t=e.find(".notification-panel__header").find(".filter"),n=t.find(".filter__item.success").find(".filter__count"),a=t.find(".filter__item.error").find(".filter__count"),i=e.find(".notification-panel__content").find(".notification-panel__item"),r=0,s=0;i.each((function(e,t){switch($J(t).data("filter")){case"success":r+=1;break;case"error":s+=1}})),n.text(r),a.text(s)}function filterAction(){var e=$J("#sih-notification-panel").find(".filter").find(".filter__label"),t=[];e.each((function(n,a){$J(a).find(".filter__input").change((function(){e.each((function(e,n){var a=$J(n).find(".filter__input"),i=a.data("filter");if(a.is(":checked"))t.length&&t.includes(i)||t.push(i);else{var r=t.findIndex((function(e){return e===i}));-1!==r&&t.splice(r,1)}})),t.length||e.find(".filter__input").prop("checked",!0),sortItems(t)}))}))}function sortItems(e){$J("#sih-notification-panel").find(".notification-panel__content").find(".notification-panel__group").each((function(t,n){var a=$J(n),i=a.find(".notification-panel__item"),r=0;i.each((function(t,n){var a=$J(n),i=a.data("filter");e.length&&!e.includes(i)?a.hide():(r++,a.css("display","grid"))})),r?a.css("display","grid"):a.hide()}))}function initReadAllNotification(){var e=$J("#sih-notification-panel"),t=$J(".notification-panel__title"),n=t.find(".notification-panel__read");SihAppGlobal.getLogs().then((function(a){if(a&&a.length)if(IsAllNotificationRead(a).isAllRead)n.length&&n.hide();else{if(n.length)n.css("display","flex").hide().fadeIn();else{var i='\n            <a href="javascript:void(0)" class="notification-panel__read text text_blue fs-12 hover-opacity-8"\n              >'.concat(SIHLang.notifications.mark_read,"</a\n            >\n          ");t.append(i)}e.find(".notification-panel__read").off("click").click((function(){var t=$J(this);SihAppGlobal.readAllNotification().then((function(n){n&&n.length&&(UpdateHeaderNotificationIndicator(),t.hide(),e.find(".notification-panel__item").removeClass("new"))}))}))}else n.length&&n.hide()}))}function manualLoadHistoryLogs(){$J("#upload-notification-logs").off("click").click((function(){clearTimeout(notificationPanel_debounce),notificationPanel_debounce=setTimeout((function(){SihAppGlobal.getUserOrdersHistory(!1).then((function(){renderLogItems().then((function(){UpdateHeaderNotificationIndicator(),setItemsCount(),filterAction(),initReadAllNotification(),manualLoadHistoryLogs()}))}))}),300)}))}var ALARM_NOTIFICATION_INTERVAL=null;function notifications_LoadNotifications(){notifications_loadHtml()}function notifications_UpdateHeaderNotificationIndicator(){var e=$J("#sih-header-notifications"),t=e.find(".sih-header-notifications__indicator");SihAppGlobal.getLogs().then((function(n){if(n&&n.length){var a=notifications_IsAllNotificationRead(n),i=a.isAllRead,r=a.unreadNotification;i?(e.attr("data-sih-unread",!1),t.text("")):(e.attr("data-sih-unread",!0),t.text(r.length<=9?r.length:"9+"))}}))}function notifications_IsAllNotificationRead(e){var t=!0,n=Array.isArray(e)?e.reduce((function(e,n){return n.items.forEach((function(n){n.isRead||(e.push(n),t=!1)})),e}),[]):[];return{isAllRead:t,unreadNotification:n}}var notifications_loadHtml=function(){var e=$J("#global_actions").find(".sih-global-menu__icons");SihAppGlobal.getLogs().then((function(t){var n=0;if(t&&t.length){var a=notifications_IsAllNotificationRead(t),i=a.isAllRead,r=a.unreadNotification;i||(n=r.length)}var s='\n      <a href="javascript:void(0)" id="sih-header-notifications" class="sih-header-notifications sih-global-menu__icon">\n        <span class="sih-header-notifications__inner">\n          <svg width="16" height="20" viewBox="0 0 16 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path\n              d="M8 20C9.1 20 10 19.1 10 18H6C6 19.1 6.89 20 8 20ZM14 14V9C14 5.93 12.36 3.36 9.5 2.68V2C9.5 1.17 8.83 0.5 8 0.5C7.17 0.5 6.5 1.17 6.5 2V2.68C3.63 3.36 2 5.92 2 9V14L0 16V17H16V16L14 14Z"\n              fill="currentColor"\n            />\n          </svg>\n          <span class="sih-header-notifications__indicator">\n            '.concat(0===n?"":n<=9?n:"9+","\n          </span>\n        </span>\n      </a>\n    ");e.find("#sih-header-notifications").length||e.append(s),loadNotificationIndication(),alarmNotification(),LoadNotificationPanel()}))};function loadNotificationIndication(){SihAppGlobal.getLogs().then((function(e){e&&e.length&&(notifications_IsAllNotificationRead(e).isAllRead||$J("#sih-header-notifications").attr("data-sih-unread",!0))}))}function alarmNotification(){clearInterval(ALARM_NOTIFICATION_INTERVAL),ALARM_NOTIFICATION_INTERVAL=setInterval((function(){notifications_UpdateHeaderNotificationIndicator()}),1e4)}var RenderNotificationPopup=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(e.status&&e.text){var a=$J("body"),i=$J('\n    <div id="sih-notification-popup" class="sih-global sih-notification-popup '.concat(e.status,'"></div>\n  ')),r=a.find("#sih-notification-popup"),s=r.find(".sih-notification-popup__content").length+1;if("error"===e.status){var o=$J('\n        <div class="sih-notification-popup__content" data-id="'.concat(s,'">\n          <span class="text">').concat(SIHLang.notification_popup.error,": ").concat(getLocalization(e.text),"</span>\n        </div>\n      "));r.length?r.append(o):i.append(o),setTimeout((function(){o.fadeOut(300,(function(){o.remove(),n()}))}),t*s)}if(r.length)r.fadeIn(300,(function(){}));else a.append(i),a.find("#sih-notification-popup").fadeIn(300,(function(){}))}},getLocalization=function(e){return"rate limit exceeded"===e.toLowerCase()?SIHLang.notification_popup.errors.rate_limit_exceeded:e};function site_steam_refill_service_typeof(e){return site_steam_refill_service_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},site_steam_refill_service_typeof(e)}function site_steam_refill_service_defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,site_steam_refill_service_toPropertyKey(a.key),a)}}function site_steam_refill_service_createClass(e,t,n){return t&&site_steam_refill_service_defineProperties(e.prototype,t),n&&site_steam_refill_service_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function site_steam_refill_service_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function site_steam_refill_service_defineProperty(e,t,n){return(t=site_steam_refill_service_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function site_steam_refill_service_toPropertyKey(e){var t=site_steam_refill_service_toPrimitive(e,"string");return"symbol"==site_steam_refill_service_typeof(t)?t:t+""}function site_steam_refill_service_toPrimitive(e,t){if("object"!=site_steam_refill_service_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=site_steam_refill_service_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var site_steam_refill_service_SiteSteamRefillService=site_steam_refill_service_createClass((function e(){site_steam_refill_service_classCallCheck(this,e),site_steam_refill_service_defineProperty(this,"checkSteamLogin",(function(e){return new Promise((function(t,n){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_STEAM_REFILL_CHECK",data:{steamUsername:e}},(function(e){var a;if(e.success&&"success"===(null==e||null===(a=e.response)||void 0===a?void 0:a.status))t(e);else{var i,r={status:"error",text:(null==e||null===(i=e.response)||void 0===i?void 0:i.message)||e.error};RenderNotificationPopup(r,5e3,(function(){})),n(e)}}))}))})),site_steam_refill_service_defineProperty(this,"initSteamRefill",(function(e){var t=e.steamUsername,n=e.amount,a=e.netAmount,i=e.currency,r=void 0===i?"RUB":i,s=e.transactionId;return new Promise((function(e,i){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_STEAM_REFILL_PAY",data:{steamUsername:t,amount:n,netAmount:a,currency:r,transactionId:s}},(function(t){if(t.success)e(t);else{var n={status:"error",text:t.error};RenderNotificationPopup(n,5e3,(function(){})),i(t)}}))}))}))}));const site_steam_refill_service=new site_steam_refill_service_SiteSteamRefillService;function refillModal_typeof(e){return refillModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},refillModal_typeof(e)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,a){var r=t&&t.prototype instanceof g?t:g,s=Object.create(r.prototype),o=new T(a||[]);return i(s,"_invoke",{value:A(e,n,o)}),s}function _(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var u="suspendedStart",m="suspendedYield",h="executing",p="completed",f={};function g(){}function b(){}function v(){}var y={};c(y,s,(function(){return this}));var k=Object.getPrototypeOf,S=k&&k(k(L([])));S&&S!==n&&a.call(S,s)&&(y=S);var I=v.prototype=g.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,r,s,o){var l=_(e[i],e,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==refillModal_typeof(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,o)}),(function(e){n("throw",e,s,o)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,o)}))}o(l.arg)}var r;i(this,"_invoke",{value:function(e,a){function i(){return new t((function(t,i){n(e,a,t,i)}))}return r=r?r.then(i,i):i()}})}function A(t,n,a){var i=u;return function(r,s){if(i===h)throw Error("Generator is already running");if(i===p){if("throw"===r)throw s;return{value:e,done:!0}}for(a.method=r,a.arg=s;;){var o=a.delegate;if(o){var l=x(o,a);if(l){if(l===f)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===u)throw i=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=h;var c=_(t,n,a);if("normal"===c.type){if(i=a.done?p:m,c.arg===f)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(i=p,a.method="throw",a.arg=c.arg)}}}function x(t,n){var a=n.method,i=t.iterator[a];if(i===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),f;var r=_(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,f;var s=r.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function n(){for(;++i<t.length;)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(refillModal_typeof(t)+" is not iterable")}return b.prototype=v,i(I,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},C(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,a,i,r){void 0===r&&(r=Promise);var s=new w(d(e,n,a,i),r);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(I),c(I,l,"Generator"),c(I,s,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(a,i){return o.type="throw",o.arg=t,n.next=a,i&&(n.method="next",n.arg=e),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),c=a.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=e,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:L(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),f}},t}function asyncGeneratorStep(e,t,n,a,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function s(e){asyncGeneratorStep(r,a,i,s,o,"next",e)}function o(e){asyncGeneratorStep(r,a,i,s,o,"throw",e)}s(void 0)}))}}var refillModal_debounce=null,MIN_INPUT_REFILL_COUNT=50,MAX_INPUT_REFILL_COUNT=4e4,refillModal_RenderSteamRefillModal=function(){refillModal_loadHtml(),listenerActions()},refillModal_loadHtml=function(){var e,t=$J("body"),n=GetTOSTemplate("steam-refill"),a=$J("#application_config").attr("data-userinfo"),i=a?null===(e=JSON.parse(a))||void 0===e?void 0:e.account_name:null,r=$J('\n    <div id="sih-steam-refill" class="sih-steam-refill">\n      <div class="sih-steam-refill__fade"></div>\n      <div class="sih-modal sih-global sih-steam-refill-modal">\n        <div class="sih-modal__close"></div>\n        <div class="sih-modal__inner sih-modal__column">\n          <div class="sih-steam-refill__header">\n            <div class="column gap-8">\n              <span class="text fs-20">Steam</span>\n              <div class="row gap-7 items-center">\n                <span class="text text_light-grey fs-14">Пополнение баланса аккаунта для РФ и Стран СНГ</span>\n\n                <div\n                  class="sih-steam-refill__tooltip-icon row items-center"\n                  title="Азербайджан, Армения, Беларусь, Казахстан, Киргизия, Молдова, Таджикистан, Узбекистан, Туркменистан"\n                >\n                  <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path\n                      d="M6.3 4.9H7.7V3.5H6.3V4.9ZM7 12.6C3.913 12.6 1.4 10.087 1.4 7C1.4 3.913 3.913 1.4 7 1.4C10.087 1.4 12.6 3.913 12.6 7C12.6 10.087 10.087 12.6 7 12.6ZM7 0C6.08075 0 5.17049 0.18106 4.32122 0.532843C3.47194 0.884626 2.70026 1.40024 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C2.70026 12.5998 3.47194 13.1154 4.32122 13.4672C5.17049 13.8189 6.08075 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 6.08075 13.8189 5.17049 13.4672 4.32122C13.1154 3.47194 12.5998 2.70026 11.9497 2.05025C11.2997 1.40024 10.5281 0.884626 9.67878 0.532843C8.82951 0.18106 7.91925 0 7 0V0ZM6.3 10.5H7.7V6.3H6.3V10.5Z"\n                      fill="currentColor"\n                    />\n                  </svg>\n                </div>\n              </div>\n            </div>\n            <div class="sih-steam-refill__powered"></div>\n          </div>\n          <div class="sih-steam-refill__main">\n            <div class="sih-steam-refill__left-side sih-steam-refill-form">\n              <div class="row gap-20">\n                <div class="sih-steam-refill-form__item-block column gap-8" data-name="refill">\n                  <span class="text fs-14">Сумма пополнения</span>\n                  <div class="sih-steam-refill-form__input_outer br2-grey rounded-8 bg-black-100 py-8 px-12 box-border">\n                    <input\n                      type="text"\n                      id="sih-steam-refill-input"\n                      class="sih-steam-refill-form__input text text_white-100 fs-16 lh-21"\n                      placeholder="300"\n                      pattern="/d*"\n                      maxlength="7"\n                      autocomplete="off"\n                    />\n                    <div class="row gap-7 items-center">\n                      <label for="sih-steam-refill-input" class="text text_grey fs-14 lh-19">₽</label>\n\n                      <div class="sih-steam-refill-form__clear">\n                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                          <path\n                            d="M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z"\n                            fill="currentColor"\n                          />\n                        </svg>\n                      </div>\n                    </div>\n                  </div>\n                  <div class="sih-steam-refill-form__refill-alert-block sih-alert-block">\n                    <span class="sih-alert-block__message"></span>\n                  </div>\n\n                  <div class="sih-steam-refill-form__presets sih-refill-presets">\n                    <div class="sih-refill-presets__item" data-value="500">500 ₽</div>\n                    <div class="sih-refill-presets__item" data-value="1000">1000 ₽</div>\n                    <div class="sih-refill-presets__item" data-value="1500">1500 ₽</div>\n                    <div class="sih-refill-presets__item" data-value="2000">2000 ₽</div>\n                    <div class="sih-refill-presets__item" data-value="5000">5000 ₽</div>\n                  </div>\n                </div>\n                <div class="sih-steam-refill-form__item-block column gap-8" data-name="login">\n                  <div class="row gap-7 items-center">\n                    <span class="text fs-14">Логин Steam</span>\n                    <div\n                      class="sih-steam-refill__tooltip-icon row items-center"\n                      title=\'Логин можно найти в разделе "Об аккаунте" нажав на выпадающее меню рядом с Вашим никнеймов в правом верхнем углу экрана на странице Steam\'\n                    >\n                      <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path\n                          d="M6.3 4.9H7.7V3.5H6.3V4.9ZM7 12.6C3.913 12.6 1.4 10.087 1.4 7C1.4 3.913 3.913 1.4 7 1.4C10.087 1.4 12.6 3.913 12.6 7C12.6 10.087 10.087 12.6 7 12.6ZM7 0C6.08075 0 5.17049 0.18106 4.32122 0.532843C3.47194 0.884626 2.70026 1.40024 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C2.70026 12.5998 3.47194 13.1154 4.32122 13.4672C5.17049 13.8189 6.08075 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 6.08075 13.8189 5.17049 13.4672 4.32122C13.1154 3.47194 12.5998 2.70026 11.9497 2.05025C11.2997 1.40024 10.5281 0.884626 9.67878 0.532843C8.82951 0.18106 7.91925 0 7 0V0ZM6.3 10.5H7.7V6.3H6.3V10.5Z"\n                          fill="currentColor"\n                        />\n                      </svg>\n                    </div>\n                  </div>\n\n                  <div class="sih-steam-refill-form__input_outer br2-grey rounded-8 bg-black-100 py-8 px-12 box-border">\n                    <input\n                      type="text"\n                      id="sih-steam-refill-login"\n                      class="sih-steam-refill-form__input text text_white-100 fs-16 lh-21"\n                      placeholder="Логин"\n                      autocomplete="off"\n                    />\n                    <div class="sih-steam-refill-form__clear">\n                      <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path\n                          d="M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z"\n                          fill="currentColor"\n                        />\n                      </svg>\n                    </div>\n                  </div>\n                  <div class="sih-steam-refill-form__refill-alert-block sih-alert-block">\n                    <span class="sih-alert-block__message"></span>\n                  </div>\n                  '.concat(i?'<div class="sih-steam-refill-form__presets sih-refill-presets">\n                    <div class="sih-refill-presets__item" data-value="'.concat(i,'">Мой логин</div>\n                  </div>'):"",'\n                </div>\n              </div>\n            </div>\n\n            <div class="sih-steam-refill__right-side sih-steam-refill-payment">\n              <span class="text fs-24 lh-33 bold">К оплате</span>\n              <div class="column gap-7">\n                <div class="row justify-between">\n                  <span class="text fs-16 lh-22">Сумма зачисления</span>\n                  <span id="sih-steam-refill-amount" class="text fs-16 lh-22" data-value="0">0 ₽</span>\n                </div>\n                <div class="row justify-between">\n                  <span class="text fs-16 lh-22">Комиссия</span>\n                  <span id="sih-steam-refill-commission" class="text fs-16 lh-22" data-value="0">0 ₽</span>\n                </div>\n                <div class="row justify-between">\n                  <span class="text fs-16 lh-22">Итого</span>\n                  <span id="sih-steam-refill-total" class="text fs-16 lh-22" data-value="0">0 ₽</span>\n                </div>\n                <div class="row justify-between">\n                  <div class="row items-center gap-7">\n                    <span class="text fs-16 lh-22">Кешбэк на SIH баланс</span>\n                    <div\n                      class="sih-steam-refill__tooltip-icon"\n                      title="После каждого успешного пополнения, Вам будет начислен бонус реальными средствами на баланс SIH, который Вы сможете использовать для покупки предметов на SIH.Market или оплаты подписки SIH.Black."\n                    >\n                      <div class="row items-center">\n                        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                          <path\n                            d="M6.3 4.9H7.7V3.5H6.3V4.9ZM7 12.6C3.913 12.6 1.4 10.087 1.4 7C1.4 3.913 3.913 1.4 7 1.4C10.087 1.4 12.6 3.913 12.6 7C12.6 10.087 10.087 12.6 7 12.6ZM7 0C6.08075 0 5.17049 0.18106 4.32122 0.532843C3.47194 0.884626 2.70026 1.40024 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C2.70026 12.5998 3.47194 13.1154 4.32122 13.4672C5.17049 13.8189 6.08075 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 6.08075 13.8189 5.17049 13.4672 4.32122C13.1154 3.47194 12.5998 2.70026 11.9497 2.05025C11.2997 1.40024 10.5281 0.884626 9.67878 0.532843C8.82951 0.18106 7.91925 0 7 0V0ZM6.3 10.5H7.7V6.3H6.3V10.5Z"\n                            fill="currentColor"\n                          />\n                        </svg>\n                      </div>\n                    </div>\n                  </div>\n\n                  <span id="sih-steam-refill-cashback" class="text text_green fs-16 lh-22" data-value="0">0 ₽</span>\n                </div>\n\n                <div class="row items-center gap-7 mt-10">\n                  <span class="text fs-16 lh-22">F.A.Q</span>\n                  <div class="sih-steam-refill-payment__important" title="">\n                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                      <path d="M12 2L1 21H23M12 6L19.53 19H4.47M11 10V14H13V10M11 16V18H13V16" fill="#FFFF00" />\n                    </svg>\n                  </div>\n                </div>\n              </div>\n\n              <div id="sih-steam-refill-pay" class="sih-steam-refill-pay inactive">Оплатить</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  '));r.find(".sih-steam-refill__tooltip-icon").tooltip({position:{my:"left top",at:"left+10 bottom"},classes:{"ui-tooltip":"sih-steam-refill__tooltip"}}),r.find(".sih-steam-refill-payment__important").tooltip({content:$J('\n      <div class="column">\n        <ul>\n          <li>\n            Как правило, пополнение происходит мгновенно или в течение нескольких минут, однако в редких случаях процесс\n            пополнения может затянуться на час.\n          </li>\n          <li>\n            Если Вы НИКОГДА ранее не пополняли баланс аккаунта любыми способами, то в некоторых случаях это может\n            привести к смене региона на KZ\n          </li>\n        </ul>\n      </div>\n    '),position:{my:"left top",at:"left+10 bottom"},classes:{"ui-tooltip":"sih-global sih-steam-refill__tooltip"}}),r.find("#sih-steam-refill-pay").before(n),t.find(".sih-steam-refill").length||t.append(r)},listenerActions=function(){closeModalAction(),changeRefillAmountInputAction(),changeLoginInputAction(),clearInputAction(),setPresetAction(),changeTOSAction(),payAction()},closeModalAction=function(){var e=$J("#sih-steam-refill");e.on("click",".sih-steam-refill__fade, .sih-modal__close",(function(){e.hide().remove()}))},changeRefillAmountInputAction=function(){var e=$J("#sih-steam-refill").find("#sih-steam-refill-input");e.on("keypress",(function(e){var t=e.which||e.keyCode;(t<48||t>57)&&e.preventDefault()})),e.on("paste",(function(t){var n=(t.originalEvent||t).clipboardData.getData("text/plain");n=n.replace(/[^0-9]/g,""),e.val(MAX_INPUT_REFILL_COUNT>=n?n:MAX_INPUT_REFILL_COUNT),t.preventDefault()})),e.on("focusout",(function(t){var n=t.target,a=$J(n).val();a=a.replace(/[^0-9]/g,""),validateRefillInput(e,a),e.val(MAX_INPUT_REFILL_COUNT>=a?a:MAX_INPUT_REFILL_COUNT),updatePaymentInfo()}))},changeLoginInputAction=function(){var e=$J("#sih-steam-refill").find("#sih-steam-refill-login");e.on("paste",(function(t){var n=(t.originalEvent||t).clipboardData.getData("text/plain");n=n.replace(/[^a-zA-Z0-9._\- ]/g,""),e.val(n),t.preventDefault()})),e.on("focusout",(function(t){var n=t.target,a=$J(n).val();validateLoginInput(e,a)}))},clearInputAction=function(){$J("#sih-steam-refill").find(".sih-steam-refill-form__clear").each((function(e,t){var n=$J(t);n.off("click").click((function(){n.closest(".sih-steam-refill-form__input_outer").find(".sih-steam-refill-form__input").val(""),updatePaymentInfo()}))}))},setPresetAction=function(){$J("#sih-steam-refill").find(".sih-refill-presets__item").each((function(e,t){var n=$J(t);n.off("click").click((function(e){var t=n.attr("data-value"),a=n.closest(".sih-steam-refill-form__item-block"),i=a.find(".sih-steam-refill-form__input");i.val(t),"refill"===a.attr("data-name")?(validateRefillInput(i,t),updatePaymentInfo()):validateLoginInput(i,t)}))}))},changeTOSAction=function(){var e=$J("#sih-steam-refill"),t=e.find("#sih-tos-steam-refill"),n=e.find("#sih-steam-refill-pay");t.off("change").change((function(e){var a=t.is(":checked");n.toggleClass("inactive",!a)}))},payAction=function(){var e=$J("#sih-steam-refill"),t=e.find("#sih-steam-refill-pay");t.off("click").click((function(n){clearTimeout(refillModal_debounce),refillModal_debounce=setTimeout(_asyncToGenerator(_regeneratorRuntime().mark((function n(){var a,i,r,s,o,l,c,d,_,u,m,h;return _regeneratorRuntime().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a=e.find("#sih-steam-refill-input"),i=e.find("#sih-steam-refill-login"),r=e.find("#sih-steam-refill-total"),s=+a.val(),o=i.val(),l=+r.attr("data-value"),c=validateRefillInput(a,s),d=validateLoginInput(i,o),!c&&!d){n.next=11;break}return n.abrupt("return");case 11:return t.addClass("animated"),n.next=14,SiteSteamRefillService.checkSteamLogin(o);case 14:return _=n.sent,u=_.response.transactionId,n.next=18,SiteSteamRefillService.initSteamRefill({steamUsername:o,amount:l,netAmount:s,transactionId:u});case 18:m=n.sent,h=m.response.payUrl,isPopupBlocked()?alert("Всплывающие окна в вашем браузере - заблокированы. Пожалуйста , включите их, чтобы продолжить."):window.open(h,"_blank"),t.removeClass("animated"),n.next=28;break;case 24:n.prev=24,n.t0=n.catch(0),n.t0,t.removeClass("animated");case 28:case"end":return n.stop()}}),n,null,[[0,24]])}))),300)}))};function isPopupBlocked(){var e=window.open("","_blank");return!(e&&!e.closed&&void 0!==e.closed)||(e.close(),!1)}var validateRefillInput=function(e,t){var n,a=e.closest(".sih-steam-refill-form__item-block").find(".sih-alert-block"),i=a.find(".sih-alert-block__message");if(t<MIN_INPUT_REFILL_COUNT){var r=CurrencyService.getPriceFromCurrency(MIN_INPUT_REFILL_COUNT,5,5).text;n="Минимальная сумма пополнения ".concat(r),a.addClass("active"),i.text(n)}else if(t>MIN_INPUT_REFILL_COUNT&&t>MAX_INPUT_REFILL_COUNT){var s=CurrencyService.getPriceFromCurrency(MAX_INPUT_REFILL_COUNT,5,5).text;n="Максимальная сумма пополнения ".concat(s),a.addClass("active"),i.text(n)}else a.removeClass("active"),i.text("");return n},validateLoginInput=function(e,t){var n,a=e.closest(".sih-steam-refill-form__item-block").find(".sih-alert-block"),i=a.find(".sih-alert-block__message");t||(n="Некорректный логин Steam"),(t.length<3||t.length>32)&&(n="Некорректный логин Steam");return/^[a-zA-Z0-9._\- ]+$/.test(t)||(n="Некорректный логин Steam"),n?(a.addClass("active"),i.text(n)):(a.removeClass("active"),i.text("")),n},updatePaymentInfo=function(){var e=$J("#sih-steam-refill"),t=e.find("#sih-steam-refill-input"),n=e.find("#sih-steam-refill-amount"),a=e.find("#sih-steam-refill-commission"),i=e.find("#sih-steam-refill-total"),r=e.find("#sih-steam-refill-cashback"),s=+t.val(),o=.06*s,l=s+o,c=.01*s,d=CurrencyService.getPriceFromCurrency(s,5,5).text,_=CurrencyService.getPriceFromCurrency(o,5,5).text,u=CurrencyService.getPriceFromCurrency(l,5,5).text,m=CurrencyService.getPriceFromCurrency(c,5,5).text;n.attr("data-value",s).text(d),a.attr("data-value",o).text(_),i.attr("data-value",l).text(u),r.attr("data-value",c).text(m)};function successRefillModal_typeof(e){return successRefillModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},successRefillModal_typeof(e)}function successRefillModal_regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */successRefillModal_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,a){var r=t&&t.prototype instanceof g?t:g,s=Object.create(r.prototype),o=new T(a||[]);return i(s,"_invoke",{value:A(e,n,o)}),s}function _(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var u="suspendedStart",m="suspendedYield",h="executing",p="completed",f={};function g(){}function b(){}function v(){}var y={};c(y,s,(function(){return this}));var k=Object.getPrototypeOf,S=k&&k(k(L([])));S&&S!==n&&a.call(S,s)&&(y=S);var I=v.prototype=g.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,r,s,o){var l=_(e[i],e,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==successRefillModal_typeof(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,o)}),(function(e){n("throw",e,s,o)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,o)}))}o(l.arg)}var r;i(this,"_invoke",{value:function(e,a){function i(){return new t((function(t,i){n(e,a,t,i)}))}return r=r?r.then(i,i):i()}})}function A(t,n,a){var i=u;return function(r,s){if(i===h)throw Error("Generator is already running");if(i===p){if("throw"===r)throw s;return{value:e,done:!0}}for(a.method=r,a.arg=s;;){var o=a.delegate;if(o){var l=x(o,a);if(l){if(l===f)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===u)throw i=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=h;var c=_(t,n,a);if("normal"===c.type){if(i=a.done?p:m,c.arg===f)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(i=p,a.method="throw",a.arg=c.arg)}}}function x(t,n){var a=n.method,i=t.iterator[a];if(i===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),f;var r=_(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,f;var s=r.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function n(){for(;++i<t.length;)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(successRefillModal_typeof(t)+" is not iterable")}return b.prototype=v,i(I,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},C(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,a,i,r){void 0===r&&(r=Promise);var s=new w(d(e,n,a,i),r);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(I),c(I,l,"Generator"),c(I,s,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(a,i){return o.type="throw",o.arg=t,n.next=a,i&&(n.method="next",n.arg=e),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),c=a.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=e,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:L(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),f}},t}function successRefillModal_asyncGeneratorStep(e,t,n,a,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,i)}function successRefillModal_asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function s(e){successRefillModal_asyncGeneratorStep(r,a,i,s,o,"next",e)}function o(e){successRefillModal_asyncGeneratorStep(r,a,i,s,o,"throw",e)}s(void 0)}))}}var successRefillModal_RenderSuccessSteamRefillModal=null,_ref,successRefillModal_loadHtml=function(e){var t=$J("body"),n=e/1e3,a=CurrencyService.getPriceFromCurrency(n,1,1,!1,3).text,i=$J('\n    <div id="sih-success-steam-refill" class="sih-success-steam-refill">\n      <div class="sih-success-steam-refill__fade"></div>\n      <div class="sih-modal sih-global sih-success-steam-refill-modal">\n        <div class="sih-modal__close"></div>\n        <div class="sih-modal__inner sih-modal__column">\n          <div class="sih-success-steam-refill__header">\n            <span class="text fs-32 bold">Успешная оплата Steam</span>\n          </div>\n          <div class="sih-success-steam-refill__main">\n            <span class="text fs-16 lh-23">Ваш платёж принят в обработку. Пожалуйста ожидайте.</span>\n            <div class="mt-24 column items-center gap-16">\n              <span class="text fs-16 lh-23">А так же Вам начислен кешбэк на баланc SIH.</span>\n\n              <div class="row justify-center gap-6">\n                <span class="text text_green fs-32 lh-32">+</span>\n\n                <svg width="32" height="32" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n                  <path\n                    fill-rule="evenodd"\n                    clip-rule="evenodd"\n                    d="M6.5 12C9.81371 12 12.5 9.31371 12.5 6C12.5 2.68629 9.81371 0 6.5 0C3.18629 0 0.5 2.68629 0.5 6C0.5 9.31371 3.18629 12 6.5 12ZM11.1008 5.21448H9.39789V6.33261H11.155C10.998 8.56154 9.27577 10.3585 7.08066 10.6309V9.49853C7.3568 9.45718 7.60984 9.38161 7.83979 9.27182C8.20868 9.09254 8.49526 8.84407 8.69953 8.5264C8.90379 8.20873 9.00592 7.83917 9.00592 7.41771C9.00592 6.93649 8.8794 6.5512 8.62636 6.26184C8.37636 5.96933 7.96631 5.73816 7.3962 5.56832L6.21177 5.21448C5.89775 5.12012 5.66757 5.0069 5.52123 4.8748C5.37794 4.7427 5.3063 4.58386 5.3063 4.39829C5.3063 4.2316 5.35813 4.0822 5.46178 3.9501C5.56544 3.81486 5.70568 3.71106 5.88251 3.63872C6.05933 3.56324 6.25903 3.52707 6.48158 3.53021C6.71328 3.5365 6.92365 3.58683 7.11267 3.68118C7.30169 3.77554 7.4587 3.90764 7.58369 4.07748C7.70869 4.24732 7.79253 4.4439 7.83521 4.66721L8.96477 4.45491C8.87026 4.03974 8.7102 3.68433 8.48459 3.38868C8.26204 3.09303 7.98155 2.86657 7.64315 2.70931C7.46847 2.6274 7.28097 2.56639 7.08066 2.52629V1.3691C9.12497 1.62283 10.7592 3.19876 11.1008 5.21448ZM5.97854 1.36214V2.50341C5.72582 2.54122 5.49564 2.60986 5.28801 2.70931C4.94655 2.86972 4.68131 3.10089 4.49229 3.40283C4.30632 3.70163 4.21333 4.05232 4.21333 4.45491C4.21333 5.3167 4.67521 5.89542 5.59898 6.19107L7.18584 6.7006C7.44193 6.78237 7.6279 6.88617 7.74375 7.01198C7.8596 7.13464 7.91753 7.29505 7.91753 7.4932C7.91753 7.77627 7.79558 8.01058 7.55168 8.19615C7.30779 8.37858 6.99682 8.46979 6.61877 8.46979C6.22549 8.46979 5.88708 8.35656 5.60355 8.1301C5.32307 7.9005 5.14014 7.59227 5.05478 7.20541L3.96639 7.38469C4.03041 7.82502 4.17827 8.20559 4.40998 8.5264C4.64473 8.84721 4.94503 9.09569 5.31087 9.27182C5.51782 9.37145 5.74038 9.44291 5.97854 9.48618V10.6379C3.75526 10.3907 2.00337 8.58154 1.845 6.33261H3.60211V5.21448H1.89916C2.24413 3.17934 3.90664 1.5925 5.97854 1.36214Z"\n                    fill="#3dc67d"\n                  />\n                </svg>\n\n                <span class="text text_green fs-32 lh-32 text-center">'.concat(a,'</span>\n              </div>\n            </div>\n            <div class="sih-success-steam-refill__preloader"></div>\n            <a href="https://sih.app/" target="_blank" class="mt-52 text text_blue fs-16 lh-16 hover-opacity-8"\n              >Воспользоваться балансом SIH.</a\n            >\n          </div>\n          <div class="sih-success-steam-refill__close-btn">Закрыть</div>\n        </div>\n      </div>\n    </div>\n  '));t.find(".sih-success-steam-refill").length||t.append(i)},successRefillModal_listenerActions=function(){successRefillModal_closeModalAction()},successRefillModal_closeModalAction=function(){var e=$J("#sih-success-steam-refill");e.on("click",".sih-success-steam-refill__fade, .sih-modal__close, .sih-success-steam-refill__close-btn",(function(){e.hide().remove()}))},renderUserInfo=null,_ref2;function steamRefill_typeof(e){return steamRefill_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},steamRefill_typeof(e)}function steamRefill_regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */steamRefill_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,a){var r=t&&t.prototype instanceof g?t:g,s=Object.create(r.prototype),o=new T(a||[]);return i(s,"_invoke",{value:A(e,n,o)}),s}function _(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var u="suspendedStart",m="suspendedYield",h="executing",p="completed",f={};function g(){}function b(){}function v(){}var y={};c(y,s,(function(){return this}));var k=Object.getPrototypeOf,S=k&&k(k(L([])));S&&S!==n&&a.call(S,s)&&(y=S);var I=v.prototype=g.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,r,s,o){var l=_(e[i],e,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==steamRefill_typeof(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,o)}),(function(e){n("throw",e,s,o)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,o)}))}o(l.arg)}var r;i(this,"_invoke",{value:function(e,a){function i(){return new t((function(t,i){n(e,a,t,i)}))}return r=r?r.then(i,i):i()}})}function A(t,n,a){var i=u;return function(r,s){if(i===h)throw Error("Generator is already running");if(i===p){if("throw"===r)throw s;return{value:e,done:!0}}for(a.method=r,a.arg=s;;){var o=a.delegate;if(o){var l=x(o,a);if(l){if(l===f)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===u)throw i=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=h;var c=_(t,n,a);if("normal"===c.type){if(i=a.done?p:m,c.arg===f)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(i=p,a.method="throw",a.arg=c.arg)}}}function x(t,n){var a=n.method,i=t.iterator[a];if(i===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),f;var r=_(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,f;var s=r.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function n(){for(;++i<t.length;)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(steamRefill_typeof(t)+" is not iterable")}return b.prototype=v,i(I,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},C(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,a,i,r){void 0===r&&(r=Promise);var s=new w(d(e,n,a,i),r);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(I),c(I,l,"Generator"),c(I,s,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(a,i){return o.type="throw",o.arg=t,n.next=a,i&&(n.method="next",n.arg=e),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),c=a.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=e,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:L(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),f}},t}function steamRefill_asyncGeneratorStep(e,t,n,a,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,i)}function steamRefill_asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function s(e){steamRefill_asyncGeneratorStep(r,a,i,s,o,"next",e)}function o(e){steamRefill_asyncGeneratorStep(r,a,i,s,o,"throw",e)}s(void 0)}))}}var AVAILABLE_COUNTRY_CODE=null,steamRefill_RenderSteamRefillBtn=function(){(steamRefill_loadHtml(),steamRefill_listenerActions(),window.disabledSteamRefillCashBackModal)||chrome.runtime.connect(SIHID,{name:"STEAM_REFILL_CONNECTION"}).onMessage.addListener(function(){var e=steamRefill_asyncToGenerator(steamRefill_regeneratorRuntime().mark((function e(t){return steamRefill_regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RenderSuccessSteamRefillModal(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},steamRefill_loadHtml=function(){var e,t=$J("#global_header .content"),n=$J("#application_config").attr("data-userinfo"),a=n?null===(e=JSON.parse(n))||void 0===e?void 0:e.country_code:null;if(!disabledSteamRefillHeaderButton&&a&&AVAILABLE_COUNTRY_CODE.includes(a)){var i=$J('\n      <div class="sih-global sih-steam-refill-btn">\n        <div class="row gap-6 items-center">\n          <div class="sih-steam-refill-btn__icon row items-center">\n            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path\n                fill-rule="evenodd"\n                clip-rule="evenodd"\n                d="M14.4336 12.7539C15.418 11.4258 16 9.78125 16 8C16 3.58203 12.418 0 8 0C3.58203 0 0 3.58203 0 8C0 12.418 3.58203 16 8 16C10.6367 16 12.9766 14.7227 14.4336 12.7539ZM7 4C7 3.44727 7.44922 3 8 3C8.55078 3 9 3.44727 9 4V7H12C12.3086 7 12.5859 7.14062 12.7695 7.36133C12.9141 7.53516 13 7.75781 13 8C13 8.55273 12.5508 9 12 9H9V12C9 12.5527 8.55078 13 8 13C7.44922 13 7 12.5527 7 12V9H4C3.44922 9 3 8.55273 3 8C3 7.44727 3.44922 7 4 7H7V4Z"\n                fill="currentColor"\n              />\n            </svg>\n          </div>\n\n          <span class="text text_white fs-14 lh-14">Пополнить Steam баланс</span>\n        </div>\n      </div>\n    ');t.find(".sih-steam-refill-btn").length||t.append(i)}},steamRefill_listenerActions=function(){$J("#global_header .content").find(".sih-steam-refill-btn").off("click").click((function(){RenderSteamRefillModal()}))};function actionMenu_toConsumableArray(e){return actionMenu_arrayWithoutHoles(e)||actionMenu_iterableToArray(e)||actionMenu_unsupportedIterableToArray(e)||actionMenu_nonIterableSpread()}function actionMenu_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function actionMenu_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return actionMenu_arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?actionMenu_arrayLikeToArray(e,t):void 0}}function actionMenu_iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function actionMenu_arrayWithoutHoles(e){if(Array.isArray(e))return actionMenu_arrayLikeToArray(e)}function actionMenu_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}var HEADER_ORDERS_TIMER_INTERVAL=null,HEADER_ORDERS_TIMESTAMPS=null,actionMenu_TEN_MINUTES=6e5;function LoadActionMenu(){sih_app_account&&(LoadAccountDropDown(),actionMenu_loadHtml().then((function(){renderCartCount(),renderActiveOrdersCount()})),RenderModals(),LoadNotifications(),LoadRefillSIHBalance(),RenderSteamRefillBtn(),ChangePendingTooltip())}function actionMenu_loadHtml(){return new Promise((function(e){var t=$J("#global_header");t.find("#global_actions").css("display","flex");t.find(".sih-global-menu").length||(t.find("#global_action_menu").before('\n      <div class="sih-global sih-global-menu">\n        <div class="sih-global-menu__icons sih-global-menu__row gap-5">\n          <div id="sih-header-timer" class="sih-global-menu__row">\n            <div class="sih-global-menu__spinner"></div>\n            <div id="sih-header-timer__count" class="pl-5 sih-text"></div>\n          </div>\n          <a href="javascript:void(0)" id="sih-header-orders" class="sih-global-menu__icon">\n            <svg width="20" height="20" viewBox="0 0 22 21" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path\n                d="M2 17.4286C2 18.0714 2.25 18.7143 2.75 19.2286C3.25 19.7429 3.875 20 4.5 20V6C3.875 6 3.25 6.25714 2.75 6.77143C2.25 7.28571 2 7.92857 2 8.57143V17.4286ZM13.875 6H10.125C10.125 5.48571 10.25 4.82857 10.625 4.44286C11 4.05714 11.375 3.92857 12 3.92857C12.5 3.92857 13 4.05714 13.375 4.44286C13.625 4.82857 13.875 5.48571 13.875 6ZM5.75 6V20H18.25V6H15.75C15.75 4.97143 15.375 3.92857 14.625 3.15714C13.875 2.38571 13 2 12 2C11 2 10.125 2.38571 9.375 3.15714C8.625 3.92857 8.25 4.97143 8.25 6H5.75ZM19.5 20C20.125 20 20.75 19.7429 21.25 19.2286C21.75 18.7143 22 18.0714 22 17.4286V8.57143C22 7.92857 21.75 7.28571 21.25 6.77143C20.75 6.25714 20.125 6 19.5 6V20Z"\n                fill="currentColor"\n              />\n            </svg>\n          </a>\n          <a href="javascript:void(0)" id="sih-header-cart" class="sih-global-menu__icon">\n            <svg width="20" height="20" viewBox="0 0 22 19" xmlns="http://www.w3.org/2000/svg">\n              <path\n                fill-rule="evenodd"\n                clip-rule="evenodd"\n                d="M16.21 7H21C21.55 7 22 7.45 22 8L21.97 8.27L19.43 17.54C19.19 18.38 18.42 19 17.5 19H4.5C3.58 19 2.81 18.38 2.58 17.54L0.04 8.27C0 8.18 0 8.09 0 8C0 7.45 0.45 7 1 7H5.79L10.17 0.45C10.36 0.16 10.68 0 11 0C11.32 0 11.64 0.16 11.83 0.44L16.21 7ZM13.8 7L11 2.8L8.2 7H13.8Z"\n                fill="currentColor"\n              />\n            </svg>\n          </a>\n        </div>\n      </div>\n    '),t.find(".sih-global-menu").css("display","flex").hide().fadeIn("slow")),setTimeout((function(){return e()}),300)}))}function changeSteamInstallButton(){return new Promise((function(e){$J("#global_header").find(".header_installsteam_btn").find(".header_installsteam_btn_content").addClass("sih_header_installsteam_btn_content").html("&nbsp;"),setTimeout((function(){e()}),300)}))}function renderCartCount(){var e=$J("#sih-header-cart");SihAppGlobal.getAllBuyStack().then((function(t){var n=SihAppGlobal.getFilterItemsByStatus(t).length;n&&!e.find(".sih-global-menu__counter").length&&(e.append('<span class="sih-global-menu__counter">'.concat(n,"</span>")),e.addClass("active")),e.find(".sih-global-menu__counter").css("display","flex").hide().fadeIn()}))}function renderActiveOrdersCount(){var e=$J("#sih-header-orders");SihAppGlobal.getAllBuyStack().then((function(t){SihAppGlobal.getUserOrdersHistory().then((function(n){var a=getJoinedOrders(t,n),i=SihAppGlobal.getFilterItemsByStatus(a,["new","pending","created","processing","sent"]).length;i&&!e.find(".sih-global-menu__counter").length&&e.append('<span class="sih-global-menu__counter">'.concat(i,"</span>")),i&&(e.find(".sih-global-menu__counter").css("display","flex").hide().fadeIn(),updateHeaderTimer())}))}))}function getJoinedOrders(e,t){return t.success&&!t.tfaNeed&&t.orders.data.length?[].concat(actionMenu_toConsumableArray(e),actionMenu_toConsumableArray(t.orders.data)):e}function actionMenu_ChangeCartCountHeaderMenu(){var e=$J("#sih-header-cart"),t=e.find(".sih-global-menu__counter");sih_app_global_service.getAllBuyStack().then((function(n){var a=sih_app_global_service.getFilterItemsByStatus(n).length;a&&!t.length?(e.append('<span class="sih-global-menu__counter">'.concat(a,"</span>")),e.addClass("active").find(".sih-global-menu__counter").css("display","flex").hide().fadeIn()):a&&t.length?(e.addClass("active"),t.text(a),t.css("display","flex").fadeIn()):!a&&t.length&&(t.css("display","flex").fadeOut(),e.removeClass("active"))}))}function ChangeOrdersCountHeaderMenu(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=$J("#sih-header-orders"),n=t.find(".sih-global-menu__counter"),a=$J("#sih-header-timer");$J(".sih-global-menu");sih_app_global_service.getAllBuyStack().then((function(i){sih_app_global_service.getUserOrdersHistory(e).then((function(e){var r=getJoinedOrders(i,e),s=sih_app_global_service.getFilterItemsByStatus(r,["new","pending","created","processing","sent"]).length;s&&!n.length?(t.append('<span class="sih-global-menu__counter">'.concat(s,"</span>")),t.addClass("active").find(".sih-global-menu__counter").css("display","flex").hide().fadeIn(),updateHeaderTimer()):s&&n.length?(t.addClass("active"),n.text(s),n.is(":visible")||n.css("display","flex").fadeIn(),updateHeaderTimer()):!s&&n.length&&(t.removeClass("active"),n.css("display","flex").fadeOut(),a.css("display","flex").fadeOut())}))}))}function updateHeaderTimer(){var e=$J("#sih-header-orders"),t=e.find(".sih-global-menu__counter"),n=$J("#sih-header-timer"),a=$J("#sih-header-timer__count"),i=$J(".sih-global-menu__spinner");n.is(":visible")||n.css("display","flex").fadeIn(),i.is(":visible")||i.css("display","flex").fadeIn(),e.is(":visible")||e.css("display","flex").fadeIn(),clearInterval(HEADER_ORDERS_TIMER_INTERVAL),HEADER_ORDERS_TIMER_INTERVAL=setInterval((function(){sih_app_global_service.getAllBuyStack().then((function(i){sih_app_global_service.getUserOrdersHistory().then((function(r){var s=getJoinedOrders(i,r),o=sih_app_global_service.getFilterItemsByStatus(s,["new","pending","created","processing","sent"]);if(o.length){var l=o.find((function(e){return e.finishOrderAt})),c=o.map((function(e){return e.createdAt||new Date(e.created_at).getTime()})),d=sih_app_global_service.getFilterItemsByStatus(o,"new");if(d.length&&d.forEach((function(e){new Date(e.created_at).getTime()+actionMenu_TEN_MINUTES-Date.now()<0&&(sih_app_global_service.cancelSihAppOrder(e.id),sih_app_global_service.updateItemLocalHistoryOrders(e.id).then((function(e){e&&e.success&&ChangeOrdersCountHeaderMenu()})))})),l){var _=l.finishOrderAt-Date.now(),u=new Date(_).toISOString().slice(14,19);a.fadeIn().text(u),n.is(":visible")||(n.css("display","flex").fadeIn(),e.css("display","flex").fadeIn())}else JSON.stringify(HEADER_ORDERS_TIMESTAMPS)!==JSON.stringify(c)&&(HEADER_ORDERS_TIMESTAMPS=c,a.fadeOut().text(""),actionMenu_ChangeCartCountHeaderMenu(),ChangeItemCountInItemPage(),ChangeOrdersCountHeaderMenu())}else clearInterval(HEADER_ORDERS_TIMER_INTERVAL),t.css("display","flex").fadeOut(),a.fadeOut().text(""),n.css("display","flex").fadeOut(),e.removeClass("active").css("display","flex").fadeOut(),actionMenu_ChangeCartCountHeaderMenu(),ChangeItemCountInItemPage(),ChangeOrdersCountHeaderMenu()}))}))}),1e3)}var RenderAddToCartButtons=function(e,t){return new Promise((function(n){cartBtn_loadHtml(e,t).then((function(){cartBtn_actionsListener(),n()}))}))},UpdateSihMarketTabBuyStack=function(){var e=$J("#sih-market-listing").find(".sih-market-listing__item");sih_app_global_service.getAllBuyStack().then((function(t){e.each((function(e,n){var a=$J(n),i=a.find(".sih-market-listing__name").text(),r=a.find(".sih-market-listing__cart-info"),s=a.find(".sih-market-listing__cart-price"),o=a.find(".sih-market-listing__sih-price").data("itemid"),l=t.find((function(e){return e.itemId||o?e.market_hash_name===i&&e.itemId===o:e.market_hash_name===i}));if(l&&l.status)a.addClass("sih-market-listing__item_processing"),r.text(SIHLang.sihAppMarket.listing_lot.already_in),r.addClass("fs-12 lh-16"),s.text(SIHLang.sihAppMarket.listing_lot.processing),s.addClass("fs-12");else{a.removeClass("sih-market-listing__item_processing"),r.text("".concat(l?SIHLang.sihAppMarket.listing_lot.in_cart:SIHLang.sihAppMarket.listing_lot.buy_for)),r.removeClass("fs-12 lh-16").addClass("fs-10");var c=utils.z.get("SIH_MARKET_CURRENCY"),d=a.find(".sih-market-listing__sih-price").data("price"),_=(0,global.formatNumberToLocalRu)(d,c||1,1,!1,3);s.text(_),s.removeClass("fs-12")}}));var n=e.find(".sih-market-listing__sih-price");calculatePriceBlockWidth(n)}))},cartBtn_loadHtml=function(e,t){var n=$J("#sih-market-listing"),a=n.find(".sih-market-listing__item");return new Promise((function(i){sih_app_global_service.getAllBuyStack().then((function(r){a.each((function(n,a){var i=$J(a),s=r.find((function(t){return t.itemId||e[n].itemId?t.market_hash_name===e[n].item&&+t.itemId==+e[n].itemId:t.market_hash_name===e[n].item})),o=utils.z.get("SIH_MARKET_CURRENCY"),l=(0,global.formatNumberToLocalRu)(e[n].price,o||1,1,!1,3),c=s&&s.status,d=$J('\n          <div class="sih-market-listing__sih-button">\n            <span\n              class="sih-market-listing__sih-price"\n              data-price="'.concat(e[n].price,'"\n              data-appid="').concat(t,'"\n              data-rarity-color="').concat(e[n].color||"",'"\n              data-itemid="').concat(e[n].id||"",'"\n            >\n              <span class="sih-market-listing__cart-info text ').concat(c?"fs-12 lh-16":"fs-10",'"\n                >').concat("".concat(s?c?SIHLang.sihAppMarket.listing_lot.already_in:SIHLang.sihAppMarket.listing_lot.in_cart:SIHLang.sihAppMarket.listing_lot.buy_for),'</span\n              >\n              <span class="sih-market-listing__cart-price text ').concat(c?"fs-12":"",'"\n                >').concat(c?"".concat(SIHLang.sihAppMarket.listing_lot.processing):l,"</span\n              >\n            </span>\n          </div>\n        ")),_=i.find(".sih-market-listing__steam-price");_.length&&_.after(d),c&&i.addClass("sih-market-listing__item_processing")}));var s=n.find(".sih-market-listing__sih-price");calculatePriceBlockWidth(s),i()}))}))},cartBtn_actionsListener=function(){addToCartAction()},hoverActions=function(){$J("#sih-market-listing").find(".sih-market-listing__sih-button").each((function(e,t){var n=$J(t);n.off("mouseenter").mouseenter((function(){var e=$J(this);e.find(".sih-market-listing__cart-info").text()&&e.find(".sih-market-listing__cart-info").text("".concat(SIHLang.sihAppMarket.global.delete))})),n.off("mouseleave").mouseleave((function(){var e=$J(this);e.find(".sih-market-listing__cart-info").text()&&e.find(".sih-market-listing__cart-info").text("".concat(SIHLang.sihAppMarket.listing_lot.in_cart))}))}))},addToCartAction=function(){$J("#sih-market-listing").find(".sih-market-listing__sih-button").each((function(e,t){$J(t).off("click").click((function(e){e.preventDefault(),e.stopPropagation();var t=$J(this).closest(".sih-market-listing__item"),n=t.find(".sih-market-listing__name").text().trim(),a=encodeURIComponent(n),i=t.find(".sih-market-listing__sih-price").data("itemid");sih_app_global_service.getAllItemsBuyStackByName(a).then((function(e){var r=e.find((function(e){return e.itemId||i?e.market_hash_name===n&&e.itemId===i:e.market_hash_name===n}));if(e.length&&r)sih_app_global_service.deleteItemFromBuyStack({hashName:a,itemId:i}).then((function(e){UpdateSihMarketTabBuyStack(),actionMenu_ChangeCartCountHeaderMenu()}));else{var s=t.find(".sih-market-listing__sih-price"),o=+s.attr("data-price"),l=t.find(".market_listing_item_img").attr("src"),c=t.find(".market_listing_item_img").css("border-color"),d=t.attr("href"),_=s.data("rarityColor"),u={appId:s.data("appid"),hashName:a,countAdd:1,price:o,image:l,url:d,color:c,rarityColor:_,itemId:i};sih_app_global_service.setItemToBuyStack(u).then((function(){UpdateSihMarketTabBuyStack(),actionMenu_ChangeCartCountHeaderMenu(),$J("#sih-header-cart").trigger("click")}))}}))}))}))},calculatePriceBlockWidth=function(e){var t=70;e.each((function(e,n){$J(n).css("width","auto");var a=+$J(n).css("width").replace("px","");a>t&&(t=a)})),e.each((function(e,n){$J(n).css("width","".concat(t,"px"))}))};function header_typeof(e){return header_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},header_typeof(e)}function header_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function header_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?header_ownKeys(Object(n),!0).forEach((function(t){header_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):header_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function header_defineProperty(e,t,n){return(t=header_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function header_toPropertyKey(e){var t=header_toPrimitive(e,"string");return"symbol"==header_typeof(t)?t:t+""}function header_toPrimitive(e,t){if("object"!=header_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=header_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var RenderListingHeader=function(){header_loadHtml(),renderCellsTooltip(),header_actionsListener(),setDefaultSortByProfit()},ClearListingSortArrow=function(){$J("#sih-market-listing .sih-market-listing__header .market_listing_right_cell").each((function(e,t){var n=$J(t);"name"===n.attr("data-option")&&n.find(".market_sort_arrow").hide()}))},header_loadHtml=function(){var e=$J("#sih-market-listing"),t=$J('\n    <div class="sih-market-listing__header market_listing_table_header">\n      <div class="market_listing_right_cell pointer-events-none" data-option="name">\n        '.concat(SIHLang.sihAppMarket.topSales.name,'\n      </div>\n      <div class="market_listing_right_cell" data-option="salesWeek">').concat(SIHLang.sihAppMarket.topSales.sales_week,'</div>\n      <div class="market_listing_right_cell" data-option="steam-price">Steam</div>\n      <div class="market_listing_right_cell" data-option="sih-price">').concat(SIHLang.sihAppMarket.topSales.sih_price,'</div>\n      <div\n        class="market_listing_right_cell active"\n        data-option="sih-profit"\n        title="').concat(SIHLang.sihAppMarket.topSales.profit,'"\n      >\n        <span class="sih-profit active" data-option="profitPercent">%</span>\n        <span>/</span>\n        <span class="sih-profit" data-option="profit">$</span>\n      </div>\n    </div>\n  '));g_ActiveInventory||t.find(".sih-market-listing__header").before('<span class="sih-market-listing__title text text_white text-uppercase mb-20"\n        >'.concat(SIHLang.sihAppMarket.topSales.title,"</span\n      >")),e.find(".sih-market-listing__header").length||e.append(t)},header_actionsListener=function(){sortAction()},sortAction=function(){var e=$J("#sih-market-listing").find(".sih-market-listing__header").find(".market_listing_right_cell"),t=null;e.each((function(e,n){var a=$J(n);a.find(".market_sort_arrow").length||a.append('<span class="market_sort_arrow"></span>'),a.off("click").click((function(){toggleSIHMarketItemLoaders(!1),clearTimeout(t),t=setTimeout((function(){sortBy(a)}),600)}))}))},setDefaultSortByProfit=function(){$J(".sih-market-listing__header").find('.market_listing_right_cell.active[data-option="sih-profit"]').find(".market_sort_arrow").show().text("▼")},sortBy=function(e){var t=e.attr("data-option");if(t){var n=e.closest(".sih-market-listing__header"),a=n.closest(".sih-market-listing").find(".sih-market-listing__content"),i=a.find(".sih-market-listing__item");n.find(".market_sort_arrow").hide(),e.hasClass("active")?e.find(".sih-profit:not(.active)").addClass("active").siblings().removeClass("active"):e.find('.sih-profit[data-option="profitPercent"]').addClass("active"),e.addClass("active").siblings().removeClass("active"),"sih-profit"!==t&&n.find(".sih-profit").removeClass("active");var r=1;if(e.find(".market_sort_arrow").is(':contains("▲")')||"sih-profit"===t?(r=-1,e.find(".market_sort_arrow").text("▼")):e.find(".market_sort_arrow").text("▲"),e.find(".market_sort_arrow").show(),"name"!==t){"sih-profit"===t&&(t=e.find(".sih-profit.active").attr("data-option"));var s=header_objectSpread({offset:0,limit:100},GenerateSortOptionForParameters(t,r)),o=GetFilterParams();return s=header_objectSpread(header_objectSpread({},s),o),void RenderListingItems(s)}i.sort((function(e,n){var a=getSortableValues(e,n,t),i=a.aValue,s=a.bValue;return i>s?r:i<s?-1*r:0})),i.detach().appendTo(a)}},getSortableValues=function(e,t,n){var a,i;if("name"===n)a=$J(e).find(".sih-market-listing__name").text(),i=$J(t).find(".sih-market-listing__name").text();return{aValue:a,bValue:i}},renderCellsTooltip=function(){$J(".sih-market-listing__header").find('.market_listing_right_cell[data-option="sih-profit"]').tooltip({position:{my:"left-50% bottom",at:"left+50% top"}})};function pagination_typeof(e){return pagination_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pagination_typeof(e)}function pagination_toConsumableArray(e){return pagination_arrayWithoutHoles(e)||pagination_iterableToArray(e)||pagination_unsupportedIterableToArray(e)||pagination_nonIterableSpread()}function pagination_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pagination_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return pagination_arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pagination_arrayLikeToArray(e,t):void 0}}function pagination_iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function pagination_arrayWithoutHoles(e){if(Array.isArray(e))return pagination_arrayLikeToArray(e)}function pagination_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function pagination_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pagination_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pagination_ownKeys(Object(n),!0).forEach((function(t){pagination_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pagination_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pagination_defineProperty(e,t,n){return(t=pagination_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pagination_toPropertyKey(e){var t=pagination_toPrimitive(e,"string");return"symbol"==pagination_typeof(t)?t:t+""}function pagination_toPrimitive(e,t){if("object"!=pagination_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=pagination_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var pagination_debounce=null,lastPaginationPage=1,RenderListingPagination=function(){pagination_loadHtml()},_RenderSIHMarketListingAfterPagination=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=$J("#sih-market-listing").find(".sih-market-listing__content"),r=$J("#sih-listing-pagination-container"),s=r.find(".sih-listing-pagination__start-count-items"),o=r.find(".sih-listing-pagination__end-count-items"),l=r.find(".sih-listing-pagination__total"),c=10,d=[],_=100,u=1+(t.offset?t.offset/_:0);function m(n,a){var i=$J(n.currentTarget).attr("data-num").trim();if(i&&(s.text(i*c-9),o.text(i*c),i*c>t.limit*u&&u<=lastPaginationPage)){lastPaginationPage=u=lastPaginationPage+1;var l={offset:(u-1)*_,limit:_},m=GetFilterParams();l=pagination_objectSpread(pagination_objectSpread({},l),m),d.push(sih_app_global_service.getTopSales(l)),toggleSIHMarketItemLoaders(!1),clearTimeout(pagination_debounce),pagination_debounce=setTimeout((function(){Promise.all(d).then((function(n){var s,o=[],l=!1;n.forEach((function(n,a){var i=n.data,r=n.pagination;o.length||(o=pagination_toConsumableArray(e.map((function(e){return e})))),i.forEach((function(e){o.length&&(o=[].concat(pagination_toConsumableArray(o),[e]))})),i.length?s=r:(s=t,l=!0),lastPaginationPage=s.offset/_+1})),_RenderSIHMarketListingAfterPagination(o,s,a,+i),r.pagination(i),toggleSIHMarketItemLoaders(),l&&RenderEmptyBlock(),d.length=0}))}),1e3)}}e.length<=t.count&&(e.length=t.count),l.text(t.count),s.text(a*c-9),o.text(a*c),r.pagination({dataSource:e,pageSize:c,afterNextOnClick:function(e){m(e,n)},afterPageOnClick:function(e){m(e,n)},afterPreviousOnClick:function(e){m(e,n)},callback:function(e){toggleSIHMarketItemLoaders(!!e[0]);var t=GetListingItemsTemplate(e,n);i.html(t),i.find(".sih-market-listing__name").tooltip({position:{my:"center bottom",at:"center top"},tooltipClass:"name-tooltip item-hover-name-tooltip"}),GoToItemPageAction(),RenderBookmarkBtn(),ClearListingSortArrow(),RenderAddToCartButtons(e,n).then((function(t){toggleSIHMarketItemLoaders(!!e[0]),setTimeout((function(){$J(".sih-market-listing__item .preloader").fadeOut()}),500)}))}})},pagination_loadHtml=function(){var e=$J("#sih-market-listing"),t=$J('\n    <div id="sih-listing-pagination-container" class="sih-global sih-listing-pagination">\n      <div class="row gap-5">\n        <span>'.concat(SIHLang.sihAppMarket.topSales.pagination.showing,'</span>\n        <span class="sih-listing-pagination__start-count-items">1</span>\n        <span>-</span>\n        <span class="sih-listing-pagination__end-count-items">1</span>\n        <span>').concat(SIHLang.sihAppMarket.topSales.pagination.of,'</span>\n        <span class="sih-listing-pagination__total">-</span>\n        <span>').concat(SIHLang.sihAppMarket.topSales.pagination.results,"</span>\n      </div>\n    </div>\n  "));$J("#sih-listing-pagination-container").length||e.after(t)};function sihMarketTab_global_typeof(e){return sihMarketTab_global_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sihMarketTab_global_typeof(e)}function global_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function global_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?global_ownKeys(Object(n),!0).forEach((function(t){sihMarketTab_global_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):global_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sihMarketTab_global_defineProperty(e,t,n){return(t=sihMarketTab_global_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sihMarketTab_global_toPropertyKey(e){var t=sihMarketTab_global_toPrimitive(e,"string");return"symbol"==sihMarketTab_global_typeof(t)?t:t+""}function sihMarketTab_global_toPrimitive(e,t){if("object"!=sihMarketTab_global_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=sihMarketTab_global_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var APP_NAMES={730:"CS2",252490:"Rust",440:"TF2"},LARGE_CURRENCY_LIST=[10,15,16,19,25,27,34],GenerateSortOptionForParameters=function(e,t){var n={};switch(e){case"profit":n={sortBy:1===t?"profit":"-profit"};break;case"profitPercent":n={sortBy:1===t?"profitPercent":"-profitPercent"};break;case"sih-price":n={sortBy:1===t?"price":"-price"};break;case"steam-price":n={sortBy:1===t?"steamPrice":"-steamPrice"};break;case"salesWeek":n={sortBy:1===t?"weekSales":"-weekSales"}}return n},RenderListingItems=function(e){$J("#sih-market-listing").find(".sih-market-listing__content").children().remove();var t=GetFilterParams();e=e||global_objectSpread({offset:0,limit:100},t),sih_app_global_service.getTopSales(e).then((function(e){var n=e.data,a=e.pagination;toggleSIHMarketItemLoaders(),n&&n.length?_RenderSIHMarketListingAfterPagination(n,a,t.appId):(_RenderSIHMarketListingAfterPagination(n,a,t.appId),RenderEmptyBlock())}))},GetListingItemsTemplate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:730,n="";return e.forEach((function(e){var a=skin_wear_service.getWearInfo(e.item),i=utils.z.get("SIH_MARKET_CURRENCY"),r=i&&LARGE_CURRENCY_LIST.includes(i)?(0,global.FormatNumberWithSuffix)(e.steamPrice,i).text:(0,global.formatNumberToLocalRu)(e.steamPrice,i||1),s=i?LARGE_CURRENCY_LIST.includes(i)?(0,global.FormatNumberWithSuffix)(e.profit,i).text:(0,global.formatNumberToLocalRu)(e.profit,i):"$ ".concat(Math.ceil(100*e.profit)/100),o=$J('\n      <a\n        class="sih-market-listing__item"\n        href="https://steamcommunity.com/market/listings/'.concat(t,"/").concat(e.item,'"\n        target="_blank"\n      >\n        <div class="row items-center gap-7 w-305">\n          <div class="preloader"></div>\n          <img\n            src="https://community.cloudflare.steamstatic.com/economy/image/').concat(e.image,'/62fx62fdpx2x"\n            class="market_listing_item_img"\n            style="border-color: #D2D2D2;"\n          />\n          <div class="column gap-2 max-w-220">\n            <span class="sih-market-listing__name" title="').concat(e.item,'">').concat(e.item,'</span>\n            <div class="row items-center gap-16">\n              <span class="sih-market-listing__game-name" data-appid="').concat(t,'">').concat(APP_NAMES[t],'</span>\n            </div>\n          </div>\n        </div>\n\n        <div class="row justify-center items-center">\n          <span class="text text_light-grey fs-12">').concat(e.weekSales,'</span>\n        </div>\n\n        <div\n          class="sih-market-listing__steam-price column justify-center items-center"\n          data-price="').concat(e.steamPrice,'"\n        >\n          <span class="text text_light-grey fs-12">').concat(e.steamPrice?r:"-",'</span>\n        </div>\n\n        <div class="column justify-center items-center gap-5 w-83">\n          ').concat(e.steamPrice?'\n                <span class="sih-market-listing__sih-profit text fs-12 '.concat(e.profitPercent>0?"text_green-900":"text_light-grey",'">').concat(Math.ceil(100*e.profitPercent)/100,' %</span>\n                <span class="sih-market-listing__sih-profit sih-market-listing__sih-profit-price text fs-12 ').concat(e.profit>0?"text_green-900":"text_light-grey",'" data-price="').concat(e.profit,'">').concat(s,"</span>\n              "):"-","\n        </div>\n      </a>\n    "));a&&a.stattrak&&(o.find(".market_listing_item_img").css("border-color","#CF6A32"),o.find(".sih-market-listing__name").css("color","#CF6A32")),a&&a.souvenir&&(o.find(".market_listing_item_img").css("border-color","#FFD700"),o.find(".sih-market-listing__name").css("color","#FFD700")),a&&a.name.includes("★")&&(o.find(".market_listing_item_img").css("border-color","#8650AC"),o.find(".sih-market-listing__name").css("color","#8650AC")),n+=o[0].outerHTML})),n},RenderEmptyBlock=function(){var e=$J("#sih-market-listing").find(".sih-market-listing__content"),t=$J('\n    <div class="sih-market-listing__empty sih-global">\n      <div class="column w-320 justify-center gap-20">\n        <span class="text text_white fs-24 bold">'.concat(SIHLang.sihAppMarket.topSales.plug_tab.title,'</span>\n        <span class="text text_white">').concat(SIHLang.sihAppMarket.topSales.plug_tab.text_1,'</span>\n        <a href="javascript:void(0)" class="relative text text_blue"\n          >').concat(SIHLang.sihAppMarket.topSales.plug_tab.text_2,"</a\n        >\n      </div>\n    </div>\n  "));t.find("a").off("click").click((function(){$J("#sih-market-tab").trigger("click")})),e.find(".sih-market-listing__empty").length||e.append(t)};function filter_typeof(e){return filter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},filter_typeof(e)}function filter_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function filter_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?filter_ownKeys(Object(n),!0).forEach((function(t){filter_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):filter_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function filter_defineProperty(e,t,n){return(t=filter_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function filter_toPropertyKey(e){var t=filter_toPrimitive(e,"string");return"symbol"==filter_typeof(t)?t:t+""}function filter_toPrimitive(e,t){if("object"!=filter_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=filter_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var CONVERTABLE_INPUT_KEYS=["minPrice","maxPrice","minSteamPrice","maxSteamPrice"],RenderSIHMarketFilter=function(e){filter_loadHtml(e),filter_actionsListener()},RemoveSIHMarketFilter=function(){$J("#browseItems").show(),$J(".sih-market-store-filter").hide().remove()},GetFilterParams=function(){var e=$J("#sih-market-listing .sih-market-listing__header .market_listing_right_cell"),t=$J(".sih-market-store-filter"),n=utils.z.get("SIH_MARKET_CURRENCY"),a=t.find(".sih-market-store-filter__input"),i={};return a.each((function(e,t){var a=$J(t),r=a.val(),s=a.attr("data-key");CONVERTABLE_INPUT_KEYS.includes(s)&&r&&(r=currency_service.A.getPriceFromCurrency(+r,1,n||1).price);r&&(i=filter_objectSpread(filter_objectSpread({},i),{},filter_defineProperty({},"".concat(s),r)))})),i.appId=t.find(".app-filter [active]").data("appid"),e.each((function(e,t){var n=$J(t),a=n.attr("data-option"),r=n.find(".market_sort_arrow");if(n.hasClass("active")&&"none"!==r.css("display")&&(r.is(':contains("▲")')||r.is(':contains("▼")'))){var s="none"!==r.css("display")&&r.is(':contains("▲")')?1:-1;"sih-profit"===a&&(a=n.find(".sih-profit.active").attr("data-option"));var o=GenerateSortOptionForParameters(a,s);return i=filter_objectSpread(filter_objectSpread({},i),o)}})),i},filter_loadHtml=function(e){e=e||$J("#findItems");var t=utils.z.get("SIH_MARKET_CURRENCY")||1,n=e.find("#browseItems");n.length&&n.hide();var a=$J('\n    <div class="sih-market-store-filter sih-global">\n      <div class="sih-market-store-filter__header">\n        <span class="sih-market-store-filter__title">'.concat(SIHLang.sihAppMarket.topSales.filter.title,'</span>\n        <a href="javascript:void(0)" class="sih-market-store-filter__reset hover-opacity-8"\n          >').concat(SIHLang.sihAppMarket.topSales.filter.reset,'</a\n        >\n      </div>\n\n      <div class="row justify-between">\n        <div class="app-filter">\n          <div class="app-filter__item app-filter__item_cs2" data-appid="730" active></div>\n          <div class="app-filter__item app-filter__item_rust" data-appid="252490"></div>\n          <div class="app-filter__item app-filter__item_tf2" data-appid="440"></div>\n        </div>\n\n        <div class="sih-market-store-filter__currency-selector-wrapper">\n          <select id="sih-market-currency-selector"></select>\n        </div>\n      </div>\n\n      <div class="column gap-8">\n        <span class="text fs-12">').concat(SIHLang.sihAppMarket.topSales.filter.name_search,'</span>\n\n        <div class="grid grid-flow-col">\n          <div class="sih-market-store-filter__input-outer">\n            <input\n              class="sih-market-store-filter__input"\n              type="text"\n              placeholder="AWP | Redline (Field-Tested)"\n              data-key="search"\n            />\n          </div>\n        </div>\n      </div>\n\n      \x3c!--SIH Market price block--\x3e\n      <div class="column gap-8">\n        <span class="text fs-12">').concat(SIHLang.sihAppMarket.topSales.filter.sih_market_price,'</span>\n\n        <div class="grid grid-flow-col grid-rows-2-125 gap-8">\n          <div class="sih-market-store-filter__input-outer">\n            <span class="text text_grey-300 fs-12">').concat(SIHLang.sihAppMarket.topSales.filter.from,'</span>\n            <input\n              class="sih-market-store-filter__input"\n              value="1"\n              type="number"\n              placeholder="').concat((0,global.formatNumberToLocalRu)(getInputRange("minPrice").minNumber,t,1),'"\n              data-key="minPrice"\n            />\n          </div>\n          <div class="sih-market-store-filter__input-outer">\n            <span class="text text_grey-300 fs-12">').concat(SIHLang.sihAppMarket.topSales.filter.to,'</span>\n            <input\n              class="sih-market-store-filter__input"\n              type="number"\n              placeholder="').concat((0,global.formatNumberToLocalRu)(getInputRange("maxPrice").maxNumber,t,1),'"\n              data-key="maxPrice"\n            />\n          </div>\n        </div>\n      </div>\n\n      \x3c!--Steam price block--\x3e\n      <div class="column gap-8">\n        <span class="text fs-12">').concat(SIHLang.sihAppMarket.topSales.filter.steam_price,'</span>\n\n        <div class="grid grid-flow-col grid-rows-2-125 gap-8">\n          <div class="sih-market-store-filter__input-outer">\n            <span class="text text_grey-300 fs-12">').concat(SIHLang.sihAppMarket.topSales.filter.from,'</span>\n            <input\n              class="sih-market-store-filter__input"\n              type="number"\n              placeholder="').concat((0,global.formatNumberToLocalRu)(getInputRange("minSteamPrice").minNumber,t,1),'"\n              data-key="minSteamPrice"\n            />\n          </div>\n          <div class="sih-market-store-filter__input-outer">\n            <span class="text text_grey-300 fs-12">').concat(SIHLang.sihAppMarket.topSales.filter.to,'</span>\n            <input\n              class="sih-market-store-filter__input"\n              type="number"\n              placeholder="').concat((0,global.formatNumberToLocalRu)(getInputRange("maxSteamPrice").maxNumber,t,1),'"\n              data-key="maxSteamPrice"\n            />\n          </div>\n        </div>\n      </div>\n\n      \x3c!--Sales Week block--\x3e\n      <div class="column gap-8">\n        <span class="text fs-12">').concat(SIHLang.sihAppMarket.topSales.filter.weekly_sales,'</span>\n\n        <div class="grid grid-flow-col grid-rows-2-125 gap-8">\n          <div class="sih-market-store-filter__input-outer">\n            <span class="text text_grey-300 fs-12">').concat(SIHLang.sihAppMarket.topSales.filter.from,'</span>\n            <input\n              class="sih-market-store-filter__input"\n              value="20"\n              type="number"\n              placeholder="1"\n              data-key="minWeeklySales"\n            />\n          </div>\n          <div class="sih-market-store-filter__input-outer">\n            <span class="text text_grey-300 fs-12">').concat(SIHLang.sihAppMarket.topSales.filter.to,'</span>\n            <input\n              class="sih-market-store-filter__input"\n              type="number"\n              placeholder="1 000 000"\n              data-key="maxWeeklySales"\n            />\n          </div>\n        </div>\n      </div>\n\n      \x3c!--Profit block--\x3e\n      <div class="column gap-8">\n        <span class="text fs-12">').concat(SIHLang.sihAppMarket.topSales.filter.profit_percent,'</span>\n\n        <div class="grid grid-flow-col grid-rows-2-125 gap-8">\n          <div class="sih-market-store-filter__input-outer">\n            <span class="text text_grey-300 fs-12">').concat(SIHLang.sihAppMarket.topSales.filter.from,'</span>\n            <input class="sih-market-store-filter__input" type="number" placeholder="1 %" data-key="minProfitPercent" />\n          </div>\n          <div class="sih-market-store-filter__input-outer">\n            <span class="text text_grey-300 fs-12">').concat(SIHLang.sihAppMarket.topSales.filter.to,'</span>\n            <input\n              class="sih-market-store-filter__input"\n              type="number"\n              placeholder="1 000 %"\n              data-key="maxProfitPercent"\n            />\n          </div>\n        </div>\n      </div>\n\n      <a href="https://sih.app/market" target="_blank" class="sih-market-store-filter__more-filters"\n        >').concat(SIHLang.sihAppMarket.topSales.filter.more_filters,"</a\n      >\n    </div>\n  "));e.length&&!e.find(".sih-market-store-filter").length&&e.append(a),n.closest(".market_search_sidebar_contents").find(".sih-market-store-filter").length||n.after(a),loadCurrencySelector()},filter_actionsListener=function(){resetAction(),inputChangeAction(),appChangeAction()},resetAction=function(){var e=$J(".sih-market-store-filter"),t=e.find(".sih-market-store-filter__reset"),n=null;t.off("click").click((function(){clearTimeout(n),n=setTimeout((function(){e.find(".sih-market-store-filter__input").val(""),$J("#sih-market-tab").trigger("click"),updateVisibleStateResetBtn()}),300)}))},inputChangeAction=function(){$J(".sih-market-store-filter").find(".sih-market-store-filter__input").each((function(e,t){var n=$J(t);n.off("change").change((function(e){var t=$J(e.target),n=t.attr("data-key"),a=utils.z.get("SIH_MARKET_CURRENCY"),i="search"===n?t.val():t.val().length?+t.val():t.val(),r=getInputRange(n),s=r.maxNumber,o=r.minNumber,l=void 0===o?0:o;if(CONVERTABLE_INPUT_KEYS.includes(n)&&""!==i&&(s=currency_service.A.getPriceFromCurrency(s,a||1,1).price,l=+currency_service.A.getPriceFromCurrency(l,a||1,1).price.toFixed(2)),"number"==typeof i){"maxPrice"===n&&UpdateFilterCategoryBalance();var c=sih_app_global_service.validateInput(i,s,l,!0);t.val(c)}})),n.off("focusin").focusin((function(e){var t=+$J(e.target).val();""!==n.val()&&n.off("focusout").focusout((function(e){+$J(e.target).val()!==t&&$J("#sih-market-tab").trigger("click"),updateVisibleStateResetBtn()}))})),n.off("focusout").focusout((function(){""!==n.val()&&$J("#sih-market-tab").trigger("click"),updateVisibleStateResetBtn()})),n.off("keypress").keypress((function(e){13===e.keyCode&&(""!==n.val()&&$J("#sih-market-tab").trigger("click"),updateVisibleStateResetBtn())}))}))},appChangeAction=function(){var e=$J(".sih-market-store-filter").find(".app-filter .app-filter__item");e.each((function(t,n){var a=$J(n);a.off("click").click((function(t){e.each((function(e,t){$J(t).removeAttr("active")})),a.attr("active",""),$J("#sih-market-tab").trigger("click")}))}))},updateVisibleStateResetBtn=function(){var e=$J(".sih-market-store-filter"),t=e.find(".sih-market-store-filter__reset"),n=e.find(".sih-market-store-filter__input"),a=!1;n.each((function(e,t){""!==$J(t).val()&&(a=!0)})),t.toggle(a)},getInputRange=function(e){var t={};switch(e){case"minPrice":case"maxPrice":t.maxNumber=2e5,t.minNumber=.01;break;case"minSteamPrice":case"maxSteamPrice":t.maxNumber=2e3,t.minNumber=.03;break;case"minWeeklySales":case"maxWeeklySales":t.maxNumber=1e6;break;case"minProfitPercent":case"maxProfitPercent":t.maxNumber=1e3}return t},ToggleSteamSearchSection=function(e){var t=$J("#escrow_description"),n=$J(".market_search_sidebar_section_tip_small"),a=$J(".market_search_box_container");t.toggle(e),n.toggle(e),a.toggle(e)},loadCurrencySelector=function(){var e=$J("#sih-market-currency-selector");if(!e.find(".option").length){for(var t=0,n=Object.keys(g_rgCurrencyData);t<n.length;t++){var a=n[t],i=g_rgCurrencyData[a];e.append('<option value="'.concat(i.eCurrencyCode,'" selected>').concat(a,"</option>"))}var r=utils.z.get("SIH_MARKET_CURRENCY");e.val(r||1),e.selectmenu({width:80,appendTo:".sih-market-store-filter__currency-selector-wrapper",change:function(e,t){var n=+$J(e.target).val();utils.z.set("SIH_MARKET_CURRENCY",n),$J(".sih-market-store-filter .sih-market-store-filter__input").each((function(e,t){var a=$J(t),i=a.val(),r=a.attr("data-key");if(CONVERTABLE_INPUT_KEYS.includes(r)){i&&a.trigger("change");var s,o=getInputRange(r),l=o.maxNumber,c=o.minNumber,d=void 0===c?0:c;s="maxPrice"===r||"maxSteamPrice"===r?(0,global.formatNumberToLocalRu)(l,n,1):(0,global.formatNumberToLocalRu)(d,n,1),a.attr("placeholder",s)}})),$J("#sih-market-tab").click()}})}},RenderListing=function(e){listing_loadHtml(e),RenderListingHeader(),RenderListingItems(),RenderListingContent(),RenderListingPagination()},listing_loadHtml=function(e){var t=e||$J("#sellListings"),n=$J('\n    <div id="sih-market-listing" class="sih-global sih-market-listing"></div>\n    \x3c!--  <div id="sih-market-listing-loader">--\x3e\n    \x3c!--    <img src="https://community.cloudflare.steamstatic.com/public/images/login/throbber.gif" alt="Working...">--\x3e\n    \x3c!--  </div>--\x3e\n  ');t.find("#sih-market-listing").length||t.append(n)};function LoadSihMarketTab(){appendSihMarketToSellListingTabs(),sihMarketTab_actionsListener()}var appendSihMarketToSellListingTabs=function(){var e=$J("#sellListings").find(".market_tab_well_tabs"),t=common.I.get()||{},n=$J('\n    <a\n      id="sih-market-tab"\n      class="sih-market-tab market_tab_well_tab market_tab_well_tab_inactive"\n      href="javascript:void(0)"\n    >\n      <span class="market_tab_well_tab_contents">\n        <span class="sih-market-tab__content">\n          <span>SIH Market</span>\n          '.concat(t.isViewFeature&&t.isViewFilter?"":'<span class="sih-market-tab__new">NEW</span>',"\n        </span>\n      </span>\n    </a>\n  "));e.append(n),e.contents().filter((function(){return 3===this.nodeType&&""===this.nodeValue.trim()})).remove()},sihMarketTab_actionsListener=function(){changeTabAction(),autoOpenTabAction()},changeTabAction=function(){var e=$J("#sellListings").find(".market_tab_well_tabs"),t=null;e.find("a").each((function(e,n){$J(n).off("click").click((function(){var e=this;clearTimeout(t),t=setTimeout((function(){var t=$J(e);if(t.addClass("market_tab_well_tab_active").siblings().removeClass("market_tab_well_tab_active market_tab_well_tab_inactive").addClass("market_tab_well_tab_inactive"),"sih-market-tab"===t.attr("id")){var n=common.I.get()||{};n.isViewFeature&&n.isViewFilter||n.openTab||(t.find(".sih-market-tab__new").hide(),n.isViewFeature=!0,n.isViewFilter=!0,common.I.set(n)),t.addClass("pointer-events-none"),setTimeout((function(){return t.removeClass("pointer-events-none")}),500),$J("#popularItemsTable").hide(),$J("#sellListingsTable").hide(),$J("#soldListingTable").hide(),RenderSIHMarketFilter(),RenderListing(),$J("#sih-market-listing").show(),toggleSIHMarketItemLoaders(!1),$J("#sih-listing-pagination-container").css("display","flex").show(),ToggleSteamSearchSection(!1)}else toggleSIHMarketItemLoaders(),$J("#sih-market-listing").hide(),$J("#sih-listing-pagination-container").hide(),ToggleSteamSearchSection(!0),RemoveSIHMarketFilter()}),200)}))}))},autoOpenTabAction=function(){global.chromeStorage.getLocal("SIH_MARKET_TAB").then((function(e){e.openTab&&$J("#sih-market-tab").length&&($J("#sih-market-tab").trigger("click"),e.openTab=!1,global.chromeStorage.setLocal("SIH_MARKET_TAB",e))}))},marketSearch=__webpack_require__(7465),UpdateHeaderTotalResubmitPrice=function(e){var t=$J('.my_listing_section[data-table-id="'.concat(e,'"]')),n=t.find('[id^="totalRow"]'),a=n.find(".sih-header-total"),i=t.find('.market_listing_row[id^="'.concat("sell_listings"===e?"mylisting":"mybuyorder",'"]')),r="sell_listings"===e?+a.find(".sih-total-sell__selling").attr("data-price"):+n.find(".sih-market-total__seller").attr("data-price"),s="sell_listings"===e?+a.find(".sih-total-sell__receive").attr("data-price"):0,o=a.find(".total-resubmit-price");i.find(".resubmit-price").length||o.fadeOut(300,(function(){o.remove()}));var l=0,c=0,d=0,_=0;i.each((function(t,n){var a=$J(n),i=a.find(".resubmit-price"),r=+a.find(".market_listing_buyorder_qty .market_listing_price").text();if(i.length){var s=+i.find(".resubmit-price__selling").attr("data-old-price")*("buy_orders"===e?r:1),o="sell_listings"===e?+i.find(".resubmit-price__receive").attr("data-old-price"):0,u=+i.find(".resubmit-price__selling").attr("data-new-price")*("buy_orders"===e?r:1),m="sell_listings"===e?+i.find(".resubmit-price__receive").attr("data-new-price"):0;l+=s,c+=o,d+=u,_+=m}}));var u=r-l+d,m=s-c+_,h=currency_service.A.getPriceFromCurrency(u,currencyId,currencyId).text,p=currency_service.A.getPriceFromCurrency(m,currencyId,currencyId).text;if(o.length){var f=o.find(".total-resubmit-price__selling"),g=o.find(".total-resubmit-price__receive");f.attr("data-price",u).text(h),g.attr("data-price",m).text("(".concat(p,")"))}else{var b=LocalStorageSihMarket.get().commission,v=void 0===b||b,y=$J('\n      <div class="total-resubmit-price" title="'.concat(SIHLang.market.resubmit_orders.tooltips.total_after_resubmit,'">\n        <div class="column">\n          <span class="total-resubmit-price__selling text text_white fs-14" data-price="').concat(u,'"\n            >').concat(h,"</span\n          >\n          ").concat("sell_listings"===e?'\n                      <span class="total-resubmit-price__receive text text_grey-900 fs-12" style="display: '.concat(v?"flex":"none",'" data-price="').concat(m,'">(').concat(p,")</span>\n                  "):"","\n        </div>\n      </div>\n    "));y.tooltip({tooltipClass:"total-resubmit-price__tooltip",position:{my:"left bottom",at:"left top"}}),a.append(y),y.css("display","flex").hide().fadeIn(300)}},RenderHeaderTable=function(){addHeaderTooltips(),setTimeout((function(){renderOldTotalBuyPrice()}),500)},renderOldTotalBuyPrice=function(){var e=$J('.my_listing_section[data-table-id="buy_orders"]').find('[id^="totalRow"]'),t=e.find(".sih-header-total"),n=+e.find(".sih-market-total__seller").attr("data-price"),a=currency_service.A.getPriceFromCurrency(n,currencyId,currencyId).text,i=$J('\n    <div class="sih-total-sell column justify-center" title="'.concat(SIHLang.market.tooltips.cost_all_items,'">\n      <span class="sih-total-sell__selling text text_white fs-14" data-price="').concat(n,'"\n        >').concat(a,"</span\n      >\n    </div>\n  "));t.find(".sih-total-sell").length||t.prepend(i)},addHeaderTooltips=function(){[$J(".market_listing_table_header").find(".market_listing_right_cell.market_listing_my_price:not(.market_listing_buyorder_qty, .market_listing_maximum)").attr("title","".concat(SIHLang.market.tooltips.your_price)),$J(".market_listing_table_header").find(".market_listing_right_cell.market_listing_minimum").attr("title","".concat(SIHLang.market.tooltips.min_market_price)),$J(".market_listing_table_header").find(".market_listing_right_cell.market_listing_listed_date").attr("title","".concat(SIHLang.market.tooltips.order_date)),$J(".market_listing_table_header").find(".market_listing_right_cell.market_listing_maximum").attr("title","".concat(SIHLang.market.tooltips.max_market_price)),$J(".market_listing_table_header").find(".market_listing_right_cell.market_listing_buyorder_qty").attr("title","".concat(SIHLang.market.tooltips.number_items))].forEach((function(e){e.tooltip({position:{my:"left bottom",at:"left top"}})}))},editAlertModal_debounce=null,RenderEditAlertModal=function(e){editAlertModal_loadHtml(e),editAlertModal_listenerActions()},editAlertModal_loadHtml=function(e){var t=$J("body"),n=LocalStorageSihMarketResubmit.getPercentAlert(e).percent_alert,a=void 0===n?20:n,i=$J('\n    <div id="sih-edit-alert" class="sih-edit-alert" data-table-id="'.concat(e,'">\n      <div class="sih-edit-alert__fade"></div>\n      <div class="sih-global sih-modal sih-edit-alert__modal">\n        <div class="sih-modal__close"></div>\n        <div class="sih-edit-alert__inner sih-modal__inner">\n          <h4 class="text fs-14">').concat(SIHLang.market.resubmit_orders.edit_alert_modal.title,'</h4>\n\n          <label for="sih-edit-alert-input" class="row justify-between items-center bg-black-100 py-8 px-24 br2-grey">\n            <input\n              type="number"\n              id="sih-edit-alert-input"\n              class="text text_white bg-transparent border-none"\n              value="').concat(a,'"\n              step="1"\n              min="1"\n            />\n\n            <label for="sih-edit-alert-input">\n              <span class="text text_grey-900 fs-14">%</span>\n            </label>\n          </label>\n\n          <div class="sih-edit-alert__buttons">\n            <a\n              href="javascript:void(0)"\n              id="sih-edit-alert-cancel"\n              class="sih-modal__button fs-10 bold py-8 px-45 text-uppercase"\n              >').concat(SIHLang.market.resubmit_orders.cancel,'</a\n            >\n            <a\n              href="javascript:void(0)"\n              id="sih-edit-alert-save"\n              class="sih-modal__button sih-modal__button_light-blue fs-10 bold py-8 text-uppercase px-16 py-8"\n              >').concat(SIHLang.market.resubmit_orders.save,"</a\n            >\n          </div>\n        </div>\n      </div>\n    </div>\n  "));t.find("#sih-edit-alert").length||(t.append(i),$J("#sih-edit-alert").find(".sih-edit-alert__modal").fadeIn(300))},editAlertModal_listenerActions=function(){editAlertModal_closeModalAction(),focusOnInputOpen(),validateInputAction(),saveAction()},editAlertModal_closeModalAction=function(){var e=$J("#sih-edit-alert"),t=e.find(".sih-modal__close"),n=e.find(".sih-edit-alert__fade"),a=e.find("#sih-edit-alert-cancel");t.off("click").click((function(){removeEditAlertModal()})),n.off("click").click((function(){removeEditAlertModal()})),a.off("click").click((function(){removeEditAlertModal()}))},focusOnInputOpen=function(){$J("#sih-edit-alert-input").trigger("focus"),$J("#sih-edit-alert-input")[0].select()},removeEditAlertModal=function(){var e=$J("#sih-edit-alert");e.fadeOut(300,(function(){e.remove()}))},validateInputAction=function(){var e=$J("#sih-edit-alert").find("#sih-edit-alert-input");e.focus((function(){e.keyup((function(){var e=$J(this);clearTimeout(editAlertModal_debounce),editAlertModal_debounce=setTimeout((function(){var t=+e.val()||0,n=sih_app_global_service.validateInput(t,100);e.val(n)}),500)}))})),e.focusout((function(){e.off("keyup")})),e.off("change").change((function(){var e=$J(this),t=e.val(),n=sih_app_global_service.validateInput(t,100);e.val(n)}))},saveAction=function(){var e=$J("#sih-edit-alert"),t=e.find("#sih-edit-alert-save"),n=e.find("#sih-edit-alert-input");t.off("click").click((function(e){a()})),e.keyup((function(e){Event.KEY_RETURN===e.keyCode&&a()}));var a=function(){var e=$J("#sih-edit-alert").attr("data-table-id"),t=n.val(),a=LocalStorageSihMarketResubmit.get()||{};a["percent_alert_".concat(e)]=t,LocalStorageSihMarketResubmit.set(a),RecalculatePriceDifferent(e),$J('.my_listing_section[data-table-id="'.concat(e,'"] .sih-market-filter__edit-alert span')).text("".concat(a["percent_alert_".concat(e)],"%")),removeEditAlertModal()}},RenderCustomRemoveModal=function(e){customRemoveModal_loadHtml(e),customRemoveModal_actionsListener(e)},DeleteCustomRemoveModal=function(){var e=$J("#sih-remove-listing"),t=$J(".sih-toolbar"),n=t.attr("data-table-id"),a=$J('.my_listing_section[data-table-id="'.concat(n,'"] .market_listing_row[id^="').concat("sell_listings"===n?"mylisting":"mybuyorder",'"]')).find(".select-checkbox:visible:checked").length;e.fadeOut(300,(function(){e.remove()})),t.hasClass("animate-down")&&a&&t.removeClass("animate-down")},customRemoveModal_loadHtml=function(e){var t=e.attr("data-table-id"),n=e.find(".market_listing_row").find(".select-checkbox:checked").closest(".market_listing_row"),a=$J("body"),i=$J('\n    <div id="sih-remove-listing" class="sih-remove-listing">\n      <div class="sih-remove-listing__fade"></div>\n      <div class="sih-global sih-modal sih-remove-listing__modal">\n        <div class="sih-modal__close"></div>\n        <div class="sih-remove-listing__inner sih-modal__inner">\n          <div class="sih-remove-listing__title">'.concat(SIHLang.market.custom_remove_modal.title,'</div>\n          <div class="sih-remove-listing__content">\n            <div class="sih-remove-listing__text">\n              ').concat(SIHLang.market.custom_remove_modal["".concat(t,"_text_1")],'\n              <span class="text text_white bold">(').concat(n.length,")</span> ").concat("sell_listings"===t?SIHLang.market.custom_remove_modal["".concat(t,"_text_2")]:"",'\n            </div>\n\n            <div class="sih-remove-listing__buttons">\n              <a href="javascript:void(0)" class="sih-remove-listing__remove"\n                >').concat(SIHLang.market.custom_remove_modal.confirm,'</a\n              >\n              <a href="javascript:void(0)" class="sih-remove-listing__cancel"\n                >').concat(SIHLang.market.custom_remove_modal.cancel,"</a\n              >\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  "));a.find("#sih-remove-listing").length||(a.append(i),$J("#sih-remove-listing").find(".sih-remove-listing__modal").fadeIn(300))},customRemoveModal_actionsListener=function(e){customRemoveModal_closeModalAction(),removeListingAction(e)},customRemoveModal_closeModalAction=function(){var e=$J("#sih-remove-listing"),t=e.find(".sih-modal__close"),n=e.find(".sih-remove-listing__fade"),a=e.find(".sih-remove-listing__cancel");t.off("click").click((function(){DeleteCustomRemoveModal()})),n.off("click").click((function(){DeleteCustomRemoveModal()})),a.off("click").click((function(){DeleteCustomRemoveModal()}))},removeListingAction=function(e){$J("#sih-remove-listing").find(".sih-remove-listing__remove").off("click").click((function(){RemoveSelectedListing(e),DeleteCustomRemoveModal()}))},ResubmitGroupModal=function(e){resubmitGroupModal_loadHtml(e),resubmitGroupModal_listenerActions()},RemoveResubmitGroupModal=function(){var e=$J("#sih-resubmit-orders"),t=$J(".sih-toolbar").find(".sih-toolbar__button");e.fadeOut(300,(function(){e.remove(),t.removeClass("disabled opacity-50per")}))},resubmitGroupModal_loadHtml=function(e){var t=$J(e[0]).attr("id").includes("mybuyorder")?"buy_orders":"sell_listings",n=!!$J('.my_listing_section[data-table-id="'.concat(t,'"] .market_listing_row[id^="').concat("sell_listings"===t?"mylisting":"mybuyorder",'"] .select-checkbox:checked')).closest(".market_listing_row").find(".sih-market-alert").length,a=$J("body"),i=$J('\n    <div id="sih-resubmit-orders" class="sih-resubmit-orders-group" data-table-id="'.concat(t,'">\n      <div class="sih-resubmit-orders-group__fade"></div>\n      <div class="sih-global sih-modal sih-resubmit-orders-group__modal">\n        <div class="sih-modal__close"></div>\n        <div class="sih-resubmit-orders-group__inner sih-modal__inner">\n          <div class="sih-resubmit-orders-group__content sih-market-content"></div>\n\n          <div class="sih-resubmit-orders-group__buttom">\n            ').concat(n?'\n                  <div class="sih-resubmit-orders-group__info-message sih-info-message" data-state="default">\n                    <div class="sih-info-message__default">\n\n                    </div>\n                 </div>\n                ':'<div class="sih-resubmit-orders-group__info-message sih-info-message" data-state="default">\n                    <div class="sih-info-message__default">\n\n                    </div>\n                 </div>','\n\n            <div class="sih-resubmit-orders-group__toolbar modal-toolbar">\n              <div class="modal-toolbar__left-side row">\n                <div class="modal-toolbar__selected-info">\n                  <span class="text text_light-grey text-lowercase"\n                    >').concat(e.length," ").concat(SIHLang.market.resubmit_orders.items,"\n                    ").concat(SIHLang.market.resubmit_orders.selected,'</span\n                  >\n                </div>\n              </div>\n\n              <div class="modal-toolbar__right-side row">\n                <label for="sih-resubmit-orders-group-input-all" class="row gap-5 justify-between items-center">\n                  <label for="sih-resubmit-orders-group-input-all" class="max-w-140">\n                    <span class="text text_white fs-14">').concat(SIHLang.market.resubmit_orders.enter_all_price,'</span>\n                  </label>\n\n                  <label for="sih-resubmit-orders-group-input-all" class="row justify-center items-center w-24 h-24">\n                    <svg width="8" height="12" viewBox="0 0 8 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n                      <path\n                        d="M0.589844 10.58L5.16984 6L0.589844 1.41L1.99984 0L7.99984 6L1.99984 12L0.589844 10.58Z"\n                        fill="#9EA7B3"\n                      />\n                    </svg>\n                  </label>\n\n                  <input\n                    type="number"\n                    id="sih-resubmit-orders-group-input-all"\n                    class="sih-resubmit-orders-group__input max-w-120 box-border text text_white bg-transparent br2-grey py-8 px-20"\n                    step="0.01"\n                    min="0.03"\n                  />\n                </label>\n\n                <div class="sih-resubmit-orders-group__buttons">\n                  <a\n                    href="javascript:void(0)"\n                    id="sih-resubmit-cancel"\n                    class="sih-modal__button fs-10 bold py-8 px-45 text-uppercase"\n                    >').concat(SIHLang.market.resubmit_orders.cancel,'</a\n                  >\n                  <a\n                    href="javascript:void(0)"\n                    id="sih-resubmit-btn"\n                    class="disabled opacity-50per sih-modal__button sih-modal__button_blue fs-10 bold py-14 px-16 text-uppercase"\n                    >').concat(SIHLang.market.resubmit_orders.confirm,"</a\n                  >\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  "));e.forEach((function(e,t){var n=GetModalContentItem(e,t);i.find(".sih-resubmit-orders-group__content").append(n)})),a.find("#sih-resubmit-orders").length||(a.append(i),$J("#sih-resubmit-orders").find(".sih-resubmit-orders-group__modal").fadeIn(300))},resubmitGroupModal_listenerActions=function(){resubmitGroupModal_closeModalAction(),currentPriceAction(),bestPriceAction(),changeItemInputAction(),changeAllInputAction(),resubmitGroupModal_focusOnInputOpen(),resubmitBtnAction()},resubmitGroupModal_closeModalAction=function(){var e=$J("#sih-resubmit-orders"),t=e.find(".sih-modal__close"),n=e.find(".sih-resubmit-orders-group__fade"),a=e.find("#sih-resubmit-cancel");t.off("click").click((function(){RemoveResubmitGroupModal()})),n.off("click").click((function(){RemoveResubmitGroupModal()})),a.off("click").click((function(){RemoveResubmitGroupModal()}))},currentPriceAction=function(){var e=$J("#sih-resubmit-orders"),t=e.find(".sih-market-content__current-price"),n=e.find("#sih-resubmit-btn");t.off("click").click((function(){var t=$J(this),a=t.attr("data-price"),i=t.closest(".sih-market-content__item").find(".sih-market-content__input");i.val(a),onChangePrice(i),n.hasClass("disabled opacity-50per")||isPriceChanged(e)||n.addClass("disabled opacity-50per")}))},bestPriceAction=function(){var e=$J("#sih-resubmit-orders"),t=e.find(".sih-market-content__best-price"),n=e.find("#sih-resubmit-btn");t.off("click").click((function(){var e=$J(this),t=e.attr("data-price"),a=e.closest(".sih-market-content__item").find(".sih-market-content__input");a.val(t),onChangePrice(a),n.removeClass("disabled opacity-50per")}))},resubmitGroupModal_focusOnInputOpen=function(){$J("#sih-resubmit-orders-group-input-all").trigger("focus"),$J("#sih-resubmit-orders-group-input-all")[0].select()},changeItemInputAction=function(){var e=$J("#sih-resubmit-orders"),t=e.find(".sih-market-content__input"),n=e.find("#sih-resubmit-btn"),a=null;t.each((function(t,i){var r=$J(i);r.focus((function(){r.keyup((function(){clearTimeout(a),a=setTimeout((function(){onChangePrice(r),isPriceChanged(e)?n.removeClass("disabled opacity-50per"):n.hasClass("disabled opacity-50per")||n.addClass("disabled opacity-50per")}),500)}))})),r.focusout((function(){r.off("keyup")})),r.off("change").change((function(){onChangePrice(r),isPriceChanged(e)?n.removeClass("disabled opacity-50per"):n.hasClass("disabled opacity-50per")||n.addClass("disabled opacity-50per")}))}))},changeAllInputAction=function(){var e=$J("#sih-resubmit-orders"),t=e.find("#sih-resubmit-orders-group-input-all"),n=e.find("#sih-resubmit-btn"),a=null;t.focus((function(){t.keyup((function(){var t=+$J(this).val()||0;clearTimeout(a),a=setTimeout((function(){t&&(onChangePrice(),isPriceChanged(e)?n.removeClass("disabled opacity-50per"):n.hasClass("disabled opacity-50per")||n.addClass("disabled opacity-50per"))}),500)}))})),t.focusout((function(){t.off("keyup")})),t.off("change").change((function(){(+$J(this).val()||0)&&(onChangePrice(),isPriceChanged(e)?n.removeClass("disabled opacity-50per"):n.hasClass("disabled opacity-50per")||n.addClass("disabled opacity-50per"))}))},onChangePrice=function(e){_ValidateInputPrice(e),renderAlertMessage()},renderAlertMessage=function(){var e=$J("#sih-resubmit-orders"),t=e.attr("data-table-id"),n=e.find(".sih-market-content__item"),a=e.find("#sih-resubmit-btn"),i=e.find(".sih-info-message"),r=i.find(".sih-info-message__alert"),s=0,o=0;n.each((function(e,t){var n=$J(t),a=+n.find(".sih-market-content__current-price").attr("data-price"),i=+n.find(".sih-market-content__input").val();s+=a,o+=i}));var l=(0,global.getPercentNumberDifference)(o,s,"sell_listings"===t?-1:1),c=Math.abs(Math.ceil(1e3*(o-s))/1e3),d=currency_service.A.getPriceFromCurrency(c,currencyId,currencyId).text;if(l<=-10){if(a.hasClass("sih-modal__button_blue")&&(e.find(".sih-resubmit-orders-group__modal").addClass("alert"),a.removeClass("sih-modal__button_blue").addClass("sih-modal__button_red").text(SIHLang.market.resubmit_orders.alert_resubmit)),r.length)r.find(".alert-info__percent").text("".concat(Math.abs(l),"%")),r.find(".alert-info__price").text("(".concat(d,")")),i.find(".sih-info-message__default").fadeOut(300,(function(){r.fadeIn(300)}));else{var _=$J('\n        <div class="sih-info-message__alert alert-info gap-5">\n          <span class="text text_red">'.concat(SIHLang.market.resubmit_orders.attention,'</span>\n          <span class="text text_white"\n            >').concat("sell_listings"===t?SIHLang.market.resubmit_orders.new_price_less_1:SIHLang.market.resubmit_orders.new_price_bigger_1,'</span\n          >\n          <span class="alert-info__percent text text_white">').concat(Math.abs(l),'%</span>\n          <span class="alert-info__price text text_white">(').concat(d,')</span>\n          <span class="text text_white"\n            >').concat("sell_listings"===t&&"en"===lang?SIHLang.market.resubmit_orders.new_price_less_2:"","</span\n          >\n        </div>\n      "));i.append(_)}i.find(".sih-info-message__default").fadeOut(300,(function(){i.find(".sih-info-message__alert").fadeIn(300)}))}else e.find(".sih-resubmit-orders-group__modal").removeClass("alert"),a.removeClass("sih-modal__button_red").addClass("sih-modal__button_blue").text(SIHLang.market.resubmit_orders.confirm),r.fadeOut(300,(function(){i.find(".sih-info-message__default").fadeIn(300)}))},resubmitBtnAction=function(){var e=$J("#sih-resubmit-orders"),t=e.find("#sih-resubmit-btn"),n=e.find(".sih-market-content__item"),a=null;t.off("click").click((function(){clearTimeout(a),a=setTimeout((function(){var a=e.attr("data-table-id");t.addClass("pointer-events-none"),n.each((function(e,t){var n=$J(t),i=$J("#tabContentsMyListings").find("#".concat("sell_listings"===a?"mylisting_".concat(t.itemInfo[1]):"mybuyorder_".concat(t.itemInfo[0]))),r=i.find(".sih-resubmit"),s=n.find(".sih-market-content__input");i[0].itemInfo=t.itemInfo;var o=+s.val();+n.find(".sih-market-content__current-price").attr("data-price")!==o&&BuildResubmitData(i,"manual",s),i.find(".select-checkbox").prop("checked",!1),r.removeClass("disabled"),RemoveResubmitGroupModal(),RenderToolbar(a),RenderChangePanel(a),UpdateStateRemoveSelectedButton($J("#tabContentsMyActiveMarketListingsTable")),UpdateHeaderTotalResubmitPrice(a)}))}),200)}))},RenderSelectedListing=function(){selectedListing_loadHtml(),selectedListing_actionsListener()},HideSelectedListing=function(){var e=$J("body"),t=$J(".sih-toolbar"),n=e.find(".sih-selected-listing"),a=n.find(".sih-selected-listing__content"),i=t.find(".sih-toolbar__toggle-selected-listing");n.is(":visible")&&(n.fadeOut(300),a.toggleClass("animate-down"),i.text("".concat(SIHLang.market.resubmit_orders.toolbar.show_list)),a.children().remove())},selectedListing_loadHtml=function(){var e=$J("body"),t=$J(".sih-toolbar"),n=$J("#sih-resubmit-orders"),a=e.find(".sih-selected-listing"),i=a.find(".sih-selected-listing__content"),r=t.find(".sih-toolbar__toggle-selected-listing"),s=t.attr("data-table-id"),o=$J('.my_listing_section[data-table-id="'.concat(s,'"] .market_listing_row[id^="').concat("sell_listings"===s?"mylisting":"mybuyorder",'"]')).find(".select-checkbox:checked").closest(".market_listing_row").clone();o=refactorRow(o),i.prepend('<div class="sih-selected-listing__close"></div>'),i.append(o),a.is(":visible")?a.fadeOut(300):(n.is(":visible")&&(RemoveResubmitModal(),RemoveResubmitGroupModal()),a.fadeIn(300)),i.toggleClass("animate-down"),i.hasClass("animate-down")?(r.text("".concat(SIHLang.market.resubmit_orders.toolbar.show_list)),i.children().remove()):r.text("".concat(SIHLang.market.resubmit_orders.toolbar.hide_list))},selectedListing_actionsListener=function(){closeSelectedListingAction(),selectCheckboxAction(),openEditAlertModalAction()},closeSelectedListingAction=function(){var e=$J("body").find(".sih-selected-listing");e.find(".sih-selected-listing__fade").off("click").click((function(){HideSelectedListing()})),e.find(".sih-selected-listing__close").off("click").click((function(){HideSelectedListing()}))},selectCheckboxAction=function(){var e=$J(".sih-toolbar"),t=$J("body").find(".sih-selected-listing");t.find(".market_listing_row").each((function(n,a){$J(a).find(".select-checkbox").off("click").click((function(){var n=e.attr("data-table-id"),a=$J(this).attr("id"),i=$J('.my_listing_section[data-table-id="'.concat(n,'"] .market_listing_row[id^="').concat("sell_listings"===n?"mylisting":"mybuyorder",'"]')).find("#".concat(a));i.length&&(i.trigger("click"),t.find(".market_listing_row .select-checkbox:checked").length||HideSelectedListing())}))}))},openEditAlertModalAction=function(){var e=$J("body").find(".sih-selected-listing"),t=$J(".sih-toolbar").attr("data-table-id");e.find(".market_listing_row").each((function(e,n){$J(n).find(".sih-market-alert").off("click").click((function(){RenderEditAlertModal(t)}))}))},refactorRow=function(e){var t=$J(".sih-toolbar").attr("data-table-id");return e.find(".market_listing_right_cell.market_listing_edit_buttons.placeholder").remove(),e.each((function(e,n){var a=$J(n);a.find(".sih-listing__color-cell").remove(),a.find("div").each((function(e,t){"clear: both"===$J(t).attr("style")&&$J(t).remove()})),a.prepend('<div class="sih-listing__item-info row items-center"></div>');var i=a.find(".sih-listing__item-info");a.find(".market_listing_item_img").prependTo(i),a.find(".market_listing_item_name_block").appendTo(i),a.find(".sih-listing__item-info").after('<div class="sih-listing__price-info row items-center justify-center"></div>');var r=a.find(".sih-listing__price-info");if(a.find(".market_listing_right_cell.market_listing_listed_date.can_combine").appendTo(r),a.find(".market_listing_minimum").length)a.find(".market_listing_minimum").appendTo(r);else if("sell_listings"===t){r.prepend('<div\n        class="row items-center justify-center market_listing_right_cell market_listing_minimum"\n      ></div>')}a.find(".market_listing_right_cell.market_listing_my_price").appendTo(r)})),e},checkLoadersDebounce=null,RenderToolbar=function(e){IsEnabledResubmitOrders().then((function(t){if(t.success){if("await_listings"===e)return;sih_app_global_service.getSubscribeAds().then((function(t){toolbar_loadHtml(e,t.success),CheckLoadedPricesSelectedRows()}))}}))},CheckLoadedPricesSelectedRows=function(){clearTimeout(checkLoadersDebounce),checkLoadersDebounce=setTimeout((function(){var e,t=$J(".sih-toolbar"),n=t.attr("data-table-id"),a=$J('.my_listing_section[data-table-id="'.concat(n,'"] .market_listing_row[id^="').concat("sell_listings"===n?"mylisting":"mybuyorder",'"]')).find(".select-checkbox:checked").closest(".market_listing_row"),i=t.find(".sih-toolbar__buttons"),r=t.find(".sih-toolbar__info"),s=0;a.each((function(t,n){$J(n).find(".sih-resubmit").hasClass("without-price")?e=!1:s++})),e=void 0===e&&a.length?!e:e,t.length&&t.is(":visible")&&(e?t.find(".sih-toolbar__buttons").is(":visible")||r.fadeOut(200,(function(){t.find(".sih-toolbar__buttons").css("display","flex").hide().fadeIn(50)})):i.addClass("pointer-events-none").fadeOut(200,(function(){var e;i.removeClass("pointer-events-none"),r.children().remove();var t=getLoadPricesBtn(n);t&&t.hasClass("animated-background")?e=$J('\n              <span class="text text_white text-center fs-14">'.concat(SIHLang.market.resubmit_orders.toolbar.load_info,"</span>\n            ")):(e=$J('\n              <div class="row items-center gap-5">\n                <a href="javascript:void(0)" class="sih-toolbar__load-prices text text_blue fs-14"\n                  >'.concat(SIHLang.market.resubmit_orders.tooltips.need_load_price_1,'</a\n                >\n                <span class="text text_white fs-14">').concat(SIHLang.market.resubmit_orders.tooltips.need_load_price_2,"</span>\n              </div>\n            "))).off("click").click((function(){return $J('.my_listing_section[data-table-id="'.concat(n,'"]')).find(".load_price_manual").trigger("click")})),r.append(e),r.is(":visible")||r.css("display","flex").hide().fadeIn(100)})),loadToolbarProgress(s,a.length))}),300)},loadToolbarProgress=function(e,t){var n=0,a=$J(".sih-toolbar"),i=a.find(".sih-toolbar__progress-bar"),r=Number(a.css("width").replace(/px/g,"").trim());r!==(n+=r/t*e)?(a.hasClass("progress")||a.addClass("progress"),i.width(Math.ceil(n)),i.is(":visible")||i.css("display","flex").hide().fadeIn()):i.width(Math.ceil(n)).fadeOut(1100,(function(){i.width(0),a.removeClass("progress")}))},toolbar_loadHtml=function(e,t){var n=$J("body"),a=$J('.my_listing_section[data-table-id="'.concat(e,'"] .market_listing_row[id^="').concat("sell_listings"===e?"mylisting":"mybuyorder",'"]')).find(".select-checkbox:checked"),i=$J('.my_listing_section[data-table-id="'.concat("sell_listings"===e?"buy_orders":"sell_listings",'"] .market_listing_row[id^="').concat("sell_listings"===e?"mybuyorder":"mylisting",'"]')).find(".select-checkbox:checked"),r=a?a.length:0;r&&i.length&&(i.each((function(e,t){return $J(t).trigger("click")})),RenderToolbar(e));var s=currency_service.A.getPriceFromCurrency(.01,currencyId,currencyId).text,o=$J('\n    <div class="sih-toolbar animate-down sih-global progress" data-table-id="'.concat(e,'">\n      <div class="sih-toolbar__inner">\n        <div class="column gap-14">\n          <div class="row gap-5">\n            <span class="text text_white">').concat(SIHLang.market.resubmit_orders.selected,'</span>\n            <span class="sih-toolbar__stack-count text text_white">').concat(r,'</span>\n            <span class="text text_white">').concat(SIHLang.market.resubmit_orders.items,'</span>\n          </div>\n          <div class="row gap-20">\n            <a href="javascript:void(0)" class="sih-toolbar__uncheck-all text text_blue hover-opacity-8"\n              >').concat(SIHLang.market.resubmit_orders.toolbar.clear_list,'</a\n            >\n            <a href="javascript:void(0)" class="sih-toolbar__toggle-selected-listing text text_blue hover-opacity-8"\n              >').concat(SIHLang.market.resubmit_orders.toolbar.show_list,'</a\n            >\n          </div>\n        </div>\n        <div class="sih-toolbar__buttons">\n          ').concat(t?"":'\n                 <div class="sih-toolbar__sub-info">\n                    <span class="text text_light-grey fs-12">'.concat(SIHLang.market.resubmit_orders.sub_info_2,' <span class="sih-toolbar__sub-btn">SIH.Black</span></span>\n                 </div>\n               '),'\n          <a href="javascript:void(0)" class="sih-toolbar__resubmit sih-toolbar__button" data-state="default">\n            <img src="chrome-extension://').concat(SIHID,'/assets/market/resubmit/resubmit_default.svg" alt="resubmit_default" />\n            <span class="row gap-5">\n              <span class="sih-toolbar__changed-text text"\n                >').concat("sell_listings"===e?SIHLang.market.resubmit_orders.drop:SIHLang.market.resubmit_orders.add,'</span\n              >\n              <span class="text">').concat(s,'</span>\n            </span>\n          </a>\n          <a href="javascript:void(0)" class="sih-toolbar__resubmit sih-toolbar__button" data-state="percent">\n            <img src="chrome-extension://').concat(SIHID,'/assets/market/resubmit/resubmit_percent.svg" alt="resubmit_percent" />\n            <span class="row gap-5">\n              <span class="sih-toolbar__changed-text text"\n                >').concat("sell_listings"===e?SIHLang.market.resubmit_orders.drop:SIHLang.market.resubmit_orders.add,'</span\n              >\n              <span class="text">1%</span>\n            </span>\n          </a>\n          <a href="javascript:void(0)" class="sih-toolbar__resubmit sih-toolbar__button" data-state="manual">\n            <img src="chrome-extension://').concat(SIHID,'/assets/market/resubmit/resubmit_manual.svg" alt="resubmit_manual" />\n            <span class="text">').concat(SIHLang.market.resubmit_orders.set_price,'</span>\n          </a>\n        </div>\n        <div class="sih-toolbar__info"></div>\n        <div class="sih-toolbar__progress-bar"></div>\n      </div>\n    </div>\n\n    <div class="sih-selected-listing">\n      <div class="sih-selected-listing__fade"></div>\n      <div class="sih-selected-listing__content animate-down"></div>\n    </div>\n  ')),l=n.find(".sih-toolbar"),c=n.find(".sih-change-panel");!l.length&&r?(n.append(o),setTimeout((function(){n.find(".sih-toolbar").removeClass("animate-down"),RelocatePriceIndicator()}),100),toolbar_actionsListener()):r>0?(l.attr("data-table-id",e),l.find(".sih-toolbar__stack-count").text(r),c.hasClass("animate-down")||c.addClass("animate-down"),l.removeClass("animate-down"),updateToolbar(),RelocatePriceIndicator()):(l.addClass("animate-down"),RenderChangePanel(e));var d=n.find(".sih-toolbar .sih-toolbar__sub-info");"sell_listings"===e?d.show():d.hide()},updateToolbar=function(){var e=$J(".sih-toolbar"),t=e.attr("data-table-id");e.find(".sih-toolbar__changed-text").text("".concat("sell_listings"===t?SIHLang.market.resubmit_orders.drop:SIHLang.market.resubmit_orders.add))},toolbar_actionsListener=function(){uncheckAllAction(),showSelectedListingAction(),toolbar_resubmitBtnAction(),sihBlackModalAction()},uncheckAllAction=function(){var e=$J(".sih-toolbar"),t=e.find(".sih-toolbar__uncheck-all"),n=null;t.off("click").click((function(){var t=e.attr("data-table-id");clearTimeout(n),n=setTimeout((function(){var e="sell_listings"===t?$J("#tabContentsMyActiveMarketListingsTable"):$J("#buy_orders").closest(".my_listing_section");e.find(".market_listing_table_header .select-checkbox").prop("checked",!1),e.find('.market_listing_row[id^="'.concat("sell_listings"===t?"mylisting":"mybuyorder",'"] .select-checkbox:checked')).trigger("click"),RemoveResubmitModal(),RemoveResubmitGroupModal(),RenderToolbar(t),HideSelectedListing(),UpdateStateRemoveSelectedButton(e)}),200)}))},showSelectedListingAction=function(){var e=$J(".sih-toolbar").find(".sih-toolbar__toggle-selected-listing"),t=null;e.off("click").click((function(){clearTimeout(t),t=setTimeout((function(){RenderSelectedListing()}),300)}))},toolbar_resubmitBtnAction=function(){var e=$J(".sih-toolbar"),t=e.find(".sih-toolbar__resubmit");t.off("click").click((function(){var n=e.attr("data-table-id"),a=$J(this);a.addClass("animated").siblings(".sih-toolbar__button").addClass("opacity-50per disabled");var i=a.attr("data-state"),r="sell_listings"===n?$J("#tabContentsMyActiveMarketListingsTable"):$J("#buy_orders").closest(".my_listing_section"),s=r.find('.market_listing_row[id^="'.concat("sell_listings"===n?"mylisting":"mybuyorder",'"] .select-checkbox:checked')).closest(".market_listing_row");Promise.all(s.map((function(e,t){return new Promise((function(n){var a=$J(t),r=a.find(".sih-resubmit"),s=r.find(".sih-resubmit__btn");"manual"!==i?setTimeout((function(){BuildResubmitData(a,i),s.attr("data-state",i),s.find("img").attr("src","chrome-extension://".concat(SIHID,"/assets/market/resubmit/resubmit_").concat(i,".svg")).attr("alt",i),a.find(".select-checkbox").prop("checked",!1),r.removeClass("disabled"),n()}),100*(e+1)):n(a)}))})).toArray()).then((function(a){r.find(".market_listing_table_header .select-checkbox").prop("checked",!1),"manual"!==i?(HideSelectedListing(),RenderChangePanel(n),RenderToolbar(n),UpdateStateRemoveSelectedButton(r),t.removeClass("opacity-50per disabled animated")):(HideSelectedListing(),ResubmitGroupModal(a),e.find(".sih-toolbar__button").removeClass("animated").addClass("opacity-50per disabled")),UpdateHeaderTotalResubmitPrice(n)}))}))},getLoadPricesBtn=function(e){var t;switch(e){case"sell_listings":t=$J("#load_sell_overprices");break;case"buy_orders":t=$J("#load_buy_lowerprices")}return t},sihBlackModalAction=function(){$J(".sih-toolbar").find(".sih-toolbar__sub-btn").off("click").click((function(){loadSubscribeAds(),ShowModalSubscribeAds()}))};function removeSelected_typeof(e){return removeSelected_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},removeSelected_typeof(e)}function removeSelected_regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */removeSelected_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,a){var r=t&&t.prototype instanceof g?t:g,s=Object.create(r.prototype),o=new T(a||[]);return i(s,"_invoke",{value:A(e,n,o)}),s}function _(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var u="suspendedStart",m="suspendedYield",h="executing",p="completed",f={};function g(){}function b(){}function v(){}var y={};c(y,s,(function(){return this}));var k=Object.getPrototypeOf,S=k&&k(k(L([])));S&&S!==n&&a.call(S,s)&&(y=S);var I=v.prototype=g.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,r,s,o){var l=_(e[i],e,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==removeSelected_typeof(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,o)}),(function(e){n("throw",e,s,o)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,o)}))}o(l.arg)}var r;i(this,"_invoke",{value:function(e,a){function i(){return new t((function(t,i){n(e,a,t,i)}))}return r=r?r.then(i,i):i()}})}function A(t,n,a){var i=u;return function(r,s){if(i===h)throw Error("Generator is already running");if(i===p){if("throw"===r)throw s;return{value:e,done:!0}}for(a.method=r,a.arg=s;;){var o=a.delegate;if(o){var l=x(o,a);if(l){if(l===f)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===u)throw i=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=h;var c=_(t,n,a);if("normal"===c.type){if(i=a.done?p:m,c.arg===f)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(i=p,a.method="throw",a.arg=c.arg)}}}function x(t,n){var a=n.method,i=t.iterator[a];if(i===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),f;var r=_(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,f;var s=r.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function n(){for(;++i<t.length;)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(removeSelected_typeof(t)+" is not iterable")}return b.prototype=v,i(I,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},C(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,a,i,r){void 0===r&&(r=Promise);var s=new w(d(e,n,a,i),r);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(I),c(I,l,"Generator"),c(I,s,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(a,i){return o.type="throw",o.arg=t,n.next=a,i&&(n.method="next",n.arg=e),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),c=a.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=e,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:L(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),f}},t}function removeSelected_createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=removeSelected_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function removeSelected_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return removeSelected_arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?removeSelected_arrayLikeToArray(e,t):void 0}}function removeSelected_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function removeSelected_asyncGeneratorStep(e,t,n,a,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,i)}function removeSelected_asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function s(e){removeSelected_asyncGeneratorStep(r,a,i,s,o,"next",e)}function o(e){removeSelected_asyncGeneratorStep(r,a,i,s,o,"throw",e)}s(void 0)}))}}var RenderRemoveSelectedButton=function(){removeSelected_loadHtml(),removeSelected_removeListingAction()},RemoveSelectedListing=function(){var e=removeSelected_asyncToGenerator(removeSelected_regeneratorRuntime().mark((function e(t){var n,a,i,r,s,o,l,c,d,_;return removeSelected_regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.attr("data-table-id"),a=t.find(".market_listing_row").find(".select-checkbox:checked"),i=a.toArray(),r=LocalStorageSihMarketResubmit.getDelay(n),s=r.delay,o=r.isEnabled,l=[],c=removeSelected_createForOfIteratorHelper(i),e.prev=6,_=removeSelected_regeneratorRuntime().mark((function e(){var t,n,a,i;return removeSelected_regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.value,n=$J(t).closest(".market_recent_listing_row").attr("id"),!o){e.next=5;break}return e.next=5,new Promise((function(e){return setTimeout(e,s)}));case 5:0==n.indexOf("mylisting")?(a=n.substring(10),$J("#".concat(n," .market_listing_edit_buttons.actual_content")).find(".item_market_action_button.item_market_action_button_edit").html("Removing..."),l.push(new Promise((function(e,t){$J.post("//steamcommunity.com/market/removelisting/".concat(a),{sessionid:g_sessionID}).then(e).fail(t)})))):0==n.indexOf("mybuyorder")&&(i=n.substring(11),$J("#".concat(n," .market_listing_edit_buttons.actual_content")).find(".item_market_action_button.item_market_action_button_edit").html("Cancelling..."),l.push(new Promise((function(e,t){$J.post("//steamcommunity.com/market/cancelbuyorder/",{sessionid:g_sessionID,buy_orderid:i}).then(e).fail(t)}))));case 6:case"end":return e.stop()}}),e)})),c.s();case 9:if((d=c.n()).done){e.next=13;break}return e.delegateYield(_(),"t0",11);case 11:e.next=9;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(6),c.e(e.t1);case 18:return e.prev=18,c.f(),e.finish(18);case 21:Promise.all(l).then((function(e){var t=i.reduce((function(e,t){var a=$J(t).parents(".market_recent_listing_row"),i=GetListingItemRowInfo(a);return a.hide(300,(function(){a.remove(),"sell_listings"===n&&clearGlobalListingRows(a.attr("id")),RenderToolbar(n)})),e.push(i[4]),e}),[]);chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_REMOVE_ITEM_FOR_SALE",data:{assetids:t}},(function(){})),RefreshMyMarketListings()})).catch((function(e){i.forEach((function(e){var t=$J(e).parents(".market_recent_listing_row");t.hide(300,(function(){t.remove(),"sell_listings"===n&&clearGlobalListingRows(t.attr("id")),RenderToolbar(n)}))})),RefreshMyMarketListings()}));case 22:case"end":return e.stop()}}),e,null,[[6,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),UpdateStateRemoveSelectedButton=function(e){var t=e.find(".market_listing_row:not(.stack)"),n=e.find(".sih-market-filter .sih-market-filter__right-side .sih-market-filter__remove-selected");t.find(".market_listing_edit_buttons .market_listing_cancel_button .select-checkbox:visible:checked").length>0?n.length&&n.removeClass("disabled"):n.length&&!n.hasClass("disabled")&&n.addClass("disabled")},removeSelected_loadHtml=function(){var e=$J(".sih-market-filter").find(".sih-market-filter__right-side"),t=$J('\n    <a href="javascript:void(0)" class="sih-market-filter__remove-selected disabled">\n      <svg width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path\n          d="M5 0V1H0V3H1V16C1 16.5304 1.21071 17.0391 1.58579 17.4142C1.96086 17.7893 2.46957 18 3 18H13C13.5304 18 14.0391 17.7893 14.4142 17.4142C14.7893 17.0391 15 16.5304 15 16V3H16V1H11V0H5ZM3 3H13V16H3V3ZM5 5V14H7V5H5ZM9 5V14H11V5H9Z"\n          fill="#FFFFFF"\n        />\n      </svg>\n    </a>\n  ');e.find(".sih-market-filter__remove-selected").length||e.append(t)},removeSelected_removeListingAction=function(){$J(".sih-market-filter").find(".sih-market-filter__right-side").find(".sih-market-filter__remove-selected").off("click").click((function(){var e=$J(this).closest(".my_listing_section");$J(".sih-toolbar").hasClass("animate-down")||$J(".sih-toolbar").addClass("animate-down"),RenderCustomRemoveModal(e)}))},clearGlobalListingRows=function(e){$ACTIVE_LISTING_ROWS.each((function(t,n){$J(n).attr("id")===e&&$ACTIVE_LISTING_ROWS.splice(t,1)}))},RenderResubmitModal=function(e){resubmitModal_loadHtml(e),resubmitModal_listenerActions()},RemoveResubmitModal=function(){var e=$J("#sih-resubmit-orders"),t=$J(".sih-toolbar").find(".sih-toolbar__button");e.fadeOut(300,(function(){e.remove(),t.removeClass("disabled opacity-50per")}))},resubmitModal_loadHtml=function(e){var t=$J("body"),n=e.attr("id").includes("mybuyorder")?"buy_orders":"sell_listings",a=!!e.find(".sih-market-alert").length,i=GetListingItemRowInfo(e),r=e.find(".market_listing_item_name_link").attr("href"),s=e.find(".market_listing_item_img").attr("src"),o=e.find(".market_listing_item_img").css("border-color"),l=e.find(".market_listing_item_name_link").text(),c=e.find(".market_listing_game_name").text(),d="sell_listings"===n?e.find(".market_listing_right_cell.market_listing_my_price").find(".market_listing_price span"):e.find(".sih_listing_my_price"),_="sell_listings"===n?e.find(".market_listing_minimum--text").text().trim():e.find(".market_listing_buyorder_max .market_listing_price").text().trim(),u="sell_listings"===n?d.find("span:first-child").text().trim():d.text().trim(),m="sell_listings"===n?d.find("span:last-child").text().trim():0,h=u.match(new RegExp(/([\d+?., ]+)/g))||"0",p=(0,global.parseNumber)("0"!==h?h[0]:h),f=_.match(new RegExp(/([\d+?., ]+)/g))||"0",g=(0,global.parseNumber)("0"!==f?f[0]:f),b=LocalStorageSihMarketResubmit.getPercentAlert(n).percent_alert,v=void 0===b?20:b,y=$J('\n    <div id="sih-resubmit-orders" class="sih-resubmit-orders" data-table-id="'.concat(n,'">\n      <div class="sih-resubmit-orders__fade"></div>\n      <div class="sih-global sih-modal sih-resubmit-orders__modal">\n        <div class="sih-modal__close"></div>\n        <div class="sih-resubmit-orders__inner sih-modal__inner">\n          <div class="row gap-20 items-center justify-between">\n            <div class="sih-resubmit-orders__item-info row items-center">\n              <img\n                class="sih-resubmit-orders__image market_listing_item_img"\n                src="').concat(s,'"\n                style="border-color: ').concat(o,'"\n              />\n              <div class="column">\n                <a href="').concat(r,'" target="_blank" class="sih-resubmit-orders__item-name text bold">').concat(l,'</a>\n                <span class="text fs-12 text_grey-900">').concat(c,'</span>\n              </div>\n            </div>\n\n            <div class="sih-resubmit-orders__compare">\n              <a\n                href="javascript:void(0)"\n                class="sih-resubmit-orders__current-price column"\n                data-price="').concat(p,'"\n              >\n                <span class="text text_white bold text-center text-ellipsis">').concat(u,"</span>\n                ").concat(m?'<span class="text text_grey-900 text-center text-ellipsis">'.concat(m,"</span>"):"",'\n              </a>\n\n              <div class="row justify-center items-center w-24 h-24">\n                <svg width="8" height="12" viewBox="0 0 8 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n                  <path\n                    d="M0.589844 10.58L5.16984 6L0.589844 1.41L1.99984 0L7.99984 6L1.99984 12L0.589844 10.58Z"\n                    fill="#9EA7B3"\n                  />\n                </svg>\n              </div>\n\n              <a\n                href="javascript:void(0)"\n                class="sih-resubmit-orders__changed-price column"\n                data-price="').concat(p,'"\n              >\n                <span class="sih-resubmit-orders__changed-price--selling text text_white bold text-center text-ellipsis"\n                  >').concat(u,"</span\n                >\n                ").concat(m?'<span class="sih-resubmit-orders__changed-price--receive text text_grey-900 text-center text-ellipsis">'.concat(m,"</span>"):"","\n              </a>\n            </div>\n          </div>\n\n          ").concat(a?'\n               <div class="sih-resubmit-orders__info-message sih-info-message" data-state="dumping">\n                  <div class="sih-info-message__default">\n                    <span class="text text_red bold">'.concat(SIHLang.market.resubmit_orders.attention,'</span>\n                    <span class="text">\n                        ').concat("sell_listings"===n?SIHLang.market.resubmit_orders.alert_info_text_1:SIHLang.market.resubmit_orders.alert_info_buy_text_1,"\n                        ").concat(v,"%\n                        ").concat("sell_listings"===n&&"en"===lang?SIHLang.market.resubmit_orders.alert_info_text_2:"","\n                    </span>\n                  </div>\n               </div>\n              "):'<div class="sih-resubmit-orders__info-message sih-info-message" data-state="default">\n                  <div class="sih-info-message__default">\n                      <span class="text">'.concat(SIHLang.market.resubmit_orders.set_new_price,"</span>\n                  </div>\n               </div>"),'\n\n          <div class="column gap-16">\n            <label\n              for="sih-resubmit-orders-input"\n              class="row justify-between items-center bg-black-100 py-8 px-24 br2-grey"\n            >\n              <input\n                type="number"\n                id="sih-resubmit-orders-input"\n                class="sih-resubmit-orders__input text text_white bg-transparent border-none"\n                value="').concat(p,'"\n                step="0.01"\n                min="0.03"\n              />\n\n              <label\n                for="sih-resubmit-orders-input"\n                class="sih-resubmit-orders__best-price row gap-5"\n                data-price="').concat(g,'"\n              >\n                ').concat(a?'<span class="text text_red">'.concat(SIHLang.market.resubmit_orders.market_price,'</span>\n                            <span class="text text_red">').concat(_,"</span>"):'<span class="text text_grey-900">'.concat(SIHLang.market.resubmit_orders.market_price,'</span>\n                            <span class="text text_grey-900">').concat(_,"</span>"),'\n              </label>\n            </label>\n          </div>\n\n          <div class="sih-modal__buttons row justify-end">\n            <a\n              href="javascript:void(0)"\n              id="sih-resubmit-cancel"\n              class="sih-modal__button fs-10 bold py-8 px-45 text-uppercase"\n              >').concat(SIHLang.market.resubmit_orders.cancel,'</a\n            >\n            <a\n              href="javascript:void(0)"\n              id="sih-resubmit-btn"\n              class="disabled opacity-50per sih-modal__button sih-modal__button_light-blue fs-10 bold py-8 text-uppercase"\n              >').concat(SIHLang.market.resubmit_orders.confirm,"</a\n            >\n          </div>\n        </div>\n      </div>\n    </div>\n  "));y[0].itemInfo=i,t.find("#sih-resubmit-orders").length||(t.append(y),$J("#sih-resubmit-orders").find(".sih-resubmit-orders__modal").fadeIn(300))},resubmitModal_listenerActions=function(){resubmitModal_closeModalAction(),resubmitModal_currentPriceAction(),resubmitModal_bestPriceAction(),changeResubmitInputAction(),resubmitModal_resubmitBtnAction(),resubmitModal_focusOnInputOpen()},resubmitModal_closeModalAction=function(){var e=$J("#sih-resubmit-orders"),t=e.find(".sih-modal__close"),n=e.find(".sih-resubmit-orders__fade"),a=e.find("#sih-resubmit-cancel");t.off("click").click((function(){RemoveResubmitModal()})),n.off("click").click((function(){RemoveResubmitModal()})),a.off("click").click((function(){RemoveResubmitModal()}))},resubmitModal_bestPriceAction=function(){var e=$J("#sih-resubmit-orders"),t=e.find(".sih-resubmit-orders__best-price"),n=e.find("#sih-resubmit-orders-input"),a=e.find("#sih-resubmit-btn");t.off("click").click((function(){var e=$J(this).attr("data-price");n.val(e),resubmitModal_onChangePrice(n),a.removeClass("disabled opacity-50per")}))},resubmitModal_onChangePrice=function(e){_ValidateInputPrice(e),resubmitModal_renderAlertMessage(),updateChangedPrice()},resubmitModal_renderAlertMessage=function(){var e=$J("#sih-resubmit-orders"),t=e.attr("data-table-id"),n=e.find(".sih-resubmit-orders__current-price"),a=e.find("#sih-resubmit-orders-input"),i=e.find(".sih-info-message"),r=e.find("#sih-resubmit-btn"),s=n.attr("data-price"),o=a.val(),l=(0,global.getPercentNumberDifference)(o,s,"sell_listings"===t?-1:1),c=i.find(".sih-info-message__alert");if(l<=-10){var d,_=currency_service.A.getPriceFromCurrency(Math.abs(o-s),currencyId,currencyId).text;if(r.hasClass("sih-modal__button_light-blue")&&(e.find(".sih-resubmit-orders__modal").addClass("alert"),r.removeClass("sih-modal__button_light-blue").addClass("sih-modal__button_red").text(SIHLang.market.resubmit_orders.alert_resubmit)),c.length)c.find(".alert-info__percent").text("".concat(Math.abs(l),"%")),c.find(".alert-info__price").text("(".concat(_,")")),i.find(".sih-info-message__default").fadeOut(300,(function(){c.fadeIn(300)}));else d="dumping"===i.attr("data-state")?$J('\n          <div class="sih-info-message__alert alert-info gap-5">\n            <span class="text text_red">'.concat(SIHLang.market.resubmit_orders.attention,'</span>\n            <span class="text text_white"\n              >').concat("sell_listings"===t?SIHLang.market.resubmit_orders.new_price_less_1:SIHLang.market.resubmit_orders.new_price_bigger_1,'</span\n            >\n            <span class="alert-info__percent text text_white">').concat(Math.abs(l),'%</span>\n            <span class="alert-info__price text text_white">(').concat(_,')</span>\n            <span class="text text_white"\n              >').concat("sell_listings"===t&&"en"===lang?SIHLang.market.resubmit_orders.new_price_less_2:"","</span\n            >\n          </div>\n        ")):$J('\n          <div class="sih-info-message__alert alert-info gap-5">\n            <span class="text text_red">'.concat(SIHLang.market.resubmit_orders.attention,'</span>\n            <span class="text text_white"\n              >').concat("sell_listings"===t?SIHLang.market.resubmit_orders.new_price_discount_1:SIHLang.market.resubmit_orders.new_price_discount_buy_1,'</span\n            >\n            <span class="alert-info__percent text text_white">').concat(Math.abs(l),'%</span>\n            <span class="alert-info__price text text_white">(').concat(_,')</span>\n            <span class="text text_white"\n              >').concat("sell_listings"===t?SIHLang.market.resubmit_orders.new_price_discount_2:SIHLang.market.resubmit_orders.new_price_discount_buy_2,"</span\n            >\n          </div>\n        ")),i.append(d),i.find(".sih-info-message__default").fadeOut(300,(function(){i.find(".sih-info-message__alert").fadeIn(300)}))}else e.find(".sih-resubmit-orders__modal").removeClass("alert"),r.removeClass("sih-modal__button_red").addClass("sih-modal__button_light-blue").text(SIHLang.market.resubmit_orders.confirm),c.fadeOut(300,(function(){i.find(".sih-info-message__default").fadeIn(300)}))},updateChangedPrice=function(){var e=$J("#sih-resubmit-orders"),t=e.find(".sih-resubmit-orders__changed-price--selling"),n=e.find(".sih-resubmit-orders__changed-price--receive").length?e.find(".sih-resubmit-orders__changed-price--receive"):null,a=e.find("#sih-resubmit-orders-input").val().match(new RegExp(/([-\d+?., ]+)/g))||"0",i=(0,global.parseNumber)("0"!==a?a[0]:a),r=i?RecalculateSellerPrice(i):0,s=Math.floor(window.PriceUtils.steamBuyerPrice(r,g_rgWalletInfo.wallet_publisher_fee_percent_default,g_rgWalletInfo)/100*100)/100;s<i&&(i=s);var o=currency_service.A.getPriceFromCurrency(i,currencyId,currencyId).text,l=currency_service.A.getPriceFromCurrency(r/100,currencyId,currencyId).text;t.text(o),n&&n.length&&n.text("(".concat(l,")"))},resubmitModal_currentPriceAction=function(){var e=$J("#sih-resubmit-orders"),t=e.find(".sih-resubmit-orders__current-price"),n=e.find("#sih-resubmit-orders-input"),a=e.find("#sih-resubmit-btn");t.off("click").click((function(){var e=$J(this).attr("data-price");n.val(e),a.hasClass("disabled opacity-50per")||a.addClass("disabled opacity-50per"),resubmitModal_onChangePrice(n)}))},changeResubmitInputAction=function(){var e=$J("#sih-resubmit-orders"),t=e.find("#sih-resubmit-orders-input"),n=e.find("#sih-resubmit-btn"),a=+e.find(".sih-resubmit-orders__current-price").attr("data-price"),i=null;t.focus((function(){t.keyup((function(){var e=$J(this),t=+e.val()||0;clearTimeout(i),i=setTimeout((function(){t>a||t<a?n.removeClass("disabled opacity-50per"):n.hasClass("disabled opacity-50per")||n.addClass("disabled opacity-50per"),resubmitModal_onChangePrice(e)}),500)}))})),t.focusout((function(){t.off("keyup")})),t.off("change").change((function(){var e=$J(this),t=+e.val()||0;t>a||t<a?n.removeClass("disabled opacity-50per"):n.hasClass("disabled opacity-50per")||n.addClass("disabled opacity-50per"),resubmitModal_onChangePrice(e)}))},resubmitModal_focusOnInputOpen=function(){$J("#sih-resubmit-orders-input").trigger("focus"),$J("#sih-resubmit-orders-input")[0].select()},resubmitModal_resubmitBtnAction=function(){var e=$J("#sih-resubmit-orders"),t=e.attr("data-table-id"),n=e.find("#sih-resubmit-orders-input"),a=e.find("#sih-resubmit-btn"),i=null;a.off("click").click((function(){clearTimeout(i),i=setTimeout((function(){a.addClass("pointer-events-none");var i=$J("#tabContentsMyListings").find("#".concat("sell_listings"===t?"mylisting_".concat(e[0].itemInfo[1]):"mybuyorder_".concat(e[0].itemInfo[0])));BuildResubmitData(i,"manual",n),RemoveResubmitModal(),RenderChangePanel(t),UpdateStateRemoveSelectedButton($J("#tabContentsMyActiveMarketListingsTable")),UpdateHeaderTotalResubmitPrice(t)}),200)}))},RenderMarketAlert=function(e,t){IsEnabledResubmitOrders().then((function(n){if(n.success){var a="sell_listings"===e?t.find(".market_listing_minimum"):t.find(".market_listing_buyorder_max");if(!a.find(".sih-market-alert").length&&("sell_listings"===e||"buy_orders"===e)){var i=$J(' <a class="sih-market-alert row items-center" title="">\n            <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path\n                d="M10.9998 11.0002H8.9998V6.0002H10.9998V11.0002ZM10.9998 15.0002H8.9998V13.0002H10.9998V15.0002ZM1.5998 18.0002H18.3998C19.5998 18.0002 20.2998 16.7002 19.6998 15.7002L11.2998 1.2002C10.6998 0.200195 9.2998 0.200195 8.6998 1.2002L0.299805 15.7002C-0.300195 16.7002 0.399805 18.0002 1.5998 18.0002Z"\n                fill="#C44E4E"\n              />\n            </svg>\n          </a>'),r=LocalStorageSihMarketResubmit.getPercentAlert(e).percent_alert,s=void 0===r?20:r,o=$J('\n          <div class="sih-global">\n            <div class="column gap-5">\n              <span class="text">\n                '.concat("sell_listings"===e?SIHLang.market.resubmit_orders.alert_info_text_1:SIHLang.market.resubmit_orders.alert_info_buy_text_1,'\n                <a href="javascript:void(0)" class="sih-edit-alert__btn text text_blue hover-opacity-8"\n                  >').concat(s,"%</a\n                >\n                ").concat("sell_listings"===e&&"en"===lang?SIHLang.market.resubmit_orders.alert_info_text_2:"",'\n              </span>\n              <a href="javascript:void(0)" class="sih-edit-alert__btn text text_blue hover-opacity-8"\n                >').concat(SIHLang.market.resubmit_orders.tooltips.alert_info_edit,"</a\n              >\n            </div>\n          </div>\n        "));i.tooltip({content:o.text(),position:{my:"left top",at:"left bottom",using:function(t,n){o.find(".sih-edit-alert__btn").click((function(){RenderEditAlertModal(e)})),$J(this).css(t),$J(".ui-tooltip-content").hide(),$J(this).append(o)}}}).on("mouseenter",(function(e){i.not($J(this)).tooltip("close")})).on("mouseleave",(function(e){$J(".ui-tooltip:hover").length>0&&e.stopImmediatePropagation()})),$J("body").on("mouseleave",".ui-tooltip",(function(e){i.tooltip(),i.tooltip("close")})),i.click((function(){RenderResubmitModal(t)})),a.prepend(i)}}}))};function RegisterRelistingItemsBtn(){}var COMPLETED_MARKET_ITEMS_TIMER=null,RenderProgressPanel=function(e){progressPanel_loadHtml(e),progressPanel_actionsListener(),UpdateSuccessSellCount(e)},UpdateSuccessSellCount=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=$J(".sih-progress-panel"),a=n.find(".sih-progress-panel__info-text"),i=n.find(".sih-progress-panel__buttons"),r=n.find(".sih-progress-panel__success-sell-count"),s=$J('.my_listing_section[data-table-id="'.concat(e,'"] .market_listing_row.stack[id^="').concat("sell_listings"===e?"mylisting":"mybuyorder",'"]')),o=n.find(".sih-progress-panel__switcher-reload"),l=s?s.length:0;clearInterval(COMPLETED_MARKET_ITEMS_TIMER),COMPLETED_MARKET_ITEMS_TIMER=setInterval((function(){var n="sell_listings"===e?"BACKGROUND_GET_COMPLETED_SELL_MARKET_ITEMS":"BACKGROUND_GET_COMPLETED_BUY_ORDERS_MARKET_ITEMS";chrome.runtime.sendMessage(SIHID,{type:n},(function(e){var n=e.COMPLETED_MARKET_ITEMS,s=n.filter((function(e){return e.isRemove&&e.isSell})),c=n.filter((function(e){return!e.isRemove||!e.isSell}));if(r.text(s.length),loadProgress(s.length,l),t){clearInterval(COMPLETED_MARKET_ITEMS_TIMER);var d=LocalStorageSihMarket.get();c.length?(o.hide(),a.text("".concat(c.length," ").concat(SIHLang.market.resubmit_orders.progress_panel.not_relisted_items))):(a.hide(),d.isAutoReloadOff&&setTimeout((function(){window.location.reload()}),3e3)),i.css("display","flex")}}))}),1e3)},progressPanel_loadHtml=function(e){var t=$J("body"),n=$J('.my_listing_section[data-table-id="'.concat(e,'"] .market_listing_row.stack[id^="').concat("sell_listings"===e?"mylisting":"mybuyorder",'"]')),a=n?n.length:0,i=LocalStorageSihMarket.get(),r=$J('\n    <div class="sih-progress-panel animate-down sih-global progress">\n      <div class="sih-progress-panel__inner">\n        <div class="sih-progress-panel__left-side row gap-5">\n          <span class="text text_white">'.concat(SIHLang.market.resubmit_orders.progress_panel.title,'</span>\n          <div class="row">\n            <span class="sih-progress-panel__success-sell-count text text_white">0</span>\n            <span class="text text_white">/</span>\n            <span class="text text_white">').concat(a,'</span>\n          </div>\n        </div>\n\n        <div class="sih-progress-panel__right-side row items-center gap-20">\n          <span class="sih-progress-panel__info-text text text_light-grey"\n            >').concat(SIHLang.market.resubmit_orders.progress_panel.dont_refresh,'</span\n          >\n          <div class="sih-progress-panel__buttons">\n            <a href="javascript:window.location.reload()" class="text text_blue hover-opacity-8"\n              >').concat(SIHLang.market.resubmit_orders.progress_panel.reload,'</a\n            >\n            <a href="javascript:void(0)" class="sih-progress-panel__switcher-reload text text_blue hover-opacity-8"\n              >').concat(i.isAutoReloadOff?SIHLang.market.buy_order_controls.reload_automatically:SIHLang.market.buy_order_controls.not_reload_automatically,'</a\n            >\n          </div>\n        </div>\n\n        <div class="sih-progress-panel__progress-bar"></div>\n      </div>\n    </div>\n  ')),s=t.find(".sih-progress-panel");!s.length&&a>0?(t.append(r),setTimeout((function(){t.find(".sih-progress-panel").removeClass("animate-down"),DisableMarketControls(),RelocatePriceIndicator()}),100)):a>0?(s.find(".sih-progress-panel__stack-count").text(a),s.removeClass("animate-down"),RelocatePriceIndicator()):(s.addClass("animate-down"),RelocatePriceIndicator())},progressPanel_actionsListener=function(){switcherReloadAction()},loadProgress=function(e,t){var n=0,a=$J(".sih-progress-panel"),i=a.find(".sih-progress-panel__progress-bar"),r=Number(a.css("width").replace(/px/g,"").trim());r!==(n+=r/t*e)?(a.hasClass("progress")||a.addClass("progress"),i.width(Math.ceil(n)),i.is(":visible")||i.css("display","flex").hide().fadeIn()):i.width(Math.ceil(n)).fadeOut(1100,(function(){i.width(0),a.removeClass("progress")}))},switcherReloadAction=function(){$J(".sih-progress-panel").find(".sih-progress-panel__switcher-reload").off("click").click((function(e){var t=$J(e.target),n=LocalStorageSihMarket.get();n.isAutoReloadOff=!n.isAutoReloadOff,LocalStorageSihMarket.set(n),t.text(n.isAutoReloadOff?SIHLang.market.buy_order_controls.reload_automatically:SIHLang.market.buy_order_controls.not_reload_automatically)}))},RenderFinalResubmitModal=function(e){finalResubmitModal_loadHtml(e),finalResubmitModal_listenerActions()},RemoveFinalResubmitModal=function(){var e=$J(".sih-final-resubmit"),t=e.attr("data-table-id");e.fadeOut(300,(function(){e.remove(),RenderChangePanel(t)}))},UpdateResubmitTotalInfo=function(){var e=$J(".sih-final-resubmit"),t=e.attr("data-table-id"),n=e.find(".sih-final-resubmit__content"),a=e.find(".sih-final-resubmit__bottom"),i=n.find(".sih-market-content__item"),r=a.find(".sih-final-resubmit__total-count"),s=a.find(".sih-final-resubmit__old-selling-price"),o=a.find(".sih-final-resubmit__old-receive-price"),l=a.find(".sih-final-resubmit__new-selling-price"),c=a.find(".sih-final-resubmit__new-receive-price"),d=a.find(".sih-final-resubmit__different-text"),_=a.find(".sih-final-resubmit__different-selling-price"),u=a.find("#sih-resell-items"),m=$J('.my_listing_section[data-table-id="'.concat(t,'"] .market_listing_row.stack[id^="').concat("sell_listings"===t?"mylisting":"mybuyorder",'"]')),h=m?m.length:0,p=getTotalPricesInfo(t),f=p.oldTotalSellingPriceFormatted,g=p.oldTotalReceivePriceFormatted,b=p.newTotalSellingPriceFormatted,v=p.newTotalReceivePriceFormatted,y=(p.different,p.differentFormatted),k=p.differentPercent;r.text("".concat(h," ").concat(SIHLang.market.resubmit_orders.items)),s.text(f),o.text(g),l.text(b),c.text("sell_listings"===t?v:b),i.length?a.addClass("border-top"):(n.css("min-height",0),a.removeClass("border-top")),i.length&&!isPriceChanged(e)?u.addClass("opacity-50per disabled"):u.removeClass("opacity-50per disabled"),k>=-3&&k<=3?(e.find(".sih-final-resubmit__modal").removeClass("alert"),d.removeClass("text_green-800 text_red").text("".concat(SIHLang.market.resubmit_orders.final_modal.result)),_.removeClass("text_green-800 text_red").text(y),u.removeClass("sih-modal__button_red").addClass("sih-modal__button_blue").text("".concat(SIHLang.market.resubmit_orders.relisting))):k<-3?(e.find(".sih-final-resubmit__modal").addClass("alert"),d.removeClass("text_green-800").addClass("text_red").text("".concat(SIHLang.market.resubmit_orders.final_modal.result)),_.removeClass("text_green-800").addClass("text_red").text(y),u.removeClass("sih-modal__button_blue").addClass("sih-modal__button_red").text("".concat(SIHLang.market.resubmit_orders.alert_resubmit))):(e.find(".sih-final-resubmit__modal").removeClass("alert"),d.removeClass("text_red").addClass("text_green-800").text("".concat(SIHLang.market.resubmit_orders.final_modal.result)),_.removeClass("text_red").addClass("text_green-800").text(y),u.removeClass("sih-modal__button_red").addClass("sih-modal__button_blue").text("".concat(SIHLang.market.resubmit_orders.relisting)))},finalResubmitModal_loadHtml=function(e){var t=$J("body"),n=$J('.my_listing_section[data-table-id="'.concat(e,'"] .market_listing_row.stack[id^="').concat("sell_listings"===e?"mylisting":"mybuyorder",'"]')),a=n?n.length:0,i=getTotalPricesInfo(e),r=i.oldTotalSellingPriceFormatted,s=i.oldTotalReceivePriceFormatted,o=i.newTotalSellingPriceFormatted,l=i.newTotalReceivePriceFormatted,c=(i.different,i.differentFormatted),d=i.differentPercent,_=$J('\n    <div id="sih-resubmit-orders" class="sih-final-resubmit" data-table-id="'.concat(e,'">\n      <div class="sih-final-resubmit__fade"></div>\n      <div class="sih-global sih-modal sih-final-resubmit__modal ').concat(d<-3?"alert":"",'">\n        <div class="sih-modal__close"></div>\n        <div class="sih-final-resubmit__inner sih-modal__inner">\n          <div class="title px-28">\n            ').concat("sell_listings"===e?SIHLang.market.resubmit_orders.final_modal.title:SIHLang.market.resubmit_orders.final_modal.title_buy,'\n          </div>\n\n          <div class="sih-final-resubmit__content sih-market-content"></div>\n\n          <div class="sih-final-resubmit__bottom ').concat(d<-3?"border-top":"",'">\n            <div class="sih-final-resubmit__bottom_left-side">\n              <span class="sih-final-resubmit__total-count text text_grey-900"\n                >').concat(a," ").concat(SIHLang.market.resubmit_orders.items,'</span\n              >\n              <div class="sih-final-resubmit__total-row">\n                <span class="text text_grey-900 ">').concat(SIHLang.market.resubmit_orders.final_modal.initial_cost,'</span>\n                <div class="row items-center gap-5">\n                  <span class="sih-final-resubmit__old-selling-price text text_grey-900"\n                    >').concat(r,"</span\n                  >\n                  ").concat("sell_listings"===e?'<span class="text text_grey-900">(<span class="sih-final-resubmit__old-receive-price">'.concat(s,"</span>)</span>"):"",'\n                </div>\n              </div>\n              <div class="sih-final-resubmit__total-row">\n                <span class="text text_grey-900">').concat(SIHLang.market.resubmit_orders.final_modal.after_resubmit,'</span>\n                <div class="row items-center gap-5">\n                  <span class="sih-final-resubmit__new-selling-price text text_grey-900"\n                    >').concat(o,"</span\n                  >\n                  ").concat("sell_listings"===e?'<span class="text text_grey-900">(<span class="sih-final-resubmit__new-receive-price">'.concat(l,"</span>)</span>"):"",'\n                </div>\n              </div>\n              <div class="sih-final-resubmit__total-row">\n                <span\n                  class="sih-final-resubmit__different-text text text_grey-900 ').concat(d>=-3&&d<=3?"":d<-3?"text_red":"text_green-800",'"\n                  >').concat("".concat(SIHLang.market.resubmit_orders.final_modal.result),'</span\n                >\n                <span\n                  class="sih-final-resubmit__different-selling-price text text_grey-900 ').concat(d>=-3&&d<=3?"":d<-3?"text_red":"text_green-800",'"\n                  >').concat(c,'</span\n                >\n              </div>\n            </div>\n\n            <div class="sih-final-resubmit__bottom_right-side">\n              <div class="column gap-5 items-end">\n                <span class="text fs-16"\n                  >').concat("sell_listings"===e?SIHLang.market.resubmit_orders.final_modal.you_get:SIHLang.market.resubmit_orders.final_modal.you_spend,'</span\n                >\n                <span class="sih-final-resubmit__new-receive-price text fs-20"\n                  >').concat("sell_listings"===e?l:o,'</span\n                >\n              </div>\n\n              <div class="sih-final-resubmit__buttons">\n                <a href="javascript:void(0)" id="sih-resubmit-cancel" class="sih-modal__button fs-16 py-13 px-36"\n                  >').concat(SIHLang.market.resubmit_orders.cancel,'</a\n                >\n                <a\n                  href="javascript:void(0)"\n                  id="sih-resell-items"\n                  class="sih-modal__button sih-modal__button').concat(d<-3?"_red":"_blue",' fs-16 py-13 px-36"\n                  >').concat("".concat(d<-3?SIHLang.market.resubmit_orders.alert_resubmit:SIHLang.market.resubmit_orders.relisting),"</a\n                >\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  "));n.each((function(t,n){var a=$J(n),i=+a.find(".resubmit-price__selling").attr("data-old-price"),r=+a.find(".resubmit-price__selling").attr("data-new-price");if((0,global.getPercentNumberDifference)(r,i,"sell_listings"===e?-1:1)<=-10){var s=GetModalContentItem(a,t,!0);_.find(".sih-final-resubmit__content").append(s)}})),t.find(".sih-final-resubmit").length||(_.find(".sih-final-resubmit__content").children().length&&_.find(".sih-final-resubmit__content").css("display","flex"),t.append(_),$J(".sih-final-resubmit").find(".sih-final-resubmit__modal").fadeIn(300))},getTotalPricesInfo=function(e){var t=$J('.my_listing_section[data-table-id="'.concat(e,'"] .market_listing_row.stack[id^="').concat("sell_listings"===e?"mylisting":"mybuyorder",'"]')),n=0,a=0,i=0,r=0;t.each((function(t,s){var o=$J(s),l="buy_orders"===e?+o.find(".market_listing_buyorder_qty .market_listing_price").text():1,c=+o.find(".resubmit-price__selling").attr("data-old-price")*l,d=+o.find(".resubmit-price__receive").attr("data-old-price")*l,_=+o.find(".resubmit-price__selling").attr("data-new-price")*l,u=+o.find(".resubmit-price__receive").attr("data-new-price")*l;n+=c,a+=d,i+=_,r+=u}));var s=currency_service.A.getPriceFromCurrency(n,currencyId,currencyId).text,o=currency_service.A.getPriceFromCurrency(a,currencyId,currencyId).text,l=currency_service.A.getPriceFromCurrency(i,currencyId,currencyId).text,c=currency_service.A.getPriceFromCurrency(r,currencyId,currencyId).text,d=Math.round((0,global.getPercentNumberDifference)(i,n,"sell_listings"===e?-1:1)),_=Math.ceil(1e3*(i-n))/1e3;return{oldTotalSellingPriceFormatted:s,oldTotalReceivePriceFormatted:o,newTotalSellingPriceFormatted:l,newTotalReceivePriceFormatted:c,different:_,differentFormatted:currency_service.A.getPriceFromCurrency(_,currencyId,currencyId).text,differentPercent:d}},finalResubmitModal_listenerActions=function(){finalResubmitModal_currentPriceAction(),finalResubmitModal_bestPriceAction(),finalResubmitModal_changeItemInputAction(),finalResubmitModal_closeModalAction(),resellItemsAction()},finalResubmitModal_currentPriceAction=function(){var e=$J(".sih-final-resubmit"),t=e.attr("data-table-id");e.find(".sih-market-content__current-price").off("click").click((function(){var e=$J(this),n=e.closest(".sih-market-content__item").find(".sih-market-content__input"),a=+e.attr("data-price"),i=+n.val();Math.round((0,global.getPercentNumberDifference)(a,i,"sell_listings"===t?-1:1))<=-10?n.removeClass("text_white").addClass("text_red"):n.removeClass("text_red").addClass("text_white"),n.val(a),finalResubmitModal_onChangePrice(n)}))},finalResubmitModal_bestPriceAction=function(){var e=$J(".sih-final-resubmit");e.find(".sih-market-content__best-price").off("click").click((function(){var t=e.attr("data-table-id"),n=$J(this),a=n.closest(".sih-market-content__item"),i=a.find(".sih-market-content__input"),r=+a.find(".sih-market-content__current-price").attr("data-price"),s=+n.attr("data-price");Math.round((0,global.getPercentNumberDifference)(s,r,"sell_listings"===t?-1:1))<=-10?i.removeClass("text_white").addClass("text_red"):i.removeClass("text_red").addClass("text_white"),i.val(s),finalResubmitModal_onChangePrice(i)}))},finalResubmitModal_changeItemInputAction=function(){var e=$J(".sih-final-resubmit"),t=e.find(".sih-market-content__input"),n=null;t.each((function(t,a){var i=$J(a),r=i.closest(".sih-market-content__item").find(".sih-market-content__current-price").attr("data-price");i.focus((function(){i.keyup((function(){clearTimeout(n),n=setTimeout((function(){var t=e.attr("data-table-id"),n=+i.val();Math.round((0,global.getPercentNumberDifference)(n,r,"sell_listings"===t?-1:1))<=-10?i.removeClass("text_white").addClass("text_red"):i.removeClass("text_red").addClass("text_white"),compareItemPrices(i),finalResubmitModal_onChangePrice(i)}),500)}))})),i.focusout((function(){i.off("keyup")})),i.off("change").change((function(){compareItemPrices(i),finalResubmitModal_onChangePrice(i)}))}))},finalResubmitModal_closeModalAction=function(){var e=$J(".sih-final-resubmit"),t=e.find(".sih-modal__close"),n=e.find(".sih-final-resubmit__fade"),a=e.find("#sih-resubmit-cancel");t.off("click").click((function(){RemoveFinalResubmitModal()})),n.off("click").click((function(){RemoveFinalResubmitModal()})),a.off("click").click((function(){RemoveFinalResubmitModal()}))},resellItemsAction=function(){var e=$J(".sih-final-resubmit"),t=$J("#sih-resell-items"),n=e.attr("data-table-id"),a=null;t.off("click").click((function(){clearTimeout(a),a=setTimeout((function(){t.addClass("pointer-events-none"),e.fadeOut(300,(function(){e.remove(),RenderProgressPanel(n),"sell_listings"===n?global.SellListing.resellItems().then((function(){UpdateSuccessSellCount("sell_listings",!0),$J('#tabContentsMyActiveMarketListingsRows .market_listing_row.stack[id^="mylisting"]').css("background-color","rgba(0, 0, 0, 0.2)").removeClass("stack")})):global.BuyOrders.createBuyOrders().then((function(){UpdateSuccessSellCount("buy_orders",!0),$J('#tabContentsMyListings .market_listing_row.stack[id^="mybuyorder"]').css("background-color","rgba(0, 0, 0, 0.2)").removeClass("stack")}))})),RegisterRelistingItemsBtn()}),200)}))},finalResubmitModal_onChangePrice=function(e){var t=e.closest(".sih-market-content__item");_ValidateInputPrice(e),changeResubmitItem(t),UpdateResubmitTotalInfo()},compareItemPrices=function(e){var t=$J(".sih-final-resubmit").attr("data-table-id"),n=e.closest(".sih-market-content__item").find(".sih-market-content__current-price").attr("data-price"),a=+e.val();Math.round((0,global.getPercentNumberDifference)(a,n,"sell_listings"===t?-1:1))<=-10?e.removeClass("text_white").addClass("text_red"):e.removeClass("text_red").addClass("text_white")},changeResubmitItem=function(e){var t=$J(".sih-final-resubmit").attr("data-table-id"),n=$J("#tabContentsMyListings").find("#".concat("sell_listings"===t?"mylisting_".concat(e[0].itemInfo[1]):"mybuyorder_".concat(e[0].itemInfo[0])));n[0].itemInfo=e[0].itemInfo,n.find(".resubmit-price").remove(),"sell_listings"===t?global.SellListing.removeItem(e[0].itemInfo[4]):global.BuyOrders.removeItem(e[0].itemInfo[0]);var a=e.find(".sih-market-content__input"),i=+a.val(),r=GetItemPriceInfo(n).oldSellingPrice;BuildResubmitData(n,"manual",a),r===i&&("sell_listings"===t?global.SellListing.removeItem(e[0].itemInfo[4]):global.BuyOrders.removeItem(e[0].itemInfo[0]))};function resubmitOrders_global_slicedToArray(e,t){return resubmitOrders_global_arrayWithHoles(e)||resubmitOrders_global_iterableToArrayLimit(e,t)||resubmitOrders_global_unsupportedIterableToArray(e,t)||resubmitOrders_global_nonIterableRest()}function resubmitOrders_global_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function resubmitOrders_global_unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return resubmitOrders_global_arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?resubmitOrders_global_arrayLikeToArray(e,t):void 0}}function resubmitOrders_global_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function resubmitOrders_global_iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,r,s,o=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=r.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}function resubmitOrders_global_arrayWithHoles(e){if(Array.isArray(e))return e}$J(window).on("beforeunload",(function(){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_STOP_RESELL_ITEMS"},(function(e){})),chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_STOP_RELISTING_BUY_ORDERS_ITEMS"},(function(e){}))}));var LocalStorageSihMarketResubmit={_name:"SIH_MARKET_RESUBMIT",get:function(){return utils.z.get(this._name)},set:function(e){utils.z.set(this._name,e)},getPercentAlert:function(e){var t=utils.z.get(this._name);return{percent_alert:t?t["percent_alert_".concat(e)]:20}},getDelay:function(e){var t=utils.z.get(this._name);return t&&t["delay_".concat(e)]?t["delay_".concat(e)]:{isEnabled:!1,delay:300}}},BuildResubmitData=function(e,t,n){var a=$J("#sih-resubmit-orders"),i=e.find(".sih-resubmit"),r=e.find(".sih-resubmit__btn"),s=e.closest(".my_listing_section").attr("data-table-id"),o=e.find(".market_listing_item_name_link").attr("href"),l=resubmitOrders_global_slicedToArray(o.replace(/https:\/\/steamcommunity.com\/market\/listings\//,"").split("/"),2),c=l[0],d=l[1],_=GetItemPriceInfo(e,t),u=_.oldSellingPrice,m=_.newSellingPrice,h=_.oldReceivePrice,p=_.newReceivePrice,f=_.formattedNewSellingPrice,g=_.formattedNewReceivePrice;if("manual"===t&&n){m=+n.val(),p=RecalculateSellerPrice(m);var b=Math.floor(window.PriceUtils.steamBuyerPrice(p,g_rgWalletInfo.wallet_publisher_fee_percent_default,g_rgWalletInfo)/100*100)/100;b<m&&(m=b),f=currency_service.A.getPriceFromCurrency(+m,currencyId,currencyId).text,g=currency_service.A.getPriceFromCurrency(p/100,currencyId,currencyId).text,r.attr("data-state","manual"),r.find("img").attr("src","chrome-extension://".concat(SIHID,"/assets/market/resubmit/resubmit_manual.svg")).attr("alt","manual")}var v="manual"!==t?GetListingItemRowInfo(e):a[0].itemInfo?a[0].itemInfo:e[0].itemInfo,y=LocalStorageSihMarket.get().commission,k=void 0===y||y;if(i.before('\n    <div class="resubmit-price">\n      <div class="column">\n        <span\n          class="resubmit-price__selling"\n          data-old-price="'.concat(u.toFixed(2),'"\n          data-new-price="').concat(m.toFixed(2),'"\n        >\n          ').concat(f,"\n        </span>\n        ").concat("sell_listings"===s?'\n              <span class="resubmit-price__receive fs-12"\n                style="display: '.concat(k?"flex":"none",'"\n                data-old-price="').concat(h/100,'"\n                data-new-price="').concat(p/100,'">\n                (').concat(g,")\n              </span>\n            "):"","\n      </div>\n    </div>\n  ")),"sell_listings"===s){var S={market_hash_name:d,listingid:v[1],appid:v[2],contextid:v[3],assetid:v[4],amount:1,price:p};global.SellListing.setItem(S),i.find(".sih-resubmit__undo").attr("data-id","".concat(v[4]))}else{var I=+e.find(".market_listing_buyorder_qty .market_listing_price").text(),C={payload:{buy_orderid:v[0],sessionid:g_sessionID,currency:g_rgWalletInfo&&g_rgWalletInfo.wallet_currency?g_rgWalletInfo.wallet_currency:1,appid:c,market_hash_name:decodeURIComponent(d),price_total:100*m*I,quantity:I,billing_state:"",save_my_address:0},requestHeaders:{referer:o}};global.BuyOrders.setItem(C),i.find(".sih-resubmit__undo").attr("data-id","".concat(v[0]))}e.css("background-color","#101822").addClass("stack")},IsEnabledResubmitOrders=function(){return new Promise((function(e){chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_ENABLED_RESUBMIT_ORDERS",data:{steamId:g_steamID}},(function(t){e(t)}))}))},GetModalContentItem=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=GetListingItemRowInfo(e),i=e.attr("id").includes("mybuyorder")?"buy_orders":"sell_listings",r=n||!!e.find(".sih-market-alert").length,s=e.find(".market_listing_item_name_link").attr("href"),o=e.find(".market_listing_item_img").attr("src"),l=e.find(".market_listing_item_img").css("border-color"),c=e.find(".market_listing_item_name_link").text(),d=e.find(".market_listing_game_name").text(),_="sell_listings"===i?e.find(".market_listing_right_cell.market_listing_my_price").find(".market_listing_price span"):e.find(".sih_listing_my_price"),u="sell_listings"===i?e.find(".market_listing_minimum--text").text().trim():e.find(".market_listing_buyorder_max .market_listing_price").text().trim(),m="sell_listings"===i?_.find("span:first-child").text().trim():_.text().trim(),h=m.match(new RegExp(/([\d+?., ]+)/g))||"0",p=(0,global.parseNumber)("0"!==h?h[0]:h),f=u.match(new RegExp(/([\d+?., ]+)/g))||"0",g=(0,global.parseNumber)("0"!==f?f[0]:f),b=e.find(".resubmit-price__selling").length?+e.find(".resubmit-price__selling").attr("data-new-price"):0,v=$J('\n    <div class="sih-market-content__item">\n      <div class="sih-market-content__item-info row items-center">\n        <img\n          class="sih-market-content__image market_listing_item_img"\n          src="'.concat(o,'"\n          style="border-color: ').concat(l,'"\n        />\n        <div class="column">\n          <a href="').concat(s,'" target="_blank" class="sih-market-content__item-name text bold" title="').concat(c,'"\n            >').concat(c,'</a\n          >\n          <span class="text fs-12 text_grey-900">').concat(d,'</span>\n        </div>\n      </div>\n\n      <div class="sih-market-content__compare">\n        <a\n          href="javascript:void(0)"\n          class="sih-market-content__current-price row items-center gap-15"\n          data-price="').concat(p,'"\n        >\n          ').concat(r?'\n                 <span class="sih-market-alert row items-center" title="">\n                    <svg width="20" height="18" viewBox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M10.9998 11.0002H8.9998V6.0002H10.9998V11.0002ZM10.9998 15.0002H8.9998V13.0002H10.9998V15.0002ZM1.5998 18.0002H18.3998C19.5998 18.0002 20.2998 16.7002 19.6998 15.7002L11.2998 1.2002C10.6998 0.200195 9.2998 0.200195 8.6998 1.2002L0.299805 15.7002C-0.300195 16.7002 0.399805 18.0002 1.5998 18.0002Z" fill="#C44E4E"/>\n                    </svg>\n                 </span>\n              ':"",'\n\n          <span class="text text_white bold text-center text-ellipsis">').concat(m,'</span>\n        </a>\n\n        <div class="row justify-center items-center w-24 h-24">\n          <svg width="8" height="12" viewBox="0 0 8 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path\n              d="M0.589844 10.58L5.16984 6L0.589844 1.41L1.99984 0L7.99984 6L1.99984 12L0.589844 10.58Z"\n              fill="#9EA7B3"\n            />\n          </svg>\n        </div>\n\n        <label\n          for="sih-market-content-input-').concat(t,'"\n          class="sih-market-content__input-outer row justify-between items-center bg-black-100 py-8 px-24 br2-grey"\n        >\n          <input\n            type="number"\n            id="sih-market-content-input-').concat(t,'"\n            class="sih-market-content__input text ').concat(n?"text_red":"text_white",' bg-transparent border-none"\n            value="').concat(b||p,'"\n            step="0.01"\n            min="0.03"\n          />\n\n          <label\n            for="sih-market-content-input-').concat(t,'"\n            class="sih-market-content__best-price row gap-5"\n            data-price="').concat(g,'"\n          >\n            ').concat(r?'<span class="text text_red">'.concat(SIHLang.market.resubmit_orders.market_price,'</span>\n                        <span class="text text_red">').concat(u,"</span>"):'<span class="text text_grey-900">'.concat(SIHLang.market.resubmit_orders.market_price,'</span>\n                        <span class="text text_grey-900">').concat(u,"</span>"),"\n          </label>\n        </label>\n\n        ").concat(n?'\n              <a href="javascript:void(0)" class="sih-market-content__remove">\n                <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                  <path d="M14 1.41L12.59 0L7 5.59L1.41 0L0 1.41L5.59 7L0 12.59L1.41 14L7 8.41L12.59 14L14 12.59L8.41 7L14 1.41Z" fill="#9EA7B3"/>\n                </svg>\n              </a>\n            ':"","\n      </div>\n    </div>\n  "));v[0].itemInfo=a;var y=v.find(".sih-market-content__current-price"),k=v.find(".sih-market-alert");return AddCurrentPriceTooltip(y),AddAlertTooltip(k,i),v.find(".sih-market-content__item-name").tooltip({position:{my:"left top",at:"left bottom"}}),v.find(".sih-market-content__remove").length&&v.find(".sih-market-content__remove").click((function(){var t=$J(this).closest(".sih-market-content__item");e.find(".resubmit-price").remove(),e.css("background-color","rgba(0, 0, 0, 0.2)").removeClass("stack"),"sell_listings"===i?global.SellListing.removeItem(a[4]):global.BuyOrders.removeItem(a[0]),UpdateHeaderTotalResubmitPrice(i),t.fadeOut(300,(function(){t.remove();var e=$J('.my_listing_section[data-table-id="'.concat(i,'"] .market_listing_row.stack[id^="').concat("sell_listings"===i?"mylisting":"mybuyorder",'"]')),n=e?e.length:0;UpdateResubmitTotalInfo(),n||RemoveFinalResubmitModal()}))})),v},_ValidateInputPrice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=$J("#sih-resubmit-orders"),a=$J("#tabContentsMyActiveMarketListingsTable"),i=n.find(".sih-market-content__input"),r=+a.find("#totalRow0 .sih-total-sell__receive").attr("data-price"),s=0;a.find("#totalRow0 .total-resubmit-price__receive").length&&(r=+a.find("#totalRow0 .total-resubmit-price__receive").attr("data-price")),$J("#await_listings").length&&(s=+$J("#totalRow1").find(".sih-market-total__receive").attr("data-price"));var o=e?e.closest(".sih-market-content__compare").find(".sih-market-content__current-price").length?e.closest(".sih-market-content__compare").find(".sih-market-content__current-price"):e.closest(".sih-modal").find(".sih-resubmit-orders__current-price"):n.find(".sih-market-content__current-price"),l=e&&t?e:n.find("#sih-resubmit-orders-group-input-all"),c=e?e.closest(".sih-market-content__item").siblings().find(".sih-market-content__input"):n.find(".sih-market-content__item"),d=+g_rgWalletInfo.wallet_balance/100,_=+g_rgWalletInfo.wallet_max_balance/100,u=+g_rgWalletInfo.wallet_trade_max_balance/100,m=+o.attr("data-price"),h=RecalculateSellerPrice(m)/100,p=+l.val()<.03?.03:+l.val()>u?u:+l.val(),f=RecalculateSellerPrice(p)/100,g=0;e?c.each((function(e,t){var n=$J(t);g+=+n.val()})):g=p*c.length;var b=g?RecalculateSellerPrice(g)/100:0,v=Math.ceil(1.15*(_-d-(r+s+(e?b:0)-h))*100)/100;function y(){return!e&&t}(e?f:0)+b+r+s>_-d?v>u?y()&&i.each((function(e,t){var n=$J(t);_ValidateInputPrice(n,!1)})):(t?"sih-resubmit-orders-group-input-all"!==l.attr("id")&&(p<=v?l.val(p):l.val(v)):p<=v&&e.val(p),y()&&i.each((function(e,t){var n=$J(t);_ValidateInputPrice(n,!1)}))):y()?(l.val(p),i.val(l.val())):p<=v&&e.val(p)},GetListingItemRowInfo=function(e){return e.find(".item_market_action_button.item_market_action_button_edit").attr("href").match(/\((.+)\)/)[1].replace(/['\s]/g,"").split(",")},GetItemPriceInfo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=e.attr("id").includes("mybuyorder")?"buy_orders":"sell_listings",a=e.find(".sih_listing_my_price").text().trim(),i="sell_listings"===n?e.find(".market_listing_minimum--text").text().trim():e.find(".market_listing_buyorder_max .market_listing_price").text().trim(),r=a.match(new RegExp(/([\d+?., ]+)/g))[0].trim()||"0",s=i.match(new RegExp(/([\d+?., ]+)/g))[0].trim()||"0",o=(0,global.parseNumber)(r),l="0"!==s?(0,global.parseNumber)(s):o;l&&("default"===t?"sell_listings"===n?l-=.01:l+=.01:"percent"===t&&(l="sell_listings"===n?Math.floor(100*(l-.01*l))/100:Math.floor(100*(l+.01*l))/100));var c=RecalculateSellerPrice(o),d=l?RecalculateSellerPrice(l):c,_=Math.floor(window.PriceUtils.steamBuyerPrice(d,g_rgWalletInfo.wallet_publisher_fee_percent_default,g_rgWalletInfo)/100*100)/100;return _<l&&(l=_),{oldSellingPrice:o,newSellingPrice:l,oldReceivePrice:c,newReceivePrice:d,formattedNewSellingPrice:currency_service.A.getPriceFromCurrency(l,currencyId,currencyId).text,formattedNewReceivePrice:currency_service.A.getPriceFromCurrency(d/100,currencyId,currencyId).text}},RecalculateSellerPrice=function(e){var t=getPriceAsInt((Math.floor(100*e)/100).toString()),n=g_rgWalletInfo.wallet_publisher_fee_percent_default;return t-CalculateFeeAmount(t,n).fees},RecalculatePriceDifferent=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sell_listings";GetListingsRows(e).each((function(t,n){var a=$J(n),i=a.find(".sih_listing_my_price"),r="sell_listings"===e?a.find(".market_listing_minimum .market_listing_minimum--text"):a.find(".market_listing_buyorder_max .market_listing_price");if(r.length){var s=i.text().match(new RegExp(/([\d+?., ]+)/g))?i.text().match(new RegExp(/([\d+?., ]+)/g))[0].trim():"0",o=(0,global.parseNumber)(s),l=r.text().match(new RegExp(/([\d+?., ]+)/g))?r.text().match(new RegExp(/([\d+?., ]+)/g))[0].trim():"0",c=(0,global.parseNumber)(l);if(c&&o&&("sell_listings"===e?c<o:c>o)){var d=100*c,_=100*o,u=Math.round((0,global.getPercentNumberDifference)(d,_,"sell_listings"===e?-1:1)),m=LocalStorageSihMarketResubmit.getPercentAlert(e).percent_alert,h=void 0===m?20:m;a.find(".sih-market-alert").remove(),u<=-h&&RenderMarketAlert(e,a),a.hasClass("red-bg")||(a.addClass("red-bg"),a.prepend('<div class="sih-listing__color-cell start red"></div>'),a.append('<div class="sih-listing__color-cell end red"></div>'))}}}))},SaveSellListing=function(e){var t=Object.values(e).reduce((function(e,t){return Object.values(t).forEach((function(t){Object.values(t).forEach((function(t){if(2===t.status){var n=t.appid,a=t.contextid,i=t.id,r=t.classid,s=t.instanceid,o=t.amount,l={appid:n.toString(),contextid:a,assetid:i,classid:r,instanceid:s,amount:o};e.push(l)}}))})),e}),[]);chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_SAVE_ITEM_FOR_SALE",data:t},(function(){}))},isPriceChanged=function(e){var t=e.find(".sih-market-content__item"),n=!1;return t.each((function(e,t){var a=$J(t),i=a.find(".sih-market-content__input").val();+a.find(".sih-market-content__current-price").attr("data-price")!=+i&&(n=!0)})),n},AddCurrentPriceTooltip=function(e){e.attr("title","".concat(SIHLang.market.resubmit_orders.tooltips.current_price)).tooltip({position:{my:"left top",at:"left bottom"},tooltipClass:"sih-tooltip__current-price"})},AddAlertTooltip=function(e,t){var n=LocalStorageSihMarketResubmit.getPercentAlert(t).percent_alert,a=void 0===n?20:n,i=$J('\n    <div class="sih-global">\n      <div class="column gap-5">\n        <span class="text">\n          '.concat("sell_listings"===t?SIHLang.market.resubmit_orders.alert_info_text_1:SIHLang.market.resubmit_orders.alert_info_buy_text_1,'\n          <a href="javascript:void(0)" class="sih-edit-alert__btn text text_blue hover-opacity-8">').concat(a,"%</a>\n          ").concat("sell_listings"===t&&"en"===lang?SIHLang.market.resubmit_orders.alert_info_text_2:"",'\n        </span>\n        <a href="javascript:void(0)" class="sih-edit-alert__btn text text_blue hover-opacity-8"\n          >').concat(SIHLang.market.resubmit_orders.tooltips.alert_info_edit,"</a\n        >\n      </div>\n    </div>\n  "));e.tooltip({content:i.text(),position:{my:"left top",at:"left bottom",using:function(e,n){i.find(".sih-edit-alert__btn").click((function(){RenderEditAlertModal(t)})),$J(this).css(e),$J(".ui-tooltip-content").hide(),$J(this).append(i),$J(".sih-tooltip__current-price").hide()}}}).on("mouseenter",(function(t){e.not($J(this)).tooltip("close")})).on("mouseleave",(function(e){$J(".ui-tooltip:hover").length>0&&e.stopImmediatePropagation()})),$J("body").on("mouseleave",".ui-tooltip",(function(t){e.tooltip(),e.tooltip("close")}))},RelocatePriceIndicator=function(){var e=$J(".pq-container"),t=$J(".sih-toolbar:visible:not(.animate-down)"),n=$J(".sih-change-panel:visible:not(.animate-down)"),a=$J(".sih-progress-panel:visible:not(.animate-down)");t.length||n.length?e.css("bottom","15vh"):a.length?e.css("bottom","40px"):e.css("bottom","3px")},DisableMarketControls=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=$J(".market_listing_table_header .select-checkbox"),n=GetListingsRows("sell_listings"),a=GetListingsRows("await_listings"),i=GetListingsRows("buy_orders"),r=$J(".sih-select-overprices"),s=$J("#tabContentsMyActiveMarketListings_controls");n.children().toggleClass("pointer-events-none",e),a.children().toggleClass("pointer-events-none",e),i.children().toggleClass("pointer-events-none",e),r.toggleClass("pointer-events-none",e),t.toggleClass("pointer-events-none",e).parent().addClass("sih-global"),s.addClass("sih-global").children().toggleClass("pointer-events-none",e)},RenderChangePanel=function(e){IsEnabledResubmitOrders().then((function(t){t.success&&sih_app_global_service.getSubscribeAds().then((function(t){changePanel_loadHtml(e,t.success)}))}))},changePanel_loadHtml=function(e,t){var n=$J("body"),a=$J('.my_listing_section[data-table-id="'.concat(e,'"] .market_listing_row.stack[id^="').concat("sell_listings"===e?"mylisting":"mybuyorder",'"]')),i=$J('.my_listing_section[data-table-id="'.concat("sell_listings"===e?"buy_orders":"sell_listings",'"] .market_listing_row.stack[id^="').concat("sell_listings"===e?"mybuyorder":"mylisting",'"]')),r=a?a.length:0;r&&i.length&&(i.each((function(e,t){return $J(t).find(".sih-resubmit__undo").trigger("click")})),RenderChangePanel(e)),!r&&i.length&&RenderChangePanel("sell_listings"===e?"buy_orders":"sell_listings");var s=$J('\n    <div class="sih-change-panel animate-down sih-global" data-table-id="'.concat(e,'">\n      <div class="sih-change-panel__inner">\n        <div class="column items-center gap-8">\n          <div class="row gap-5">\n            <span class="text text_light-grey">').concat(SIHLang.market.resubmit_orders.change_panel.title,'</span>\n            <span class="sih-change-panel__stack-count text text_light-grey">').concat(r,'</span>\n            <span class="text text_light-grey">').concat(SIHLang.market.resubmit_orders.items,'</span>\n          </div>\n          <div class="sih-change-panel__sub-info row">\n            <span class="text text_light-grey fs-12"\n              >').concat("sell_listings"!==e||t?"":"".concat(SIHLang.market.resubmit_orders.sub_info,' <span class="sih-change-panel__sub-btn">SIH.Black</span>'),'</span\n            >\n          </div>\n          <div class="row gap-20">\n            <a href="javascript:void(0)" class="sih-change-panel__cancel text text_white"\n              >').concat(SIHLang.market.resubmit_orders.cancel,'</a\n            >\n            <a\n              href="javascript:void(0)"\n              class="sih-change-panel__relisting text text_blue ').concat("sell_listings"!==e||t?"":"sih-change-panel__relisting_disabled",'"\n              >').concat(SIHLang.market.resubmit_orders.relisting,"</a\n            >\n          </div>\n        </div>\n      </div>\n    </div>\n  ")),o=n.find(".sih-change-panel");!o.length&&r>0?(n.append(s),setTimeout((function(){n.find(".sih-change-panel").removeClass("animate-down"),RelocatePriceIndicator()}),100),changePanel_actionsListener(t,e)):r>0?(o.attr("data-table-id",e),o.find(".sih-change-panel__stack-count").text(r),o.removeClass("animate-down"),RelocatePriceIndicator()):(o.addClass("animate-down"),RelocatePriceIndicator());var l=n.find(".sih-change-panel .sih-change-panel__sub-info");"sell_listings"===e?l.show():l.hide()},changePanel_actionsListener=function(e,t){cancelAction(),changePanel_sihBlackModalAction(),("sell_listings"!==t||e)&&relistingAction(e)},cancelAction=function(){var e=$J(".sih-change-panel");e.find(".sih-change-panel__cancel").off("click").click((function(){var t=e.attr("data-table-id");e.addClass("animate-down"),$J('.my_listing_section[data-table-id="'.concat(t,'"] .market_listing_row.stack[id^="').concat("sell_listings"===t?"mylisting":"mybuyorder",'"]')).each((function(e,t){var n=$J(t);n.find(".resubmit-price").remove(),n.css("background-color","rgba(0, 0, 0, 0.2)").removeClass("stack")})),"sell_listings"===t?global.SellListing.SELL_LISTING={}:global.BuyOrders.BUY_ORDERS=[],UpdateHeaderTotalResubmitPrice(t)}))},relistingAction=function(){var e=$J(".sih-change-panel");e.find(".sih-change-panel__relisting").off("click").click((function(){var t=e.attr("data-table-id");e.addClass("animate-down"),RenderFinalResubmitModal(t)}))},changePanel_sihBlackModalAction=function(){$J(".sih-change-panel").find(".sih-change-panel__sub-btn").off("click").click((function(){loadSubscribeAds(),ShowModalSubscribeAds()}))},LocalStorageSihMarket={_name:"SIH_MARKET",get:function(){return utils.z.get(this._name)||{}},set:function(e){utils.z.set(this._name,e)}},GetListingsRows=function(e){switch(e){case"sell_listings":return $J('#tabContentsMyActiveMarketListingsRows .market_listing_row[id^="mylisting"]');case"await_listings":return $J("#totalRow1").closest(".my_listing_section").find('.market_listing_row[id^="mylisting"]');case"buy_orders":return $J('div[id^="mybuyorder_"]');default:return null}},SetToDefaultItemsAfterPagination=function(){global.SellListing.SELL_LISTING={},$J("#select-all-0").prop("checked",!1),$J(".sih-toolbar").is(":visible")&&RenderToolbar("sell_listings"),$J(".sih-change-panel").is(":visible")&&RenderChangePanel("sell_listings")},SetMinimumPriceForListingRow=function(e,t){var n=e.closest(".my_listing_section").attr("data-table-id"),a=e.find(".market_listing_price span span:nth-child(1)").text().match(new RegExp(/([\d+?., ]+)/g))[0].trim()||"0",i=(0,global.parseNumber)(a),r=t.match(new RegExp(/([\d+?., ]+)/g))[0].trim()||"0",s=(0,global.parseNumber)(r),o=e.find(".market_listing_minimum");o.length?o.find(".market_listing_minimum--text").text("".concat(t.replace(/руб./g,"₽"))):$J(' <div class="row items-center justify-center market_listing_right_cell market_listing_minimum">\n        <span class="market_listing_minimum--text">'.concat(t.replace(/руб./g,"₽"),"</span>\n      </div>")).insertAfter(e.find(".market_listing_my_price"));if(s&&i&&s<i){var l=100*s,c=100*i,d=Math.round((0,global.getPercentNumberDifference)(l,c)),_=LocalStorageSihMarketResubmit.getPercentAlert("sell_listings").percent_alert;d<=-(void 0===_?20:_)&&RenderMarketAlert(n,e),e.hasClass("red-bg")||(e.addClass("red-bg"),e.prepend('<div class="sih-listing__color-cell start red"></div>'),e.append('<div class="sih-listing__color-cell end red"></div>'));var u=e.attr("id").replace(/mylisting_/g,"").trim();rowIdsArr&&!rowIdsArr.includes(u)&&rowIdsArr.push(u)}e.find(".market_listing_edit_buttons .market_listing_cancel_button .select-checkbox").is(":checked")?e.find(".sih-resubmit").removeClass("without-price").removeAttr("title"):e.find(".sih-resubmit").removeClass("disabled without-price").removeAttr("title"),CheckLoadedPricesSelectedRows()},RenderSelectedAllOverpricesButton=function(e){$J("#tabContentsMyListings .market_home_listing_table").each((function(){var t=$J(this),n=getListingSectionType(t);if(n){var a=$J('<a href="javascript:void(0)" class="sih-select-overprices">'.concat(SIHLang.market.selectoverpriced,"</a>"));a.click((function(){if("buy_orders"!==n){var e=t.find('.red-bg.market_listing_row[id^="mylisting"]:not(.stack)');if(e.find(".market_listing_edit_buttons .market_listing_cancel_button .select-checkbox:visible").prop("checked",!0),"tabContentsMyActiveMarketListingsTable"===t.attr("id"))e.find(".sih-resubmit").each((function(e,t){var n=$J(t);!n.length||n.hasClass("without-price")||n.hasClass("disabled")||n.addClass("disabled")}))}else{t.find('.red-bg.market_listing_row[id^="mybuyorder_"]').find(".market_listing_edit_buttons .market_listing_cancel_button .select-checkbox:visible").prop("checked",!0)}RenderToolbar(n),UpdateStateRemoveSelectedButton(t)})),"buy_orders"===e&&n===e||"sell_listings"===e&&n===e?0===t.find(".sih-market-filter__left-side .sih-select-overprices").length&&t.find(".sih-market-filter__left-side").append(a):"await_listings"===e&&n===e&&0===t.find(".sih-market-filter__left-side .sih-select-overprices").length&&t.find(".sih-market-filter__left-side").append(a)}}))},_FetchAllItemsPrices=function(e){var t,n,a=[];"sell_listings"===e?a.push(new Promise((function(e,a){t=$J('#tabContentsMyActiveMarketListingsRows .market_listing_row[id^="mylisting"] .market_listing_cancel_button .item_market_action_button:not([done])'),n=$J('#myListings .market_listing_row[id^="mylisting"]').parent().parent().find("#load_sell_overprices"),e()}))):"await_listings"===e?a.push(new Promise((function(e,a){setTimeout((function(){var a=$J("#await_listings").parent();t=a.find('.market_listing_row[id^="mylisting"] .market_listing_cancel_button .item_market_action_button:not([done])'),n=$J('#myListings .market_listing_row[id^="mylisting"]').parent().parent().find("#load_await_overprices"),e()}),500)}))):a.push(new Promise((function(e,n){t=$J('#myListings .market_listing_row[id^="mylisting"] .market_listing_cancel_button .item_market_action_button:not([done])'),e()}))),Promise.all(a).then((function(){if(t.length<=0)n.hasClass("animated-background")&&n.removeClass("animated-background");else{!n.hasClass("animated-background")&&t.length>0&&n.addClass("animated-background");var a=t[0];$J(a).attr("done","true");var i=decodeURIComponent(a.href),r=removeLinkExp.exec(i);if(r){var s=g_rgAssets[r[2]][r[3]][r[4]];s&&(a.rgItem=s,getLowestPriceHandler(a.rgItem,"",(function(t){var n=$J(a).closest(".market_listing_row");SetMinimumPriceForListingRow(n,t.lowestPrice),_FetchAllItemsPrices(e)})))}}}))},GetMaxPriceForBuyOrdersListing=function(){var e,t=$J('#myListings .market_listing_row[id^="mybuyorder"] .market_listing_item_name_link'),n=$J(".my_listing_section.market_content_block.market_home_listing_table"),a=GetCookie("Steam_Language")||"english";n.each((function(t,n){var a=$J(n);if(a.find("#buy_orders").length>0){var i=a.find(".market_listing_table_header");i.find(".market_listing_maximum").length||i.find(".market_listing_buyorder_qty").before('<span class="market_listing_right_cell market_listing_maximum" style="display: block;"\n            >'.concat(SIHLang.market.maximum,'<span class="market_sort_arrow" style="display:none"></span\n          ></span>')),(e=a.find("#load_buy_lowerprices")).hasClass("animated-background")||e.addClass("animated-background")}})),t.each((function(t,n){var i=n.href;setTimeout((function(){$J.ajax({url:i,method:"GET",crossDomain:!0,xhrFields:{withCredentials:!0},success:function(t){var r=i.replace(/https:\/\//,"").split("/")[3],s=i.replace(/https:\/\//,"").split("/")[4],o=t.match(/Market_LoadOrderSpread\( (\d+)/)[1],l=$J(n).text(),c=encodeURIComponent(l).replace(/\(/g,"%28").replace(/\)/g,"%29");chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_GET_ORDER_HISTOGRAM",data:{g_strCountryCode,steamLang:a,g_rgWalletInfo,nameid:o,appId:r,encodedName:c}},(function(t){if(t){if(t.success&&t.buy_order_graph){var i=t.buy_order_graph[0][0],o=(t.buy_order_graph[1][0],currency_service.A.getPriceFromCurrency(i,currencyId,currencyId).text),l=$J(n).closest(".market_listing_row"),c=l.find(".market_listing_buyorder_max");c.length?c.find(".market_listing_price").text("".concat(o)):l.find(".market_listing_my_price.market_listing_buyorder_qty").before(' <div\n                          class="market_listing_right_cell market_listing_my_price market_listing_buyorder_max"\n                        >\n                          <span class="market_table_value">\n                            <span class="market_listing_price"> '.concat(o," </span>\n                          </span>\n                        </div>")),l.find(".market_listing_edit_buttons.placeholder").each((function(e,t){var n=$J(t).next().find(".market_listing_price");n.find(".market_listing_inline_buyorder_qty").length>0&&n.find(".market_listing_inline_buyorder_qty").remove();var a=n.text().match(new RegExp(/([\d+?., ]+)/g))||"0",r="0"!==a?a[0]:"0";if((0,global.parseNumber)(r)>Number(i))l.hasClass("green-bg")||(l.addClass("green-bg"),l.prepend('<div class="sih-listing__color-cell start green"></div>'),l.append('<div class="sih-listing__color-cell end green"></div>'));else if((0,global.parseNumber)(r)<Number(i)){var s=Math.round((0,global.getPercentNumberDifference)(Number(i),(0,global.parseNumber)(r),1)),o=LocalStorageSihMarketResubmit.getPercentAlert("buy_orders").percent_alert,c=void 0===o?20:o;l.find(".sih-market-alert").remove(),s<=-c&&RenderMarketAlert("buy_orders",l),l.hasClass("red-bg")||(l.addClass("red-bg"),l.prepend('<div class="sih-listing__color-cell start red"></div>'),l.append('<div class="sih-listing__color-cell end red"></div>'))}})),$J(n).attr("done",!0),0===$J('#myListings .market_listing_row[id^="mybuyorder"] .market_listing_item_name_link:not([done])').length&&e.removeClass("animated-background"),l.find(".market_listing_edit_buttons .market_listing_cancel_button .select-checkbox").is(":checked")?l.find(".sih-resubmit").removeClass("without-price").removeAttr("title"):l.find(".sih-resubmit").removeClass("disabled without-price").removeAttr("title"),CheckLoadedPricesSelectedRows()}t.success&&t.sell_order_graph&&global.SihUserPrices.sendItemData(t,+r,s,+currencyId,null,a)}}))},error:function(e,t,n){}})}),3e3*(t+1))}))},RenderControlButtonsForAutoLoadPrices=function(){$J("#tabContentsMyListings .market_home_listing_table").each((function(){var e=$J(this),t=getListingSectionType(e);if(t){var n=e.find("#".concat(t)),a=' <span class="row_autoload-price">\n      <a\n        href="javascript:void(0);"\n        id="sell_overprices"\n        data-hidden="'.concat(window.highlight,'"\n        class="load_price_auto ').concat(window.highlight?"on":"",'"\n        title="').concat(SIHLang.market.tooltip1,'"\n      ></a>\n      <a\n        id="load_sell_overprices"\n        class="column_autoload-price load_price_manual ').concat(window.highlight?"disabled":"",'"\n        title="').concat(SIHLang.market.tooltip2,'"\n      >\n        <span class="text text_white">').concat(SIHLang.market.requestPrice,'</span>\n        <span class="text text_small text_').concat(window.highlight?"green":"white",'"\n          >').concat(window.highlight?"".concat(SIHLang.market.auto):"".concat(SIHLang.market.manual),"</span\n        >\n      </a>\n    </span>"),i=' <span class="row_autoload-price">\n      <a\n        href="javascript:void(0);"\n        id="await_overprices"\n        data-hidden="'.concat(window.highlight_await,'"\n        class="load_price_auto ').concat(window.highlight_await?"on":"",'"\n        title="').concat(SIHLang.market.tooltip1,'"\n      ></a>\n      <a\n        id="load_await_overprices"\n        class="column_autoload-price load_price_manual ').concat(window.highlight_await?"disabled":"",'"\n        title="').concat(SIHLang.market.tooltip2,'"\n      >\n        <span class="text text_white">').concat(SIHLang.market.requestPrice,'</span>\n        <span class="text text_small text_').concat(window.highlight_await?"green":"white",'"\n          >').concat(window.highlight_await?"".concat(SIHLang.market.auto):"".concat(SIHLang.market.manual),"</span\n        >\n      </a>\n    </span>"),r=' <span class="row_autoload-price">\n      <a\n        href="javascript:void(0);"\n        id="buy_lowerprices"\n        data-hidden="'.concat(window.highlight_buy,'"\n        class="load_price_auto ').concat(window.highlight_buy?"on":"",'"\n        title="').concat(SIHLang.market.tooltip1,'"\n      ></a>\n      <a\n        id="load_buy_lowerprices"\n        class="column_autoload-price load_price_manual ').concat(window.highlight_buy?"disabled":"",'"\n        title="').concat(SIHLang.market.tooltip2,'"\n      >\n        <span class="text text_white">').concat(SIHLang.market.requestPrice,'</span>\n        <span class="text text_small text_').concat(window.highlight_buy?"green":"white",'"\n          >').concat(window.highlight_buy?"".concat(SIHLang.market.auto):"".concat(SIHLang.market.manual),'</span\n        >\n        <span class="progress_after"></span>\n      </a>\n    </span>');n.parent().find(".load_price_auto").length||("sell_listings"===t&&n.before(a),"await_listings"===t?n.before(i):"buy_orders"===t&&n.before(r)),n.closest(".my_listing_section").attr("data-table-id",t),addTooltipForLoadPricesButton("load_price_auto"),addTooltipForLoadPricesButton("load_price_manual"),buttonListenerAutoLoadPrices(e,"sell_overprices"),buttonListenerAutoLoadPrices(e,"await_overprices"),buttonListenerAutoLoadPrices(e,"buy_lowerprices"),e.find("#load_sell_overprices").click((function(){var e=$J(this);e.hasClass("disabled")||e.addClass("disabled"),RenderSelectedAllOverpricesButton("sell_listings"),_FetchAllItemsPrices("sell_listings")})),e.find("#load_await_overprices").click((function(){var e=$J(this);e.hasClass("disabled")||e.addClass("disabled"),RenderSelectedAllOverpricesButton("await_listings"),_FetchAllItemsPrices("await_listings")})),e.find("#load_buy_lowerprices").click((function(){var e=$J(this);e.hasClass("disabled")||e.addClass("disabled"),RenderSelectedAllOverpricesButton("buy_orders"),GetMaxPriceForBuyOrdersListing()}))}}))},addTooltipForLoadPricesButton=function(e){$J(".".concat(e)).tooltip({position:{my:"left bottom",at:"left top-10"},open:function(e,t){},show:{delay:500,duration:0}})},buttonListenerAutoLoadPrices=function(e,t){e.find("#".concat(t)).off("click").click((function(){var e=$J(this),n=e.data("hidden");e.toggleClass("on"),e.data("hidden",!n),n?(e.parent().find(".text_small").text("".concat(SIHLang.market.manual)),e.parent().find(".text_small").removeClass("text_green"),e.parent().find(".text_small").addClass("text_white")):(e.parent().find(".text_small").text("".concat(SIHLang.market.auto)),e.parent().find(".text_small").removeClass("text_white"),e.parent().find(".text_small").addClass("text_green")),"sell_overprices"===t&&chrome.runtime.sendMessage(window.SIHID,{type:"BACKGROUND_HIGHLIGHT_OVERPRICED",data:{highlight:!n}}),"await_overprices"===t&&chrome.runtime.sendMessage(window.SIHID,{type:"BACKGROUND_HIGHLIGHT_OVERPRICED",data:{highlight_await:!n}}),"buy_lowerprices"===t&&chrome.runtime.sendMessage(window.SIHID,{type:"BACKGROUND_HIGHLIGHT_OVERPRICED",data:{highlight_buy:!n}})}))},autoLoadPrices_loadProgress=function(e,t){if(e.length>0&&!$J(e).hasClass("progress")&&$J(e).addClass("progress"),e.length>0){Number($J(e).css("padding-left").replace(/px/g,"").trim()),Number($J(e).css("padding-right").replace(/px/g,"").trim()),Number($J(e).css("width").replace(/px/g,"").trim());$J(e).is("#load_buy_lowerprices")&&$J(e).find(".progress_after").width(Math.ceil(buyProgressBarWidth))}},RenderCommissionButton=function(){commissionButton_loadHtml(),commissionButton_actionsListener(),toggleHeaderTableCommission(),toggleSteamPriceItemCommission()},commissionButton_loadHtml=function(){var e=$J("#tabContentsMyActiveMarketListingsTable .sih-market-filter").find(".sih-market-filter__left-side"),t=LocalStorageSihMarket.get().commission,n=void 0===t||t,a=$J('\n    <a\n      href="javascript:void(0)"\n      class="sih-market-filter__toggle-commission"\n      data-state="'.concat(n?"show":"hide",'"\n    >\n      <img src="chrome-extension://').concat(SIHID,"/assets/market/eye-").concat(n?"show":"hide",'.svg" />\n      <span class="text text_light-grey fs-12">').concat(SIHLang.market.with_fees,"</span>\n    </a>\n  "));e.find(".sih-market-filter__remove-selected").length||e.find(".sih-market-filter__toggle-commission").length||e.append(a)},commissionButton_actionsListener=function(){toggleCommissionBtnAction()},toggleCommissionBtnAction=function(){var e=$J(".sih-market-filter").find(".sih-market-filter__toggle-commission");e.off("click").click((function(){var t=e.attr("data-state");t="show"===t?"hide":"show",e.attr("data-state",t),e.find("img").attr("src","chrome-extension://".concat(SIHID,"/assets/market/eye-").concat(t,".svg"));var n=LocalStorageSihMarket.get();n.commission="show"===t,LocalStorageSihMarket.set(n),toggleHeaderTableCommission(),toggleSteamPriceItemCommission()}))},toggleHeaderTableCommission=function(){var e=$J("#tabContentsMyActiveMarketListingsTable").find("#totalRow0"),t=LocalStorageSihMarket.get().commission,n=void 0===t||t;e.find(".market_listing_price .sih-market-total__receive").toggle(n),e.find(".sih-total-sell__receive").toggle(n),e.find(".total-resubmit-price__receive").toggle(n)},toggleSteamPriceItemCommission=function(){var e=$J("#tabContentsMyActiveMarketListingsRows").find(".market_listing_row"),t=LocalStorageSihMarket.get().commission,n=void 0===t||t;e.each((function(e,t){var a=$J(t);a.find(".market_listing_my_price .market_table_value .market_listing_price span span:last-child").toggle(n),a.find(".resubmit-price__receive").toggle(n)}))},RenderEditAlertButton=function(){IsEnabledResubmitOrders().then((function(e){e.success&&$J(".my_listing_section").each((function(e,t){var n=$J(t),a=$J(t).attr("data-table-id");if(a&&"await_listings"!==a){var i=n.find(".sih-market-filter").find(".sih-market-filter__left-side"),r=LocalStorageSihMarketResubmit.getPercentAlert(a).percent_alert,s=void 0===r?20:r,o=$J('\n          <a\n            href="javascript:void(0)"\n            class="sih-market-filter__edit-alert"\n            title="\n        '.concat("sell_listings"===a?SIHLang.market.resubmit_orders.tooltips.edit_alert_1:SIHLang.market.resubmit_orders.tooltips.edit_alert_buy_1,"\n        ").concat(s,"\n        ").concat("en"===lang?"sell_listings"===a?SIHLang.market.resubmit_orders.tooltips.edit_alert_2:SIHLang.market.resubmit_orders.tooltips.edit_alert_buy_2:"",'"\n          >\n            <span class="text text_blue fs-12">').concat(s,"%</span>\n          </a>\n        "));o.tooltip({position:{my:"left bottom",at:"left top",using:function(e,t){$J(this).css(e);var n=LocalStorageSihMarketResubmit.getPercentAlert(a).percent_alert,i=void 0===n?20:n,r="".concat("sell_listings"===a?SIHLang.market.resubmit_orders.tooltips.edit_alert_1:SIHLang.market.resubmit_orders.tooltips.edit_alert_buy_1," ").concat(i," ").concat("en"===lang?"sell_listings"===a?SIHLang.market.resubmit_orders.tooltips.edit_alert_2:SIHLang.market.resubmit_orders.tooltips.edit_alert_buy_2:"");$J(this).find(".ui-tooltip-content").text(r)}}}),i.find(".sih-market-filter__edit-alert").length||i.append(o),o.off("click").click((function(){RenderEditAlertModal(a)}))}}))}))},editDelayModal_debounce=null,RenderEditDelayModal=function(e){editDelayModal_loadHtml(e),editDelayModal_listenerActions()},editDelayModal_loadHtml=function(e){var t=$J("body"),n=LocalStorageSihMarketResubmit.getDelay(e).delay,a=$J('\n    <div id="sih-edit-delay" class="sih-edit-delay" data-table-id="'.concat(e,'">\n      <div class="sih-edit-delay__fade"></div>\n      <div class="sih-global sih-modal sih-edit-delay__modal">\n        <div class="sih-modal__close"></div>\n        <div class="sih-edit-delay__inner sih-modal__inner">\n          <h4 class="text fs-14">').concat(SIHLang.market.resubmit_orders.edit_delay_modal.title,'</h4>\n\n          <label for="sih-edit-delay-input" class="row justify-between items-center bg-black-100 py-8 px-24 br2-grey">\n            <input\n              type="number"\n              id="sih-edit-delay-input"\n              class="text text_white bg-transparent border-none"\n              value="').concat(n,'"\n              step="1"\n            />\n\n            <label for="sih-edit-delay-input">\n              <span class="text text_grey-900 fs-14">').concat(SIHLang.millisec,'</span>\n            </label>\n          </label>\n\n          <div class="sih-edit-delay__buttons">\n            <a\n              href="javascript:void(0)"\n              id="sih-edit-delay-cancel"\n              class="sih-modal__button fs-10 bold py-8 px-45 text-uppercase"\n              >').concat(SIHLang.market.resubmit_orders.cancel,'</a\n            >\n            <a\n              href="javascript:void(0)"\n              id="sih-edit-delay-save"\n              class="sih-modal__button sih-modal__button_light-blue fs-10 bold py-8 text-uppercase px-16 py-8"\n              >').concat(SIHLang.market.resubmit_orders.save,"</a\n            >\n          </div>\n        </div>\n      </div>\n    </div>\n  "));t.find("#sih-edit-delay").length||(t.append(a),$J("#sih-edit-delay").find(".sih-edit-delay__modal").fadeIn(300))},editDelayModal_listenerActions=function(){editDelayModal_closeModalAction(),editDelayModal_focusOnInputOpen(),editDelayModal_validateInputAction(),editDelayModal_saveAction()},editDelayModal_closeModalAction=function(){var e=$J("#sih-edit-delay"),t=e.find(".sih-modal__close"),n=e.find(".sih-edit-delay__fade"),a=e.find("#sih-edit-delay-cancel");t.off("click").click((function(){removeEditDelayModal()})),n.off("click").click((function(){removeEditDelayModal()})),a.off("click").click((function(){removeEditDelayModal()}))},editDelayModal_focusOnInputOpen=function(){$J("#sih-edit-delay-input").trigger("focus"),$J("#sih-edit-delay-input")[0].select()},removeEditDelayModal=function(){var e=$J("#sih-edit-delay");e.fadeOut(300,(function(){e.remove()}))},editDelayModal_validateInputAction=function(){var e=$J("#sih-edit-delay").find("#sih-edit-delay-input");e.focus((function(){e.keyup((function(){var e=$J(this);clearTimeout(editDelayModal_debounce),editDelayModal_debounce=setTimeout((function(){var t=+e.val()||0,n=sih_app_global_service.validateInput(t,1e5,0);e.val(n)}),500)}))})),e.focusout((function(){e.off("keyup")})),e.off("change").change((function(){var e=$J(this),t=e.val(),n=sih_app_global_service.validateInput(t,1e5,0);e.val(n)}))},editDelayModal_saveAction=function(){var e=$J("#sih-edit-delay"),t=e.find("#sih-edit-delay-save"),n=e.find("#sih-edit-delay-input");t.off("click").click((function(e){a()})),e.keyup((function(e){Event.KEY_RETURN===e.keyCode&&a()}));var a=function(){var e=$J("#sih-edit-delay").attr("data-table-id"),t=n.val(),a=LocalStorageSihMarketResubmit.get()||{};a["delay_".concat(e)]={isEnabled:!0,delay:t},LocalStorageSihMarketResubmit.set(a),"sell_item_listing"===e?$J("#tabContentsMyActiveMarketListingsTable .missed-prices__header_left .sih-market-filter__edit-delay span").text("".concat(a["delay_".concat(e)].delay," ").concat(SIHLang.millisec)):$J('.my_listing_section[data-table-id="'.concat(e,'"] .sih-market-filter__edit-delay span')).text("".concat(a["delay_".concat(e)].delay," ").concat(SIHLang.millisec)),removeEditDelayModal()}},RenderEditDelayButton=function(){$J(".my_listing_section").each((function(e,t){var n=$J(t),a=n.hasClass("missed-prices")&&"tabContentsMyActiveMarketListingsTable"===n.attr("id")?"sell_item_listing":n.attr("data-table-id");if(a){var i="sell_item_listing"===a?n.find(".missed-prices__header_left"):n.find(".sih-market-filter .sih-market-filter__left-side"),r=LocalStorageSihMarketResubmit.getDelay(a),s=r.delay,o=r.isEnabled,l=$J('\n      <div class="listing-delay" title="'.concat(SIHLang.market.resubmit_orders.tooltips.edit_delay,'">\n        <input class="select-checkbox" type="checkbox" />\n        <a\n          href="javascript:void(0)"\n          class="sih-market-filter__edit-delay ').concat(o?"":"sih-market-filter__edit-delay_disabled",'"\n        >\n          <span class="text text_blue fs-12">').concat(s," ").concat(SIHLang.millisec,"</span>\n        </a>\n      </div>\n    "));l.find(".select-checkbox").prop("checked",o),l.tooltip({position:{my:"center bottom",at:"center top"}}),i.find(".sih-market-filter__edit-delay").length||i.append(l),l.find(".select-checkbox").off("change").change((function(e){var t,n=LocalStorageSihMarketResubmit.get()||{};n["delay_".concat(a)]={isEnabled:e.target.checked,delay:(null===(t=n["delay_".concat(a)])||void 0===t?void 0:t.delay)||200},LocalStorageSihMarketResubmit.set(n),l.find(".sih-market-filter__edit-delay").toggleClass("sih-market-filter__edit-delay_disabled",!e.target.checked)})),l.find(".sih-market-filter__edit-delay").off("click").click((function(){RenderEditDelayModal(a)}))}}))},RenderHideListingHeader=function(){$J("#tabContentsMyListings .market_home_listing_table").each((function(){var e=$J(this),t=getListingSectionType(e),n=$J.parseJSON(GetCookie(t)||"false"),a=e.find(".my_market_header");a.data("hidden",n),a.attr("id",t),a.off("click").click((function(){var n=$J.parseJSON(a.data("hidden"));n?(e.children("div").show(),e.find(".arrow_icon").addClass("up")):(e.find(".arrow_icon").removeClass("up"),e.children("div").hide()),SetCookie(t,!n,7,"/market"),a.data("hidden",!n),togglePaging()})),e.addClass("market_listing_table"),n&&e.children("div").hide()})),togglePaging()};function togglePaging(){$J("#tabContentsMyActiveMarketListingsTable .my_market_header").data("hidden")?($J("#tabContentsMyListings .market_paging").hide(),$J("#tabContentsMyListings .market_pagesize_options").hide()):($J("#tabContentsMyListings .market_paging").show(),$J("#tabContentsMyListings .market_pagesize_options").show())}var RenderHeaderTotal=function(){$J("#tabContentsMyListings .market_home_listing_table").each((function(){var e=$J(this),t=getListingSectionType(e),n=$J.parseJSON(GetCookie(t)||"false"),a=e.find(".my_market_header_count"),i=a.find("span").first(),r=$J('<span class="arrow_icon '.concat(n?"":"up",'"></span>')),s=e.find(".sih-total-sell__selling").data("price")?e.find(".sih-total-sell__selling").data("price"):e.find(".sih-market-total__seller").data("price"),o=e.find(".sih-total-sell__receive").data("price"),l=(0,global.formatNumberToLocalRu)(s,currencyId,currencyId),c=o?" (".concat((0,global.formatNumberToLocalRu)(o,currencyId,currencyId),")"):"";a.empty().append(i),s&&a.append(" - <span>".concat(l).concat(c,"</span>")),a.append(r)}))},isBuyLoad=!1,RenderMarketFilter=function(){renderSellFilter(),renderBuyFilter(),RenderRemoveSelectedButton(),RenderCommissionButton(),RenderHideListingHeader(),RenderControlButtonsForAutoLoadPrices(),RenderEditAlertButton(),RenderEditDelayButton(),window.highlight?setTimeout((function(){RenderSelectedAllOverpricesButton("sell_listings"),_FetchAllItemsPrices("sell_listings")}),500):setTimeout((function(){$J("#tabContentsMyActiveMarketListingsTable").find(".load_price_manual").removeClass("disabled"),renderPricesFromCache()}),500),window.highlight_await&&(RenderSelectedAllOverpricesButton("await_listings"),_FetchAllItemsPrices("await_listings")),window.highlight_buy&&!isBuyLoad&&setTimeout((function(){isBuyLoad=!0,RenderSelectedAllOverpricesButton("buy_orders"),GetMaxPriceForBuyOrdersListing()}),500),SetToDefaultItemsAfterPagination()},renderSellFilter=function(){var e=$J('\n    <div id="sih-market-sell-filter" class="sih-global sih-market-filter">\n      <div class="sih-market-filter__left-side">\n        <label class="sih-market-filter__label row items-center">\n          <input\n            class="selectableText filter_search_box"\n            type="text"\n            id="Txt_Filter"\n            value=""\n            placeholder="Start typing an item name here to filter items"\n            name="filter"\n            autocomplete="off"\n          />\n          <a href="javascript:void(0)" class="sih-market-filter__clear"></a>\n        </label>\n      </div>\n      <div class="sih-market-filter__right-side"></div>\n    </div>\n  ');e.find("#Txt_Filter").off("keyup").keyup((function(){var e=$J(this).closest(".my_listing_section"),t=$J(this).val().toUpperCase().split(" ").filter((function(e){return""!==e}));if(t.length){for(var n="",a=0;a<t.length;a++)n+=':Contains("'.concat(t[a],'")');e.find(".sih-market-filter__clear").show(),e.find('.market_listing_row:not([id^="totalRow"])').each((function(){$J(this).is(n)?$J(this).show():$J(this).hide()}))}else e.find('.market_listing_row:not([id^="totalRow"])').show(),e.find(".sih-market-filter__clear").hide()})),e.find(".sih-market-filter__clear").click((function(){var e=$J(this).closest(".my_listing_section");e.find("#Txt_Filter").val(""),$J('#tabContentsMyListings .market_home_listing_table:has(div[id^="mylisting"]) .market_listing_row:not([id^="totalRow"])').show(),e.find(".sih-market-filter__clear").hide()})),$J("#tabContentsMyListings").find("#sih-market-sell-filter").length||$J('#tabContentsMyListings .market_home_listing_table:has(div[id^="mylisting"]) .my_market_header').after(e)},renderBuyFilter=function(){var e=$J('\n    <div id="sih-market-buy-filter" class="sih-global sih-market-filter">\n      <div class="sih-market-filter__left-side">\n        <label class="sih-market-filter__label row items-center">\n          <input\n            class="selectableText filter_search_box"\n            type="text"\n            id="Txt_Filter_Buying"\n            value=""\n            placeholder="Start typing an item name here to filter items"\n            name="filter"\n            autocomplete="off"\n          />\n          <a href="javascript:void(0)" id="filter_clear_btn_buying" class="sih-market-filter__clear"></a>\n        </label>\n      </div>\n\n      <div class="sih-market-filter__right-side"></div>\n    </div>\n  ');e.find("#Txt_Filter_Buying").off("keyup").keyup((function(){var e=$J(this).parents(".my_listing_section"),t=$J(this).val().toUpperCase().split(" ").filter((function(e){return""!==e}));if(t.length){for(var n="",a=0;a<t.length;a++)n+=':Contains("'.concat(t[a],'")');$J("#filter_clear_btn_buying").show(),e.find('.market_listing_row:not([id^="totalRow"])').each((function(){$J(this).is(n)?$J(this).show():$J(this).hide()}))}else e.find('.market_listing_row:not([id^="totalRow"])').show(),$J("#filter_clear_btn_buying").hide()})),e.find("#filter_clear_btn_buying").click((function(){e.find("#Txt_Filter_Buying").val(""),$J('#tabContentsMyListings .market_home_listing_table:has(div[id^="mybuyorder"]) .market_listing_row:not([id^="totalRow"])').show(),$J("#filter_clear_btn_buying").hide()})),$J("#tabContentsMyListings").find("#sih-market-buy-filter").length||$J('#tabContentsMyListings .market_home_listing_table:has(div[id^="mybuyorder"]) .my_market_header').after(e)},renderPricesFromCache=function(){$J('#tabContentsMyActiveMarketListingsRows .market_listing_row[id^="mylisting"] .market_listing_cancel_button .item_market_action_button').each((function(e,t){var n=$J(t).closest(".market_listing_row"),a=decodeURIComponent(t.href),i=removeLinkExp.exec(a);if(i){var r=g_rgAssets[i[2]][i[3]][i[4]];if(r){var s="appid=".concat(r.appid,"&market_hash_name=").concat(encodeURIComponent(r.market_hash_name)),o=(PriceQueue._cache[s]?PriceQueue._cache[s].response:{lowest_price:l}).lowest_price,l=void 0===o?null:o;l&&SetMinimumPriceForListingRow(n,l)}}}))},AddSortableColumns=function(e){e.find("> span").each((function(e,t){var n=$J(t);n.hasClass("market_listing_edit_buttons")||(n.addClass("market_sortable_column").css("display","block"),n.find(".market_sort_arrow").length||n.append('<span class="market_sort_arrow" style="display:none"></span>'),n.off("click").click((function(){n.hasClass("market_listing_buyorder_qty")?sortColumns_sortBy(n,"quantity"):n.hasClass("market_listing_listed_date")?sortColumns_sortBy(n,"date"):n.hasClass("market_listing_my_price")?sortColumns_sortBy(n,"my_price"):n.hasClass("market_listing_minimum")?sortColumns_sortBy(n,"minimum_price"):n.hasClass("market_listing_maximum")?sortColumns_sortBy(n,"maximum_price"):sortColumns_sortBy(n,"name")})))}))},sortColumns_sortBy=function(e,t){if(t){var n=e.closest(".market_listing_table_header"),a=n.closest(".market_home_listing_table");a.find("#tabContentsMyActiveMarketListingsRows").length&&(a=a.find("#tabContentsMyActiveMarketListingsRows"));var i=a.children('.market_listing_row:not([id^="totalRow"])');n.find(".market_sort_arrow").hide();var r=1;e.find(".market_sort_arrow").is(':contains("▲")')?(r=-1,e.find(".market_sort_arrow").text("▼")):e.find(".market_sort_arrow").text("▲"),e.find(".market_sort_arrow").show(),i.sort((function(e,n){var a=sortColumns_getSortableValues(e,n,t),i=a.aValue,s=a.bValue;return i>s?r:i<s?-1*r:0})),i.detach().appendTo(a)}},sortColumns_getSortableValues=function(e,t,n){var a,i;switch(n){case"quantity":a=parseFloat(getPriceAsInt($J(e).find(".market_listing_my_price.market_listing_buyorder_qty").text())),i=parseFloat(getPriceAsInt($J(t).find(".market_listing_my_price.market_listing_buyorder_qty").text()));break;case"date":a=+$J(e).find(".market_listing_listed_date").text().match(/\d+/)[0]||0,i=+$J(t).find(".market_listing_listed_date").text().match(/\d+/)[0]||0;break;case"my_price":var r=function(e){var t=$J(e).find(".sih_listing_my_price").text();return getPriceAsInt(t)};a=r(e),i=r(t);break;case"minimum_price":a=parseFloat(getPriceAsInt($J(e).find(".market_listing_minimum--text").text())),i=parseFloat(getPriceAsInt($J(t).find(".market_listing_minimum--text").text()));break;case"maximum_price":a=parseFloat(getPriceAsInt($J(e).find(".market_listing_buyorder_max .market_table_value .market_listing_price").text())),i=parseFloat(getPriceAsInt($J(t).find(".market_listing_buyorder_max .market_table_value .market_listing_price").text()));break;case"name":a=$J(e).find(".market_listing_item_name_link").text(),i=$J(t).find(".market_listing_item_name_link").text()}return{aValue:a,bValue:i}},RenderEmptyActualPrice=function(){actualMarketPrice_loadHtml()},actualMarketPrice_loadHtml=function(){var e=GetListingsRows("sell_listings"),t=GetListingsRows("await_listings"),n=GetListingsRows("buy_orders");e.each((function(e,t){var n=$J(t),a=$J(' <div class="row items-center justify-center market_listing_right_cell market_listing_minimum">\n        <span class="market_listing_minimum--text">-</span>\n      </div>');n.find(".market_listing_minimum").length||a.insertAfter(n.find(".market_listing_my_price"))})),t.each((function(e,t){var n=$J(t),a=$J(' <div class="row items-center justify-center market_listing_right_cell market_listing_minimum">\n        <span class="market_listing_minimum--text">-</span>\n      </div>');n.find(".market_listing_minimum").length||a.insertAfter(n.find(".market_listing_my_price"))})),n.each((function(e,t){var n=$J(t),a=$J('\n      <div class="market_listing_right_cell market_listing_my_price market_listing_buyorder_max">\n        <span class="market_table_value">\n          <span class="market_listing_price">-</span>\n        </span>\n      </div>\n    ');n.find(".market_listing_buyorder_max").length||n.find(".market_listing_my_price.market_listing_buyorder_qty").before(a)}))},RenderRowCheckbox=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];renderAllCheckbox(e),renderRowCheckbox(e),checkbox_actionsListener()},renderAllCheckbox=function(e){(e?$J("#tabContentsMyActiveMarketListingsTable"):$J("#tabContentsMyListings .market_home_listing_table")).find(".market_listing_table_header .market_listing_edit_buttons").each((function(e,t){var n=$J(t),a=$J(' <input type="checkbox" id="select-all-'.concat(e,'" class="select-checkbox" /> '));0===n.find(".select-checkbox").length&&n.append(a),a.click((function(){var e=$J(this).prop("checked"),t=$J(this).closest(".market_home_listing_table"),n=t.attr("data-table-id"),a=t.find('.market_listing_row[id^="'.concat("sell_listings"===n?"mylisting":"mybuyorder",'"]:not(.stack)'));(a.find(".market_listing_edit_buttons .market_listing_cancel_button .select-checkbox:visible").prop("checked",e),"sell_listings"===n||"buy_orders"===n)?(a.find(".sih-resubmit").each((function(t,n){var a=$J(n);a.length&&!a.hasClass("without-price")&&a.toggleClass("disabled",e)})),RenderToolbar(n)):t.find(".market_listing_edit_buttons .market_listing_cancel_button .select-checkbox:visible").prop("checked",e);UpdateStateRemoveSelectedButton(t)}))}))},renderRowCheckbox=function(e){(e?$J("#tabContentsMyActiveMarketListingsTable"):$J("#tabContentsMyListings .market_home_listing_table")).find(".market_listing_edit_buttons .market_listing_cancel_button").each((function(e,t){var n=$J(t);if(0===n.find(".select-checkbox").length){var a=$J('\n        <input type="checkbox" id="select-row-'.concat(e,'" class="select-checkbox" />\n      '));n.append(a)}}))},checkbox_actionsListener=function(){checkboxAction()},checkboxAction=function(){$J(".market_listing_row").find(".market_listing_edit_buttons .market_listing_cancel_button .select-checkbox").off("click").click((function(t){var n=$J(this),a=n.closest(".my_listing_section"),i=n.closest(".market_listing_row"),r=a.attr("data-table-id"),s=i.find(".sih-resubmit");s.length&&!s.hasClass("without-price")&&s.toggleClass("disabled"),t.shiftKey&&e(r),UpdateStateRemoveSelectedButton(a),RenderToolbar(r)}));var e=function(e){var t=$J(".market_listing_row").find(".market_listing_edit_buttons .market_listing_cancel_button .select-checkbox"),n=!1;t.each((function(t,a){var i=$J(a),r=i.closest(".market_listing_row");if(r.closest(".my_listing_section").attr("data-table-id")===e&&(i.is(":checked")&&(n=!n),!r.hasClass("stack")&&!i.is(":checked")&&n)){i.prop("checked",!0);var s=i.closest(".market_listing_row").find(".sih-resubmit");s.length&&!s.hasClass("without-price")&&s.toggleClass("disabled")}}))}},RefactorEditButtons=function(){},RenderCustomCancelModal=function(e){return new Promise((function(t){customRevokeListings_loadHtml(e),customRevokeListings_actionsListener().then((function(e){t(e)}))}))},DeleteCustomCancelModal=function(){var e=$J("#sih-cancel-listing");e.fadeOut(300,(function(){e.remove()}))},customRevokeListings_loadHtml=function(e){var t=e.hashName,n=e.href,a=e.buy_orderid,i=$J("body"),r=$J('\n    <div id="sih-cancel-listing" class="sih-cancel-listing">\n      <div class="sih-cancel-listing__fade"></div>\n      <div class="sih-global sih-modal sih-cancel-listing__modal">\n        <div class="sih-modal__close"></div>\n        <div class="sih-cancel-listing__inner sih-modal__inner">\n          <div class="sih-cancel-listing__title">'.concat(SIHLang.market.custom_remove_modal.title,'</div>\n          <div class="sih-cancel-listing__content">\n            <div class="sih-cancel-listing__text">\n              ').concat(SIHLang.market.custom_remove_modal.buy_orders_text_1,'\n              <a href="').concat(n,'" target="_blank" class="text text_white bold">(').concat(t,')</a>\n            </div>\n\n            <div class="sih-cancel-listing__buttons">\n              <a href="javascript:void(0)" class="sih-cancel-listing__remove" data-order-id="').concat(a,'"\n                >').concat(SIHLang.market.custom_remove_modal.confirm,'</a\n              >\n              <a href="javascript:void(0)" class="sih-cancel-listing__cancel"\n                >').concat(SIHLang.market.custom_remove_modal.cancel,"</a\n              >\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  "));i.find("#sih-cancel-listing").length||(i.append(r),$J("#sih-cancel-listing").find(".sih-cancel-listing__modal").fadeIn(300))},customRevokeListings_actionsListener=function(){return new Promise((function(e){customRevokeListings_closeModalAction().then((function(){e()})),customRevokeListings_removeListingAction().then((function(t){e(t)}))}))},customRevokeListings_closeModalAction=function(){var e=$J("#sih-cancel-listing"),t=e.find(".sih-modal__close"),n=e.find(".sih-cancel-listing__fade"),a=e.find(".sih-cancel-listing__cancel");return new Promise((function(e){t.off("click").click((function(){DeleteCustomCancelModal(),e()})),n.off("click").click((function(){DeleteCustomCancelModal(),e()})),a.off("click").click((function(){DeleteCustomCancelModal(),e()}))}))},customRevokeListings_removeListingAction=function(){var e=$J("#sih-cancel-listing").find(".sih-cancel-listing__remove"),t=null;return new Promise((function(n){e.off("click").click((function(e){clearTimeout(t),t=setTimeout((function(){var t=$J(e.target).attr("data-order-id");$J.post("//steamcommunity.com/market/cancelbuyorder/",{sessionid:g_sessionID,buy_orderid:t}).then((function(e){DeleteCustomCancelModal(),n(e)})).fail((function(e){DeleteCustomCancelModal(),n(e)}))}),300)}))}))},SteamRemoveBtnActionsListener=function(){$J(".market_listing_edit_buttons.actual_content").parent().each((function(e,t){var n=$J(t);n.find(".item_market_action_button.item_market_action_button_edit").click((function(e){var t=$J(e.target).closest(".my_listing_section").attr("data-table-id"),a=GetListingItemRowInfo(n);if("sell_listings"===t)setTimeout((function(){$J("#market_removelisting_dialog_accept").click((function(){var e=[a[4]];chrome.runtime.sendMessage(SIHID,{type:"BACKGROUND_REMOVE_ITEM_FOR_SALE",data:{assetids:e}},(function(){}))}))}),200);else if("buy_orders"===t){e.preventDefault();var i=n.find(".market_listing_item_name_link").text(),r=n.find(".market_listing_item_name_link").attr("href"),s=n.attr("id").substring(11);RenderCustomCancelModal({hashName:i,href:r,buy_orderid:s}).then((function(e){e&&RefreshMyMarketListings()}))}}))}))},orgRemListingOnSuccess=RemoveListingDialog.OnSuccess;RemoveListingDialog.OnSuccess=function(e){e.responseJSON?(this.OnSuccessEffects(),htmlListings="",$ACTIVE_LISTING_ROWS=null,RefreshMyMarketListings()):(this.OnFailureEffects(),this.DisplayError("There was a problem removing your listing. Refresh the page and try again."))};var RefactorSteamPrice=function(){replaceRubCurrency()},replaceRubCurrency=function(){$J(".market_listing_right_cell.market_listing_my_price").find(".market_listing_price span").find("span").each((function(e,t){var n=$J(t);e%2==0&&n.addClass("sih_listing_my_price");var a=n.text().replace(/руб./g,"₽");n.text(a)})),GetListingsRows("buy_orders").find(".market_listing_price").each((function(e,t){var n=$J(t);n.closest(".market_listing_right_cell").hasClass("market_listing_buyorder_qty")||n.closest(".market_listing_right_cell").hasClass("market_listing_buyorder_max")||n.addClass("sih_listing_my_price"),n.find(".market_listing_inline_buyorder_qty").remove();var a=n[0].innerText.replace(/руб./g,"₽");n.text(a)}))},RefactorListingRow=function(){GetListingsRows("sell_listings").addClass("sih-global"),GetListingsRows("await_listings").addClass("sih-global"),GetListingsRows("buy_orders").addClass("sih-global"),RenderEmptyActualPrice(),RenderRowCheckbox(),RefactorEditButtons(),RefactorSteamPrice(),SteamRemoveBtnActionsListener()},LoadResubmitOrderButton=function(e){IsEnabledResubmitOrders().then((function(t){t.success&&(resubmitButton_loadHtml(e),resubmitButton_listenerActions(e))}))},resubmitButton_loadHtml=function(e){var t=GetListingsRows(e),n=currency_service.A.getPriceFromCurrency(.01,currencyId,currencyId).text;t.each((function(t,a){var i=$J(a).find(".market_listing_cancel_button"),r=$J('\n      <div class="sih-resubmit disabled without-price" title="">\n        <div class="sih-resubmit__row row">\n          <a\n            href="javascript:void(0)"\n            class="sih-resubmit__btn row items-center justify-center w-24 h-24"\n            data-state="default"\n          >\n            <img\n              class="opacity-50per"\n              src="chrome-extension://'.concat(SIHID,'/assets/market/resubmit/resubmit_default.svg"\n              alt="default"\n            />\n          </a>\n          <a href="javascript:void(0)" class="sih-resubmit__arrow-down row items-center justify-center w-24 h-24">\n            <img\n              class="opacity-50per"\n              src="chrome-extension://').concat(SIHID,'/assets/market/resubmit/arrow-down.svg"\n              alt="arrow-down"\n            />\n          </a>\n\n          <a href="javascript:void(0)" class="sih-resubmit__undo items-center justify-center w-24 h-24">\n            <img class="opacity-50per" src="chrome-extension://').concat(SIHID,'/assets/market/resubmit/undo.svg" alt="undo" />\n          </a>\n        </div>\n\n        <div class="sih-resubmit__tooltip resubmit-tooltip">\n          <a href="javascript:void(0)" class="resubmit-tooltip__item" data-state="default">\n            <img src="chrome-extension://').concat(SIHID,'/assets/market/resubmit/resubmit_default.svg" alt="resubmit_default" />\n            <span class="text"\n              >').concat("sell_listings"===e?SIHLang.market.resubmit_orders.reduce_by:SIHLang.market.resubmit_orders.increase_by,"\n              ").concat(n,"\n              ").concat("sell_listings"===e?SIHLang.market.resubmit_orders.of_min_price:SIHLang.market.resubmit_orders.of_max_price,'</span\n            >\n          </a>\n          <a href="javascript:void(0)" class="resubmit-tooltip__item" data-state="percent">\n            <img src="chrome-extension://').concat(SIHID,'/assets/market/resubmit/resubmit_percent.svg" alt="resubmit_percent" />\n            <span class="text"\n              >').concat("sell_listings"===e?SIHLang.market.resubmit_orders.reduce_by:SIHLang.market.resubmit_orders.increase_by,"\n              1%\n              ").concat("sell_listings"===e?SIHLang.market.resubmit_orders.of_min_price:SIHLang.market.resubmit_orders.of_max_price,'</span\n            >\n          </a>\n          <a href="javascript:void(0)" class="resubmit-tooltip__item" data-state="manual">\n            <img src="chrome-extension://').concat(SIHID,'/assets/market/resubmit/resubmit_manual.svg" alt="resubmit_manual" />\n            <span class="text">').concat(SIHLang.market.resubmit_orders.set_price,"</span>\n          </a>\n        </div>\n      </div>\n    "));i.prepend(r)}))},resubmitButton_listenerActions=function(e){resubmitButton_resubmitBtnAction(e),undoAction(e),showResubmitTooltipAction(e),changeTooltipOptionAction(e),showDisabledTooltip(e)},resubmitButton_resubmitBtnAction=function(e){GetListingsRows(e).each((function(t,n){var a=$J(n),i=a.find(".sih-resubmit__btn"),r=null;i.off("click").click((function(t){var n=this;clearTimeout(r),r=setTimeout((function(){var t=$J(n).attr("data-state");"manual"!==t?(BuildResubmitData(a,t),RenderChangePanel(e),UpdateHeaderTotalResubmitPrice(e)):RenderResubmitModal(a)}),200)}))}))},undoAction=function(e){GetListingsRows(e).each((function(t,n){var a=$J(n);a.find(".sih-resubmit").find(".sih-resubmit__undo").off("click").click((function(){if("sell_listings"===e){var t=$J(this).attr("data-id");global.SellListing.removeItem(t)}else{var n=$J(this).attr("data-id");global.BuyOrders.removeItem(n)}a.find(".resubmit-price").remove(),a.css("background-color","rgba(0, 0, 0, 0.2)").removeClass("stack"),RenderChangePanel(e),UpdateHeaderTotalResubmitPrice(e)}))}))},showResubmitTooltipAction=function(e){var t=GetListingsRows(e);t.each((function(e,n){var a=$J(n),i=a.find(".sih-resubmit"),r=i.find(".sih-resubmit__arrow-down"),s=null;r.off("click").click((function(){clearTimeout(s),s=setTimeout((function(){a.css("overflow","visible"),t.find(".sih-resubmit__tooltip").fadeOut();var e=i.find(".sih-resubmit__tooltip");e.fadeIn("fast").css("display","flex"),$J("body").off("click").click((function(t){var n=$J(t.target.parentElement);n.hasClass("sih-resubmit__row")||n.hasClass("sih-resubmit__arrow-down")||e.fadeOut("fast")}))}),200)}))}))},changeTooltipOptionAction=function(e){GetListingsRows(e).each((function(e,t){var n=$J(t);n.find(".sih-resubmit__tooltip").find(".resubmit-tooltip__item").off("click").click((function(){var e=$J(this),t=e.attr("data-state");if("manual"!==t){var a=e.closest(".sih-resubmit").find(".sih-resubmit__btn");a.attr("data-state",t),a.find("img").attr("src","chrome-extension://".concat(SIHID,"/assets/market/resubmit/resubmit_").concat(t,".svg")).attr("alt",t),a.trigger("click")}else RenderResubmitModal(n)}))}))},showDisabledTooltip=function(e){GetListingsRows(e).each((function(t,n){var a=$J(n).find(".sih-resubmit.without-price"),i=$J('\n      <div class="sih-global resubmit-price-tooltip">\n        <div class="roboto row items-center gap-5">\n          <a href="javascript:void(0)" class="load_price_manual text text_blue hover-opacity-8"\n            >'.concat(SIHLang.market.resubmit_orders.tooltips.need_load_price_1,'</a\n          >\n          <span class="text">').concat(SIHLang.market.resubmit_orders.tooltips.need_load_price_2,"</span>\n        </div>\n      </div>\n    "));a.tooltip({content:i.text(),position:{my:"left bottom",at:"left top",using:function(t,n){var a=$J('.my_listing_section[data-table-id="'.concat(e,'"]')).find(".load_price_manual");i.find(".load_price_manual").off("click").click((function(){a.hasClass("disabled")||a.trigger("click")})),$J(this).css(t),$J(".ui-tooltip-content").hide(),$J(this).append(i)}}}).on("mouseenter",(function(e){a.not($J(this)).tooltip("close")})).on("mouseleave",(function(e){$J(".ui-tooltip:hover").length>0&&e.stopImmediatePropagation()})),$J("body").on("mouseleave",".ui-tooltip",(function(e){a.tooltip(),a.tooltip("close")}))}))};function content_typeof(e){return content_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},content_typeof(e)}function content_regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */content_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,a){var r=t&&t.prototype instanceof g?t:g,s=Object.create(r.prototype),o=new T(a||[]);return i(s,"_invoke",{value:A(e,n,o)}),s}function _(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var u="suspendedStart",m="suspendedYield",h="executing",p="completed",f={};function g(){}function b(){}function v(){}var y={};c(y,s,(function(){return this}));var k=Object.getPrototypeOf,S=k&&k(k(L([])));S&&S!==n&&a.call(S,s)&&(y=S);var I=v.prototype=g.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,r,s,o){var l=_(e[i],e,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==content_typeof(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,o)}),(function(e){n("throw",e,s,o)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,o)}))}o(l.arg)}var r;i(this,"_invoke",{value:function(e,a){function i(){return new t((function(t,i){n(e,a,t,i)}))}return r=r?r.then(i,i):i()}})}function A(t,n,a){var i=u;return function(r,s){if(i===h)throw Error("Generator is already running");if(i===p){if("throw"===r)throw s;return{value:e,done:!0}}for(a.method=r,a.arg=s;;){var o=a.delegate;if(o){var l=x(o,a);if(l){if(l===f)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===u)throw i=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=h;var c=_(t,n,a);if("normal"===c.type){if(i=a.done?p:m,c.arg===f)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(i=p,a.method="throw",a.arg=c.arg)}}}function x(t,n){var a=n.method,i=t.iterator[a];if(i===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),f;var r=_(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,f;var s=r.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function n(){for(;++i<t.length;)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(content_typeof(t)+" is not iterable")}return b.prototype=v,i(I,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},C(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,a,i,r){void 0===r&&(r=Promise);var s=new w(d(e,n,a,i),r);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(I),c(I,l,"Generator"),c(I,s,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(a,i){return o.type="throw",o.arg=t,n.next=a,i&&(n.method="next",n.arg=e),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),c=a.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=e,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:L(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),f}},t}function content_asyncGeneratorStep(e,t,n,a,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,i)}function content_asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function s(e){content_asyncGeneratorStep(r,a,i,s,o,"next",e)}function o(e){content_asyncGeneratorStep(r,a,i,s,o,"throw",e)}s(void 0)}))}}var decrementInterval=null,marketHistoryExport={history:[],from:0,to:500,totalCount:0,progress:0,requestCount:500,numOfRequests:0,inProgress:!1,lastRequestSuccessful:!0},RenderExportMarketHistoryContent=function(){var e=content_asyncToGenerator(content_regeneratorRuntime().mark((function e(){return content_regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,exportMarketHistory_content_loadHtml();case 3:content_listenerActions(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0,marketHistoryExport.lastRequestSuccessful=!1;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),exportMarketHistory_content_loadHtml=function(){var e=content_asyncToGenerator(content_regeneratorRuntime().mark((function e(){var t,n,a,i,r;return content_regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$J("#myListings"),n=$J('\n    <div id="sih-tab-content-export-market-history" class="sih-global sih-export-market-history">\n      <div class="sih-export-market-history__text-content">\n        <p>'.concat(SIHLang.export_market_history.text_1,"</p>\n        <p>").concat(SIHLang.export_market_history.text_2,"</p>\n\n        <p>").concat(SIHLang.export_market_history.text_3,'</p>\n      </div>\n\n      <div class="column gap-20">\n        <div class="row gap-12">\n          <label for="sih-export-market-history-input-start">\n            <span class="text">').concat(SIHLang.export_market_history.from,': </span>\n            <input\n              id="sih-export-market-history-input-start"\n              class="sih-export-market-history__input"\n              type="number"\n              value="0"\n            />\n          </label>\n          <label for="sih-export-market-history-input-finish">\n            <span class="text">').concat(SIHLang.export_market_history.to,': </span>\n            <input\n              id="sih-export-market-history-input-finish"\n              class="sih-export-market-history__input"\n              type="number"\n              value="0"\n            />\n          </label>\n          <label for="sih-export-market-history-input-non-transaction">\n            <span class="text">').concat(SIHLang.export_market_history.exclude_non_transaction,'</span>\n            <input id="sih-export-market-history-input-non-transaction" type="checkbox" />\n          </label>\n        </div>\n\n        <div class="sih-export-market-history__requests-info row gap-5 text text_white">\n          ').concat(SIHLang.export_market_history.request,'\n          <span class="sih-export-market-history__request-progress">0</span>/<span\n            class="sih-export-market-history__total-requests"\n            >').concat(marketHistoryExport.numOfRequests,"</span\n          >\n          ").concat(SIHLang.export_market_history.time_remaining,' ~\n          <span class="sih-export-market-history__time-remaining" data-value="0">0</span> ').concat(SIHLang.export_market_history.seconds,'\n        </div>\n\n        <div class="row gap-20">\n          <a\n            href="javascript:void(0)"\n            id="sih-export-market-history"\n            class="text-uppercase sih-export-market-history__btn"\n            >').concat(SIHLang.export_market_history.export_csv,'</a\n          >\n          <a\n            href="javascript:void(0)"\n            id="sih-market-history-download"\n            class="text-uppercase hidden sih-export-market-history__btn"\n            >').concat(SIHLang.export_market_history.download,"</a\n          >\n        </div>\n      </div>\n    </div>\n  ")),(a=t.find("#sih-tab-content-export-market-history")).length){e.next=13;break}return t.append(n),e.next=7,getMarketHistory(0,50);case 7:i=e.sent,r=i.total_count,marketHistoryExport.totalCount=r||0,n.find("#sih-export-market-history-input-finish").val(marketHistoryExport.totalCount),e.next=14;break;case 13:a.show();case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),content_listenerActions=function(){exportMarketHistoryAction(),changeInputAction()},exportMarketHistoryAction=function(){var e=$J("#sih-tab-content-export-market-history"),t=e.find("#sih-export-market-history"),n=e.find(".sih-export-market-history__total-requests"),a=e.find(".sih-export-market-history__time-remaining");t.off("click").click(content_asyncToGenerator(content_regeneratorRuntime().mark((function t(){var i,r,s;return content_regeneratorRuntime().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=+$J("#sih-export-market-history-input-start").val(),r=+$J("#sih-export-market-history-input-finish").val(),e.find(".sih-export-market-history__request-progress").text(0),e.find("#sih-market-history-download").addClass("hidden").attr("href","javascript:void(0)"),marketHistoryExport.from=i,marketHistoryExport.to=r,marketHistoryExport.inProgress=!0,toggleDecrementTimeRemaining(!0),s=Math.ceil((marketHistoryExport.to-marketHistoryExport.from)/500),n.text(s),a.attr("data-value",5*s).text(5*s),toggleDecrementTimeRemaining(!1),t.next=14,_workOnExport();case 14:case"end":return t.stop()}}),t)}))))},changeInputAction=function(){$J("#sih-tab-content-export-market-history").find(".sih-export-market-history__input").each((function(e,t){var n=$J(t);n.on("input",(function(e){var t=e.target,n="sih-export-market-history-input-start"===$J(t).attr("id")?marketHistoryExport.totalCount-1:marketHistoryExport.totalCount,a=$J(t).val();a=a.replace(/[^0-9]/g,""),$J(t).val(n>=a?a:n)})),n.on("keypress",(function(e){var t=e.which||e.keyCode;(t<48||t>57)&&e.preventDefault()})),n.on("paste",(function(e){var t="sih-export-market-history-input-start"===$J(e.target).attr("id")?marketHistoryExport.totalCount-1:marketHistoryExport.totalCount,n=(e.originalEvent||e).clipboardData.getData("text/plain");n=n.replace(/[^0-9]/g,""),$J(e.target).val(t>=n?n:t),e.preventDefault()}))}))},getMarketHistory=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:marketHistoryExport.requestCount;return new Promise((function(n,a){$J.ajax({method:"GET",url:"https://steamcommunity.com/market/myhistory",data:{start:e,count:t}}).done((function(e){n(e)})).fail((function(e){a(e)}))}))},getHistoryType=function(e){var t;switch(e.find(".market_listing_gainorloss").text().trim()){case"+":t="purchase";break;case"-":t="sale";break;default:t=e.find(".market_listing_whoactedwith").text().replace(/\s/g,"")}return t},extractHistoryEvents=function(e,t,n){var a=$J(e),i=[];return a.find(".market_listing_row.market_recent_listing_row").each((function(e,a){var r=$J(a),s=r.find(".market_listing_item_name").text(),o=r.find(".market_listing_game_name").text(),l=r.find(".market_listing_listed_date").text().trim(),c=r.find(".market_listing_listed_date").text().trim(),d=r.find(".market_listing_price").text().trim(),_=GetPriceValueAsInt(d),u=getHistoryType(r),m=null,h=null,p=null,f=null,g=null,b=null,v=null,y=null,k=!1;if("sale"===u||"purchase"===u){var S=a.id,I=t.split("".concat(S,"_name"))[1].split(");")[0].split(",");m=parseInt(I[1]),h=parseInt(I[2].split("'")[1]),p=I[3].split("'")[1];var C=n[m][h][p];f=C.classid,g=C.instanceid,b=C.unowned_contextid,v=C.unowned_id,y=C.market_hash_name,k=!0}i.push({itemName:s,gameName:o,listedOn:l,actedOn:c,displayPrice:d,priceInCents:_,type:u,marketName:y,appID:m,contextID:h,assetID:p,classID:f,instanceID:g,unOwnedContextID:b,unOwnedID:v,detailedRow:k})})),i},_workOnExport=function(){var e=content_asyncToGenerator(content_regeneratorRuntime().mark((function e(){var t,n,a,i,r,s,o,l,c;return content_regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$J("#sih-tab-content-export-market-history"),n=marketHistoryExport.lastRequestSuccessful?5e3:3e4,e.prev=2,!marketHistoryExport.inProgress){e.next=16;break}return e.next=6,getMarketHistory(marketHistoryExport.from+marketHistoryExport.progress,marketHistoryExport.requestCount);case 6:a=e.sent,i=a.results_html,r=a.hovers,s=a.assets,marketHistoryExport.lastRequestSuccessful=!0,marketHistoryExport.progress+=marketHistoryExport.requestCount,marketHistoryExport.history=marketHistoryExport.history.concat(extractHistoryEvents(i,r,s)),(o=t.find(".sih-export-market-history__request-progress")).text(+o.text()+1),marketHistoryExport.progress>=marketHistoryExport.to-marketHistoryExport.from?(toggleDecrementTimeRemaining(!0),marketHistoryExport.inProgress=!1,createCSV()):setTimeout(content_asyncToGenerator(content_regeneratorRuntime().mark((function e(){return content_regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_workOnExport();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),n);case 16:e.next=26;break;case 18:e.prev=18,e.t0=e.catch(2),l=t.find(".sih-export-market-history__time-remaining"),c=+l.attr("data-value"),l.attr("data-value",c+30).text(c+30),marketHistoryExport.lastRequestSuccessful=!1,setTimeout(content_asyncToGenerator(content_regeneratorRuntime().mark((function e(){return content_regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_workOnExport();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),n),e.t0;case 26:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(){return e.apply(this,arguments)}}(),createCSV=function(){for(var e=$J("#sih-export-market-history-input-non-transaction").is(":checked"),t="Item Name,Game Name,Listed On,Acted On, Display Price, Price in Cents, Type, Market Name, App Id, Context Id, Asset Id, Instance Id, Class Id, Unowned Context Id, Unowned Id\n",n=0;n<marketHistoryExport.to-marketHistoryExport.from;n++){var a=marketHistoryExport.history[n];if(!e||"purchase"===a.type||"sale"===a.type)t+=a.detailedRow?'"'.concat(a.itemName,'","').concat(a.gameName,'","').concat(a.listedOn,'","').concat(a.actedOn,'","').concat(a.displayPrice,'","').concat(a.priceInCents,'","').concat(a.type,'","').concat(a.marketName,'","').concat(a.appID,'","').concat(a.contextID,'","').concat(a.assetID,'","').concat(a.instanceID,'","').concat(a.classID,'","').concat(a.unOwnedContextID,'","').concat(a.unOwnedID,'"\n'):'"'.concat(a.itemName,'","').concat(a.gameName,'","').concat(a.listedOn,'","').concat(a.actedOn,'","').concat(a.displayPrice,'","').concat(a.priceInCents,'","').concat(a.type,'",,,,,,,,,\n')}var i="data:text/csv;charset=utf-8,".concat(encodeURIComponent(t)),r=$J("#sih-market-history-download");r.attr("href",i),r.removeClass("hidden")},toggleDecrementTimeRemaining=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=$J("#sih-tab-content-export-market-history");if(e){var n=t.find(".sih-export-market-history__time-remaining");return clearInterval(decrementInterval),void n.attr("data-value",0).text(0)}decrementInterval=setInterval((function(){var e=t.find(".sih-export-market-history__time-remaining"),n=+e.attr("data-value");e.attr("data-value",n-1).text(n-1)}),1e3)};function injectButton_typeof(e){return injectButton_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},injectButton_typeof(e)}function injectButton_regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */injectButton_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,a){var r=t&&t.prototype instanceof g?t:g,s=Object.create(r.prototype),o=new T(a||[]);return i(s,"_invoke",{value:A(e,n,o)}),s}function _(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var u="suspendedStart",m="suspendedYield",h="executing",p="completed",f={};function g(){}function b(){}function v(){}var y={};c(y,s,(function(){return this}));var k=Object.getPrototypeOf,S=k&&k(k(L([])));S&&S!==n&&a.call(S,s)&&(y=S);var I=v.prototype=g.prototype=Object.create(y);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,r,s,o){var l=_(e[i],e,r);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==injectButton_typeof(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,o)}),(function(e){n("throw",e,s,o)})):t.resolve(d).then((function(e){c.value=e,s(c)}),(function(e){return n("throw",e,s,o)}))}o(l.arg)}var r;i(this,"_invoke",{value:function(e,a){function i(){return new t((function(t,i){n(e,a,t,i)}))}return r=r?r.then(i,i):i()}})}function A(t,n,a){var i=u;return function(r,s){if(i===h)throw Error("Generator is already running");if(i===p){if("throw"===r)throw s;return{value:e,done:!0}}for(a.method=r,a.arg=s;;){var o=a.delegate;if(o){var l=x(o,a);if(l){if(l===f)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===u)throw i=p,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=h;var c=_(t,n,a);if("normal"===c.type){if(i=a.done?p:m,c.arg===f)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(i=p,a.method="throw",a.arg=c.arg)}}}function x(t,n){var a=n.method,i=t.iterator[a];if(i===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),f;var r=_(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,f;var s=r.arg;return s?s.done?(n[t.resultName]=s.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):s:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function L(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function n(){for(;++i<t.length;)if(a.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return r.next=r}}throw new TypeError(injectButton_typeof(t)+" is not iterable")}return b.prototype=v,i(I,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,l,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},C(w.prototype),c(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,a,i,r){void 0===r&&(r=Promise);var s=new w(d(e,n,a,i),r);return t.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(I),c(I,l,"Generator"),c(I,s,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=L,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(a,i){return o.type="throw",o.arg=t,n.next=a,i&&(n.method="next",n.arg=e),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=a.call(s,"catchLoc"),c=a.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=e,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var i=a.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:L(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),f}},t}function injectButton_asyncGeneratorStep(e,t,n,a,i,r,s){try{var o=e[r](s),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,i)}function injectButton_asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function s(e){injectButton_asyncGeneratorStep(r,a,i,s,o,"next",e)}function o(e){injectButton_asyncGeneratorStep(r,a,i,s,o,"throw",e)}s(void 0)}))}}var RenderExportMarketHistoryBtn=function(){injectButton_loadHtml(),injectButton_listenerActions()},injectButton_loadHtml=function(){var e=$J("#myMarketTabs .market_tab_well_tabs"),t=$J('\n    <a\n      id="sih-tab-export-market-history"\n      class="market_tab_well_tab market_tab_well_tab_inactive"\n      href="javascript:void(0)"\n    >\n      <span class="market_tab_well_tab_contents">'.concat(SIHLang.export_market_history.title,"</span>\n    </a>\n  "));e.find("#sih-tab-export-market-history").length||e.append(t),e.contents().filter((function(){return 3===this.nodeType&&""===this.nodeValue.trim()})).remove()},injectButton_listenerActions=function(){openExportHistoryTabAction()},openExportHistoryTabAction=function(){$J("#myMarketTabs .market_tab_well_tabs").find("#sih-tab-export-market-history").off("click").click(function(){var e=injectButton_asyncToGenerator(injectButton_regeneratorRuntime().mark((function e(t){return injectButton_regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RenderExportMarketHistoryContent();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},filter=__webpack_require__(8156);SIH=__webpack_exports__})();